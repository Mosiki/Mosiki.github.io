[{"title":"è§£å†³WebMagicæŠ“HTTPSæ—¶å‡ºç°SSLException","date":"2018-05-12T07:03:47.000Z","path":"è§£å†³WebMagicæŠ“HTTPSæ—¶å‡ºç°SSLException.html","text":"å‰è¨€åœ¨ä»Šå¹´äºŒæœˆä»½åœ¨é¡¹ç›®ä¸­å¼•å…¥äº† WebMagic æŠ€æœ¯ï¼Œç”¨æ¥æŠ“å–åˆä½œæ–¹çš„ä¹¦ç±ï¼Œè¯¦è§ä¹‹å‰æ–‡ç« ï¼šWebMagicä¹‹çˆ¬è™«ç›‘æ§ï¼Œè¿™ä¸¤å¤©æ–°æ¥å…¥äº†ä¸€ä¸ªåˆä½œå•†ï¼Œå¯¹æ–¹æ¥å£é‡‡å–çš„æ˜¯ HTTPS åè®®ï¼Œè€Œä»¥å‰åˆä½œå•†çš„æ¥å£å…¨éƒ½æ˜¯ HTTP çš„ï¼Œåœ¨æ¥å…¥è¿™å®¶åˆä½œå•†çš„æ—¶å€™ï¼Œå‘ç°äº†é—®é¢˜ï¼Œåªè¦æ˜¯ HTTPS çš„ URL å…¨éƒ¨æ— æ³•çˆ¬å–ã€‚ ä¸€ã€é—®é¢˜å¤ç°åœ¨ WebMagic-core åŒ…ä¸­ï¼Œus.codecraft.webmagic.processor.example.GithubRepoPageProcessor è¿™ä¸ªåŒ…ä¸‹é¢æ˜¯ä½œè€…æ”¾çš„ç¤ºä¾‹ä»£ç ï¼Œæ‹·è´è¿™ä¸ªç±»ä»£ç åˆ°æ–°å»ºçš„ç±»ä¸­ï¼Œå³é”®è¿è¡Œè¿™ä¸ªç±»ï¼Œè¿è¡Œåæ§åˆ¶å°æŠ¥å‡ºé”™è¯¯ï¼š[WARN ] 2018-05-12 13:28:11,828 download page https://github.com/code4craft error [us.codecraft.webmagic.downloader.HttpClientDownloader.download(HttpClientDownloader.java:91)] è¿›å…¥è¿™ä¸ªç±»ï¼Œå®šä½åˆ° HttpClientDownloader æºä»£ç  85 è¡Œ12345678910111213141516public Page download(Request request, Task task) &#123; ...... try &#123; httpResponse = httpClient.execute(requestContext.getHttpUriRequest(), requestContext.getHttpClientContext()); page = handleResponse(request, task.getSite().getCharset(), httpResponse, task); onSuccess(request); logger.info(\"downloading page success &#123;&#125;\", request.getUrl()); return page; &#125; catch (IOException e) &#123; logger.warn(\"download page &#123;&#125; error\", request.getUrl(), e); onError(request); return page; &#125; finally &#123; ... &#125;&#125; åœ¨ 85 è¡Œæ­¤å¤„æ–­ç‚¹ Debug è¿è¡Œï¼Œå‘ç°æ­¤è¡ŒæŠ›å‡ºäº† SSLException å¼‚å¸¸ã€‚å¼‚å¸¸çš„å†…å®¹æ˜¯ï¼šjavax.net.ssl.SSLException: Received fatal alert: protocol_version äºŒã€è§£å†³é—®é¢˜æ–¹æ³•ï¼ˆä¸€ï¼‰å‡ºç°å¼‚å¸¸åï¼Œé€šè¿‡ Google æœç´¢äº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°äº† WebMagic ä½œè€…é»„å¤§çš„è§£å†³æ–¹å¼ï¼Œè¯¦è§ Httpsä¸‹æ— æ³•æŠ“å–åªæ”¯æŒTLS1.2çš„ç«™ç‚¹ äºæ˜¯æŒ‰ç…§é»„å¤§è¯´çš„æ–¹å¼æ¥åš é¦–å…ˆå¤åˆ¶æºç ä¸­çš„ HttpClientGenerator ä¸ HttpClientDownloader åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ã€‚ ä¿®æ”¹ HttpClientGenerator çš„ä»£ç ï¼Œåªéœ€è¦ä¿®æ”¹ buildSSLConnectionSocketFactory è¿™ä¸ªæ–¹æ³•ä¸ºå¦‚ä¸‹å³å¯ã€‚ 1234567891011121314 ...private SSLConnectionSocketFactory buildSSLConnectionSocketFactory() &#123; try &#123; return new SSLConnectionSocketFactory(createIgnoreVerifySSL(), new String[]&#123;\"SSLv3\", \"TLSv1\", \"TLSv1.1\", \"TLSv1.2\"&#125;, null, new DefaultHostnameVerifier()); // ä¼˜å…ˆç»•è¿‡å®‰å…¨è¯ä¹¦ &#125; catch (KeyManagementException e) &#123; logger.error(\"ssl connection fail\", e); &#125; catch (NoSuchAlgorithmException e) &#123; logger.error(\"ssl connection fail\", e); &#125; return SSLConnectionSocketFactory.getSocketFactory();&#125; ... æ³¨æ„ï¼š DefaultHostnameVerifier éœ€è¦ä½¿ç”¨ org.apache.http.conn.ssl.DefaultHostnameVerifierï¼Œè€Œä¸è¦ä½¿ç”¨ sun.net.www.protocol.https.DefaultHostnameVerifier ä¿®æ”¹ HttpClientDownloader ä¸­å¼•ç”¨çš„ HttpClientGenerator ä¸ºä½ ä¿®æ”¹åçš„ç±»ã€‚ è®¾ç½®çˆ¬è™« Spider çš„ Downloader ä¸º ä½ ä¿®æ”¹çš„ HttpClientDownloaderã€‚ 1Spider.create(new GithubRepoPageProcessor()).setDownloader(new HttpClientDownloader()).addUrl(\"https://github.com/code4craft\").thread(5).run(); è¿è¡Œåï¼Œå‘ç°æ§åˆ¶å°å·²ç»å¯ä»¥æ­£å¸¸è¾“å‡ºæ‰€æŠ“å–ç½‘é¡µçš„å†…å®¹äº† ä¸‰ã€è§£å†³é—®é¢˜æ–¹æ³•ï¼ˆäºŒï¼‰æ—¢ç„¶å¯¹æ–¹æ¥å£åœ°å€æ˜¯ HTTPS çš„ï¼Œé‚£æˆ‘ä»¬è®¿é—®ä»–çš„ HTTP æ¥å£ä¸å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†ä¹ˆï¼Ÿä½†æ˜¯äº‹å®æ˜¯ï¼Œè®¿é—®å¯¹æ–¹ HTTP æ¥å£æ—¶ï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ° HTTPS ç½‘å€ï¼Œæ‰€ä»¥è¿™æ¡è·¯è¡Œä¸é€šã€‚è¿™æ—¶æˆ‘å¿½ç„¶æƒ³åˆ°ï¼Œä¹‹å‰ä½¿ç”¨ Nginx è§£å†³å‰ç«¯è·¨åŸŸçš„æ–¹æ³•ï¼Œä½¿ç”¨æˆ‘æ–¹çš„ HTTP åŸŸåï¼Œåå‘ä»£ç†åˆ°å¯¹æ–¹çš„ HTTPS ç½‘å€æ˜¯ä¸æ˜¯å°±è§£å†³äº†é—®é¢˜å‘¢ï¼Ÿäºæ˜¯å¯¹ Nginx è¿›è¡Œé…ç½®ã€‚ 123456789server &#123; listen 80; server_name partner.domain.com; location / &#123; proxy_set_header Host github.com; proxy_pass https://github.com/; &#125;&#125; å¯åŠ¨/é‡å¯ Nginxï¼Œå°†çˆ¬è™«çš„åœ°å€ç”± https://github.com/code4craft ä¿®æ”¹ä¸º http://partner.domain.com/code4craftï¼Œä½¿ç”¨ WebMagic é»˜è®¤çš„ Downloaderï¼Œå¯åŠ¨çˆ¬è™« public class GithubRepoPageProcessor implements PageProcessor { private Site site = Site.me().setRetryTimes(3).setSleepTime(1000).setTimeOut(10000); @Override public void process(Page page) { System.out.println(page.getRawText()); } @Override public Site getSite() { return site; } public static void main(String[] args) { Spider.create(new GithubRepoPageProcessor()).addUrl(\"http://partner.domain.com/code4craft\").thread(5).run(); } } å‘ç°æ§åˆ¶å°æˆåŠŸæ‰“å°å‡ºäº†é¡µé¢çš„å†…å®¹ï¼Œæµ‹è¯•ä¸­ï¼Œå¦‚æœé¡µé¢ï¼Œé¡µé¢çš„å…¶ä»–è¯·æ±‚è¿˜æ˜¯ä¼šé”™è¯¯ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªé¡µé¢æ˜¯æ­£ç¡®çš„ï¼Œå› æ­¤æ­¤æ–¹æ³•åªé€‚åˆä¸ Ajax ç±»ä¼¼çš„æ¥å£ï¼Œæˆ‘ä»¬æ˜¯è¿™æ ·å¤„ç†æŠ“å– Https é—®é¢˜çš„ï¼Œå› ä¸ºç¬¬ä¸€ç§æ–¹æ³•å¯¹äºæˆ‘ä»¬ JDK1.6 é¡¹ç›®æ— æ•ˆï¼Œç¬¬ä¸€ç§æ–¹æ³•åœ¨ JDK 1.8 æµ‹è¯•æ—¶å¯ä»¥æ­£å¸¸æŠ“å–çš„ã€‚ åè®°å¦‚æœç¬¬ä¸€ç§æ–¹æ³•è§£å†³ä¸äº†ä½ çš„é—®é¢˜ï¼Œé‚£å°±è·Ÿæˆ‘ä¸€æ ·å¼„ä¸€ä¸ªä¸´æ—¶åŸŸååå‘ä»£ç†å§ï¼ŒNginx åœ¨è¿™æ–¹é¢è¿˜æ˜¯è›®å¥½ç”¨çš„ã€‚","tags":[{"name":"WebMagicå‡ºç°SSLException","slug":"WebMagicå‡ºç°SSLException","permalink":"http://nullpointer.pw/tags/WebMagicå‡ºç°SSLException/"},{"name":"çˆ¬è™«å¼‚å¸¸","slug":"çˆ¬è™«å¼‚å¸¸","permalink":"http://nullpointer.pw/tags/çˆ¬è™«å¼‚å¸¸/"},{"name":"åå‘ä»£ç†åˆ°å…¶ä»–åŸŸå","slug":"åå‘ä»£ç†åˆ°å…¶ä»–åŸŸå","permalink":"http://nullpointer.pw/tags/åå‘ä»£ç†åˆ°å…¶ä»–åŸŸå/"}]},{"title":"CharlesæŠ“åŒ…å®æˆ˜è¯¦è§£","date":"2018-04-25T14:19:22.000Z","path":"CharlesæŠ“åŒ…å®æˆ˜è¯¦è§£.html","text":"å‰è¨€é€šè¿‡ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæƒ³å¿…ä½ å·²ç»æŒæ¡äº†å¦‚ä½•æ­£ç¡®å®‰è£…æŠ“åŒ…ç¥å™¨ Charlesï¼Œå¦‚æœè¿˜æ˜¯æŠ“ä¸äº†åŒ…ï¼Œå¯ä»¥å†çœ‹çœ‹ã€‚ ä»Šå¤©è¦åšæ˜¯æŠ“åŒ…å®æˆ˜ï¼Œå› ä¸ºæˆ‘åœ¨åšç½‘ç»œæ–‡å­¦çš„å…¬å¸å°±èŒï¼Œæ‰€ä»¥å°±æ‹¿ç½‘ç»œæ–‡å­¦çš„ APP æŒé˜…å¼€åˆ€å¥½äº†ï¼Œä»¥ä¸‹è¿›å…¥æŠ“åŒ…å®æˆ˜ï¼Œä½“ä¼š Charles çš„å¼ºå¤§ä¹‹å¤„ï¼ã€‚ æŒæ¡äº†ä¸‹é¢çš„æŠ“åŒ…æŠ€å·§ï¼Œå¯¹äºæŸäº›æ ¡éªŒå¹¶ä¸æ˜¯ååˆ†ä¸¥æ ¼çš„ APP æ¥è¯´ï¼Œç ´è§£ä»–ä»¬çš„æ¥å£å®åœ¨æ˜¯è½»è€Œæ˜“ä¸¾ã€‚æ¯”å¦‚ä¿®æ”¹ä¸ª isVip å‚æ•°ä¸º trueï¼Œå°±å˜èº«è¶…çº§ VIPç­‰ï¼›ä¹‹å‰ç”¨è¿™å¥—æŠ“åŒ…æŠ€å·§ï¼Œæ‰¾äº†ä¸€ä¸ªç½‘æ ¡éšä¾¿ä¿®æ”¹ï¼Œå‘ç°è¦ä»·ä¸Šåƒè‡³ä¸Šä¸‡çš„è¯¾ç¨‹ç«Ÿç„¶å¯ä»¥è·³è¿‡æ ¡éªŒç›´æ¥è¢«æˆ‘æ’­æ”¾ä¸‹è½½ï¼Œä¹Ÿæ˜¯é†‰äº†ã€‚ å¸Œæœ›å¤§å®¶æŒæ¡äº†æŠ“åŒ…ä¸è¦å¹²è¿æ³•çš„äº‹æƒ…ï¼Œæœ¬æ–‡ç›®çš„åœ¨äºè®©æŠ€æœ¯äººå‘˜äº†è§£æ¼æ´ï¼ŒåŠ å›ºæ ¡éªŒï¼Œä¸è¢«ä»–äººæœ‰æœºå¯ä¹˜ï¼Œä»¥å…é€ æˆå…¬å¸æŸå¤±ã€‚ æµ‹è¯•ç¯å¢ƒç¯å¢ƒï¼š Windows Charles iphone 7 æŒé˜… APP 7.4.2 å‰æï¼šæ‰‹æœºå·²ç»è¿æ¥ Charles ä»£ç†ï¼Œå¹¶å¯ä»¥æŠ“å– HTTPS æ•°æ®åŒ…ã€‚ ä¸€ã€Charles çš„æ–­ç‚¹åŠŸèƒ½ Breakpoints å®æˆ˜é¦–å…ˆç™»å½•æŒé˜… APP ï¼Œæ¸…ç©ºCharles çš„æŠ“åŒ…åˆ—è¡¨ï¼Œä»¥é˜²æ­¢å¹²æ‰°å®éªŒï¼Œç„¶åè¿›å…¥ APP çš„ä¸ªäººä¸­å¿ƒï¼Œå¯ä»¥çœ‹åˆ°å›¾ä¸­åœˆå‡ºçš„æ•°å€¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯¹å…¶æ•°å€¼è¿›è¡Œä¿®æ”¹ã€‚ æ­¤æ—¶çœ‹åˆ° Charles çš„è¯·æ±‚åˆ—è¡¨ä¸­å‡ºç°äº† APP çš„è¯·æ±‚ã€‚ é€šè¿‡ç®€å•åˆ†æï¼Œå¯ä»¥çŸ¥é“ä¸ªäººä¸­å¿ƒçš„é‚£äº›æ•°æ®æ˜¯ä»è¿™ä¸ªè¯·æ±‚ä¸­è·å–åˆ°çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿ä¿®æ”¹è¿™ä¸ªè¯·æ±‚ï¼Œå³é”®è¿™ä¸ªè¯·æ±‚ï¼Œé€‰æ‹© Breakpointsï¼Œè¿™æ ·å°±ç»™è¿™ä¸ªè¯·æ±‚åŠ ä¸Šäº†æ–­ç‚¹ã€‚æ­¤æ—¶åˆ‡æ¢ App åˆ° ä¹¦æ¶å†åˆ‡æ¢å›ä¸ªäººä¸­å¿ƒï¼Œä¼šå†æ¬¡å‘é€è¯¥è¯·æ±‚ï¼ŒCharles ä¼šå¼¹å‡ºè¯·æ±‚çš„æ–­ç‚¹ï¼Œå› ä¸ºè¿™é‡Œä¸éœ€è¦ä¿®æ”¹è¯·æ±‚å‚æ•°ï¼Œç›´æ¥æ”¾è¡Œå³å¯ï¼Œé€‰æ‹© Executeï¼›æ”¾è¡Œåï¼Œä¼šå†æ¬¡å¼¹å‡ºæ–­ç‚¹ï¼Œæ­¤æ—¶å°±æ˜¯å“åº”è¿”å›çš„æ–­ç‚¹äº†ï¼Œé€‰æ‹© Edit Responseï¼Œ åº•éƒ¨é€‰æ‹© JSON text å¯ä»¥ä¿®æ”¹è¿”å›å€¼ï¼Œ æˆ‘è¿™é‡ŒæŠŠ 2 ä¿®æ”¹æˆäº† 2222ï¼Œä¿®æ”¹å®Œä¹‹åï¼Œç‚¹å‡»Executeï¼Œå›åˆ° App å‘ç°å·²ç»æ›´æ”¹äº†ã€‚ æµ‹è¯•ä¸­å‘ç°ï¼ŒæŒé˜… App çš„è¯·æ±‚æ—¶é—´å¦‚æœè¿‡é•¿ï¼Œä¿®æ”¹ä¹‹åä¹Ÿä¼šä¸ç”Ÿæ•ˆã€‚è¿™å°±éœ€è¦ä½¿ç”¨ Charles çš„ä¸‹ä¸€ä¸ªç‰› X çš„åŠŸèƒ½äº†ï¼ŒMap æ˜ å°„ï¼Œè®© Charles è‡ªåŠ¨è¿”å›æˆ‘ä»¬æƒ³è¦çš„è¿”å›å€¼ã€‚ äºŒã€Charles çš„æ˜ å°„åŠŸèƒ½ Map å®æˆ˜ä¸Šä¸€ä¸ªå®éªŒè¿›è¡Œçš„æ—¶å€™ï¼Œå¦‚æœè¯·æ±‚çš„å“åº”æ—¶é—´è¿‡é•¿ï¼ŒæŒé˜…çš„ App å°±ä¼šæŠ›å¼ƒæœ¬æ¬¡è¯·æ±‚çš„ç»“æœï¼Œä¸å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ›´å¿«çš„å»ä¿®æ”¹è¿”å›å€¼ã€‚ ä»¥å‰ç”¨ Fiddler å¯¹äºè¿™ç§å“åº”æ—¶é—´æœ‰è¦æ±‚çš„ Appï¼Œåæ­£æˆ‘æ˜¯æŸæ‰‹æ— ç­–çš„ï¼ŒAPP æ€»æ˜¯æç¤ºç½‘ç»œå¼‚å¸¸ï¼Œå“åº”è¶…æ—¶ç­‰ã€‚å¦‚æœæ˜¯æ›´æ”¹ä¸€ä¸¤ä¸ªè¿”å›å€¼è¿˜å¯ä»¥ï¼Œå¦‚æœæ˜¯å¤šä¸ªï¼Œæ˜¯çœŸæ²¡è¾™äº†ï¼Œæ‰€ä»¥ Charles çš„ Map åŠŸèƒ½æ˜¯å¾ˆå¼ºå¤§çš„ã€‚ é‡å¤ä¸Šä¸€æ­¥ï¼ŒæŠ“åˆ°ä¸ªäººä¸­å¿ƒçš„æ•°æ®åŒ…ï¼Œå°±æ˜¯è¿™ä¸ªè¯·æ±‚ã€‚ å³é”®é€‰æ‹© Save Response åˆ°ä¸€ä¸ªæ–‡ä»¶å½“ä¸­å»ã€‚ å†æ¬¡å³é”®ï¼Œé€‰æ‹©è¯¥è¯·æ±‚ï¼Œä¸ºäº†ä¸å¹²æ‰°å®éªŒï¼Œå–æ¶ˆå‹¾é€‰ä¸Šä¸€æ­¥ä¸­çš„Breakpointsï¼Œç„¶åå†å³é”®è¯¥è¯·æ±‚ï¼Œé€‰æ‹©æœ€ä¸‹æ–¹ Map Localï¼Œé€‰æ‹©åˆšæ‰ä¿å­˜çš„æ–‡ä»¶ã€‚ æ³¨æ„è¿™é‡Œçš„ Queryï¼Œå› ä¸ºæŒé˜… APP åœ¨è¯·æ±‚æ—¶ï¼Œé™„å¸¦äº†ç­¾åæ—¶é—´æˆ³ç­‰å‚æ•°ï¼Œè¿™é‡Œè®¾ç½®ä¸º * ä¹‹åï¼Œå°±ä¼šå¿½ç•¥è¿™äº›å‚æ•°ã€‚è®¾ç½®å®Œæˆåï¼Œä¿®æ”¹åˆšæ‰ä¿å­˜çš„æ–‡ä»¶ï¼Œä½¿ç”¨ NotePad++ ç­‰ç¼–è¾‘å™¨æ‰“å¡ï¼Œä¿®æ”¹é‡Œé¢çš„ JSON å†…å®¹ã€‚æˆ‘æ”¹äº†éƒ¨åˆ†æ•°æ®ï¼Œé‡æ–°è¿›å…¥ä¸ªäººä¸­å¿ƒï¼ŒæŸ¥çœ‹ Charles çš„è¯·æ±‚å†…å®¹ï¼Œå‘ç°å·²ç»ä¿®æ”¹äº† åŒæ—¶çœ‹ App çš„ä¸ªäººä¸­å¿ƒä¹Ÿå·²ç»ä¿®æ”¹äº†ï¼Œå¯ä»¥æ”¹å¾ˆå¤§çš„å€¼ï¼Œç„¶åå‘ä¸æ‡‚çš„äººç‚«è€€ç‚«è€€äº†å“ˆå“ˆå“ˆ~ ä¸‰ã€Charles çš„ Rewrite å®æˆ˜Rewrite æ˜¯å¯¹äº map åŠŸèƒ½çš„ä¸€ä¸ªè¡¥å……ï¼Œå¯ä»¥è®¾ç½®è¾ƒä¸ºå¤æ‚çš„è§„åˆ™ï¼Œä¸‹é¢æ¼”ç¤ºæ›¿æ¢ Body å†…çš„ç”¨æˆ·åç§° é€‰æ‹©èœå•æ  Tools -&gt; Rewriteï¼Œé€‰æ‹©å¼€å¯ Rewrite, å¹¶æ·»åŠ ä¸€æ¡è§„åˆ™ã€‚æ›¿æ¢ Body ä½“å†…çš„ We Jan ä¸º CCTV APPå†æ¬¡å‘èµ·è¯·æ±‚ï¼Œå“åº”å¦‚ä¸‹ å‚è€ƒå…¶å®æ—¥å¸¸ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„åœ°æ–¹åŸºæœ¬ä»¥ä¸Šä¸‰ä¸ªéƒ½å¯ä»¥åŒ…å«åˆ°äº†ï¼Œå…¶ä»–æ·±å…¥å­¦ä¹ çš„ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥ã€‚ http://www.heyuan110.com/2015/08/15/Charles%E8%BE%85%E5%8A%A9%E8%B0%83%E8%AF%95%E6%8E%A5%E5%8F%A3/ http://blog.devtang.com/2015/11/14/charles-introduction/","tags":[{"name":"CharlesæŠ“åŒ…","slug":"CharlesæŠ“åŒ…","permalink":"http://nullpointer.pw/tags/CharlesæŠ“åŒ…/"},{"name":"æŠ“åŒ…ç ´è§£","slug":"æŠ“åŒ…ç ´è§£","permalink":"http://nullpointer.pw/tags/æŠ“åŒ…ç ´è§£/"},{"name":"æŠ“åŒ…å®æˆ˜","slug":"æŠ“åŒ…å®æˆ˜","permalink":"http://nullpointer.pw/tags/æŠ“åŒ…å®æˆ˜/"}]},{"title":"CharlesæŠ“åŒ…ä¹‹HTTPSæŠ“åŒ…é…ç½®","date":"2018-04-15T12:36:40.000Z","path":"CharlesæŠ“åŒ…ä¹‹HTTPSæŠ“åŒ…é…ç½®.html","text":"å‰è¨€ç”±äºå·¥ä½œä¸­ç»å¸¸éœ€è¦é…ç½®å®¢æˆ·ç«¯å¼€å‘äººå‘˜å¯¹æ¥æ¥å£ï¼Œæœ‰æ—¶å€™å¯¹æ¥åœ°ä¸å¤ªé¡ºåˆ©ï¼Œå› æ­¤éœ€è¦ç»å¸¸æ€§åœ°å¯¹å…¬å¸ APP è¿›è¡ŒæŠ“åŒ…çœ‹è¯·æ±‚ï¼Œæ‰¾å‡ºå…·ä½“çš„åŸå› ã€‚ åœ¨å…¬å¸ä¸­å¼€å‘ä½¿ç”¨çš„ Windows å°å¼ç”µè„‘ï¼ŒæŠ“åŒ…å·¥å…·é€‰æ‹©äº† Fiddlerï¼Œè¿™ä¸ªå·¥å…·åˆšå¼€å§‹å­¦ä¼šæŠ“åŒ…çš„æ—¶å€™ï¼Œè§‰å¾—çœŸä¹ƒç¥å™¨ï¼åœ¨ç»è¿‡å‡ æ¬¡å¼€å‘ç”µè„‘å‡çº§ä¹‹åï¼Œé‡æ–°å®‰è£… Fiddler åï¼Œå’Œä¹‹å‰çš„è®¾ç½®ç›¸åŒï¼Œä½†æ˜¯æ­»æ´»æŠ“ä¸äº†åŒ…ï¼Œæˆ–è€…æŠ“ä¸äº† Https çš„åŒ…ï¼Œ æ€»ä¹‹æ€»ä¼šå‡ºç°å„ç§å¥‡æ€ªçš„é—®é¢˜ï¼Œå¦‚æœå‡ºäº†é—®é¢˜ï¼Œç®€ç›´è®©äººæŠ“ç‹‚ï¼ å»å¹´å¹´åº•ï¼Œç»™è‡ªå·±æ¢äº†ä¸€å° MBPï¼Œæ—¥å¸¸å­¦ä¹ ä¸­ä¹Ÿéœ€è¦ç”¨åˆ°æŠ“åŒ…ï¼Œä¸ºäº†å’Œå…¬å¸ä¸­çš„å·¥å…·ä¿æŒä¸€è‡´ï¼Œæƒ³ä¸‹è½½ Fiddler çš„ Mac ç‰ˆï¼Œç»“æœå¹¶æ²¡æœ‰ã€‚äºæ˜¯ä¸‹è½½äº† Charles (èŠ±ç“¶)ï¼Œç”¨äº†èŠ±ç“¶ä¹‹åï¼Œå‘ç°å…¶æ¯” Fiddler æ›´åŠ å¥½ç”¨~ åœ¨ä¸€æ¬¡å—å¤Ÿäº† Fiddler çš„è«åå…¶å¦™åœ°æŠ“ä¸äº† Httpsï¼Œæ€’å¸è½½ä¹‹ï¼Œå¯»å¯»è§…è§…ï¼Œæ‰¾åˆ°äº† Win ç‰ˆçš„ Charles ğŸ˜Š(ä¹‹å‰è¿˜ä»¥ä¸ºæ²¡æœ‰ Win ç‰ˆå‘¢)ï¼Œç»è¿‡ç®€å•é…ç½®ï¼Œå¼€å§‹äº†æ„‰å¿«çš„æŠ“åŒ…~ æŠ“åŒ…å‡†å¤‡ä¹‹ Charles ä¸‹è½½ä»¥åŠæ¿€æ´»Charles è½¯ä»¶ä¸‹è½½ ä¸‹è½½å®‰è£…å®Œï¼Œåœ¨å¼€å§‹èœå•ä¸­æ‰¾åˆ° Charles æ‰“å¼€ï¼Œæç¤ºæœ‰ 30 å¤©çš„è¯•ç”¨æœŸã€‚å¦‚æœ 30 å¤©åˆ°æœŸçš„è¯ï¼Œå¯ä»¥é€‰æ‹©è´­ä¹°ä¸€ä¸ª license ï¼Œ30 åˆ€ã€‚å¦‚æœä¸æƒ³ä¹°ï¼Œå¯ä»¥å‚è€ƒæ­¤æ–‡ç»§ç»­è¯•ç”¨ï¼ŒCharles Proxyä½¿ç”¨ç¬”è®°ï¼ˆæ–‡å†…æœ‰å¥½ç¤¼ï¼‰ã€‚é€‰æ‹© Help-Registered å¡«å…¥ license å³å¯æ¿€æ´»ã€‚ æŠ“åŒ…å‡†å¤‡ä¹‹ Charles é…ç½® HTTPS æŠ“åŒ…åŸºç¡€é…ç½®å¦‚ä»Š Https å¤§è¡Œå…¶é“ï¼Œè‹¹æœæ›´æ˜¯å¼ºåˆ¶è¦æ±‚ APP é€šä¿¡å¿…é¡»è¦ä½¿ç”¨ Https åè®®ï¼Œå¦‚æœåªæ˜¯æŠ“æ™®é€šçš„ HTTP è¯·æ±‚ï¼Œæ— éœ€å¤æ‚é…ç½®å³å¯æŠ“åŒ…ï¼Œè¿™ä¹Ÿè¡¨æ˜äº† HTTP çš„å®‰å…¨æ€§å¾ˆä½ã€‚ Charles é»˜è®¤ä¸å¯¹ HTTPS çš„è¯·æ±‚å¼€å¯æŠ“åŒ…ï¼Œæ‰€ä»¥ï¼Œéœ€è¦å…ˆå¼€å¯æ‰€æœ‰ HTTPS è¯·æ±‚çš„æŠ“åŒ…ã€‚ è¿›å…¥èœå• Proxy-SSL Proxying Settingsé€‰æ‹©å¼€å¯ SSL Proxyï¼Œå¹¶ Add ä¸€æ¡ Location è®°å½•ï¼ŒHost å¡«å†™ *ï¼Œä»£è¡¨åŒ¹é…æ‰€æœ‰ç½‘å€ï¼Œç«¯å£ Portï¼Œå¡«å†™443ï¼Œå³ HTTPS ç«¯å£ã€‚ é€‰æ‹©ä¿å­˜ã€‚ åŸºç¡€é…ç½®åˆ°æ­¤å°±å®Œæˆäº†ï¼Œä»¥ä¸‹æœ¬æ–‡æŒ‰ç…§ä¸¤æ–¹é¢æ¥æè¿°ï¼ŒCharles æŠ“ HTTPSã€‚ Charles æŠ“ Windows ä¸Šçš„ HTTPS è¯·æ±‚è¿›å…¥ Help ä¸­ï¼Œé€‰æ‹© SSL Proxying è®¾ç½®ï¼Œå®‰è£…æ ¹è¯ä¹¦ æ³¨æ„è¿™ä¸€æ­¥ä¸€å®šè¦å°†è¯ä¹¦å­˜å‚¨åˆ° å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„ï¼Œå¦åˆ™æŠ“åŒ… HTTPS ä¼šæç¤ºè¯ä¹¦ä¸å—ä¿¡ä»»ï¼ï¼ï¼å—¯ï¼Œæäº†å¥½ä¹…ï¼Œè¡€ä¸€èˆ¬çš„æ•™è®­ï¼ å®‰è£…æœŸé—´ä¼šæœ‰å®‰å…¨è­¦å‘Šï¼Œé€‰æ‹©æ˜¯å³å¯ã€‚ è®¿é—® https://www.baidu.comåï¼ŒæŸ¥çœ‹ Charlesï¼Œå·²ç»å¯ä»¥çœ‹åˆ° Https è¯·æ±‚ä¸‹çš„æ•°æ®äº†ã€‚ Charles æŠ“ APP çš„ HTTPS è¯·æ±‚æƒ³è¦ Charles æŠ“ HTTPS çš„æ•°æ®åŒ…ï¼Œéœ€è¦è®¾ç½®ä»£ç†å¹¶å®‰è£… Charles çš„ä¸­é—´ SSL è¯ä¹¦ã€‚ é€‰æ‹© Help-SSL Proxying ç‚¹å‡»ä¼šå¼¹å‡ºå¯¹è¯æ¡†å¦‚ä¸‹ æŒ‰ç…§æç¤ºï¼Œå°†æ‰‹æœºè¿å…¥ç”µè„‘åŒä¸€ä¸ªç½‘ç»œï¼ŒWIFI å¤„è®¾ç½®ä»£ç†ï¼Œä»£ç†çš„åœ°å€ä»¥åŠç«¯å£æŒ‰ç…§å¯¹è¯æ¡†ä¸­è¿›è¡Œè®¾ç½®ã€‚ è®¾ç½®æˆåŠŸè¿”å›ä¹‹åï¼Œæ­¤æ—¶ç”µè„‘ä¸Š Charles ä¼šè‡ªåŠ¨å¼¹å‡ºæé†’ï¼Œæç¤ºæ˜¯å¦å…è®¸è¯·æ±‚ä»£ç†é€šè¿‡ï¼Œé€‰æ‹© Allow å…è®¸å³å¯ã€‚ è¿ä¸Šä»£ç†ä¹‹åï¼Œä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦æµè§ˆå™¨( iPhone ä½¿ç”¨ Safari)è®¿é—®åœ°å€ chls.pro/sslï¼Œå¦‚æœæ˜¯ iPhone ä¼šè‡ªåŠ¨å¼¹å‡ºå®‰è£…æè¿°æ–‡ä»¶ï¼Œé€‰æ‹©å®‰è£…è¾“å…¥å¯†ç åæ— è§†è­¦å‘Šå®‰è£…å³å¯ã€‚å› ä¸ºæ‰‹è¾¹æ²¡æœ‰å®‰å“è®¾å¤‡ï¼Œä¸è¿‡æµç¨‹åº”è¯¥ç±»ä¼¼ï¼Œå°±æ˜¯å®‰è£…ä¸€ä¸ª CA è¯ä¹¦æ–‡ä»¶ã€‚ æ‰‹æœºè®¿é—® https://m.baidu.comï¼ŒæŸ¥çœ‹ Charles ï¼Œå‘ç°æ­¤æ—¶å·²ç»å¯ä»¥æ‹¿åˆ° HTTPS æ•°æ®å†…å®¹äº†ï¼Œå¦‚æœæ²¡è®¾ç½®æˆåŠŸï¼Œé‡Œé¢éƒ½å°†ä¼šæ˜¯ unknownã€‚ å¸¸è§é—®é¢˜ å¼€å¯ SSL Proxy ä»£ç†åï¼Œæç¤ºè¯ä¹¦ä¸å—ä¿¡ä»»æˆ–è€…æ— æ•ˆï¼ŒPC ç«¯ä¸€èˆ¬éƒ½æ˜¯å› ä¸ºè¯ä¹¦æ”¾é”™äº†ä½ç½®ã€‚ åœ¨ IOS11ä¸Šæµ‹è¯•æ—¶ï¼ŒæŠ“åŒ…æ˜¾ç¤ºunknown éœ€è¦è¿›å…¥é€šç”¨-å…³äºæœ¬æœº-è¯ä¹¦ä¿¡ä»»è®¾ç½®ï¼Œå°†æ–°å¢çš„è¯ä¹¦è¿›è¡Œå¼€å¯æ“ä½œã€‚ 1. å°ç±³ç³»ç»Ÿçš„æ‰‹æœºå®‰è£…è¯ä¹¦æ–¹å¼æ¯”è¾ƒç¹çï¼Œéœ€è¦è¿›å…¥å¼€å‘è€…é€‰é¡¹ä¸­ï¼Œåœ¨ä¿¡ç”¨è¯ä¹¦ä¸­è¿›è¡Œå®‰è£…ï¼ˆFiddlerå®‰è£…è¯ä¹¦æ˜¯è¿™æ ·çš„ï¼ŒCharles åº”è¯¥ä¹Ÿå·®ä¸å¤šï¼‰ æœ€åè¯´å‡ å¥å–„ç”¨æœç´¢å¼•æ“ï¼Œå› ä¸ºä½ é‡åˆ°çš„é—®é¢˜è‚¯å®šæœ‰åˆ«äººéƒ½é‡åˆ°è¿‡äº†ï¼Œå¦‚æœä½ æœä¸åˆ°ï¼Œè‚¯å®šæ˜¯ä½ çš„æœç´¢å§¿åŠ¿ä¸å¯¹~ å®åœ¨æœ‰é—®é¢˜è§£å†³ä¸äº†ï¼Œå¯ä»¥æ‰¾æˆ‘å“Ÿ! ç»™æˆ‘å†™ä¿¡","tags":[{"name":"CharlesæŠ“åŒ…","slug":"CharlesæŠ“åŒ…","permalink":"http://nullpointer.pw/tags/CharlesæŠ“åŒ…/"},{"name":"HTTPSæŠ“åŒ…","slug":"HTTPSæŠ“åŒ…","permalink":"http://nullpointer.pw/tags/HTTPSæŠ“åŒ…/"},{"name":"WindowsæŠ“åŒ…","slug":"WindowsæŠ“åŒ…","permalink":"http://nullpointer.pw/tags/WindowsæŠ“åŒ…/"},{"name":"æŠ“åŒ…æ˜¾ç¤ºunknown","slug":"æŠ“åŒ…æ˜¾ç¤ºunknown","permalink":"http://nullpointer.pw/tags/æŠ“åŒ…æ˜¾ç¤ºunknown/"}]},{"title":"å¾®ä¿¡åŸŸåé˜²æ­¢å±è”½","date":"2018-03-27T13:11:17.000Z","path":"å¾®ä¿¡åŸŸåé˜²æ­¢å±è”½.html","text":"å‰è¨€è¿™å‡ æ—¥ï¼Œç”±äºé­åˆ°ä»–äººçš„æ¶æ„æŠ•è¯‰ä¸¾æŠ¥ï¼Œå¯¼è‡´äº†å¾®ä¿¡ä¸­é˜…è¯»ä¸šåŠ¡çš„æ ¹åŸŸåè¢«å±è”½ï¼Œæç¤ºå¦‚å›¾ ç”±äºæˆ‘å¸æ˜¯åšç½‘ç»œæ–‡å­¦çš„ï¼Œä½œè€…çš„å†…å®¹ä¸­ä¸å¯é¿å…åœ°ä¼šå‡ºç°äº›å¾®éœ²éª¨çš„å†…å®¹ï¼Œä½†æ˜¯è¿™äº›å†…å®¹æ˜¯ç»è¿‡äº†ç¼–è¾‘å®¡æ ¸ä¹‹åæ‰å…¬å¼€çš„ï¼Œä¹Ÿä¸è‡³äºå¤ªéœ²éª¨ï¼Œä½†ä¸¾æŠ¥å°±è¢«å°ç¦äº†ã€‚ å…¬å¸çš„ç”¨æˆ·æœ‰å¾ˆå¤šæ˜¯é€šè¿‡å¾®ä¿¡å…¬ä¼—å·è¿›è¡Œé˜…è¯»ï¼Œè¿™ä¸€å°ï¼Œå°±è®¸å¤šç”¨æˆ·è¿‡æ¥åé¦ˆäº†ã€‚ åˆ‡æ¢åŸŸåä¹‹ç—›æ—¢ç„¶æ ¹åŸŸåè¢«å°äº†ï¼Œå°±åªèƒ½åˆ‡æ¢åŸŸåäº†ï¼Œå› ä¸ºä¹‹å‰ä»£ç ä¸­æœ‰ä¸å°‘çš„åœ°æ–¹åŸŸåå†™æ­»äº†ï¼Œæ²¡æœ‰æå–æˆå…¬å…±å˜é‡ï¼Œæ”¹äº†å¥½ä¹…ï¼Œæ‰æ›¿æ¢æˆäº†æ–°çš„åŸŸåã€‚ çœ¼çœ‹å·²ç»ä¿®æ”¹å®Œäº†ï¼Œçº¿ä¸Šä¹Ÿæ­£å¸¸äº†ï¼Œéƒ½å·²ç»æ™šä¸Š9ç‚¹å¤šï¼Œå‡†å¤‡ä¸‹ç­å›å®¶äº†ã€‚å°±è¿™æ—¶å€™ï¼Œç¾¤é‡Œåˆåé¦ˆç½‘ç«™è¿›ä¸å»äº†ï¼Œæ‰“å¼€ä¸€å¼€ï¼Œåˆ**è¢«å°äº†ï¼Œå½“æ—¶çš„å¿ƒæƒ…çœŸæ˜¯æƒ³é—®å€™ä¸€ä¸‹æ¶æ„ä¸¾æŠ¥äººçš„å…¨å®¶äº†ï¼ æ²¡æ³•å­ï¼Œç»§ç»­æ¢åŸŸåï¼Œè¿˜å¥½ä¹‹å‰æå‰å¤‡æ¡ˆäº†å‡ ä¸ªåŸŸåï¼Œæ²¡æƒ³åˆ°ç°åœ¨å…¨ç”¨ä¸Šäº†ã€‚ æœ‰äº†ä¸Šä¸€æ¬¡çš„ç»éªŒï¼Œç°åœ¨ä¿®æ”¹èµ·æ¥ä¹Ÿå¿«å¤šäº†ï¼Œä¿®æ”¹ä¸Šçº¿å®Œäº‹éƒ½å·²ç» 10 ç‚¹å¤šäº†ï¼Œæ¶æ„ä¸¾æŠ¥çš„äººè¿™æ—¶å€™ä¹Ÿæ¶ˆåœäº†ä¸‹æ¥æ²¡æœ‰ç»§ç»­æŠ•è¯‰äº†ï¼Œæˆ‘ä»¬ä¹Ÿç»ˆäºå¯ä»¥ä¸‹ç­ï¼Œå®³çš„æˆ‘ä»¬å¤§å‘¨å…­çš„è¿‡æ¥åŠ äº†ä¸€å¤©çš„ç­ï¼ ç¬¬äºŒå¤©ï¼Œä¹Ÿå°±æ˜¯å‘¨æ—¥ã€‚ç¾¤é‡Œåˆååº”è¢«å°äº†ï¼ŒçœŸæ˜¯å´©æºƒã€‚æœ€å¼€å§‹çš„åŸŸåè¢«å¾®ä¿¡å°ç¦åï¼Œå…¬å¸ç¬¬ä¸€æ—¶é—´è¿›è¡Œäº†ç”³è¯‰ï¼Œæ­¤æ—¶æ”¶åˆ°é€šçŸ¥ï¼Œè¯´æ£€æµ‹åæ²¡æœ‰è¿è§„å†…å®¹ï¼Œå°±è¿›è¡Œäº†è§£å°ã€‚å¯èƒ½æ˜¯åˆ«äººæ¶æ„åˆ©ç”¨äº†å¾®ä¿¡çš„å°ç¦ç³»ç»Ÿï¼Œæ­¤æ—¶è§‰å¾—å¾®ä¿¡çš„è¿™å¥—ç³»ç»Ÿåšçš„çœŸçƒ‚ï¼äºæ˜¯æˆ‘ä»¬å¼€å‘äººå‘˜åˆæ˜¯ä¸€ç•ªæ›¿æ¢ï¼ŒæŠŠç°åœ¨è¢«å°çš„åŸŸååˆ‡æ¢äº†å›å»ã€‚ ç»è¿‡è¿™å‡ æ³¢æ“ä½œï¼Œè¿™ä¸¤å¤©ç½‘ç«™çš„æ”¶å…¥éª¤å‡ï¼Œé‚£å¸®ä½¿åçš„äººæ˜¯è¶ä½ ç—…è¦ä½ å‘½çš„èŠ‚å¥ï¼ ç—›å®šæ€è¿‡æ€»ç»“äº†ä¸€ä¸‹è¿™æ¬¡äº‹ä»¶çš„æ•™è®­ï¼Œä¸»è¦çš„åŸå› å°±æ˜¯å› ä¸ºå°è¯´çš„å†…å®¹é¡µè¢«é¢‘ç¹æ¶æ„ä¸¾æŠ¥å¯¼è‡´åŸŸåè¢«å°ã€‚ è¿™å°±å¯¼è‡´äº†å³ä½¿æ¢äº†åŸŸåï¼Œæ¯”å¦‚æ”¯ä»˜ï¼Œç™»å½•éƒ½å—åˆ°äº†å½±å“ï¼Œè€Œä¸”å¾®ä¿¡æ”¯ä»˜é™åˆ¶äº†æ¯ä¸ªæœˆä¿®æ”¹æ”¯ä»˜åŸŸåçš„æ¬¡æ•°ï¼Œä¸å¾—å·²æˆ‘ä»¬åªå¥½æ¢äº†å¦å¤–ä¸€ä¸ªæœåŠ¡å·æ‰é‡æ–°æ‰“é€šäº†æ”¯ä»˜ã€‚ æ¥ä¸‹æ¥éœ€è¦åšçš„å°±æ˜¯ï¼Œå°†å¯èƒ½è¿˜ä¼šè¢«ä¸¾æŠ¥çš„å°è¯´å†…å®¹é¡µçš„åŸŸåæ‹†åˆ†å‡ºå»ï¼Œä¸å’Œç½‘ç«™ä¸»è¦åŸŸåä¸€æ ·ã€‚ æ¯”å¦‚é¦–é¡µã€ä¸ªäººä¸­å¿ƒæ˜¯ m.aaa.com, å°†å†…å®¹é¡µçš„åŸŸåä¿®æ”¹æˆ m.bbb.comã€‚ æˆ‘ä»¬çš„é˜…è¯»é¡µ URL åœ°å€ä¸º https://m.aaa.com/book/1010545066/385773672ï¼Œåˆ™åœ¨ nginx åŒ¹é…åˆ° ^/book/([0-9]+)/([0-9]+) å°±è¿›è¡Œè·³è½¬åˆ° http://m.bbb.com/book/1010545066/385773672ï¼Œäºæ˜¯ï¼Œä¿®æ”¹ nginx çš„é…ç½®ï¼Œå¯¹ URL è¿›è¡ŒåŒ¹é…ã€‚ 1234567891011121314151617181920212223242526272829server &#123; listen 443; server_name m.aaa.com; # ... set $temp_content_host &quot;http://m.bbb.com&quot;; location ~ ^/book/([0-9]+)/([0-9]+) &#123; # If WeChat browser, jump to temporary domain name if ($http_user_agent ~* (Micromessenger) ) &#123; return 301 $temp_content_host$request_uri; &#125; proxy_pass http://domainAserver; &#125; location / &#123; proxy_pass http://domainAserver; &#125;&#125;server &#123; listen 80; server_name m.bbb.com; # ... location / &#123; proxy_pass http://domainAserver; &#125;&#125; å› ä¸ºåªæœ‰åœ¨å¾®ä¿¡æµè§ˆå™¨å†…éƒ¨ï¼Œæ‰å­˜åœ¨è¢«å°ç¦çš„é£é™©ï¼Œè€Œåœ¨å…¶ä»–æµè§ˆå™¨å†…æ²¡æœ‰ï¼Œä¸€æ—¦è¢«å¾®ä¿¡å°ç¦ï¼Œå†…å®¹é¡µçš„åŸŸåéœ€è¦ä¸€èµ·æ›´æ¢ï¼Œè¿™æ ·å¯èƒ½ä¼šä¸åˆ©äºæœç´¢å¼•æ“çš„æ”¶å½•ï¼Œå› æ­¤åŠ äº†ä¸€ä¸ªåˆ¤æ–­æµè§ˆå™¨ UAï¼Œå¾®ä¿¡çš„ UA æ˜¯ Micromessenger å¦‚æœæ˜¯åœ¨å¾®ä¿¡æµè§ˆå™¨å†…éƒ¨ï¼Œnginx æ‰ 301 è·³è½¬åˆ° m.bbb.comï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¿æŒä¹‹å‰çš„åŸŸåä¸å˜ã€‚ è¿™æ ·å°±è§£å†³äº†é—®é¢˜ï¼Œä¸€æ—¦ m.bbb.com åŸŸåè¢«å°ç¦äº†ï¼Œå°±æ˜¯ aaa åŸŸåçš„ nginx ä¿®æ”¹ $temp_content_host è¿™ä¸ªå˜é‡çš„å€¼ä¸ºæ–°çš„åŸŸåç„¶å reload ä¸€ä¸‹ nginx å³å¯ã€‚ æ€»ç»“å¯èƒ½æ˜¯å…¬å¸æˆ˜ç•¥ä¸Šçš„é—®é¢˜ï¼Œå¤ªè¿‡äºä¾èµ–å¾®ä¿¡çš„å…¬ä¼—å·ï¼Œåœ¨å¾®ä¿¡çš„ç”Ÿæ€ä¸­ï¼Œå¾®ä¿¡æƒ³å¼„æ­»ä½ è½»è€Œæ˜“ä¸¾ï¼Œä½ å´æ— å¯å¥ˆä½•ï¼Œå°½é‡æŠŠç”¨æˆ·å¼•å¯¼åˆ°å®¢æˆ·ç«¯ä¸Šæ‰æ˜¯ä¸Šä¸Šç­–ã€‚ å‚è€ƒ http://www.ttlsa.com/nginx/how-to-block-user-agents-using-nginx/ http://lzl124631x.github.io/2016/04/08/check-wechat-user-agent.html","tags":[{"name":"å¾®ä¿¡åŸŸåå°ç¦","slug":"å¾®ä¿¡åŸŸåå°ç¦","permalink":"http://nullpointer.pw/tags/å¾®ä¿¡åŸŸåå°ç¦/"}]},{"title":"å¾®ä¿¡åˆ†äº«è¸©å‘ä¹‹æ—…","date":"2018-03-17T08:32:52.000Z","path":"å¾®ä¿¡åˆ†äº«è¸©å‘ä¹‹æ—….html","text":"å‰è¨€ä¸‰æœˆä¼Šå§‹ï¼Œæ­¤æœˆä»»åŠ¡é‡å¿ƒåœ¨äºç”¨æˆ·çš„æ‹‰æ–°ä¸ä¼ æ’­ï¼Œè‡ªç„¶ä¹Ÿå°‘ä¸äº†æ–°å¢åŠ äº›è®¸éœ€æ±‚ã€‚ç”±æˆ‘è´Ÿè´£ç”¨æˆ·åˆ†äº«ä¼ æ’­çš„éœ€æ±‚ï¼Œä¸»è¦ä»»åŠ¡å°±æ˜¯åœ¨äºå¾®ä¿¡åˆ†äº«ã€‚åœ¨åšä¹‹å‰è§‰å¾—è¿™ä¸ªå¾ˆç®€å•ï¼Œå°±å‡ ä¸ªæ¥å£çš„äº‹æƒ…ç½¢ï¼Œå®é™…ä¸Šåšèµ·æ¥ï¼Œå´æ˜¯ä¸å¦‚æ„æ–™é‚£èˆ¬ç®€å•ï¼Œè¸©å‘é¢‡å¤šã€‚ åœ¨åšè¿™ä¸ªåˆ†äº«éœ€æ±‚ä¹‹å‰ï¼Œå’ŒåŒäº‹ä»¬ä¹Ÿå·²ç»è®¨è®ºè¿‡å¤§è‡´çš„æµç¨‹ã€‚æ— éå¸¸ç”¨çš„æ‰‹æ³•ï¼Œé’ˆå¯¹ç”¨æˆ·ç”Ÿæˆå”¯ä¸€äºŒç»´ç ï¼Œé€šè¿‡å¾®ä¿¡åˆ†äº«å‡ºå»ï¼Œç„¶åå…¶ä»–äººæ³¨å†Œå¡«å†™é‚€è¯·ç è·å–å¥–åŠ±ã€‚ åœ¨å¡«å†™é‚€è¯·ç è¿™é‡Œï¼Œæˆ‘å‚è€ƒäº†ä¸€äº›ä¸»æµ APP çš„åšæ³•ã€‚æ­£å¸¸æ˜¯å¤åˆ¶é‚€è¯·ç ç„¶åç”¨æˆ·æ‰¾åˆ°å…¥å£ç²˜è´´é‚€è¯·ç å¹¶è¿›è¡Œæ¿€æ´»ï¼Œä½†æ˜¯å‘ç°æœ‰ä¸ªåˆ«çš„ APP ä½“éªŒå¾ˆå¥½ï¼Œå¯ä»¥åšåˆ°å¤åˆ¶é‚€è¯·ç åï¼Œç›´æ¥æŠµè¾¾ APPï¼ˆç½‘æ˜“èœ—ç‰›è¯»ä¹¦ï¼‰ å†…éƒ¨ WebView ä¸­è‡ªåŠ¨å¡«å†™é‚€è¯·ç ã€‚ åœ¨å¯¹è¿™ä¸ª APP æŠ“åŒ…åˆ†æä¹‹åå‘ç°äº†å…¶ä¸­çš„å¥¥å¦™æ‰€åœ¨ï¼Œè¿™æ˜¯ä»–ä»¬åˆ†äº«é¡µé¢çš„åœ°å€ï¼š https://du.163.com/static/wechatFallback.html?openurl=nesnailreader://webview?url=https://du.163.com/invite?code=EPPEG&amp;inside=true&amp;downloadurl=https://du.163.com/download åŸæ¥ä»–ä»¬ä½¿ç”¨äº†ä¸€ç§å«åš schema çš„æŠ€æœ¯ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ APPã€‚äºæ˜¯å¼€å§‹äº†æ¨¡ä»¿ä¹‹æ—…ã€‚ çŸ¥é“äº†å…¶ä»– APP çš„åšæ³•åï¼Œä¾¿è¯¢é—®äº†å®¢æˆ·ç«¯çš„åŒäº‹ï¼Œèƒ½ä¸èƒ½å®ç°åŒæ ·çš„æ•ˆæœï¼Œä»–ä»¬éƒ½æ˜¯è¯´ä»¥å‰æ²¡æœ‰è¿™æ ·åšè¿‡ï¼Œä½†æ˜¯å¯ä»¥åšã€‚åè°ƒäº†å‰ç«¯ä¸å®¢æˆ·ç«¯åŒäº‹ï¼Œå…±åŒå¼€å‘è¿™ä¸ªçœ‹èµ·æ¥æŒºç®€å•çš„åŠŸèƒ½éœ€æ±‚ã€‚å®¢æˆ·ç«¯åŒäº‹éƒ½å¾ˆç»™åŠ›ï¼Œè™½ç„¶å‡ºç°äº†ä¸€äº›å°æ’æ›²ï¼Œä½†å¾ˆå¿«ä¾¿è°ƒé€šäº†åŠŸèƒ½ï¼Œå‰©ä¸‹äº† WAP ç‰ˆæœ¬å¾®ä¿¡åˆ†äº«ï¼Œç”±äºä¹‹å‰éƒ½æ²¡æœ‰åšè¿‡ï¼Œè¸©äº†ä¸å°‘çš„å‘ï¼Œåˆ†äº«è¿™æ¬¡è¸©å‘ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ–‡é‡å¿ƒæ‰€åœ¨ã€‚ å‘ä¸€åå°ä»£ç å¼€å‘ä¸å¿…å¤šè¯´ï¼Œè·Ÿç€æ–‡æ¡£å¼€å‘ï¼Œå› ä¸ºéœ€è¦è·å– å¾®ä¿¡å…¬ä¼—å·çš„ AccessToken æ‰€æœ‰éœ€è¦åœ¨å¾®ä¿¡åå¤©ç™½åå•å¤„æ·»åŠ æœ¬æœº IP ã€‚ åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œè°ƒè¯•å¾®ä¿¡ JSSDK æ—¶ï¼Œå‘ç° JS-SDK æç¤ºç­¾åé”™è¯¯ï½›errmsgï¼šconfig: invalid signatureï½ï¼Œä½†æ˜¯é€šè¿‡ å¾®ä¿¡ JS æ¥å£ç­¾åæ ¡éªŒå·¥å…· æäº¤ç›¸å…³å‚æ•°è¿›è¡Œæ ¡éªŒåï¼Œå‘ç°ç¨‹åºç”Ÿæˆçš„å’Œå¾®ä¿¡ç½‘é¡µç”Ÿæˆçš„ç­¾åæ˜¯ä¸€æ ·çš„,ä½†æ˜¯è¿™é‡Œå°±ä¸€ç›´æç¤ºæ˜¯æ— æ•ˆçš„ç­¾åã€‚ æˆ‘æŸ¥çœ‹äº† JS-SDK ä¸‹æ³¨å†Œ config ä¿¡æ¯å¤„çš„è¾“å…¥å‚æ•°ï¼Œå‘ç°æœ¬è¯¥æäº¤äº”ä¸ªå‚æ•°ï¼Œä½†æ˜¯åªæäº¤äº†å››ä¸ªï¼Œæ¼æäº¤äº†nonceStr å‚æ•°ï¼Œå¦‚æœä½ å‘ç°ç¨‹åºç”Ÿæˆçš„å’Œå¾®ä¿¡ç½‘é¡µç”Ÿæˆçš„ç­¾åæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æç¤ºæ— æ•ˆç­¾åï¼ŒåŠ¡å¿…æ£€æŸ¥æ˜¯å¦æ˜¯è¿™é‡Œçš„é—®é¢˜ã€‚è¿˜æœ‰æäº¤äº†äº”ä¸ªå‚æ•°ï¼Œä½†æ˜¯å‚æ•°çš„å¤§å°å†™ä¸æ­£ç¡®çš„çš„ï¼Œæ¯”å¦‚ nonceStr å†™æˆäº† nonceStr ä¹Ÿæ˜¯ä¸è¡Œçš„ã€‚å¯ä»¥å¯¹æ¯”ä¸‹å›¾è¿›è¡Œæ ¡éªŒã€‚ å‘äºŒå‘ä¸€ç§æåˆ°äº† AccessTokenï¼Œä½¿ç”¨ JSSDK æ—¶è¿˜éœ€è¦å¦å¤–ä¸€ä¸ª ticketï¼Œè¿™äºŒè€…éƒ½æœ‰è¶…æ—¶æ—¶é—´çš„é™åˆ¶ï¼Œå¦‚æœè¿‡æœŸäº†ï¼Œé‚£ä¹ˆ config æ˜¯æ— è®ºå¦‚ä½•ä¹Ÿä¸ä¼šåˆå§‹åŒ–æˆåŠŸçš„ã€‚ å‘ä¸‰è¸©äº†å‰ä¸¤ä¸ªå‘ä¹‹å¤–ï¼Œå…¶å® WAP ç‰ˆçš„å¼€å‘ä¹Ÿéƒ½å·®ä¸å¤šè°ƒé€šäº†ï¼Œä½†æ˜¯åˆ†äº«ä¹‹åï¼Œåˆ†äº«äººè¿›å…¥åˆ†äº«çš„é“¾æ¥åï¼ŒäºŒæ¬¡åˆ†äº«æ—¶ï¼Œä¾¿åˆå‡ºç°äº†æ— æ•ˆç­¾åçš„æƒ…å†µï¼Œä»”ç»†æ’æŸ¥ä¹‹åï¼Œå‘ç°æ˜¯åˆ†äº«åï¼Œå¾®ä¿¡ä¼šåœ¨åˆ†äº«çš„é“¾æ¥åé¢è‡ªåŠ¨åŠ ä¸Šäº†ä¸€äº›å‚æ•°ï¼Œæ­£æ˜¯å› ä¸ºè¿™äº›å‚æ•°çš„å­˜åœ¨ï¼Œå¯¼è‡´ç­¾åå¤±è´¥ã€‚ åˆšå¼€å§‹æ²¡æœ‰ç»†çœ‹æ–‡æ¡£ï¼Œå› æ­¤åˆ†äº« URL çš„åœ°å€å°±æ²¡æœ‰è¿›è¡ŒåŠ¨æ€ä¼ é€’åˆ°åå°è¿›è¡Œç­¾åï¼Œæ‰€ä»¥å¯¼è‡´äº†äºŒæ¬¡åˆ†äº«å‡ºç°äº†é—®é¢˜ï¼Œäºæ˜¯ä¿®æ”¹ä¸ºäº†åŠ¨æ€ä¼ é€’å½“å‰ URL åˆ°åå°è¿›è¡Œç­¾åï¼Œæ‰è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå½“å‰çš„ URL ä¸­åŒ…å«äº†ä¸­æ–‡ï¼Œéœ€è¦è¿›è¡Œ encodeURIComponent åä¼ é€’ï¼Œå†åœ¨åå°è¿›è¡Œ URL è§£ç å¤„ç†ã€‚å¦å¤–ç¼–ç ä¹‹åæœ€å¥½å†å°†å‚æ•°ä¸­çš„ &amp; ä¸´æ—¶æ›¿æ¢ä¸º %26ï¼Œåå°å†æ›¿æ¢ä¸º &amp;ï¼Œå¦‚æœç›´æ¥ä¼ åˆ°åå°ï¼Œå­˜åœ¨å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œåå°å°†åªä¼šæ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ å°æ’æ›² å®‰å“å®¢æˆ·ç«¯è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œå‡ºç°äº†å¾ˆå¥‡æ€ªçš„çŠ¶å†µï¼Œå°±æ˜¯åœ¨ WebView é‡Œé¢æ— æ³•è·å–å½“å‰ APP ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå³ WebView å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œå‘ç°è·å–ä¸åˆ° Cookie ä¸­ç™»å½•ç”¨æˆ·ä¿¡æ¯çš„å€¼ï¼Œè€Œ IOS å®¢æˆ·ç«¯ä¾¿æ²¡æœ‰å‡ºç°è¿™ç§æƒ…å†µã€‚ ä¹‹å‰å®‰å“åœ¨åšç­¾åˆ°åŠŸèƒ½çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ä½¿ç”¨çš„ WebViewï¼Œè´Ÿè´£ç­¾åˆ°åå°å¼€å‘çš„åŒäº‹ä¹Ÿé‡åˆ°äº†è¿™ç§æƒ…å†µï¼Œå½“æ—¶æ²¡æœ‰å½»åº•è§£å†³è¿™ç§é—®é¢˜ï¼Œä½¿ç”¨äº†ä¸€ç§æŠ˜ä¸­çš„æ–¹æ³•æ¥å®ç°ï¼Œè®©å®‰å“å®¢æˆ·ç«¯ä¼ é€’ä¸€ä¸²åŒ…å«ç”¨æˆ·ä¿¡æ¯çš„åŠ å¯†ä¸²å‚æ•°ï¼Œåå°è§£æè¿™ä¸ªå‚æ•°åˆ¤æ–­ç”¨æˆ·ã€‚ è°·æ­ŒæŸ¥æ‰¾è¿™ç§æƒ…å†µä¹‹åï¼Œå‘ç°å®‰å“éœ€è¦å°† Cookie åŒæ­¥åˆ° WebView ä¸­ï¼Œè¯¢é—®å®‰å“åŒäº‹ä¹‹åï¼Œä»–è¯´åŒæ­¥è¿‡äº†å•Šï¼Œè¿™å°±å¾ˆå¥‡æ€ªäº†ï¼ ç»§ç»­ä¸‡èƒ½è°·æ­ŒæŸ¥æ‰¾ï¼Œç„¶åçœ‹äº†ä¸€ä¸‹åŒäº‹çš„å®¢æˆ·ç«¯ä»£ç ï¼Œå‘ç°ä»–åŒæ­¥ Cookie åˆ° WebView éƒ¨åˆ†çš„ä»£ç å¹¶æ²¡æœ‰è®¾ç½® Cookie çš„ domain ä¸ pathï¼Œè€Œåå°è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œåªå»è·å–æŒ‡å®šåŸŸåæŒ‡å®šè·¯å¾„ä¸‹çš„ Cookie å€¼ï¼Œè‡ªç„¶æ˜¯è·å–ä¸åˆ° WebView é‡Œç™»å½•ç”¨æˆ·ä¿¡æ¯çš„å€¼äº†ã€‚ çŸ¥é“äº†é—®é¢˜ï¼Œè§£å†³èµ·æ¥å°±ç®€å•å¤šäº†ï¼Œåªè¦å°†éœ€è¦åŒæ­¥çš„æ¯ä¸€æ¡ Cookie ä¿¡æ¯è®¾ç½® Domain ä¸ Path å³å¯ï¼Œåå°ä¹Ÿå°±å¯ä»¥æ‹¿åˆ°åŒæ­¥çš„ Cookie ä¿¡æ¯äº†ã€‚ 1234public static boolean syncCookie(String url, String cookie) &#123; cookie += \";Max-Age=3600\" + \";Domain=.cctv.com\" + \";Path = /\" cookieManager.setCookie(url, cookie);&#125;","tags":[{"name":"å¾®ä¿¡åˆ†äº«","slug":"å¾®ä¿¡åˆ†äº«","permalink":"http://nullpointer.pw/tags/å¾®ä¿¡åˆ†äº«/"},{"name":"WebViewåŒæ­¥Cookieé—®é¢˜","slug":"WebViewåŒæ­¥Cookieé—®é¢˜","permalink":"http://nullpointer.pw/tags/WebViewåŒæ­¥Cookieé—®é¢˜/"}]},{"title":"SpringBootä¸WebSocketé›†æˆ","date":"2018-02-28T14:17:09.000Z","path":"SpringBootä¸WebSocketé›†æˆ.html","text":"å‰è¨€ç›®å‰ï¼Œå…¬å¸çš„é¡¹ç›®éƒ¨ç½²æ–¹å¼è¿˜æ˜¯ä½¿ç”¨çš„åŸå§‹çš„æ–¹å¼ï¼Œé€šè¿‡æ‰‹åŠ¨è¿è¡Œè„šæœ¬å»éƒ¨ç½²ã€‚æ¯æ¬¡å…¨éƒ¨æœåŠ¡å™¨éƒ¨ç½²ä¸€éï¼Œéœ€è¦è€—è´¹çš„æ—¶é—´å¾ˆé•¿ï¼Œå¦‚æœé‡åˆ°é”™è¯¯ï¼Œä¹Ÿä¸èƒ½ç«‹åˆ»è¿›è¡Œå›æ»šï¼Œåªèƒ½å°†é”™è¯¯è§£å†³æäº¤æˆ–è€…å°†å¤‡ä»½ä»£ç è¿›è¡Œè¿˜åŸã€‚ åœ¨æŒç»­é›†æˆå¤§è¡Œå…¶é“çš„ä»Šå¤©ï¼Œè¿™ç§åŸå§‹çš„æ–¹å¼å®åœ¨æ˜¯ä¸åº”è¯¥å†ä½¿ç”¨äº†ï¼åœ¨è°ƒç ”äº† Jekins ç­‰å¼€æºæŒç»­é›†æˆå·¥å…·ä¹‹åï¼Œå‘ç°å¯¹äºæˆ‘ä»¬å…¬å¸è€Œè¨€ï¼Œæ¯”å¦‚ Jekins çš„ä¸Šæ‰‹éš¾åº¦è¿˜æ˜¯è¾ƒé«˜çš„ï¼Œé…ç½®ä¹Ÿæ¯”è¾ƒå¤æ‚ç¹çï¼Œä¹Ÿå°±æ²¡æœ‰é‡‡ç”¨ã€‚ äºæ˜¯æƒ³ç€è‡ªå·±èƒ½ä¸èƒ½ä¹Ÿæä¸€ä¸ªç®€åŒ–ç‰ˆé€‚ç”¨äºå…¬å¸çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ç³»ç»Ÿå‘¢ï¼Ÿäºæ˜¯åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†æœ¬æ–‡çš„é—®é¢˜ï¼Œä¸ºäº†å®æ—¶å±•ç¤ºæœåŠ¡å™¨å‘½ä»¤è¾“å‡ºæƒ…å†µï¼Œæˆ‘ä½¿ç”¨äº† WebSocket æŠ€æœ¯æ¥å®ç°ï¼ŒåŒæ—¶ä½¿ç”¨ SpringBoot æ¡†æ¶è¿›è¡Œå¿«é€Ÿæ­å»ºé¡¹ç›®ï¼Œè¯¥éƒ¨ç½²ç³»ç»Ÿç›®å‰æœªå¼€å‘å®Œæˆï¼Œå§‘ä¸”ä½œä¸ºä¸€ä¸ªç»ƒæ‰‹é¡¹ç›®ã€‚ WebSocket ä»‹ç»å¯¹äº WebSocket å°±ä¸å¤šè¯´ä»€ä¹ˆäº†ï¼Œç›´æ¥å¼•ç”¨ç»´åŸºç™¾ç§‘çš„è§£é‡Šã€‚ WebSocketæ˜¯HTML5å¼€å§‹æä¾›çš„ä¸€ç§æµè§ˆå™¨ä¸æœåŠ¡å™¨é—´è¿›è¡Œå…¨åŒå·¥é€šè®¯çš„ç½‘ç»œæŠ€æœ¯ã€‚ WebSocketé€šä¿¡åè®®äº2011å¹´è¢«IETFå®šä¸ºæ ‡å‡†RFC 6455ï¼ŒWebSocketAPIè¢«W3Cå®šä¸ºæ ‡å‡†ã€‚ åœ¨WebSocket APIä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œç„¶åï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å°±å½¢æˆäº†ä¸€æ¡å¿«é€Ÿé€šé“ã€‚ä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥æ•°æ®äº’ç›¸ä¼ é€ã€‚ æ˜“äºç†è§£çš„ç‰ˆæœ¬ï¼Œå¯ä»¥çœ‹çœ‹é˜®ä¸€å³°çš„ WebSocket æ•™ç¨‹ ä¸‹é¢è®²è§£ WebSocket ä¸ SpringBoot çš„é›†æˆä½¿ç”¨ã€‚ æœåŠ¡ç«¯ç¯å¢ƒå‡†å¤‡ SpringBoot é¡¹ç›®å¼•å…¥ WebSocket ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;&lt;/dependency&gt; æ–°å»º WebSocketHandlerï¼Œ ç”¨äºå¤„ç†è¯·æ±‚ï¼Œä»¥åŠå‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ 1234567891011121314151617181920212223242526272829303132@Componentpublic class WebSocketHandler extends AbstractWebSocketHandler &#123; private static CopyOnWriteArraySet&lt;WebSocketSession&gt; webSocketSet = new CopyOnWriteArraySet&lt;&gt;(); @Override public void afterConnectionEstablished(WebSocketSession session) throws Exception &#123; // æ¥æ”¶åˆ°WebSocketä¼šè§¦å‘ System.out.println(session.getUri().getQuery()); webSocketSet.add(session); session.sendMessage(new TextMessage(\"æ¬¢è¿ï¼ï¼ï¼\")); &#125; @Override public void afterConnectionClosed(WebSocketSession session, CloseStatus closeStatus) throws Exception &#123; // å…³é—­WebSocketä¼šè§¦å‘ System.out.println(\"å…³é—­WebSocketä¼šè§¦å‘\"); &#125; @Override public void handleTransportError(WebSocketSession session, Throwable exception) throws Exception &#123; exception.printStackTrace(); &#125; /** * å¹¿æ’­æ¶ˆæ¯ */ public void sendMessage() throws IOException &#123; for (WebSocketSession session : webSocketSet) &#123; session.sendMessage(new TextMessage(\"æ¬¢è¿ä½ æ¥å•¦ï¼\")); &#125; &#125;&#125; æ–°å»º Config ç±»ï¼Œç”¨äºæ¥æ”¶ WebSocket è¯·æ±‚ 123456789101112@Configuration@EnableWebSocketpublic class WebSocketConfig implements WebSocketConfigurer &#123; @Autowired private WebSocketHandler webSocketHandler; @Override public void registerWebSocketHandlers(WebSocketHandlerRegistry webSocketHandlerRegistry) &#123; webSocketHandlerRegistry.addHandler(webSocketHandler,\"/webSocket\"); &#125;&#125; å®¢æˆ·ç«¯ç¯å¢ƒå‡†å¤‡ æ–°å»ºé¡µé¢ 1234567891011121314151617181920212223242526272829&lt;!DOCTYPE html&gt; &lt;!--æ ‡å‡†HTML5--&gt;&lt;html lang=\"zh-CN\"&gt;&lt;body&gt;&lt;h1&gt;Hello World!&lt;/h1&gt;&lt;/body&gt;&lt;script type=\"text/javascript\"&gt; var websocket = null; if('WebSocket' in window) &#123; websocket = new WebSocket('ws://localhost:8080/webSocket?code=abcd'); &lt;!--æ­¤å¤„çš„åœ°å€å³ç¬¬äºŒæ­¥æŒ‡å®šçš„æ¥å£åœ°å€ï¼Œå¯ä»¥ä¼ é€’å‚æ•°--&gt; &#125;else &#123; alert('è¯¥æµè§ˆå™¨ä¸æ”¯æŒwebsocket!'); &#125; websocket.onopen = function (event) &#123; alert('å»ºç«‹è¿æ¥'); &#125; websocket.onclose = function (event) &#123; alert('è¿æ¥å…³é—­'); &#125; websocket.onmessage = function (event) &#123; alert('æ”¶åˆ°æ¶ˆæ¯:' + event.data) &#125; websocket.onerror = function () &#123; alert('websocketé€šä¿¡å‘ç”Ÿé”™è¯¯ï¼'); &#125; window.onbeforeunload = function () &#123; websocket.close(); &#125;&lt;/script&gt; æ³¨æ„ï¼šå¦‚æœwebsocket çš„ urlå†™çš„æ˜¯localhost:8080ï¼Œåˆ™å½“å‰é¡µé¢çš„åœ°å€ä¹Ÿåº”æ˜¯localhost:8080åŸŸåä¸‹ï¼Œä¸å¯ä»¥æ˜¯127.0.0.1:8080 ï¼Œå¦åˆ™ä¼šæç¤º 403ï¼Œå¦‚æœç”¨çœŸå®åŸŸåä¹ŸåŒç†ã€‚ æ–°å»º Controller è·³è½¬åˆ°è¯¥é¡µé¢ 12345678@Controllerpublic class HomeController &#123; @GetMapping(value = \"/home\") public ModelAndView home() &#123; return new ModelAndView(\"home\"); &#125;&#125; è¿›è¡Œæµ‹è¯• å¯åŠ¨é¡¹ç›® è®¿é—® http://localhost:8080/home æµè§ˆå™¨æ§åˆ¶å°æ‰“å°ç»“æœï¼š åº”ç”¨ æœåŠ¡å™¨å‘æµè§ˆå™¨å‘é€é€šçŸ¥å¯ä»¥ä½¿ç”¨ WebSocket èŠå¤©å®¤ èµ„æºä¸‹è½½ ç‚¹æˆ‘ä¸‹è½½ç¤ºä¾‹æºç  å‚è€ƒ http://www.ruanyifeng.com/blog/2017/05/websocket.html","tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://nullpointer.pw/tags/SpringBoot/"},{"name":"WebSocket","slug":"WebSocket","permalink":"http://nullpointer.pw/tags/WebSocket/"}]},{"title":"WebMagicä¹‹çˆ¬è™«ç›‘æ§","date":"2018-02-26T22:16:05.000Z","path":"WebMagicä¹‹çˆ¬è™«ç›‘æ§.html","text":"å‰è¨€å¹´å‰é—²ç€æ— èŠï¼Œç ”ç©¶äº†ä¸€é˜µå­çˆ¬è™«æŠ€æœ¯ï¼Œæ¥è§¦åˆ°çˆ¬è™«æ¡†æ¶ WebMagicï¼Œæ„Ÿè§‰å¾ˆå¥½ç”¨ã€‚åœ¨ä¹‹åçš„å·¥ä½œä¸­ï¼Œæ¥æ‰‹äº†æ–°ç«™ä¸ç¬¬ä¸‰æ–¹æ¥å£å¯¹æ¥çš„å·¥ä½œï¼Œä¸»è¦çš„å·¥ä½œæ˜¯å»æŠ“å–å¯¹æ–¹æ¥å£çš„å†…å®¹ï¼›åˆå§‹çš„æ—¶å€™ï¼Œä¹‹å‰è´Ÿè´£è¯¥å·¥ä½œçš„åŒäº‹ï¼Œæ˜¯æ‰‹åŠ¨ä½¿ç”¨å¤šçº¿ç¨‹å»æŠ“å–ï¼Œåœ¨åº”ç”¨çš„è¿‡ç¨‹å½“ä¸­æš´éœ²äº†ä¸å°‘é—®é¢˜ã€‚æ¯”å¦‚å¯¹äºæ¥å£å†…å®¹è¶…çº§å¤šçš„æ—¶å€™ï¼Œè™½ç„¶ä½¿ç”¨äº†å¤šçº¿ç¨‹ï¼Œä½†æ˜¯æŠ“å–çš„æ•ˆç‡å¾ˆä½ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰å®ç°å¢é‡æŠ“å–ï¼Œæ¯æ¬¡éƒ½éœ€è¦å»å…¨é‡æŠ“å–ï¼Œè·‘ä¸€æ¬¡åŸºæœ¬éœ€è¦å¥½å‡ å¤©-.-ï¼›å°è¯´æ˜¯è¿è½½çš„æƒ…å†µä¸‹ï¼Œè¿™ç§é—®é¢˜æ˜¯äºŸéœ€è§£å†³çš„ã€‚ è¶ç€ç†Ÿæ‚‰äº†æ–°å…µå™¨ WebMagic, æœæ–­åœ¨é¡¹ç›®ä¸­è¿›è¡Œå¼•å…¥ï¼Œè§£å†³ä»¥ä¸Šé—®é¢˜ã€‚åŠŸèƒ½ä¸Šçº¿åï¼Œæ›¿æ¢äº†åŸæœ‰çš„å¤šçº¿ç¨‹æŠ“å–ï¼Œç›®å‰å·²ç»ååˆ†ç¨³å®šï¼Œ åŸºæœ¬ä¸Šé…ç½®å¥½ä»»åŠ¡ä¹‹åï¼Œå°±æ— éœ€å†äººå·¥å¹²é¢„äº†ã€‚ ä»¥ä¸‹ï¼Œæ­£æ–‡æ˜¯åŸºäºæˆ‘å­¦ä¹  WebMagic æ—¶ç»ƒæ‰‹é¡¹ç›®ï¼ŒåŠŸèƒ½å’Œåœ¨å…¬å¸å¼€å‘çš„å·®ä¸å¤šï¼Œåªä¸è¿‡æˆ‘æœ¬åœ°å¼€å‘çš„æ˜¯å»æŠ“å–ç›—ç‰ˆç½‘ç«™çš„å†…å®¹ã€‚ é¡¹ç›®é¢„è§ˆ èœå•ç®¡ç† çˆ¬è™«ä»»åŠ¡ç®¡ç† å®ç°äº†çˆ¬è™«çš„çŠ¶æ€ç›‘æ§ï¼Œä»¥åŠå¯è§†åŒ–å¯åœ åˆå…¥æ‰‹å…µå™¨-åŸºæœ¬ä½¿ç”¨ çˆ¬è™«å¥—è·¯åˆ†æå…ˆçœ‹å®˜æ–¹æ–‡æ¡£çš„æ€»ä½“æ¶æ„å›¾ å¤§éƒ¨åˆ†æ¨¡å—WebMagicå·²ç»æä¾›äº†é»˜è®¤å®ç°ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹äºç¼–å†™ä¸€ä¸ªçˆ¬è™«ï¼ŒPageProcessoræ˜¯éœ€è¦ç¼–å†™çš„éƒ¨åˆ†ï¼Œè€ŒSpideråˆ™æ˜¯åˆ›å»ºå’Œæ§åˆ¶çˆ¬è™«çš„å…¥å£ã€‚ å¾—ç›Šäº WebMagic æ¡†æ¶çš„è‰¯å¥½å°è£…ï¼Œå¯¹äºæ¡†æ¶çš„ä½¿ç”¨è€…æ¥è¯´ï¼Œæ‰€éœ€è¦ç¼–å†™çš„ä»£ç å‡ ä¹åªæœ‰çˆ¬è™«çš„é€»è¾‘ä»£ç ï¼Œè€Œå¯¹äºæ€ä¹ˆçˆ¬ï¼Œç»´æŠ¤ä»»åŠ¡é˜Ÿåˆ—çš„äº‹æƒ…ï¼ŒWebMagic éƒ½å¯ä»¥æ›¿æˆ‘ä»¬åšå¥½ã€‚å¼€å§‹æˆ‘ä»¬çš„çˆ¬è™«ä¹‹æ—…å§ï¼ å¼•å…¥ä¾èµ–æœ¬æ–‡ä¸­æ‰€ä½¿ç”¨åˆ°çš„é¡¹ç›®æ˜¯åŸºäº Maven çš„ SSM é¡¹ç›®ï¼Œåœ¨ pom.xml ä¸­å¼•å…¥ WebMagic çš„ä¾èµ–ã€‚ 12345678910&lt;dependency&gt; &lt;groupId&gt;us.codecraft&lt;/groupId&gt; &lt;artifactId&gt;webmagic-core&lt;/artifactId&gt; &lt;version&gt;0.7.3&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;us.codecraft&lt;/groupId&gt; &lt;artifactId&gt;webmagic-extension&lt;/artifactId&gt; &lt;version&gt;0.7.3&lt;/version&gt;&lt;/dependency&gt; åŸºæœ¬ç±»å›¾ å…ˆå°†å¯¹åº”çš„å¤„ç†ç±»è¿›è¡ŒæŠ½è±¡å‡ºæ¥ï¼Œæ–¹ä¾¿ç»Ÿä¸€å¤„ç†ã€‚ æ¯ä¸ªçˆ¬è™«éƒ½æœ‰å…¶å¯¹åº”çš„é…ç½®ä¿¡æ¯ Site æ˜¯ æŠ“å–ç½‘ç«™çš„ç›¸å…³é…ç½®ï¼ŒåŒ…æ‹¬ç¼–ç ã€æŠ“å–é—´éš”ã€é‡è¯•æ¬¡æ•° å¯¹åº”çš„å®ç°ç±»é‡å†™ process æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­å®ç°å¯¹åº”çš„çˆ¬è™«é€»è¾‘å¤„ç† å¯åŠ¨çˆ¬è™« çˆ¬è™«çš„ä½¿ç”¨å°±ç®€å•å¸¦è¿‡ï¼Œå…·ä½“å¯ä»¥å°†æœ¬æ–‡ä¸å®˜æ–¹æ–‡æ¡£ç»“åˆä½¿ç”¨ï¼Œå®˜æ–¹æ–‡æ¡£çš„ç¤ºä¾‹åªæ˜¯åŸºäº main æ–¹æ³•ã€‚ çˆ¬è™«ç›‘æ§ æ‰©å±•æºç  ä¸ºäº†å®ç°é¡¹ç›®é¢„è§ˆçš„æ•ˆæœï¼Œå®ç°çˆ¬è™«çš„çŠ¶æ€ç›‘æ§ï¼Œéœ€è¦å¯¹çˆ¬è™«è¿›è¡Œæ‰©å±•ã€‚å› ä¸ºå®˜ç½‘æä¾›çš„æ–¹å¼åŠŸèƒ½ä¸è¶³ä»¥è¾¾åˆ°åœ¨é¡µé¢å±•ç¤ºçš„æ•ˆæœã€‚ æ·»åŠ ç›‘æ§éå¸¸ç®€å•ï¼Œè·å–ä¸€ä¸ª SpiderMonitor çš„å•ä¾‹ SpiderMonitor.instance()ï¼Œå¹¶å°†ä½ æƒ³è¦ç›‘æ§çš„ Spider æ³¨å†Œè¿›å»å³å¯ã€‚ä½ å¯ä»¥æ³¨å†Œå¤šä¸ª Spider åˆ° SpiderMonitor ä¸­ã€‚ æŸ¥çœ‹ SpiderMonitor æºä»£ç åï¼Œå¦‚æœè°ƒç”¨çš„æ˜¯ è·å–ä¸€ä¸ª SpiderMonitor çš„å•ä¾‹ SpiderMonitor çš„ æ³¨å†Œæ–¹æ³•ï¼Œå‘ç° WebMagic å°†æ¯åªçˆ¬è™«çš„çŠ¶æ€å¯¹è±¡ SpiderStatusMXBean å…¨éƒ¨æ·»åŠ åˆ°ä¸€ä¸ª List é›†åˆå½“ä¸­å»ï¼Œè¿™æ ·å°±éš¾ä»¥åŒºåˆ†å…·ä½“æ˜¯å“ªä¸€åªçˆ¬è™«çš„çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ SpiderMonitor è¿›è¡Œæ‰©å±•ã€‚ å°† SpiderMonitor ä¸­çš„ private List&lt;SpiderStatusMXBean&gt; spiderStatuses = new ArrayList&lt;SpiderStatusMXBean&gt;(); ä¿®æ”¹ä¸º Map é›†åˆï¼Œkey é€‰æ‹© Spider çš„ UUID ä½œä¸ºå”¯ä¸€åŒºåˆ†çˆ¬è™«çš„æ ‡è®°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596@Experimentalpublic class MySpiderMonitor &#123; private static MySpiderMonitor INSTANCE = new MySpiderMonitor(); private AtomicBoolean started = new AtomicBoolean(false); private Logger logger = LoggerFactory.getLogger(getClass()); private MBeanServer mbeanServer; private String jmxServerName; private Map&lt;String,MySpiderStatus&gt; spiderStatuses = new HashMap&lt;String,MySpiderStatus&gt;(); protected MySpiderMonitor() &#123; jmxServerName = \"WebMagic\"; mbeanServer = ManagementFactory.getPlatformMBeanServer(); &#125; public Map&lt;String,MySpiderStatus&gt; getSpiderStatuses() &#123; return spiderStatuses; &#125; /** * Register spider for monitor. * * @param spiders spiders * @return this */ public synchronized MySpiderMonitor register(Spider... spiders) throws JMException &#123; for (Spider spider : spiders) &#123; MyMonitorSpiderListener monitorSpiderListener = new MyMonitorSpiderListener(); if (spider.getSpiderListeners() == null) &#123; List&lt;SpiderListener&gt; spiderListeners = new ArrayList&lt;SpiderListener&gt;(); spiderListeners.add(monitorSpiderListener); spider.setSpiderListeners(spiderListeners); &#125; else &#123; spider.getSpiderListeners().add(monitorSpiderListener); &#125; MySpiderStatus spiderStatusMBean = getSpiderStatusMBean(spider, monitorSpiderListener); registerMBean(spiderStatusMBean); spiderStatuses.put(spider.getUUID(),spiderStatusMBean); &#125; return this; &#125; protected MySpiderStatus getSpiderStatusMBean(Spider spider, MyMonitorSpiderListener monitorSpiderListener) &#123; return new MySpiderStatus(spider, monitorSpiderListener); &#125; public static MySpiderMonitor instance() &#123; return INSTANCE; &#125; public class MyMonitorSpiderListener implements SpiderListener &#123; private final AtomicInteger successCount = new AtomicInteger(0); private final AtomicInteger errorCount = new AtomicInteger(0); private List&lt;String&gt; errorUrls = Collections.synchronizedList(new ArrayList&lt;String&gt;()); @Override public void onSuccess(Request request) &#123; successCount.incrementAndGet(); &#125; @Override public void onError(Request request) &#123; errorUrls.add(request.getUrl()); errorCount.incrementAndGet(); &#125; public AtomicInteger getSuccessCount() &#123; return successCount; &#125; public AtomicInteger getErrorCount() &#123; return errorCount; &#125; public List&lt;String&gt; getErrorUrls() &#123; return errorUrls; &#125; &#125; protected void registerMBean(SpiderStatusMXBean spiderStatus) throws MalformedObjectNameException, InstanceAlreadyExistsException, MBeanRegistrationException, NotCompliantMBeanException &#123; ObjectName objName = new ObjectName(jmxServerName + \":name=\" + spiderStatus.getName()); if(mbeanServer.isRegistered(objName)==false) &#123; mbeanServer.registerMBean(spiderStatus, objName); &#125; &#125;&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSpiderMonitor ä¸­ä½¿ç”¨çš„ SpiderStatus ä¹Ÿéœ€è¦è¿›è¡Œä¸€åŒæ‰©å±•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182public class MySpiderStatus implements SpiderStatusMXBean &#123; protected final Spider spider; protected Logger logger = LoggerFactory.getLogger(getClass()); protected final MySpiderMonitor.MyMonitorSpiderListener monitorSpiderListener; public MySpiderStatus(Spider spider, MySpiderMonitor.MyMonitorSpiderListener monitorSpiderListener) &#123; this.spider = spider; this.monitorSpiderListener = monitorSpiderListener; &#125; public Spider getSpider() &#123; return this.spider; &#125; public String getName() &#123; return spider.getUUID(); &#125; public int getLeftPageCount() &#123; if (spider.getScheduler() instanceof MonitorableScheduler) &#123; return ((MonitorableScheduler) spider.getScheduler()).getLeftRequestsCount(spider); &#125; logger.warn(\"Get leftPageCount fail, try to use a Scheduler implement MonitorableScheduler for monitor count!\"); return -1; &#125; public int getTotalPageCount() &#123; if (spider.getScheduler() instanceof MonitorableScheduler) &#123; return ((MonitorableScheduler) spider.getScheduler()).getTotalRequestsCount(spider); &#125; logger.warn(\"Get totalPageCount fail, try to use a Scheduler implement MonitorableScheduler for monitor count!\"); return -1; &#125; @Override public int getSuccessPageCount() &#123; return monitorSpiderListener.getSuccessCount().get(); &#125; @Override public int getErrorPageCount() &#123; return monitorSpiderListener.getErrorCount().get(); &#125; public List&lt;String&gt; getErrorPages() &#123; return monitorSpiderListener.getErrorUrls(); &#125; @Override public String getStatus() &#123; return spider.getStatus().name(); &#125; @Override public int getThread() &#123; return spider.getThreadAlive(); &#125; public void start() &#123; spider.start(); &#125; public void stop() &#123; spider.stop(); &#125; @Override public Date getStartTime() &#123; return spider.getStartTime(); &#125; @Override public int getPagePerSecond() &#123; int runSeconds = (int) (System.currentTimeMillis() - getStartTime().getTime()) / 1000; return getSuccessPageCount() / runSeconds; &#125;&#125; é‡å†™çˆ¬è™«å¯åŠ¨å¤„ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677@Servicepublic class WebMagicService &#123; @Resource private ApplicationContext context; @Resource private TaskService taskService; public void run(TaskDTO taskDTO, boolean runAsync) throws Exception &#123; MySpiderMonitor spiderMonitor = MySpiderMonitor.instance(); String ruleJson = taskDTO.getTaskRuleJson(); WebMagicConfig config = JSONObject.parseObject(ruleJson, WebMagicConfig.class); SpiderConfig spiderConfig = config.getSpider(); AbstractPageProcess pageProcess = context.getBean(spiderConfig.getProcesser(), AbstractPageProcess.class); pageProcess.init(config); pageProcess.setUuid(taskDTO.getSpiderUUID()); Spider spider = Spider.create(pageProcess).thread(spiderConfig.getThread()); spider.setUUID(taskDTO.getSpiderUUID()); List&lt;String&gt; pipelines = spiderConfig.getPipeline(); for (String pipeline : pipelines) &#123; Pipeline bean = context.getBean(pipeline, Pipeline.class); if (bean != null) &#123; spider.addPipeline(bean); &#125; &#125; // è®¾ç½®Downloader // è®¾ç½®Scheduler // æ³¨å†Œçˆ¬è™« spiderMonitor.register(spider); spider.addUrl(spiderConfig.getStartUrl()); if (runAsync) &#123; spider.runAsync(); &#125; else &#123; spider.run(); &#125; &#125; /** * çˆ¬è™«çŠ¶æ€ç›‘æ§ * @return */ public List&lt;TaskDTO&gt; runTaskList() &#123; MySpiderMonitor spiderMonitor = MySpiderMonitor.instance(); Map&lt;String, MySpiderStatus&gt; spiderStatuses = spiderMonitor.getSpiderStatuses(); List&lt;TaskDTO&gt; taskDTOList = taskService.findAll(); for (TaskDTO taskDTO : taskDTOList) &#123; MySpiderStatus spiderStatus = spiderStatuses.get(taskDTO.getSpiderUUID()); if (spiderStatus == null) &#123; taskDTO.setRunState(Spider.Status.Stopped.name()); &#125; else &#123; taskDTO.setRunState(spiderStatus.getStatus()); &#125; &#125; return taskDTOList; &#125; public TaskDTO stop(TaskDTO taskDTO) &#123; MySpiderMonitor spiderMonitor = MySpiderMonitor.instance(); Map&lt;String, MySpiderStatus&gt; spiderStatuses = spiderMonitor.getSpiderStatuses(); MySpiderStatus spiderStatus = spiderStatuses.get(taskDTO.getSpiderUUID()); if (spiderStatus != null) &#123; spiderStatus.stop(); spiderStatus.getSpider().close(); &#125; return taskDTO; &#125;&#125; åˆ›å»ºçˆ¬è™«æ—¶ï¼Œå°†çˆ¬è™«æ³¨å†Œåˆ° MySpiderMonitor ä¸­ï¼Œä¹‹åé€šè¿‡ getSpiderStatuses æ–¹æ³•å³å¯è·å–æ‰€æœ‰çˆ¬è™«çš„çŠ¶æ€äº†ã€‚ èµ„æºä¸‹è½½ ç‚¹æˆ‘ä¸‹è½½æºç ","tags":[{"name":"webmagic","slug":"webmagic","permalink":"http://nullpointer.pw/tags/webmagic/"},{"name":"çˆ¬è™«ç›‘æ§","slug":"çˆ¬è™«ç›‘æ§","permalink":"http://nullpointer.pw/tags/çˆ¬è™«ç›‘æ§/"}]},{"title":"SpringDataJPAå¿«é€Ÿå…¥é—¨","date":"2018-01-27T13:02:48.000Z","path":"SpringDataJPAå¿«é€Ÿå…¥é—¨.html","text":"å‰è¨€ä¹‹å‰åœ¨å­¦ä¹  SpringBoot æ¡†æ¶çš„æ—¶å€™ï¼Œä½¿ç”¨åˆ°äº† SpringData JPAï¼Œä½†æ˜¯å½“æ—¶åªæ˜¯ç®€å•çš„æŸ¥è¯¢ï¼Œæ²¡æœ‰ç”¨åˆ°ç¨å¾®å¤æ‚çš„æŸ¥è¯¢ã€‚ JPA çš„ JPQL è¯­æ³•è§„åˆ™å¯¹äºç®€å•çš„æŸ¥è¯¢å®å±åˆ©å™¨ï¼Œå¤§å¤§åŠ å¿«äº†å¼€å‘é€Ÿåº¦ã€‚ä¸ä¹…å‰ï¼Œåœ¨å…¬å¸å°†ç”¨æˆ·æ¨èåŠŸèƒ½å•ç‹¬æŠ½å–å‡ºä¸ºä¸€ä¸ªç‹¬ç«‹é¡¹ç›®ï¼Œç”±äºå…¬å¸ä¸€ç›´æ²¿ç”¨çš„åº•å±‚æ¡†æ¶å¤ªè€ï¼Œåªèƒ½ä½¿ç”¨ JDK1.6ï¼ŒJDK 1.9éƒ½å‡ºæ¥äº†ï¼Œå®åœ¨ä¸èƒ½å¿ğŸ˜…ï¼Œæœæ–­å¼•å…¥äº† SpringData JPAã€‚ ç„¶åæœ€è¿‘å…¬å¸å…¶ä»–åŒäº‹æ¥æ‰‹äº†è¯¥é¡¹ç›®ï¼Œä½†æ˜¯ä¸å¤ªäº†è§£ SpringData JPA çš„ä½¿ç”¨ï¼Œäºæ˜¯æœ‰äº†æ­¤æ–‡ï¼Œä¸ä¼šå°±å¯ä»¥ç›´æ¥è®©ä»–çœ‹æœ¬ç¯‡åšå®¢äº†å“ˆå“ˆã€‚ ç¯å¢ƒå‡†å¤‡è¿™é‡Œä¸è®²è§£ SpringData JPA ä¸æ¡†æ¶çš„æ•´åˆï¼Œåªè®²è§£ JPA è¯­æ³•çš„ä½¿ç”¨ Entity å®ä½“ç±»1234567891011121314@Entity // è¡¨ç¤ºä¸ºä¸€ä¸ªå®ä½“ç±»@Table(\"employee\") // è¡¨åpublic class Employee &#123; @Id //ä¸»é”®æ ‡è¯†æ³¨è§£ @GeneratedValue // ä¸»é”®ç”Ÿæˆæ–¹å¼ private Integer id; private String name; private Integer age; //Getter/Setterçœç•¥&#125; Repository æ¥å£1234// ç»§æ‰¿ JpaRepository æ¥å£ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŸ¥è¯¢çš„å®ä½“ç±»ï¼Œç¬¬äºŒä¸ªä¸ºå®ä½“ç±»çš„ä¸»é”®æ•°æ®ç±»å‹public interface EmployeeRepository extends JpaRepository&lt;Employee, Integer&gt;&#123;&#125; æ’å…¥æµ‹è¯•æ•°æ®123456789@Testpublic void testAdd() throws Exception &#123; for (int i = 0; i &lt; 100; i++) &#123; Employee employee = new Employee(); employee.setAge(i); employee.setName(\"test\" + i); employeeRepository.save(employee); &#125;&#125; JPA æŸ¥è¯¢è¯­æ³•è®²è§£ä½¿ç”¨ JPQL è¿›è¡ŒæŸ¥è¯¢1234567891011121314151617181920212223242526272829303132333435363738394041// æ–°å¢employeeRepository.save(employee);// where name = ?1employeeRepository.findByName(\"test1\")// where name = ?1 and age = ?2employeeRepository.findByNameAndAge(\"test1\", 20);// where age between ?1 and ?2 ã€åŒ…å«å¤´å°¾ã€‘List&lt;Employee&gt; byAgeBetween = employeeRepository.findByAgeBetween(10, 16);// where age &lt; ?1List&lt;Employee&gt; list = employeeRepository.findByAgeLessThan(10);// where age &gt; ?1List&lt;Employee&gt; list = employeeRepository.findByAgeGreaterThan(90);// where name is null ã€ä¸åŒ…å«ä¸ºç©ºå­—ç¬¦ä¸²çš„æ•°æ®ã€‘List&lt;Employee&gt; list = employeeRepository.findByNameIsNull();// where name like \"test9%\" ä»¥test9ä¸ºå¼€å¤´çš„nameList&lt;Employee&gt; list = employeeRepository.findByNameLike(\"test9%\");æˆ–è€…List&lt;Employee&gt; employees = employeeRepository.findByNameStartingWith(\"test\")// where name like \"test_\" ä»¥testå¼€å¤´ï¼Œä¸”åé¢åªæ¨¡ç³ŠåŒ¹é…ä¸€ä½List&lt;Employee&gt; list2 = employeeRepository.findByNameLike(\"test_\");// where name like \"%6\" æ¨¡ç³ŠåŒ¹é…ä»¥6ç»“å°¾çš„List&lt;Employee&gt; employees = employeeRepository.findByNameEndingWith(6)// where name in (?1, ?2)List&lt;String&gt; names = Arrays.asList(\"test1\", \"test2\");List&lt;Employee&gt; employees = employeeRepository.findByNameIn(names);// where age &lt;&gt; ?1List&lt;Employee&gt; employees = employeeRepository.findByAgeNot(99);// where name = ?1 order by age desc List&lt;Employee&gt; findByNameOrderByAgeDesc(\"test\"); ä½¿ç”¨è‡ªå®šä¹‰ Sql ä»¥åŠ åŸç”Ÿ Sql æŸ¥è¯¢12345678910111213/** EmployeeRepository.java æ·»åŠ æ–¹æ³• */// æ ¹æ®å§“åä¸å¹´é¾„æŸ¥æ‰¾ï¼Œ[é€šè¿‡å ä½ç¬¦è·å–å‚æ•°å€¼]@Query(\"select o from Employee o where name = ?1 and age = ?2\")List&lt;Employee&gt; queryEmployeeByParams(String name, Integer age);// æ ¹æ®å§“åä¸å¹´é¾„æŸ¥æ‰¾ï¼Œ[é€šè¿‡å‘½åå‚æ•°è·å–å‚æ•°å€¼]ï¼Œå¿…é¡»ä½¿ç”¨ @Param æ³¨è§£@Query(\"select o from Employee o where name = :name and age = :age\")List&lt;Employee&gt; queryEmployeeByParams2(@Param(\"name\") String name, @Param(\"age\") Integer age);// åŸç”ŸSQLï¼Œä¸ä¸Šé¢ä¸åŒçš„æ˜¯ï¼Œä¸Šé¢ä½¿ç”¨çš„æ˜¯å¯¹è±¡åç§°ä»¥åŠå¯¹è±¡å±æ€§åç§°ï¼ŒNative SQLä½¿ç”¨æ•°æ®åº“è¡¨åä»¥åŠå­—æ®µå@Query(nativeQuery = true, value = \"select * from employee where name = :name and age = :age\")List&lt;Employee&gt; queryEmployeeByParams3(@Param(\"name\") String name, @Param(\"age\") Integer age); JPA æ›´æ–°æ“ä½œ12345/** éœ€è¦æ­é…ä½¿ç”¨ @Query ä¸ @Modifying å’Œ @Transactional æ³¨è§£ä½¿ç”¨*/@Modifying@Query(\"update Employee o set o.age = ?2 where o.id = ?1\")Integer updateAge(Integer id, Integer age); åœ¨ Service å±‚è°ƒç”¨1234567@Autowiredprivate EmployeeRepository employeeRepository;@Transactional // å¿…é¡»å¼€å¯äº‹åŠ¡public void update(Integer id, Integer age) &#123; employeeRepository.update(id, age);&#125; åˆ†é¡µæŸ¥è¯¢1234567891011121314151617181920212223242526// EmployeeRepository æ¥å£å®šä¹‰Page&lt;Employee&gt; findByNameStartingWith(String name, Pageable pageable);// æµ‹è¯•ç±» EmployeeRepositoryTest.java// æ™®é€šåˆ†é¡µæŸ¥è¯¢@Testpublic void testFindByNameStartingWith() &#123; // æ³¨æ„ page ä» 0 å¼€å§‹ Pageable request = new PageRequest(0, 10); Page&lt;Employee&gt; result = employeeRepository.findByNameStartingWith(\"test\", request); for (Employee employee : result.getContent()) &#123; System.out.println(employee); &#125;&#125;// å¸¦æ’åºæ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢@Testpublic void testFindByNameStartingWith() &#123; Sort.Order order = new Sort.Order(Sort.Direction.DESC, \"id\"); Sort sort = new Sort(order); Pageable request = new PageRequest(0, 10, sort); Page&lt;Employee&gt; result = employeeRepository.findByNameStartingWith(\"test\", request); for (Employee employee : result.getContent()) &#123; System.out.println(employee); &#125;&#125; åŠ¨æ€ SQL æŸ¥è¯¢åœ¨ Java å¼€å‘ä¸­ï¼ŒåŠ¨æ€ SQL æ˜¯å¿…ä¸å¯å°‘çš„ï¼ŒJPA ä¹Ÿå¯ä»¥å®ç°ï¼ŒRepository å¤šç»§æ‰¿ä¸€ä¸ªæ¥å£ JpaSpecificationExecutor å³å¯ã€‚123456789101112131415// ä¿®æ”¹ä¹‹å‰çš„ EmployeeRepository, ä½¿å…¶å¤šç»§æ‰¿ JpaSpecificationExecutor æ¥å£public interface EmployeeRepository extends JpaRepository&lt;Employee, Integer&gt;, JpaSpecificationExecutor&lt;Employee&gt;&#123; // ......&#125;Pageable request = new PageRequest(0, 10);Specification&lt;Employee&gt; specification = new Specification&lt;Employee&gt;() &#123;public Predicate toPredicate(Root&lt;Employee&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb) &#123; Path&lt;Integer&gt; path = root.get(&quot;age&quot;); return cb.gt(path, 50); &#125; &#125;;Page&lt;Employee&gt; all = employeeRepository.findAll(specification, request); åè®°è¿™é‡Œæ„Ÿè°¢ä¸€ä¸‹æ…•è¯¾ç½‘ï¼Œå¿«é€Ÿå…¥é—¨å¤šäºäº† imooc ä¸Šçš„è¯¾ç¨‹ã€‚ å‚è€ƒè¯¾ç¨‹ï¼š https://www.imooc.com/learn/821","tags":[{"name":"JPA","slug":"JPA","permalink":"http://nullpointer.pw/tags/JPA/"}]},{"title":"Macä¸‹VMwareFusionå®‰è£…CentOSå¹¶è®¾ç½®é™æ€IP","date":"2018-01-21T09:03:09.000Z","path":"Macä¸‹VMwareFusionå®‰è£…CentOSå¹¶è®¾ç½®é™æ€IP.html","text":"å‰è¨€MACä¸‹VMwareFusionå®‰è£…CentOSåŠè®¾ç½®å›ºå®šIPä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œå…³äºè™šæ‹Ÿæœºçš„å¿«é€Ÿå®‰è£…çš„æ•™ç¨‹ CentOSå¿«é€Ÿå®‰è£…ï¼Œå½“æ—¶æ˜¯å­¦ä¹ ä¸­ç”¨åˆ°äº† Linux ç¯å¢ƒï¼Œä¸ºäº†ä»¥åæ— éœ€é‡å¤è¿›è¡Œè™šæ‹Ÿæœºç¹æ‚é…ç½®ï¼Œæ¯”å¦‚é…ç½®ç½‘ç»œè¿æ¥å¤–ç½‘ï¼Œæ‰åˆ¶ä½œçš„é•œåƒã€‚ä¸ºäº†å¼€å‘è°ƒè¯•æ–¹ä¾¿ï¼Œé•œåƒè®¾ç½®ä¸ºäº†å›ºå®š IPï¼Œæ‰€ä»¥å¯¼å…¥è¯¥é•œåƒçš„æ—¶å€™ï¼Œéœ€è¦ç®€å•è®¾ç½®ä»¥ä¸‹å³å¯ è®¿é—®å¤–ç½‘ç¯å¢ƒã€‚å½“æ—¶ä½¿ç”¨çš„æ˜¯ Windows ç¯å¢ƒï¼Œå‰ä¸ä¹…å…¥æ‰‹äº† MBPï¼Œä¹Ÿéœ€è¦ç”¨åˆ°è™šæ‹Ÿæœºç¯å¢ƒï¼Œä½†æ˜¯ MAC ç¯å¢ƒä¸‹å¹¶æ²¡æœ‰ è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨,æ‰€ä»¥è®¾ç½®é™æ€ IP è´¹äº†å¥½ä¸€èˆ¬åŠŸå¤«ã€‚æœ¬æ–‡ä»‹ç»è™šæ‹Ÿæœºå¿«é€Ÿå¯¼å…¥é•œåƒï¼Œä¿®æ”¹é™æ€IPã€‚ ç¯å¢ƒå‡†å¤‡ VMware Fusion CentOS é•œåƒ(é“¾æ¥ï¼šhttp://pan.baidu.com/s/1nuKxhpf å¯†ç ï¼š8dt8) å¯¼å…¥è™šæ‹Ÿæœºé•œåƒä¸‹è½½é•œåƒåè§£å‹ï¼Œæ‰“å¼€ Vmware Fusion è½¯ä»¶ï¼Œé€‰æ‹©å¯¼å…¥ é€‰æ‹©é•œåƒæ–‡ä»¶ï¼Œé€‰æ‹© ovf æ–‡ä»¶åæ‰“å¼€ã€‚ å¯¼å…¥è¿‡ç¨‹ä¸å†èµ˜è¿°ã€‚ ä¸ºé™æ€IPåšå‡†å¤‡æ‰“å¼€ VMware Fusion è®¾ç½®ã€‚ è¿›å…¥ç½‘ç»œé€‰é¡¹å¡ï¼Œæ·»åŠ ä¸€ä¸ªç½‘å¡ã€‚ æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 123cd /Library/Preferences/VMware\\ Fusion/sudo vim networking çº¢è‰²åœˆå†…æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„åœ°æ–¹,ä¿®æ”¹å®Œä¹‹åä¿å­˜é€€å‡ºã€‚ å†ä¿®æ”¹å¦å¤–ä¸€ä¸ªæ–‡ä»¶ã€‚ 12cd /Library/Preferences/VMware\\ Fusion/vmnet2sudo vim nat.conf ä½¿ç½‘ç»œé…ç½®ç”Ÿæ•ˆé‡æ–°æ‰“å¼€VMwareçš„ç½‘ç»œé…ç½®ï¼Œä¸ºäº†ä½¿åˆšæ‰çš„ä¿®æ”¹ç”Ÿæ•ˆï¼Œæˆ‘ä»¬é‡æ–°è®¾ç½®ä¿å­˜ä¸€ä¸‹ã€‚æ­¥éª¤æ˜¯ï¼Œå…ˆå–æ¶ˆå‹¾é€‰å°† Mac ä¸»æœºè¿æ¥åˆ°è¯¥ç½‘ç»œ ç‚¹å‡»åº”ç”¨ï¼›å†å‹¾é€‰ä¸Š å°† Mac ä¸»æœºè¿æ¥åˆ°è¯¥ç½‘ç»œï¼Œç‚¹å‡»åº”ç”¨ã€‚ ä¿®æ”¹è™šæ‹Ÿæœºçš„é™æ€ IPæ‰“å¼€è™šæ‹Ÿæœº12è´¦å·: rootå¯†ç : 123456 ä¿®æ”¹ç¬¬ä¸€ä¸ªæ–‡ä»¶1vi /etc/sysconfig/network-scripts/ifcfg-eth0 ä¿®æ”¹ DEVICE ä¸º eth1;ä¿®æ”¹ IPADDR åœ°å€ä¸º 192.168.200.3 ~ 192.168.200.254 ä¹‹é—´çš„å€¼;ä¿®æ”¹ GATEWAY ä¸º nat.conf ä¸­é…ç½®çš„ ip åœ°å€ 192.168.200.2 ä¿®æ”¹å¦å¤–ä¸€ä¸ªæ–‡ä»¶1vi /etc/udev/rules.d/70-persistent-net.rules 12345æ³¨é‡Šæ‰ eth0 æ‰€åœ¨è¡Œï¼Œç»“æœæ˜¯# PCI device 0x8086:0x100f (e1000)#SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;00:0c:29:30:a4:b5&quot;, ATTR&#123;type&#125;==&quot;1&quot;, KERNEL==&quot;eth*&quot;, NAME=&quot;eth0&quot;# PCI device 0x8086:0x100f (e1000)SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;00:0c:29:cd:05:ea&quot;, ATTR&#123;type&#125;==&quot;1&quot;, KERNEL==&quot;eth*&quot;, NAME=&quot;eth1&quot; é‡å¯ è™šæ‹Ÿæœº 1reboot é‡å¯æˆåŠŸåï¼Œè¾“å…¥ ifconfig æç¤ºï¼š æ­¤æ—¶å·²ç»ä¹Ÿå¯ä»¥ ping é€šå¤–ç½‘äº†ï¼Œåœ¨ mac çš„ç»ˆç«¯ä¸­ä¹Ÿå¯ä»¥ ping é€šè™šæ‹Ÿæœºã€‚ åè®°ä¸ºäº†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè™šæ‹Ÿæœºç¯å¢ƒè¢«æŠ˜è…¾åï¼Œå¯ä»¥åšä¸€ä¸‹å¿«ç…§ã€‚åˆ°æ—¶å€™å¯ä»¥ç›´æ¥æ¢å¤åˆ°æ­¤å¿«ç…§ï¼Œå…å»å†æ¬¡å®‰è£…çš„æ­¥éª¤ã€‚ å‚è€ƒ http://blog.csdn.net/zhishengqianjun/article/details/77046796","tags":[{"name":"VMware Fusion","slug":"VMware-Fusion","permalink":"http://nullpointer.pw/tags/VMware-Fusion/"},{"name":"é™æ€IP","slug":"é™æ€IP","permalink":"http://nullpointer.pw/tags/é™æ€IP/"},{"name":"mac","slug":"mac","permalink":"http://nullpointer.pw/tags/mac/"}]},{"title":"åŸºäºå¾®ä¿¡äº‹ä»¶äºŒç»´ç æ¨å¹¿","date":"2018-01-06T11:53:36.000Z","path":"åŸºäºå¾®ä¿¡äº‹ä»¶äºŒç»´ç æ¨å¹¿.html","text":"å‰è¨€ä¹‹å‰å†™äº†ä¸€ç¯‡å…³äºæ¨å¹¿ç³»ç»Ÿè®¾è®¡çš„åšå®¢ï¼Œåœ¨é‚£ç¯‡åšå®¢ä¸­ä»‹ç»äº†ç»Ÿä¸€çš„æ¨å¹¿åœ°å€ç”Ÿæˆçš„æ–¹æ³•ï¼Œåªä¸¾ä¾‹è¯´æ˜äº†ä¸€ç§æ¨å¹¿çš„æ–¹å¼ï¼Œæœ¬ç¯‡åšå®¢è®²è§£å¦å¤–ä¸€ç§æ¨å¹¿æ–¹å¼ï¼ŒåŸºäºå¾®ä¿¡äº‹ä»¶äºŒç»´ç çš„æ–¹å¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œäº‹ä»¶äºŒç»´ç åªæœ‰æœåŠ¡å·æœ‰æ­¤æ¥å£æƒé™ï¼Œè®¢é˜…å·æ˜¯æ²¡æœ‰è¯¥æ¥å£æƒé™çš„ï¼Œå½“ç„¶å¦‚æœæ²¡æœ‰æœåŠ¡å·çš„è¯ï¼Œæƒ³å­¦ä¹ ä¸€ä¸‹æ¥å£çš„ä½¿ç”¨ï¼Œå¾®ä¿¡å®˜æ–¹æä¾›çš„æµ‹è¯•å·å¯ä»¥ä½¿ç”¨è¯¥æ¥å£ã€‚ è°ˆè°ˆäº‹ä»¶äºŒç»´ç äºŒç»´ç çš„ä¾¿åˆ©æ€§æ¯‹åº¸ç½®ç–‘ï¼Œå°¤å…¶æ˜¯åœ¨å¾®ä¿¡ä¸­å¯ä»¥é€šè¿‡é•¿æŒ‰è¯†åˆ«çš„æ–¹å¼è¯†åˆ«äºŒç»´ç ï¼Œè®©äºŒç»´ç çš„ä½¿ç”¨æ›´åŠ ä¾¿æ·é¢‘ç¹ã€‚å¾®ä¿¡æ¨å‡ºçš„äº‹ä»¶äºŒç»´ç å¤§å¤§æé«˜äºŒç»´ç çš„äº¤äº’èƒ½åŠ›ï¼Œä»¥ä¸‹å†…å®¹æ‘˜è‡ªå®˜ç½‘ä»‹ç»ã€‚ ä¸ºäº†æ»¡è¶³ç”¨æˆ·æ¸ é“æ¨å¹¿åˆ†æå’Œç”¨æˆ·å¸å·ç»‘å®šç­‰åœºæ™¯çš„éœ€è¦ï¼Œå…¬ä¼—å¹³å°æä¾›äº†ç”Ÿæˆå¸¦å‚æ•°äºŒç»´ç çš„æ¥å£ã€‚ä½¿ç”¨è¯¥æ¥å£å¯ä»¥è·å¾—å¤šä¸ªå¸¦ä¸åŒåœºæ™¯å€¼çš„äºŒç»´ç ï¼Œç”¨æˆ·æ‰«æåï¼Œå…¬ä¼—å·å¯ä»¥æ¥æ”¶åˆ°äº‹ä»¶æ¨é€ã€‚ äº‹ä»¶äºŒç»´ç å¯ä»¥äº§ç”Ÿäº‹ä»¶ï¼Œå¹¶ä¸”äºŒç»´ç æ˜¯å¯ä»¥æºå¸¦å‚æ•°çš„ï¼Œè¿™å°±å¯ä»¥ç”¨ä½œæ¨å¹¿ã€‚æ¯”å¦‚æˆ‘å¸ï¼Œé’ˆå¯¹æŸä¸€æœ¬ä¹¦çš„æŸä¸€ç« èŠ‚ç”Ÿæˆäº‹ä»¶äºŒç»´ç ï¼Œç”¨æˆ·æ‰«æäºŒç»´ç åï¼Œå¦‚æœæœªå…³æ³¨å…¬ä¼—å·ï¼Œä¼šè¿›å…¥å…³æ³¨å…¬ä¼—å·é¡µé¢ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œå…³æ³¨ï¼Œå…³æ³¨åï¼Œåå°æ¥æ”¶åˆ°å¾®ä¿¡çš„äº‹ä»¶æ¨é€ï¼Œå¾—åˆ°äº†å­˜å‚¨çš„ä¹¦ä¸ç« èŠ‚çš„ä¿¡æ¯ï¼Œåˆ™å¯ä»¥ç›´æ¥å‘é€æ¶ˆæ¯ï¼Œå¼•å¯¼ç”¨æˆ·è¿›å…¥æ¨å¹¿çš„ç« èŠ‚é¡µé¢ï¼Œä»¥ä¸‹ä¸ºæˆ‘å¸å¾®ä¿¡æ¨å¹¿çš„æµç¨‹å›¾ã€‚ åˆ›å»ºäº‹ä»¶äºŒç»´ç ä¸ºäº†ä¾¿äºæ¼”ç¤ºï¼Œæˆ‘çš„é¡¹ç›®æ˜¯åŸºäº SpringBoot æ­å»ºã€‚æœ¬é¡¹ç›®ä½¿ç”¨çš„æ˜¯å¾®ä¿¡æµ‹è¯•å·ï¼Œå¯ä»¥åœ¨æ­¤å¤„è¿›è¡Œç”³è¯· å¾®ä¿¡æµ‹è¯•å·ã€‚appID ä¸ appsecret åœ¨å¾®ä¿¡æµ‹è¯•å·ä¸­å¯ä»¥å¾—åˆ°ã€‚ ä¹‹å‰åœ¨å…¬å¸å†™è¿™å¥—æ¨å¹¿ç³»ç»Ÿçš„æ—¶å€™ï¼Œéƒ½æ˜¯è‡ªå·±çœ‹å¾®ä¿¡å…¬ä¼—å¹³å°æ–‡æ¡£ï¼Œè‡ªå·±å†™çš„åŸºç¡€ä»£ç ï¼Œæ¯”å¦‚å°è£…è¯·æ±‚å‚æ•°ï¼Œå‚æ•°æ‹¼æ¥ï¼Œæœ€è¿‘åœ¨ Github ä¸Šå‘ç°äº†ä¸€ä¸ªå°è£…å¾—ä¸é”™çš„ å¾®ä¿¡å¼€å‘ SDKï¼Œå¯¹å¾®ä¿¡çš„å¼€æ”¾å¹³å°ã€å…¬ä¼—å¹³å°ã€å°ç¨‹åºéƒ½æœ‰å¯¹åº”çš„å­é¡¹ç›®ã€‚ç§‰ç€ä¸é‡å¤é€ è½®å­çš„åŸåˆ™ï¼Œæˆ‘ä»¬å¼•å…¥è¿™å¥— SDKï¼Œä¹Ÿå°±æ— éœ€è‡ªå·±å†è¿›è¡Œå°è£…äº†ï¼Œè¿˜å¯ä»¥å­¦ä¹ å°è£…çš„æºä»£ç ã€‚ é¦–å…ˆæ·»åŠ  Maven ä¾èµ–ï¼Œè¿™é‡Œå¼•å…¥æ“ä½œå¾®ä¿¡å…¬ä¼—å·çš„ SDK 12345&lt;dependency&gt; &lt;groupId&gt;com.github.binarywang&lt;/groupId&gt; &lt;artifactId&gt;weixin-java-mp&lt;/artifactId&gt; &lt;version&gt;2.8.0&lt;/version&gt;&lt;/dependency&gt; ç„¶åé…ç½®å¾®ä¿¡å…¬ä¼—å¹³å°å‚æ•° appID ä¸ appsecretï¼Œæ–°å»ºå¾®ä¿¡å¹³å°é…ç½®ä¿¡æ¯ Properties 1234567891011121314import lombok.Data;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.stereotype.Component;@Data@Component@ConfigurationProperties(prefix = \"wechat\")public class WechatProperties &#123; private String appId; private String seecret; private String token;&#125; application.yml ä¸­æ·»åŠ  appID ä¸ appsecret 1234wechat: appId: wx1234567890 seecret: c912345678900987654321 token: QAnEo9760zDywWMvTKCxx åˆ›å»ºå¾®ä¿¡é…ç½®ç±»ï¼Œå£°æ˜ä¸¤ä¸ª Beanã€‚ 12345678910111213141516171819202122@Componentpublic class WeChatConfig &#123; @Resource private WechatProperties wechatProperties; @Bean public WxMpService wxMpService() &#123; WxMpService wxMpService = new WxMpServiceImpl(); wxMpService.setWxMpConfigStorage(wxMpConfigStorage()); return wxMpService; &#125; @Bean public WxMpConfigStorage wxMpConfigStorage() &#123; WxMpInMemoryConfigStorage wxMpConfigStorage = new WxMpInMemoryConfigStorage(); wxMpConfigStorage.setAppId(wechatProperties.getAppId()); wxMpConfigStorage.setSecret(wechatProperties.getSeecret()); wxMpConfigStorage.setToken(wechatProperties.getToken()); return wxMpConfigStorage; &#125;&#125; åˆ›å»º WechaptService ä»¥åŠå…¶å®ç°ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647@Servicepublic class WechapServiceImpl implements WechatService &#123; @Resource private WxMpService wxMpService; /** * åˆ›å»ºæ°¸ä¹…äº‹ä»¶äºŒç»´ç  * @param param é™„åŠ çš„å‚æ•° * @param needShortUrl æ˜¯å¦è½¬æ¢ä¸ºçŸ­é“¾æ¥ * @return å¾®ä¿¡äºŒç»´ç åœ°å€ */ @Override public String createQrCode(String param, boolean needShortUrl) &#123; WxMpQrcodeService qrService = wxMpService.getQrcodeService(); try &#123; WxMpQrCodeTicket ticket = qrService.qrCodeCreateLastTicket(param); String url = qrService.qrCodePictureUrl(ticket.getTicket(), needShortUrl); return url; &#125; catch (WxErrorException e) &#123; e.printStackTrace(); &#125; return null; &#125; /** * åˆ›å»ºä¸´æ—¶äº‹ä»¶äºŒç»´ç  * @param param é™„åŠ çš„å‚æ•° * @param expireSeconds æœ‰æ•ˆæ—¶é—´ å•ä½ä¸ºç§’ï¼Œæœ€å¤§2592000ï¼ˆå³30å¤©ï¼‰ * @param needShortUrl æ˜¯å¦è½¬æ¢ä¸ºçŸ­é“¾æ¥ * @return å¾®ä¿¡äºŒç»´ç åœ°å€ */ @Override public String createTempQrCode(String param, Integer expireSeconds, boolean needShortUrl) &#123; WxMpQrcodeService qrService = wxMpService.getQrcodeService(); try &#123; WxMpQrCodeTicket ticket = qrService.qrCodeCreateTmpTicket(param, expireSeconds); String url = qrService.qrCodePictureUrl(ticket.getTicket(), needShortUrl); return url; &#125; catch (WxErrorException e) &#123; e.printStackTrace(); &#125; return null; &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œç®€å•çš„å‡ è¡Œè¯­å¥å°±å¯ä»¥ç”Ÿæˆäº‹ä»¶äºŒç»´ç äº†ã€‚è¿™é‡Œçš„å‚æ•° param å°±æ˜¯é™„åŠ åˆ°äºŒç»´ç ä¸­çš„å‚æ•°ï¼ˆå¯ä»¥æ”¾å…¥æ¨å¹¿ç›¸å…³å‚æ•°ï¼Œå¦‚æ¨å¹¿é“¾æ¥IDï¼‰ï¼Œç”¨æˆ·æ‰«æåï¼Œå¾®ä¿¡æœåŠ¡å™¨ä¼šæ¨é€ç›¸åº”çš„äº‹ä»¶ï¼Œå¯ä»¥åœ¨äº‹ä»¶å‚æ•°ä¸­å¯ä»¥è·å¾— paramã€‚ åˆ›å»º Spring Junit æµ‹è¯•è¯¥æ–¹æ³•ï¼Œç”Ÿæˆäº‹ä»¶äºŒç»´ç  123456789101112@RunWith(SpringRunner.class)@SpringBootTestpublic class WechapServiceImplTest &#123; @Resource private WechatService wechatService; @Test public void createQrCode() throws Exception &#123; String url = wechatService.createQrCode(\"hello wechat\", true); System.out.println(url); &#125;&#125; æ‰“å¼€ç”Ÿæˆçš„äºŒç»´ç é“¾æ¥ï¼ŒçŸ­é“¾æ¥ URL æ ¼å¼å¦‚ï¼š https://w.url.cn/s/xxxxx ä½¿ç”¨å¾®ä¿¡è¿›è¡Œæ‰«æï¼Œä¼šè¿›å…¥æç¤ºå…³æ³¨çš„é¡µé¢ã€‚ æ¥æ”¶å¾®ä¿¡äº‹ä»¶æ¨é€å‚æ•°äºŒç»´ç å·²ç»ç”Ÿæˆäº†ï¼Œä½†æ˜¯ä½ å‘ç°æ‰«æå…³æ³¨ä¹‹åï¼Œç¥é©¬äº‹æƒ…ä¹Ÿæ²¡æœ‰å‘ç”Ÿï¼Œè¯´å¥½çš„å‘é€æ¶ˆæ¯å‘¢ï¼è¿™æ˜¯å› ä¸ºä½ æ²¡æœ‰æ¥æ”¶å¾®ä¿¡çš„æ‰«ç å…³æ³¨äº‹ä»¶æ¨é€å’Œå¯¹å…¶è¿›è¡Œå¤„ç†å‘¢ã€‚ åˆ›å»º Controller ç”¨äºå¾®ä¿¡æ¥å£è¯·æ±‚æ ¡éªŒï¼Œç„¶åå¯åŠ¨é¡¹ç›® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788@Controller@RequestMapping(value = \"/wechat/auth\")public class WeChatController &#123; @Autowired private WxMpService wxService; @Autowired private WxMpMessageRouter router; @GetMapping(produces = \"text/plain;charset=utf-8\") public void authGet( @RequestParam(name = \"signature\", required = false) String signature, @RequestParam(name = \"timestamp\", required = false) String timestamp, @RequestParam(name = \"nonce\", required = false) String nonce, @RequestParam(name = \"echostr\", required = false) String echostr, HttpServletResponse response) &#123; if (StringUtils.isAnyBlank(signature, timestamp, nonce, echostr)) &#123; throw new IllegalArgumentException(\"è¯·æ±‚å‚æ•°éæ³•ï¼Œè¯·æ ¸å®!\"); &#125; if (this.wxService.checkSignature(timestamp, nonce, signature)) &#123; try &#123; response.getWriter().print(echostr); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; else &#123; return; &#125; System.out.println(1111); &#125; @PostMapping(produces = \"application/xml; charset=UTF-8\") @ResponseBody public String post(@RequestBody String requestBody, @RequestParam(\"signature\") String signature, @RequestParam(\"timestamp\") String timestamp, @RequestParam(\"nonce\") String nonce, @RequestParam(name = \"encrypt_type\", required = false) String encType, @RequestParam(name = \"msg_signature\", required = false) String msgSignature) &#123; if (!this.wxService.checkSignature(timestamp, nonce, signature)) &#123; throw new IllegalArgumentException(\"éæ³•è¯·æ±‚ï¼Œå¯èƒ½å±äºä¼ªé€ çš„è¯·æ±‚ï¼\"); &#125; String out = null; if (encType == null) &#123; // æ˜æ–‡ä¼ è¾“çš„æ¶ˆæ¯ WxMpXmlMessage inMessage = WxMpXmlMessage.fromXml(requestBody); WxMpXmlOutMessage outMessage = this.route(inMessage); if (outMessage == null) &#123; return \"\"; &#125; out = outMessage.toXml(); &#125; else if (\"aes\".equals(encType)) &#123; // aesåŠ å¯†çš„æ¶ˆæ¯ /*WxMpXmlMessage inMessage = WxMpXmlMessage.fromEncryptedXml( requestBody, this.wxService.getWxMpConfigStorage(), timestamp, nonce, msgSignature); WxMpXmlOutMessage outMessage = this.route(inMessage); if (outMessage == null) &#123; return \"\"; &#125; out = outMessage .toEncryptedXml(this.wxService.getWxMpConfigStorage());*/ &#125; return out; &#125; private WxMpXmlOutMessage route(WxMpXmlMessage message) &#123; try &#123; return this.router.route(message); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return null; &#125;&#125; è®¾ç½®å¾®ä¿¡æ¶ˆæ¯æ¨é€æ¥å£ï¼Œç”¨äºæ¥æ”¶å¾®ä¿¡æ¨é€çš„è¯·æ±‚ï¼Œè¿™é‡Œéœ€è¦å¡«å†™å¤–ç½‘åŸŸåï¼Œå¦‚æœä½ æœ‰è‡ªå·±çš„æœåŠ¡å™¨å’ŒåŸŸåï¼Œå¯ä»¥ç›´æ¥å¡«å…¥ï¼›å¦‚æœä½ æ²¡æœ‰ï¼Œå¯ä»¥ä½¿ç”¨ ngrok è¿›è¡Œå†…ç½‘ç©¿é€ï¼Œå¾—åˆ°ä¸€ä¸ªå¤–ç½‘åŸŸåã€‚ æ¯”å¦‚æˆ‘çš„å¾®ä¿¡è¯·æ±‚æ ¡éªŒåœ°å€ä¸º 127.0.0.1:8080/wechat/authï¼Œ é€šè¿‡å†…ç½‘æ˜ å°„è½¬å‘åå¾—åˆ°çš„å¤–ç½‘åœ°å€ä¸º http://vcmq.free.ngrok.cc/wechat/authï¼Œå¡«å†™è¿™ä¸ªåŸŸåï¼Œ Token ç”¨äºæ ¡éªŒæœåŠ¡å™¨ï¼Œä¹‹å‰çš„ yml æ–‡ä»¶ä¸­å·²æŒ‡å®šäº† token çš„å€¼ï¼Œå¡«å†™è¯¥å€¼å³å¯ï¼Œç‚¹å‡»ç¡®è®¤ã€‚ å¾®ä¿¡æ‰«æäº‹ä»¶äºŒç»´ç ï¼Œå¾®ä¿¡æœåŠ¡å™¨æ¨é€è¯·æ±‚åˆ° post æ–¹æ³•ï¼Œè°ƒç”¨ route æ–¹æ³•ï¼Œè¿›è¡Œå¤„ç†ã€‚äº‹ä»¶äºŒç»´ç æ–‡æ¡£åœ°å€ äº‹ä»¶KEYå€¼ï¼Œqrscene_ä¸ºå‰ç¼€ï¼Œåé¢ä¸ºäºŒç»´ç çš„å‚æ•°å€¼ã€‚ å¯ä»¥é’ˆå¯¹è¿™ç§æƒ…å†µçš„è¿›è¡Œå¤„ç†ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263@Componentpublic class SubscribeHandler extends AbstractHandler &#123; @Override public WxMpXmlOutMessage handle(WxMpXmlMessage wxMessage, Map&lt;String, Object&gt; context, WxMpService weixinService, WxSessionManager sessionManager) throws WxErrorException &#123; this.logger.info(\"æ–°å…³æ³¨ç”¨æˆ· OPENID: \" + wxMessage.getFromUser()); /*// è·å–å¾®ä¿¡ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ WxMpUser userWxInfo = weixinService.getUserService() .userInfo(wxMessage.getFromUser(), null); if (userWxInfo != null) &#123; // TODO å¯ä»¥æ·»åŠ å…³æ³¨ç”¨æˆ·åˆ°æœ¬åœ° &#125;*/ WxMpXmlOutMessage responseResult = null; try &#123; responseResult = handleSpecial(wxMessage); &#125; catch (Exception e) &#123; this.logger.error(e.getMessage(), e); &#125; if (responseResult != null) &#123; return responseResult; &#125; try &#123; return new TextBuilder().build(\"æ„Ÿè°¢å…³æ³¨\", wxMessage, weixinService); &#125; catch (Exception e) &#123; this.logger.error(e.getMessage(), e); &#125; return null; &#125; /** * å¤„ç†ç‰¹æ®Šè¯·æ±‚ï¼Œæ¯”å¦‚å¦‚æœæ˜¯æ‰«ç è¿›æ¥çš„ï¼Œå¯ä»¥åšç›¸åº”å¤„ç† */ private WxMpXmlOutMessage handleSpecial(WxMpXmlMessage wxMessage) throws Exception &#123; /* å¾®ä¿¡è¿”å›æ•°æ®ç¤ºä¾‹ &#123; \"createTime\": 1515235853, \"event\": \"subscribe\", \"eventKey\": \"qrscene_hello wechat\", \"fromUser\": \"onbpEv3umpi7ihx381D-vpw1SEwE\", \"msgType\": \"event\", \"ticket\": \"gQA\", \"toUser\": \"gh_96fd4ea38axx\" &#125;*/ // å¦‚æœæ˜¯æ‰«æ if (wxMessage.getEventKey().startsWith(\"qrscene_\")) &#123; // åœ¨æ­¤å¤„è¿›è¡Œç»‘å®šæ“ä½œ System.out.println(); &#125; System.out.println(JSONObject.toJSONString(wxMessage)); return null; &#125;&#125; èµ„æºä¸‹è½½ç¤ºä¾‹å·¥ç¨‹ä¸‹è½½ å‚è€ƒ https://github.com/Wechat-Group/weixin-java-tools/blob/master/demo.md","tags":[{"name":"æ¨å¹¿ç³»ç»Ÿ","slug":"æ¨å¹¿ç³»ç»Ÿ","permalink":"http://nullpointer.pw/tags/æ¨å¹¿ç³»ç»Ÿ/"},{"name":"æ¨å¹¿","slug":"æ¨å¹¿","permalink":"http://nullpointer.pw/tags/æ¨å¹¿/"}]},{"title":"2017å¹´ç»ˆæ€»ç»“","date":"2017-12-30T10:02:57.000Z","path":"2017å¹´ç»ˆæ€»ç»“.html","text":"å‰è¨€ä¸€å¹´æ—¶é—´å€ç„¶è€Œé€ï¼Œä»Šæ—¥å·²æ˜¯å¹´ç»ˆå²å°¾çŸ£ï¼ æ€»æ˜¯æ„Ÿè§‰ä»Šå¹´è¿‡å¾—å¤ªå¿«äº†ï¼Œå¾ˆå¤šæ¬¡ä¸‹ç­çš„æ—¶å€™ï¼ŒåŒäº‹è¯´ï¼šâ€œæ˜å¤©å‘¨äº”äº†â€ï¼Œè€Œæˆ‘çš„ååº”å°±æ˜¯ï¼šâ€œè¯¶ï¼Ÿåˆè¦æ”¾å‡äº†å—ï¼Ÿæˆ‘æ€ä¹ˆæ„Ÿè§‰å‰å¤©æ‰ä¸Šç­çš„å•ŠğŸ˜‚â€ã€‚ä»¥å‰è¿˜åœ¨ä¸Šå­¦çš„æ—¶å€™ï¼Œæ€»æ˜¯æ„Ÿå¹ï¼Œè¿™ä¸€å¤©å¤©ä¸ºä½•å¦‚æ­¤æ¼«é•¿å‘¢ï¼éšç€å¹´é¾„çš„å¢é•¿ï¼Œä»¿ä½›æ—¶é—´çš„æµé€Ÿä¹ŸåŒæ—¶åŠ å¿«äº†ä¸€èˆ¬ï¼Œæ¯å¤©æ€»æ˜¯è§‰å¾—æ˜¯åœ¨å’Œæ—¶é—´èµ›è·‘ï¼Œè®©æˆ‘æœ‰äº›ç„¦è™‘ã€‚ ä»Šå¹´è¿‡çš„è®©æˆ‘æ„Ÿè§‰å¾ˆå¿«ï¼Œä½†æ˜¯è§‰å¾—æ¯”ä»¥å‰å……å®ï¼Œå› ä¸ºåšåˆ°çš„äº‹æƒ…æ¯”ä»¥å‰å¤šå¾ˆå¤šã€‚ 2017 æˆ‘åšäº†å“ªäº›äº‹ è®°å½• 2017 æ•´å¹´æ”¶æ”¯ä» 2017 å¹´å¼€å§‹ï¼Œæ¯”è¾ƒè®¤çœŸçš„è®°å½•äº†è‡ªå·±çš„æ—¥å¸¸å¼€æ”¯æƒ…å†µï¼Œè®°è´¦ APP æ˜¾ç¤ºå·²ç»åšæŒ è®°è´¦ 575 å¤©äº†ã€‚æˆ‘ä¸ªäººè®°è´¦å°±æ˜¯ä¸ºäº†é˜²æ­¢è‡ªå·±è¿‡åº¦æ¶ˆè´¹ï¼Œæ¯•ç«Ÿç§»åŠ¨æ”¯ä»˜åœ¨ä¸­å›½è¿™ä¹ˆå‘è¾¾ï¼Œé’±å·²ç»å˜æˆäº†ä¸€ä¸²æ•°å­—ï¼Œä¸æ³¨æ„å°±å…¨èŠ±å…‰äº†ã€‚ä¸Šä¸ªæœˆä¹°äº†ä¸€å° MBPï¼Œç”¨äºæ—¥å¸¸å­¦ä¹ ï¼Œä¹‹å‰çš„æ—§ç”µè„‘å·²ç»å¸¦ä¸åŠ¨ IDE äº†ï¼Œç´¢æ€§æ¢äº†ï¼ŒçœŸçš„æ˜¯è¡€è´µï¼Œä¸è¿‡å†™ä»£ç çœŸçˆ½ï¼æœ‰çš„æ”¯å‡ºå°±æ˜¯æ— æ³•é¿å…ï¼Œèƒ½åšçš„å°±æ˜¯å‡å°‘ä¸å¿…è¦çš„æ”¯å‡ºï¼›è®°è´¦è¿™ä»¶äº‹æƒ…ä¸Šï¼Œåšçš„ä¸å¤ªå¥½çš„æ˜¯è™½ç„¶è®°å½•çš„æ¯”è¾ƒè¯¦å°½ï¼Œä½†æ˜¯ç¼ºå°‘æ€»ç»“ï¼›æ¥å¹´éœ€è¦åšé˜¶æ®µæ€§çš„æ€»ç»“ï¼Œæ¯”å¦‚æ¯ä¸ªæœˆæ€»ç»“ä¸€æ¬¡ï¼Œæ‰¾å‡ºä¸å¿…è¦æ”¯å‡ºï¼Œä¸‹æ¬¡å°½é‡é¿å…ï¼ŒåŠªåŠ›å®è¡Œâ€œå¼€æºèŠ‚æµâ€ã€‚ å¼€å§‹åŸºé‡‘å®šæŠ•å¹´åˆçš„æ—¶å€™ï¼Œçœ‹äº†ä¸€äº›ç†è´¢çš„å…¥é—¨ä¹¦ç±ï¼ŒåŸºæœ¬çš„ç†è´¢æŠ€èƒ½è¿˜æ˜¯éœ€è¦æŒæ¡çš„ï¼Œäºæ˜¯ä»å››æœˆä»½å¼€å§‹èµ°ä¸Šäº†å…»åŸºä¹‹è·¯ï¼Œç›®å‰ä¸ºæ­¢åªå®šæŠ•äº†ä¸€åªè‚¡åŸºï¼Œæ”¶ç›Šå°šå¯ï¼Œåšçš„ä¸å¤ªå¥½çš„åœ°æ–¹å°±æ˜¯æŠŠé¸¡è›‹éƒ½æ”¾åœ¨äº†åŒä¸€ä¸ªç¯®å­é‡Œï¼Œæ˜å¹´è¦ç€æ‰‹äºåˆ†æ•£æŠ•èµ„ã€‚ è®°å½• 2017 æ•´å¹´æ—¶é—´å»å¹´çœ‹äº†ã€Šå¥‡ç‰¹çš„ä¸€ç”Ÿã€‹è¿™æœ¬ä¹¦ï¼Œæ„Ÿè§‰æ—¶é—´ä¸å¤Ÿç”¨çš„æˆ‘ï¼Œå°è¯•å­¦ä¹  æŸ³æ¯”æ­‡å¤« çš„æ—¶é—´ç»Ÿè®¡æ³•ï¼Œè®°å½•è‡ªå·±æ¯å¤©çš„æ—¶é—´æ¸…å•ï¼Œç”¨çš„æ˜¯ IOS ä¸Šçš„ APPï¼šã€Œæ—¶é—´å—ã€ é€šè¿‡è½¯ä»¶çš„ç»Ÿè®¡åŠŸèƒ½ï¼Œæ¯”è¾ƒç›´è§‚äº†åæ˜ äº†æˆ‘çš„æ—¶é—´éƒ½å»å“ªå„¿äº†ã€‚è‡ªæˆ‘æ„Ÿè§‰æ¯”å¾€å¹´ç”¨åœ¨å­¦ä¹ ä¸Šçš„æ—¶é—´è¦å¤šå¾ˆå¤šï¼Œä½†æ˜¯é¢„æ–™ä¸åŠçš„æ˜¯æˆ‘åœ¨ç©ï¼ˆæ¸¸æˆã€åŠ¨æ¼«ã€å‡ºå¤–æ¸¸ç©ç­‰èŠ±è´¹çš„æ—¶é—´ï¼‰ä¸Šçš„æŠ•å…¥æ—¶é—´å’Œè¹‰è·çš„æ—¶é—´ï¼ˆå¦‚æ¼«æ— ç›®çš„åœ°ä¸Šç½‘æµè§ˆã€åšæ— ä»»ä½•æ„ä¹‰äº‹æƒ…çš„æ—¶é—´ï¼‰ä¹‹å’Œï¼Œç«Ÿç„¶ç‹‚ç”©å­¦ä¹ æ—¶é—´å‡ æ¡è¡—ğŸ˜°ï¼Œè¯´æ˜è‡ªå·±å¯¹äºæ—¶é—´çš„åˆ©ç”¨è¿˜æ˜¯å¤ªä½å¤ªä½ã€‚æœ€è®©æˆ‘éœ‡æƒŠçš„æ˜¯ç”¨äºäº¤é€š(åè½¦ï¼Œæ­¥è¡Œï¼Œç­‰è½¦ç­‰)çš„æ—¶é—´ï¼Œå±…ç„¶è¾¾åˆ°äº†è¿‘ 850 å°æ—¶ï¼ä¸€å¹´åäºŒä¸ªæœˆ,å…¶ä¸­çš„ä¸€ä¸ªæœˆå…¨æ˜¯åœ¨è½¦ä¸Šåº¦è¿‡ï¼æ…æ€ææï¼æŸ³æ¯”æ­‡å¤«åœ¨æ¯å¤©æ¯ä¸ªå‘¨æœ«æ¯ä¸ªæœˆæ¯ä¸ªå­£åº¦æ¯å¹´ä»–éƒ½ä¼šæ±‡æ€»ç»Ÿè®¡è‡ªå·±çš„æ—¶é—´æ”¯å‡ºï¼Œæ ¸ç®—æœ‰æ•ˆæ—¶é—´å¹¶åŠ ä»¥æ€»ç»“ï¼Œè¿™ä¸€ç‚¹æˆ‘ç¡®å®æ˜¯æ²¡åšåˆ°ä»–è¿™ä¹ˆæè‡´ï¼Œä¹Ÿæ˜¯è‡ªå·±éœ€è¦è¿›è¡Œæ”¹è¿›çš„åœ°æ–¹ï¼Œæ¯”å¦‚ä»¥åæ¯ä¸ªæœˆæ€»ç»“ä¸€æ¬¡æ—¶é—´çš„æ¶ˆè´¹ï¼Œçœ‹çœ‹è‡ªå·±æœ‰æ²¡æœ‰åˆ©ç”¨å¥½è¿™ä¸ªæœˆã€‚ å¼€å§‹æ—©èµ·åœ¨è®°å½•äº†åŠå¹´çš„æ—¶é—´æ¶ˆè´¹åï¼Œçœ‹äº†ç»Ÿè®¡åï¼Œæ·±è§‰æ—¶é—´çœŸçš„ä¸å¤Ÿç”¨ï¼Œäºæ˜¯ä»å…­æœˆä»½å¼€å§‹æ—©èµ·ï¼Œå·¥ä½œæ—¥åŸºæœ¬æ¯å¤© 5 ç‚¹èµ·åºŠã€‚ä¸è¶³çš„åœ°æ–¹å°±æ˜¯æ—©èµ·åï¼Œåˆ°7ç‚¹æ´—æ¼±åƒé¥­å»ä¸Šç­ä¹‹å‰çš„è¿™æ®µæ—¶é—´ï¼Œæ—¶é—´çš„åˆ©ç”¨ä¸æ˜¯å¾ˆæœ‰æ•ˆç‡ï¼Œè¿˜æœ‰å°±æ˜¯å‘¨æœ«æœ‰æ—¶å€™å˜å¾—å¾ˆæ‡’ï¼Œç»å¸¸å¿«æ‹–åˆ° 8 ç‚¹å¤šæ‰èµ·åºŠğŸ˜“ï¼Œæ˜å¹´åŠªåŠ›ç»™è‡ªå·±æ‰¾äº‹æƒ…ï¼Œæé«˜æ—¶é—´çš„åˆ©ç”¨æ•ˆç‡ï¼Œå‘¨æœ«ç£ä¿ƒè‡ªå·±æ—©èµ·ã€‚ å¼€å§‹è®¤çœŸå¯¹å¾…åšå®¢å…¶å®ä» 2016 å¹´ï¼Œä¾¿å¼€å§‹ç”¨ Hexo æ­å»ºäº†åšå®¢ï¼Œå¹¶å¼€å§‹å†™åšå®¢ï¼Œä½†æ˜¯å½“æ—¶åªæ˜¯å¥½å¥‡å¿ƒçš„é©±ä½¿ï¼Œéšä¾¿å†™å†™è§‰å¾—æœ‰è¶£ï¼Œæ‰€ä»¥å†™çš„å¾ˆæ°´ï¼Œä½†æ˜¯ä» 2017 å¹´å¼€å§‹ï¼Œå°±çº¦æŸè‡ªå·±è¦è®¤çœŸç‚¹å†™ï¼Œå¯¹è‡ªå·±å†™åšå®¢ä»˜å‡ºçš„æ—¶é—´è¿›è¡Œè´Ÿè´£ã€‚æˆ‘è®¤ä¸ºå¯¹äºåšæŠ€æœ¯çš„äººè€Œè¨€ï¼Œå†™ä¸å†™åšå®¢æ˜¯ä¸¤ç§äººï¼Œå†™çš„åšå®¢å¥½ä¸å¥½ä¹Ÿæ˜¯ä¸¤ç§äººã€‚ä¸è¶³ä¹‹å¤„å°±æ˜¯æ€»çš„åšå®¢æ–‡ç« ä¸å¤Ÿå¤šï¼Œå¤§å¤šä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ·±åº¦ï¼›æ˜å¹´å¤šå¤šå†™åšå®¢ï¼Œæå‡æŠ€æœ¯èƒ½åŠ›ï¼ŒæœŸæœ›å¯ä»¥å†™ä¸€äº›æ¯”è¾ƒæœ‰æ·±åº¦çš„åšå®¢ã€‚ è‡ªå­¦æ–°çš„æŠ€æœ¯æŠ€æœ¯çš„æ›´è¿­é€Ÿåº¦å¾ˆå¿«ï¼Œä¸ºäº†ä¸è¢«æ·˜æ±°ï¼Œåªæœ‰é€šè¿‡ä¸æ–­å­¦ä¹ ï¼Œæ¥æé«˜æŠ€æœ¯èƒ½åŠ›ã€‚ç›®å‰æ‰€åœ¨çš„å…¬å¸æ˜¯ä¸€å®¶ä»¥ä¸šåŠ¡é©±åŠ¨çš„å…¬å¸ï¼Œæ‰€ä»¥å¹³æ—¶å†™çš„ä¸šåŠ¡ä»£ç æ¯”è¾ƒå¤šä¸€äº›ï¼Œå¯¹äºæ–°çš„æŠ€æœ¯æ¥è§¦çš„æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯é¢†å¯¼æ¯”è¾ƒé¼“åŠ±æˆ‘ä»¬å­¦ä¹ æ–°çš„æŠ€æœ¯ç”¨äºå·¥ä½œä¸­ã€‚å…¬å¸çš„æŠ€æœ¯ä¸€æˆä¸å˜å¾€å¾€ä¸æ˜¯å…¬å¸çš„é—®é¢˜ï¼Œè€Œæ˜¯æˆ‘ä»¬åšæŠ€æœ¯çš„é—®é¢˜ï¼Œå°±ç®—å…¬å¸æƒ³ç”¨æ–°çš„æŠ€æœ¯ï¼Œä½†æ˜¯æ²¡æœ‰äººä¼šï¼Œè¿™ç§æŠ€æœ¯ä¹Ÿå°±ä¸ä¼šè¢«å¼•å…¥ï¼Œå› ä¸ºä½¿ç”¨æˆæœ¬å¤ªé«˜ï¼›ä½†æ˜¯è‹¥è¿™é¡¹æŠ€æœ¯ï¼Œæˆ‘ä»¬éƒ½ä¼šï¼Œè€Œä¸”åˆå¾ˆæœ‰åˆ©äºå…¬å¸ï¼Œç›¸ä¿¡ä¸€å®šä¼šå¾—åˆ°å…¬å¸æ¨è¡Œã€‚ä¸ºäº†ä¿æŒè¿›æ­¥ï¼Œè‡ªå­¦æ–°å…´çš„æŠ€æœ¯ï¼Œå¯¹äºè‡ªå­¦æ–°æŠ€æœ¯ï¼Œå‚ç›´æ•™è‚²ç½‘ç«™(ç¼–ç¨‹) æ…•è¯¾ç½‘ å¾ˆä¸é”™ï¼å­¦ä¹ äº†æ–°çš„æŠ€æœ¯ï¼Œåœ¨æ°å½“çš„æ—¶æœºåˆé€‚çš„é¡¹ç›®è¿›è¡Œå¼•å…¥ï¼Œä¹Ÿæ˜¯å¯¹è‡ªå·±å­¦ä¹ æˆæœçš„ä¸€ç§å®è·µï¼ ä¹° Kindle çœ‹ä¹¦å¹´åˆä¹°äº† Kindle ç”¨äºçœ‹ä¹¦ï¼Œå¼ºåˆ¶è‡ªå·±çœ‹ä¹¦ï¼›çœ‹ä¹¦çš„è¿‡ç¨‹ä¸­ï¼Œè¶Šå‘è§‰å¾—è‡ªå·±çš„é˜…è¯»èƒ½åŠ›å®åœ¨æ˜¯å¤ªå·®äº†ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½è¯»ä¸æ‡‚ï¼Œè¿™ä¹Ÿåšå®šäº†æˆ‘è¦åšæŒçœ‹ä¹¦çš„æƒ³æ³•ã€‚ä»Šå¹´çœ‹äº† 25 æœ¬å·¦å³çš„ä¹¦ï¼Œä½†æ˜¯ç²¾è¯»çš„å¤ªå°‘ï¼Œå¾ˆå¤šéƒ½æ˜¯å›«å›µåæ£ï¼Œçº ç»“äºè¯»ä¹¦çš„æ•°é‡ï¼Œè€Œä¸æ˜¯è´¨é‡ï¼Œæ¥å¹´å°½é‡æé«˜é˜…è¯»çš„è´¨é‡ã€‚ 2017 åšçš„ä¸å¥½çš„åœ°æ–¹ é™¤äº†ä¸Šé¢æå‡ºçš„é—®é¢˜ï¼Œèº«ä¸Šè¿˜æœ‰ä¸€å †ç­‰ç€æˆ‘å»å…‹æœçš„ç¼ºç‚¹ã€‚ ä¸‹åŠå¹´çš„æ—¶å€™ï¼Œæäº†ä¸ªæœåŠ¡å™¨ï¼Œç»™ç”µè„‘è£…ä¸Šäº† SS çš„å®¢æˆ·ç«¯ï¼Œå¾—ä»¥éšæ—¶å¯ä»¥è®¿é—®è¢«å¢™çš„ Google ã€‚äºæ˜¯åœ¨ä¾¿åˆ©æŸ¥æ‰¾é—®é¢˜çš„ç¯å¢ƒä¸‹ï¼Œå‡ºç°äº†è¦åšä»€ä¹ˆå·¥ä½œçš„æ—¶å€™ï¼Œä¸å»æ€è€ƒï¼Œè€Œæ˜¯å…ˆå»è¿›è¡Œ Google æœç´¢ä¸€ç•ªçš„æƒ…å†µï¼Œå¤ªè¿‡ä¾èµ– Google ï¼Œéšæ—¶ç•ªç¾½å¢™å¯¹äºæˆ‘ä¹Ÿä¸æ˜¯ä¸€ä»¶å¥½äº‹ã€‚æ¥å¹´å¸Œæœ›å¯ä»¥å…»æˆä¸‡äº‹å…ˆç‹¬ç«‹æ€è€ƒçš„ä¹ æƒ¯ï¼Œä¸è¦æˆä¸ºä¸€ååªä¼š Google ä»£ç çš„ç å†œã€‚ å¿˜äº†ä»å‡ æœˆä»½å¼€å§‹ï¼Œç‹è€…è£è€€ç«äº†ï¼Œæˆ‘ä¹Ÿä¸å‡ºæ„å¤–åœ°é™·äº†è¿›å»ï¼Œå¤§æ¦‚ç©äº†ä¸¤ä¸‰ä¸ªæœˆï¼Œä¹‹åæ„è¯†åˆ°è‡ªå·±çš„åšæ³•ä¸å¯¹ï¼Œæ–¹æ‰å¸è½½äº†æ¸¸æˆã€‚å¤šäºäº†å®šåŠ›çš„å¢é•¿ï¼Œå¦åˆ™è¿˜å¯èƒ½æ²‰è¿·å…¶ä¸­ä¸å¯è‡ªæ‹”ï¼Œä»¥åå°±å°½é‡ä¸ç©æ¸¸æˆäº†å§ï¼Œæ¯•ç«Ÿè¿˜è¦é‚£ä¹ˆå¤šçš„çŸ¥è¯†ç­‰å¾…ç€æˆ‘å»å­¦å‘¢ï¼ æ¯å¹´éƒ½ä¼šçœ‹åˆ°ç¨‹åºå‘˜çŒæ­»çš„æ–°é—»ï¼Œè¿™ä¸ªè¡Œä¸šæœ‰çš„å…¬å¸é«˜å¼ºåº¦æ— ä¼‘æ­¢çš„åŠ ç­ï¼ŒåŠ ä¸Šç²¾ç¥å‹åŠ›ï¼Œä»¥åŠä¸ç»å¸¸é”»ç‚¼èº«ä½“çš„ä¹ æƒ¯ï¼Œå¯¼è‡´æ‚²å‰§çš„å‘ç”Ÿã€‚åœ¨å”å˜˜çš„åŒæ—¶ï¼Œå´æ²¡æœ‰æƒ³åˆ°è‡ªå·±ä¹Ÿæ²¡æœ‰é”»ç‚¼èº«ä½“çš„ä¹ æƒ¯ï¼Œå¹¸è¿çš„æ˜¯å…¬å¸ä¸åŠ ç­ã€‚ä¹Ÿæ›¾ç»åšæŒè·‘æ­¥é”»ç‚¼äº†ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯æ²¡æœ‰åšæŒä¸‹æ¥ï¼Œè¿˜æ˜¯è¦åˆ¶å®šä¸€ä¸ªé”»ç‚¼çš„è®¡åˆ’ã€‚ 2018 æˆ‘æƒ³è¦åšçš„äº‹ é”»ç‚¼èº«ä½“ï¼Œèº«ä½“å¥½æ˜¯ä¸€åˆ‡æ´»åŠ¨çš„å‰æ å¤šå†™åšå®¢ï¼Œå¤šç²¾è¯»ä¹¦ï¼Œå¤šå†™è¯»ä¹¦ç¬”è®° ç‹¬ç«‹æ€è€ƒï¼Œå¤šæ€»ç»“ï¼Œäº‰å–åšä¸€ä¸ªç²¾è¿›çš„äºº é‡æ–°å­¦ä¹ è‹±è¯­ï¼Œè‹±è¯­èƒ½åŠ›å¤ªå·®äº†ï¼Œå¤šå­¦ç‚¹è‹±è¯­ æ‹¾èµ·æ—¥è¯­çš„å­¦ä¹  ç»“è¯­èµ„æºè¶Šå¤šè¶Šæµªè´¹ï¼Œèµ„æºè¶Šå°‘è¶Šçè´µï¼Œæ—¶é—´äº¦æ˜¯ï¼Œå‘¨æœ«æ—¶é—´å¾ˆå¤šä½†æ˜¯åˆ©ç”¨æ•ˆç‡å´ä½çš„å¯æ€•ï¼Œæ¯å¤©æ—©èµ·ä¸€ä¸ªå¤šå°æ—¶ï¼Œèƒ½å®Œæˆå‘¨æœ«å¥½å‡ ä¸ªå°æ—¶èƒ½å®Œæˆçš„äº‹æƒ…ã€‚æ¯æ¯æµªè´¹äº†å…‰é˜´ï¼Œåœ¨ä½™ä¸‹ä¸å¤šçš„æ—¶é—´é‡Œæƒ³è¦å¼€å§‹è®¤çœŸæ—¶ï¼Œå´æ€»æ˜¯åœ¨æ—¶é—´ä¸å¤Ÿç”¨çš„æŠ±æ€¨å£°é‡Œï¼Œè‰è‰ç»“æŸäº†æœ¬æ¬¡å‘¨æœ«ï¼Œæ‰€ä»¥ï¼Œæ—¶é—´éƒ½å»å“ªå„¿å‘¢ï¼Ÿ","tags":[{"name":"å¹´ç»ˆæ€»ç»“","slug":"å¹´ç»ˆæ€»ç»“","permalink":"http://nullpointer.pw/tags/å¹´ç»ˆæ€»ç»“/"}]},{"title":"macç¼–è¯‘å®‰è£…Nginx","date":"2017-12-06T22:50:18.000Z","path":"macç¼–è¯‘å®‰è£…nginx.html","text":"å‰è¨€è™½ç„¶åç®€å•çš„æ–¹å¼å®‰è£…Nginxï¼Œä½†æ˜¯ä¹ æƒ¯äº†åœ¨linux ä¸Šçš„æ“ä½œï¼Œä¸ºäº†ä¿æŒä¸€è‡´ï¼Œå› æ­¤ä¹Ÿä½¿ç”¨ç¼–è¯‘å®‰è£…çš„æ–¹æ³•è¿›è¡Œå®‰è£…Nginxã€‚ èµ„æºä¸‹è½½ nginx: http://nginx.org/download/nginx-1.12.2.tar.gz zlib: http://zlib.net/zlib-1.2.11.tar.gz pcre: ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.38.tar.gz openssl: https://www.openssl.org/source/openssl-1.1.0g.tar.gz è¿™äº›éƒ½æ˜¯ Nginx ç¼–è¯‘éœ€è¦çš„ä¾èµ–ï¼Œä¸‹è½½ååˆ†åˆ«è§£å‹ï¼Œ æ³¨æ„è§£å‹çš„æ–‡ä»¶è¦åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹é¢ 1234567tar -zxvf nginx-1.12.2.tar.gztar -zxvf zlib-1.2.11.tar.gztar -zxvf pcre-8.38.tar.gztar -zxvf openssl-1.1.0g.tar.gz è¿›å…¥nginxç›®å½•åæ‰§è¡Œ12345678./configure --prefix=/usr/local/nginx --with-zlib=../zlib-1.2.11 --with-pcre=../pcre-8.38 --with-openssl=../openssl-1.1.0g// ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤makesudo make install ä»¥ä¸Šæ‰§è¡Œå®Œæ¯•åï¼Œ nginx å°±è¢«å®‰è£…åˆ° /usr/local/nginx ç›®å½•ä¸‹ Nginxçš„å¯åœåœ¨ mac ä¸Šéšä¾¿ä¿®æ”¹ç‚¹ä¸œè¥¿ï¼Œå°±æç¤ºæ²¡æœ‰æƒé™ä¹Ÿæ˜¯é†‰äº†ï¼Œåªå¥½æ¯ä¸ªå‘½ä»¤å‰é¢éƒ½åŠ ä¸Š sudo äº† å¯åŠ¨sudo /usr/local/nginx/sbin/nginx å…³é—­sudo /usr/local/nginx/sbin/nginx -s stop é‡å¯sudo /usr/local/nginx/sbin/nginx -s reload å‚è€ƒ http://blog.csdn.net/tulies/article/details/77611409","tags":[{"name":"nginxå®‰è£…","slug":"nginxå®‰è£…","permalink":"http://nullpointer.pw/tags/nginxå®‰è£…/"}]},{"title":"åˆ©ç”¨nginxè§£å†³è·¨åŸŸé—®é¢˜","date":"2017-12-06T22:31:02.000Z","path":"åˆ©ç”¨nginxè§£å†³è·¨åŸŸé—®é¢˜.html","text":"å‰è¨€æœ€è¿‘é‡åˆ°äº†è·¨åŸŸé—®é¢˜ï¼Œç»“åˆä¹‹å‰ã€å¾®ä¿¡æ”¯ä»˜å¼€å‘æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥å›è°ƒã€‘çš„ç»éªŒï¼Œåˆ©ç”¨ Nginx å®ç°äº†è·¨åŸŸã€‚ å…¬å¸ä¹‹å‰ä¸ºäº†è§£å†³è·¨åŸŸé—®é¢˜ï¼Œç”¨çš„æ˜¯ iFrameï¼Œåæ­£å¯¹äºåªåšåç«¯çš„æˆ‘è€Œè¨€ï¼Œè§‰å¾—å¾ˆå¤æ‚ï¼Œä½†æ˜¯ç°åœ¨åˆ©ç”¨ nginx å¦‚æ­¤ç®€å•å°±å®ç°äº†è·¨åŸŸï¼Œæ„Ÿè§‰è¿˜æŒºæœ‰æˆå°±æ„Ÿï¼Œå“ˆå“ˆï¼ ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸé—®é¢˜ï¼Ÿå‰äººå·²ç»æ€»ç»“å¾—å¾ˆå¥½äº†ï¼Œå°±å€Ÿé‰´ä¸€ä¸‹å§ï¼ å›¾ç‰‡æ¥æºåœ°å€ï¼š http://www.cnblogs.com/gabrielchen/p/5066120.html æˆ‘ä»¬åœ¨å¼€å‘é¡¹ç›®ä¸­é‡åˆ°çš„è·¨åŸŸé—®é¢˜å…·ä½“æ˜¯è¿™æ ·çš„ï¼Œå…¬å¸çš„åŸŸåè‹¥æ˜¯ www.domain.comï¼Œé‚£ä¹ˆå¦‚æœæ˜¯å‘é€çš„ Ajax è¯·æ±‚å°±ä¸é€šè¿‡è¿™ä¸ªåŸŸåèµ°äº†ï¼Œè€Œæ˜¯é€šè¿‡ a.domain.comï¼Œäºæ˜¯ä¾¿å‡ºç°äº†è·¨åŸŸé—®é¢˜ã€‚ æ¯”å¦‚åœ¨ www.domain.com é¦–é¡µä¸­éœ€è¦é€šè¿‡ Ajax è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯ã€‚ å‡†å¤‡å·¥ä½œä¸‹è½½æ¼”ç¤ºé¡¹ç›®ä¸ºäº†æ¼”ç¤ºè¿™ä¸ªè·¨åŸŸé—®é¢˜ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ª SpringBoot é¡¹ç›®ï¼Œä¾¿äºæ¼”ç¤ºï¼Œå¦‚æœä¸ä¼š SpringBoot ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºé‡ç‚¹åœ¨äº Nginx é…ç½®ä¸Šé¢ã€‚ ã€ç‚¹æˆ‘ä¸‹è½½ã€‘ æå–å¯†ç : 8e68 å¯åŠ¨æ¼”ç¤ºé¡¹ç›®å› ä¸ºæ˜¯SpringBoot é¡¹ç›®ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ java -jar çš„æ–¹å¼ç›´æ¥å¯åŠ¨ï¼Œä¸ºäº†æ¼”ç¤ºè·¨åŸŸï¼Œå› æ­¤éœ€è¦å¯åŠ¨ä¸¤ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªç«¯å£æ¥åˆ†åˆ«å¯åŠ¨é¡¹ç›®ã€‚ 12345## A é¡¹ç›®ï¼Œç«¯å£è®¾ç½®ä¸º8080java -jar -Dserver.port=8080 demo.jar## B é¡¹ç›®ï¼Œç«¯å£è®¾ç½®ä¸º8090java -jar -Dserver.port=8090 demo.jar é…ç½®æœ¬åœ° Hostä¸ºäº†æ¼”ç¤ºè¿˜éœ€è¦ä¸¤ä¸ªåŸŸåï¼Œä¸ç”¨çœŸæ­£çš„åŸŸåï¼Œä¿®æ”¹æœ¬åœ°çš„ Host å³å¯ï¼Œå°†ä¸¤ä¸ªåŸŸåçš„ Host éƒ½æ‰§è¡Œæœ¬åœ°ã€‚å¯ä»¥ä½¿ç”¨ SwitchHosts æ¥æ–¹ä¾¿åˆ‡æ¢ã€‚ 12127.0.0.1 www.domain.com127.0.0.1 a.domain.com é…ç½®Nginxç¼–è¯‘å®‰è£… Nginxåï¼Œ ä¿®æ”¹ nginx.conf é…ç½®æ–‡ä»¶ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#user nobody;worker_processes 1;#error_log logs/error.log;#error_log logs/error.log notice;#error_log logs/error.log info;#pid logs/nginx.pid;events &#123; worker_connections 1024;&#125;http &#123; include mime.types; default_type application/octet-stream; #log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' # '$status $body_bytes_sent \"$http_referer\" ' # '\"$http_user_agent\" \"$http_x_forwarded_for\"'; #access_log logs/access.log main; sendfile on; keepalive_timeout 65; #gzip on; upstream webServer &#123; server 127.0.0.1:8080; &#125; upstream ajaxServer &#123; server 127.0.0.1:8090; &#125; server &#123; listen 80; server_name a.domain.com; location / &#123; proxy_pass http://ajaxServer; &#125; &#125; server &#123; listen 80; server_name www.domain.com; location / &#123; proxy_pass http://webServer; &#125; &#125;&#125; è¿™é‡Œæ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹è¿™é‡Œçš„é…ç½®ï¼Œa.domain.com ä»£ç†åˆ° ajaxServerï¼Œå³ç«¯å£è®¾ç½®ä¸º 8090 çš„ B é¡¹ç›®ï¼› 12345678server &#123; listen 80; server_name a.domain.com; location / &#123; proxy_pass http://ajaxServer; &#125;&#125; å†çœ‹çœ‹ www.domain.com çš„é…ç½®ï¼Œåå‘ä»£ç†åˆ° webServer , å³ç«¯å£è®¾ç½®ä¸º 8080 çš„ A é¡¹ç›®ã€‚ 12345678server &#123; listen 80; server_name www.domain.com; location / &#123; proxy_pass http://webServer; &#125;&#125; æµ‹è¯•è®¿é—®é¡¹ç›®åœ°å€ http://www.domain.com/pageï¼Œ è¿›å…¥ä»¥ä¸‹é¡µé¢ï¼š å½“è¾“å…¥æ¡†ä¸è¾“å…¥æˆ–è€…è¾“å…¥çš„æ˜¯å½“å‰åŸŸå http://www.domain.com æ—¶ï¼Œå¯ä»¥æ­£å¸¸æäº¤ï¼Œä¸ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜ã€‚ å½“è¾“å…¥ http://a.domain.com æ—¶ï¼Œç‚¹å‡»æŒ‰é’®è¿›è¡Œæäº¤ï¼Œä¼šå‡ºç°è·¨åŸŸé—®é¢˜ã€‚ ä¿®æ”¹ Nginx é…ç½®æ–‡ä»¶ä¿®æ”¹ www.domain.com çš„é…ç½® 12345678910111213server &#123; listen 80; server_name www.domain.com; location /proxy/ &#123; proxy_set_header Host a.domain.com; proxy_pass http://ajaxServer/; &#125; location / &#123; proxy_pass http://webServer; &#125;&#125; å…¶ä¸­è¿™é‡Œè¿™å¤„é…ç½®æ˜¯è¿™ç¯‡æ–‡ç« çš„å…³é”®ç‚¹ã€‚æ„æ€æ˜¯ http://www.domain.com/proxy/ å¼€å¤´çš„è¯·æ±‚å°†ä¼šè¢«åå‘ä»£ç†åˆ° B é¡¹ç›® å³ http://a.domain.com åŸŸåï¼Œproxy_set_header Host è¿™ä¸€è¡Œæ˜¯å¿…é¡»çš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤è¡Œçš„åŸŸåéœ€è¦ä¿æŒä¸€è‡´ï¼Œä¸”ç¬¬äºŒè¡Œåé¢å¿…é¡»è¦æœ‰ä¸€ä¸ª /ï¼Œè‡³äºåŸå› ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  proxy_passåçš„urlåŠ ä¸åŠ /çš„åŒºåˆ«1234location /proxy/ &#123; proxy_set_header Host a.domain.com; proxy_pass http://ajaxServer/;&#125; ä¿®æ”¹ä¹‹åä¿å­˜é…ç½®æ–‡ä»¶ï¼Œé‡å¯ Nginx1./nginx -s reload å†æ¬¡æµ‹è¯•ä¿®æ”¹æäº¤ URL ä¸º http://www.domain.com/proxy ç‚¹å‡»æŒ‰é’®è¿›è¡Œæäº¤ï¼Œå‘ç°æ­¤æ—¶æ²¡æœ‰å‡ºç°è·¨åŸŸé—®é¢˜ã€‚è™½ç„¶æäº¤çš„URL åŸŸåæ˜¯ http://www.domain.comï¼Œè€Œè¯·æ±‚ç»è¿‡ Nginx çš„åå‘ä»£ç†ä¹‹åï¼Œå®é™…ä¸Šæäº¤åˆ°äº† B é¡¹ç›®ï¼Œå³ http://a.domain.comï¼Œ ä¹Ÿå¯ä»¥çœ‹åˆ° B é¡¹ç›®æ‰“å°äº†è¾“å‡ºè¯­å¥ userId: 12ï¼Œç”±æ­¤ä¾¿è§£å†³äº†è·¨åŸŸé—®é¢˜ã€‚ èµ„æºä¸‹è½½æ–‡ç« æ¶‰åŠçš„jaræ–‡ä»¶æˆ‘æ‰“æˆä¸€ä¸ªå‹ç¼©åŒ…ï¼Œå¯ä»¥è‡ªå·±ä¸‹è½½å°è¯•ä¸€ä¸‹ã€‚ ã€ç‚¹æˆ‘ä¸‹è½½ã€‘ æå–å¯†ç : 8e68","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"è·¨åŸŸé—®é¢˜","slug":"è·¨åŸŸé—®é¢˜","permalink":"http://nullpointer.pw/tags/è·¨åŸŸé—®é¢˜/"},{"name":"åå‘ä»£ç†","slug":"åå‘ä»£ç†","permalink":"http://nullpointer.pw/tags/åå‘ä»£ç†/"}]},{"title":"javaæ¨å¹¿ç³»ç»Ÿè®¾è®¡","date":"2017-12-03T08:06:26.000Z","path":"javaæ¨å¹¿ç³»ç»Ÿè®¾è®¡.html","text":"å‰è¨€å…¬å¸æ–°ç«™ç”±äºè¿è¥éœ€æ±‚ï¼Œéœ€è¦å¼€å‘ä¸€å¥—æ¨å¹¿ç³»ç»Ÿï¼Œç”¨äºç½‘ç«™ç”¨æˆ·å¼•æµï¼Œè¡ç”Ÿå‡ºçš„æ¨å¹¿å¥—è·¯ç›®å‰ä¾¿å·²ç»æœ‰å››ç§ï¼Œä¸ºäº†é™ä½è¿è¥ä¸Šæ‰‹æ¨å¹¿ç³»ç»Ÿçš„éš¾åº¦ï¼Œå› æ­¤æ¨å¹¿ç³»ç»ŸåŠ¡å¿…è¦ä¾¿äºä½¿ç”¨ï¼Œæ‰€ä»¥æ¯ç§æ¨å¹¿æ–¹å¼çš„é…ç½®éœ€è¦ä¿æŒè¶³å¤Ÿæ˜äº†ç®€å•ã€‚ èŠèŠæ¨å¹¿å¸¸è§çš„æ¨å¹¿å¥—è·¯å°±æ˜¯é’ˆå¯¹ä¸€ä¸ªæ¨å¹¿å‘˜ç”Ÿæˆæ¨å¹¿é“¾æ¥ï¼Œæ¨å¹¿å‘˜ç„¶åå…¶ä»–ç”¨æˆ·é€šè¿‡æ¨å¹¿é“¾æ¥ç‚¹å‡»è¿›æ¥æ³¨å†Œï¼Œä½†æ˜¯ä¸å¯èƒ½æ¨å¹¿çš„é¡µé¢æ˜¯æ³¨å†Œé¡µé¢ï¼Œæ‰€ä»¥éœ€è¦å…ˆè®°å½•ä¸‹ç”¨æˆ·çš„æ¥æºã€‚æ³¨å†ŒæˆåŠŸçš„åŒæ—¶ï¼Œç»‘å®šç”¨æˆ·ä¸æ¨å¹¿å‘˜çš„å…³ç³»ï¼Œä¾¿äºæ—¥åé€šè¿‡ç”¨æˆ·çš„å……å€¼æ¶ˆè´¹ç»Ÿè®¡æ¨å¹¿å‘˜çš„æ¨å¹¿è´¹ç”¨ï¼Œä»¥ä¸‹ä¸ºæ¨å¹¿çš„ç®€å•æµç¨‹å›¾ã€‚ æ¨å¹¿ç³»ç»Ÿå®ç°æ¨å¹¿é“¾æ¥çš„ç”Ÿæˆæ•´ä¸ªæ¨å¹¿æµç¨‹æœ€ä¸»è¦çš„åœ°æ–¹å°±æ˜¯æ¨å¹¿é“¾æ¥çš„ç”Ÿæˆä¸ä½¿ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿æ¨å¹¿é“¾æ¥çš„ç®¡ç†ï¼Œéœ€è¦å°†ç”Ÿæˆçš„æ¨å¹¿é“¾æ¥è¿›è¡Œä¿å­˜ã€‚é¦–å…ˆè¿›è¡Œæ¨å¹¿é“¾æ¥è¡¨çš„è®¾è®¡ã€‚æœ€åæä¾›ç»™æ¨å¹¿å‘˜çš„æ¨å¹¿é“¾æ¥æ ¼å¼å¦‚ï¼šhttp://m.domain.com/cp?code=xxï¼Œå…¶ä¸­ code çš„å€¼ä¸ºæ¨å¹¿é“¾æ¥çš„ IDã€‚ å­—æ®µåç§° å­—æ®µç±»å‹ å­—æ®µæè¿° id int æ¨å¹¿é“¾æ¥è‡ªå¢ä¸»é”® title varcahr æ¨å¹¿æ ‡é¢˜ partner_id int æ¨å¹¿å‘˜ID params text æ¨å¹¿å‚æ•° type tinyint æ¨å¹¿ç±»å‹ url_type tinyint URLç±»å‹ create_time timestamp åˆ›å»ºæ—¶é—´ update_time timestamp æ›´æ–°æ—¶é—´ status tinyint å¯ç”¨çŠ¶æ€ å­—æ®µè§£è¯»ï¼š æˆ‘è¿™é‡Œçš„ id ç›´æ¥è®¾ç½®ä¸ºäº†è‡ªå¢ä¸»é”®çš„å€¼ï¼Œå½“ç„¶ä¸ºäº†å®‰å…¨ç‚¹ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå…¶ä»–çš„å€¼ï¼Œæ¯”å¦‚ UUIDï¼› title å¯¹äºåŒä¸€ä¸ªæ¨å¹¿å‘˜ï¼Œå¯èƒ½ä¼šç”Ÿæˆå¤šæ¡æ¨å¹¿é“¾æ¥ï¼Œç”¨äºåŒºåˆ«ã€‚ partner_id è¿™ä¸ªå°±ä¸å¿…å¤šè¯´ï¼Œè¡¨æ˜æ¨å¹¿é“¾æ¥å±äºå“ªä¸€ä¸ªæ¨å¹¿å‘˜ params æ³¨æ„è¿™ä¸ªå‚æ•°ç±»å‹ä¸º textï¼Œ å› ä¸ºä¸ºäº†æ–¹ä¾¿æ‰©å±•ä¸šåŠ¡å‚æ•°ï¼Œå› æ­¤æ­¤å­—æ®µå­˜å‚¨çš„æ˜¯ä¸€æ®µ JSONï¼Œè‹¥ä½¿ç”¨ varchar é•¿åº¦ä¼šä¸å¤Ÿç”¨ã€‚ä¸šåŠ¡å‚æ•°åœ¨æˆ‘å¸ï¼Œå¯ä»¥æ˜¯ï¼šèµ é€ VIP å¤©æ•°ï¼Œèµ é€é˜…è¯»åˆ¸æ•°é‡ï¼Œæ¨å¹¿è´¹ç”¨ç­‰ã€‚è¿™ä¸ªå­—æ®µå¯ä»¥è‡ªç”±å‘æŒ¥ï¼Œåœ¨ç»‘å®šç”¨æˆ·çš„æ—¶å€™è·å–è¯¥å­—æ®µï¼Œè§£ææˆ JSON å¯¹è±¡ï¼Œè¯»å–å¯¹åº”çš„ä¸šåŠ¡å‚æ•°ï¼Œè¿›è¡Œç›¸å¯¹åº”çš„è®¾ç½®ã€‚ å› ä¸ºè¿è¥åŒå­¦çš„è„‘æ´ä¸€èˆ¬éƒ½å¾ˆå¤§ï¼Œå› æ­¤æ¨å¹¿æ–¹å¼ä¼šæœ‰å¾ˆå¤šç§ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ—¥ååˆ†ææ¨å¹¿æ•ˆæœï¼Œå› æ­¤åŠ ä¸Š type å­—æ®µç”¨äºåŒºåˆ†æ¨å¹¿ç±»å‹ï¼Œæ¨å¹¿ç±»å‹æœ‰æ¯”å¦‚ï¼š CPSæ¨å¹¿ã€å¾®ä¿¡å…¬ä¼—æ¨å¹¿ç­‰ï¼› url_type ç”¨äºåŒºåˆ†éœ€è¦æ¨å¹¿çš„é¡µé¢æ˜¯ç›¸å¯¹è·¯å¾„è¿˜æ˜¯ç»å¯¹è·¯å¾„ã€‚ status ç”¨äºæ ‡è®°æ­¤æ¨å¹¿é“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼Œæ¯”å¦‚ç»ˆæ­¢æ¨å¹¿åˆä½œï¼Œå°±å¯ä»¥è®¾ç½®ä¸ºå…³é—­ï¼Œä¸å†å°†ç”¨æˆ·ç»‘å®šåˆ°æ­¤é“¾æ¥ã€‚ åå°æ¨å¹¿é“¾æ¥ç”Ÿæˆé¡µé¢å‚è€ƒï¼š æ¨å¹¿é“¾æ¥çš„è·³è½¬é¦–å…ˆå†çœ‹çœ‹æ¨å¹¿çš„æµç¨‹ é¦–å…ˆç”¨æˆ·é€šè¿‡ç‚¹å‡»æ¨å¹¿é“¾æ¥ï¼Œè¿›å…¥äº†æ¨å¹¿çš„é¡µé¢ï¼Œæˆ‘å¸å°±æ˜¯å°è¯´çš„æŸä¸€å…è´¹ç« èŠ‚çš„é˜…è¯»é¡µé¢ï¼Œä¹‹ååˆ°æ”¶è´¹ç« èŠ‚çš„æ—¶å€™ï¼Œå°±ä¼šæç¤ºç”¨æˆ·è¿›è¡Œç™»å½•ã€‚æ³¨å†Œçš„ç”¨æˆ·ï¼Œå¦‚ä½•çŸ¥é“æ˜¯ä»å“ªä¸€ä¸ªé“¾æ¥è¿‡æ¥çš„å‘¢ï¼Ÿè¿™å°±éœ€è¦åœ¨ç”¨æˆ·æ³¨å†Œä¹‹å‰å°±å°†æ¨å¹¿é“¾æ¥çš„æ ‡è®°è¿›è¡Œå­˜å‚¨ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯å†™å…¥ Cookieã€‚ä¹‹å‰å…¬å¸é¡¹ç›®å†™ Cookie æ˜¯åœ¨å‰ç«¯è¿›è¡Œï¼Œä½†æ˜¯è¿è¡Œä¹‹åï¼Œå‘ç°ä¸å¤ªå¯é ï¼Œå› æ­¤æˆ‘ä»¬å°†å†™ Cookie çš„æ“ä½œæ”¾åœ¨åç«¯è¿›è¡Œã€‚ æ¨å¹¿é“¾æ¥åœ°å€æ˜¯ http://m.domain.com/cp?code=xxï¼Œè®¿é—®å¦‚ä¸‹æ¥å£ï¼š 12345678910111213141516171819202122232425262728293031323334/** * ç”¨äºæ¨å¹¿é“¾æ¥çš„ç»Ÿä¸€è·³è½¬ */@RequestMapping (value = \"/cp\", method = RequestMethod.GET)public String companionRedirect(String code, HttpServletRequest request, Model m, HttpServletResponse response) &#123; try &#123; int id = Integer.parseInt(code); // æŸ¥è¯¢å‡ºæ¨å¹¿é“¾æ¥è®°å½• CompanionLink link = companionService.getCompanionLink(id); if (link != null &amp;&amp; link.getStatus() != Constants.STATUS_DELETE) &#123; JSONObject obj = JSONObject.parseObject(link.getParams()); // è·å–æ¨å¹¿é¡µé¢çš„åœ°å€ String url = obj.getString(\"url\"); // å°† code å€¼å³æ¨å¹¿é“¾æ¥çš„ id å†™å…¥Cookie ä¸­ï¼Œ EXPä¸ºæœ‰æ•ˆæœŸ 3 å¤© CookieUtil.setCookie(request, response, Constants.COMPANION_COOKIE_NAME, code, EXP); // è·³è½¬åˆ°æ¨å¹¿é¡µé¢ if (link.getUrlType() == Constants.ABS) &#123; // ç»å¯¹è·¯å¾„ç›´æ¥è·³è½¬ return \"redirect:\" + url; &#125;else &#123; // ç›¸å¯¹è·¯å¾„æ‹¼æ¥åŸŸååè·³è½¬ return \"redirect:\" + Constants.MOBILE_SERVER_DOMAIN + url; &#125; &#125; &#125; catch (NumberFormatException e) &#123; &#125; // å‡ºç°å¼‚å¸¸ï¼Œè·³è½¬åˆ°é¦–é¡µ return \"redirect:\" + Constants.MOBILE_SERVER_DOMAIN;&#125; å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œå‘ç°ä¹‹å‰è®¾è®¡æ¨å¹¿é“¾æ¥çš„æ—¶å€™æœ‰æ‰€ç–æ¼ï¼Œæœ‰çš„æ¨å¹¿æ–¹å¼æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œè€Œæœ‰çš„æ˜¯ç»å¯¹è·¯å¾„ã€‚è€Œæˆ‘åœ¨ä»£ç ä¸­æ˜¯é€šè¿‡ String çš„ Containsæ–¹æ³•æ˜¯å¦åŒ…å«åŸŸåæ¥åˆ¤æ–­æ˜¯ç›¸å¯¹çš„è¿˜æ˜¯ç»å¯¹çš„è·¯å¾„ï¼Œå…¶å®æ²¡æœ‰å¿…è¦ï¼Œå®Œå…¨å¯ä»¥æ·»åŠ ä¸€ä¸ªæ¨å¹¿é“¾æ¥çš„ url çš„è·¯å¾„ç±»å‹ã€‚åˆ¤æ–­ç±»å‹å³å¯ï¼Œå¦‚æœæ˜¯ç»å¯¹è·¯å¾„ç›´æ¥è·³è½¬ï¼Œå¦åˆ™æ‹¼æ¥åŸŸååè·³è½¬ã€‚ æ¨å¹¿å…³ç³»çš„ç»‘å®šç”¨æˆ·æµè§ˆå™¨çš„ Cookie ä¸­å·²ç»ä¿å­˜å¥½äº†æ¨å¹¿é“¾æ¥çš„ code å€¼ï¼Œç»‘å®šå…³ç³»å°±å¥½åŠäº†ï¼Œå¯ä»¥åœ¨ç”¨æˆ·æ³¨å†Œçš„æ—¶å€™ï¼Œè¯»å–æµè§ˆå™¨çš„ Cookieï¼Œè·å–è¿™ä¸ª Cookieï¼Œå¾—åˆ°æ¨å¹¿é“¾æ¥çš„ id, å°†ç”¨æˆ·çš„ id ä¸æ¨å¹¿çš„ partner_id è¿›è¡Œç»‘å®šï¼Œä¿å­˜åˆ°ç»‘å®šå…³ç³»çš„è¡¨ä¸­å³å¯ï¼Œæ¯”å¦‚æˆ‘å¸çš„èµ é€æ“ä½œä¹Ÿä¸€åœ¨ç»‘å®šåæ‰§è¡Œã€‚ è‡³äºç»‘å®šå…³ç³»çš„è¡¨è®¾è®¡ï¼Œä¸»è¦å°† partner_id ä¸ user_id ä½œä¸ºè”åˆä¸»é”®ä¿å­˜ï¼Œå…¶ä»–å­—æ®µå¦‚ç»‘å®šæ—¶é—´å°±ä¸ç”¨å¤šè¯´äº†å§ã€‚ åè®°å¦‚æœä½ çœ‹å®Œè§‰å¾—æœ‰ä»€ä¹ˆç–‘é—®ï¼Œå¯ä»¥ç•™è¨€è¯„è®ºï¼Œæœ‰éœ€è¦æ”¹è¿›çš„åœ°æ–¹ä¹Ÿè¯·æå‡ºï¼Œå…±åŒè¿›æ­¥ï¼","tags":[{"name":"æ¨å¹¿ç³»ç»Ÿ","slug":"æ¨å¹¿ç³»ç»Ÿ","permalink":"http://nullpointer.pw/tags/æ¨å¹¿ç³»ç»Ÿ/"},{"name":"æ¨å¹¿","slug":"æ¨å¹¿","permalink":"http://nullpointer.pw/tags/æ¨å¹¿/"},{"name":"é“¾æ¥æ¨å¹¿","slug":"é“¾æ¥æ¨å¹¿","permalink":"http://nullpointer.pw/tags/é“¾æ¥æ¨å¹¿/"}]},{"title":"Maven ç§æœä¸Šä¼ jaråŒ…","date":"2017-11-30T13:09:28.000Z","path":"Maven ç§æœä¸Šä¼ jaråŒ….html","text":"å‰è¨€å‰æ®µæ—¶é—´ï¼Œå…¬å¸å¼€äº†æ–°ç«™ï¼Œä¸»è¦ç”±æˆ‘æ¥è´Ÿè´£æ–°ç«™çš„æ­å»ºå·¥ä½œï¼ŒåŸºç¡€çš„ç³»ç»Ÿæ¯”å¦‚ç™»å½•ç³»ç»Ÿï¼Œæ”¯ä»˜ç³»ç»Ÿçš„æ­å»ºã€‚ ä»Šå¤©åœ¨11æœˆæœ«å°¾è¡¥ä¸Šè¿™ä¸€ç¯‡æ–‡ç« ï¼Œä¸ç„¶æ”¾å‡ºå»çš„è¯åšä¸åˆ°å°±ä¸å¥½äº†ï¼ˆä¸€ä¸ªæœˆè‡³å°‘ä¸¤ç¯‡åšå®¢ï¼‰ğŸ˜‚ åœ¨æ¥å…¥æ”¯ä»˜å®æ”¯ä»˜çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚ æˆ‘ä»¬å…¬å¸çš„ä¹‹å‰é¡¹ç›®æ¥å…¥çš„æ˜¯æ”¯ä»˜å® mapi æ”¯ä»˜ï¼Œè¿™æ˜¯æ¯”è¾ƒæ—©çš„æ”¯ä»˜æ¥å£ï¼Œå‰ä¸€é˜µå­ï¼Œè¯¥æ¥å£çš„æˆæƒä¹Ÿåˆ°æœŸäº†ï¼Œæˆ‘ä¹Ÿè´Ÿè´£åç»­æ¥å£çš„å‡çº§ã€‚ æ¥å£å‡çº§åï¼Œæ”¯ä»˜å®å¯¹å…¶ SDK ä¹Ÿè¿›è¡Œäº†å‡çº§ï¼ŒæŒ‰ç…§ç½‘ç«™æ–‡æ¡£ç¼–å†™ä»£ç å‘ç°æœ‰äº›æ–¹æ³•ä¸å­˜åœ¨ï¼Œæ‰çŸ¥é“æ˜¯ç”±äº é¡¹ç›®ä¸­ SDK çš„ç‰ˆæœ¬è¿‡ä½å¯¼è‡´çš„ã€‚æ—¢ç„¶çŸ¥é“äº†é—®é¢˜ï¼Œå°±è¦è§£å†³é—®é¢˜ï¼Œäºæ˜¯åœ¨å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆçš„ SDKã€‚ æˆ‘ä»¬å…¬å¸çš„é¡¹ç›®å…¨éƒ¨åŸºäº Maven è¿›è¡Œæ„å»ºï¼Œä½†æ˜¯å®˜ç½‘çš„ SDK åªæ˜¯ JAR åŒ…ï¼Œåœ¨ä¸­å¤®ä»“åº“æ˜¯æ²¡æœ‰çš„ï¼Œå› æ­¤ä½¿ç”¨çš„è¯éœ€è¦ä¸Šä¼ åˆ°å…¬å¸çš„ Maven ç§æœä¸Šã€‚ ç¯å¢ƒå‡†å¤‡ éœ€è¦ä¸Šä¼ çš„ Jar åŒ…ï¼Œæˆ‘è¿™é‡Œæ˜¯æ”¯ä»˜å®çš„ SDK çš„ Jar åŒ… ç§æœç¯å¢ƒï¼š Artifactory æˆ‘ä»¬å…¬å¸çš„ maven ç§æœå°±æ˜¯è¿™è´§å•¦ ä¸Šä¼  Jar åŒ…åˆ° Mavené€‰æ‹©ä¸Šä¼  Jar åŒ…ç™»å½• Artifactory åï¼Œé€‰æ‹© Deployï¼Œé€‰æ‹©è¦ä¸Šä¼ çš„ Jar åŒ…ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©ä¸Šä¼ æ”¯ä»˜å®çš„ SDK çš„ Jar åŒ…ã€‚ è®¾ç½®ä¸Šä¼  Jar åŒ…ä¿¡æ¯åœ¨è¿™é‡Œé€‰æ‹©è¦ä¸Šä¼ çš„ä»“åº“ï¼Œä»¥åŠè®¾ç½® â€œGAVâ€ å‚æ•° ç”±äºæ”¯ä»˜å®çš„ Jar åŒ…åç§°å¤ªé•¿äº†ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œç²¾ç®€äº†ä¸å¿…è¦çš„ä¿¡æ¯ã€‚ è®¾ç½®å®Œä¹‹åï¼Œç‚¹å‡»å®Œæˆå³å¯ã€‚ æŸ¥æ‰¾ä¸Šä¼  Jar çš„ Maven åæ ‡æ‰¾åˆ°åˆšæ‰ä¿å­˜çš„åº“ï¼Œæ‰¾åˆ°ä¸Šä¼ çš„ Jar åŒ… ç‚¹å‡» å¯¹åº”çš„ pom æ–‡ä»¶ï¼ŒæŸ¥çœ‹ Maven åæ ‡ å°†æ­¤åæ ‡å†™å…¥ pom.xml ä¸­å³å¯ï¼Œéœ€è¦å…ˆå°†ç§æœçš„åœ°å€å†™åˆ° pom.xml æ–‡ä»¶ä¸­ã€‚ 123456&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;repos&lt;/id&gt; &lt;url&gt;http://192.168.1.222:8088/artifactory/repos&lt;/url&gt; &lt;/repository&gt;&lt;/repositories&gt; ä¸Šä¼ æºç  Jar åŒ…åˆ°ç§æœä»“åº“æƒ³è¦åœ¨å¼€å‘æ—¶çœ‹å¯ä»¥æŸ¥çœ‹æºç çš„æ—¶å€™ï¼Œéœ€è¦å°†å¯¹åº”çš„æºç  Jar åŒ…ä¸€èµ·ä¸Šä¼ åˆ°ç§æœä¸­å»ï¼Œä¸å‰é¢æ­¥éª¤ç›¸åŒï¼Œæ­¤æ—¶é€‰æ‹©å¯¹åº”çš„æºç çš„ Jar åŒ…ã€‚ éœ€è¦æ³¨æ„è¿™é‡Œçš„ ç›®æ ‡ä»“åº“ä¸ GAV å‚æ•°ä¿æŒä¸ä¸Šé¢ä¸Šä¼ å¯¹åº”çš„ Jar åŒ…ä¿æŒä¸€è‡´ã€‚å”¯ä¸€ä¸åŒçš„åœ°æ–¹æ˜¯ Classifier ä¸º sourcesã€‚ ä¸Šä¼ æˆåŠŸåå¦‚å›¾ï¼Œæºç åŒ…ä¸å·¥ç¨‹åŒ…åœ¨åŒä¸€çº§ç›®å½•ä¸­ã€‚æ­¤æ—¶åœ¨é¡¹ç›®ä¸­å¯ä»¥åˆ·æ–° pom.xml æ–‡ä»¶åï¼Œå¯¹åº”çš„æºç å°±ä¼šä¸€åŒä¸‹è½½ä¸‹è½½ä¸‹æ¥äº†ï¼Œå¯ä»¥æ„‰å¿«çš„çœ‹æºç äº†ã€‚ End.","tags":[{"name":"Mavenç§æœ","slug":"Mavenç§æœ","permalink":"http://nullpointer.pw/tags/Mavenç§æœ/"},{"name":"jaråŒ…ä¸Šä¼ ","slug":"jaråŒ…ä¸Šä¼ ","permalink":"http://nullpointer.pw/tags/jaråŒ…ä¸Šä¼ /"}]},{"title":"å¾®ä¿¡æ”¯ä»˜å¼€å‘æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥å›è°ƒã€å®æˆ˜ã€‘","date":"2017-11-08T14:18:34.000Z","path":"å¾®ä¿¡æ”¯ä»˜å¼€å‘æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥å›è°ƒã€å®æˆ˜ã€‘.html","text":"å‰è¨€æœ€è¿‘åœ¨è°ƒè¯•å¾®ä¿¡ç›¸å…³çš„æ¥å£ï¼Œä½†æ˜¯ç”±äºå¾®ä¿¡å®˜æ–¹å‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œå¯¹äºè°ƒç”¨æ¥å£çš„åŸŸåæœ‰é™åˆ¶ã€‚å¾®ä¿¡æˆæƒä¸å¾®ä¿¡æ”¯ä»˜ç»Ÿä¸€ä¸‹å•æ¥å£åœ¨æœ¬åœ°å¯ä»¥é€šè¿‡æ›´æ”¹ host çš„æ–¹å¼æ¥è°ƒè¯•ï¼Œå¾®ä¿¡æœåŠ¡å™¨ä¹Ÿèƒ½è·³è½¬å›æ¥ï¼Œä½†æ˜¯å¾®ä¿¡æ”¯ä»˜å¼‚æ­¥é€šçŸ¥è¿™é‡Œï¼›å¾®ä¿¡å®˜æ–¹å¼ºåˆ¶è®©è®¾ç½®æ”¯ä»˜æˆæƒç›®å½•ï¼Œä¸”æ˜¯é€šè¿‡ ICP å¤‡æ¡ˆçš„åŸŸåï¼Œå› æ­¤ä¸é‡‡å–ç‰¹æ®Šæ‰‹æ®µï¼Œæœ¬åœ°æ˜¯æ— æ³•æ¥æ”¶åˆ°å¾®ä¿¡çš„å¼‚æ­¥é€šçŸ¥å›è°ƒè¯·æ±‚çš„ï¼Œåªèƒ½éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒæµ‹è¯•ã€‚ å‰ç½®æ¡ä»¶ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŠ˜è…¾äº†å¥½å‡ å¤©ï¼Œæ‰æå‡ºæ¥äº†ï¼Œç©¶å…¶æ ¹æœ¬åŸå› ï¼Œè¿˜æ˜¯å¯¹äº Nginx ä¸å¤ªç†Ÿæ‚‰ã€‚æ‰€ä»¥åœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚ å†…ç½‘è½¬å‘å¦‚æœæƒ³æœ¬åœ°è¿›è¡Œè°ƒè¯•ï¼Œå¹¶ä¸”æƒ³è®©å¾®ä¿¡æœåŠ¡å™¨è¯·æ±‚å›è°ƒå›æ¥ï¼Œåˆ™æœ¬åœ°å¿…é¡»è¦æœ‰ä¸€ä¸ªå¤–ç½‘åŸŸåï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯ç”¨ Ngrokå†…ç½‘è½¬å‘ æ¥å®ç°ï¼›Ngrok çš„é…ç½®å°±æ˜¯å°†æœ¬åœ°é¡¹ç›®çš„ç«¯å£æ˜ å°„åˆ°åˆ†é…çš„å¤–ç½‘åŸŸåï¼Œå…·ä½“é…ç½®å‚è€ƒå®˜ç½‘æ•™ç¨‹æ–‡æ¡£ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚ æˆ‘çš„é…ç½®æ˜¯ï¼š1http://vcmq.free.ngrok.cc -&gt; 127.0.0.1:8080 é…ç½®æµ‹è¯•æ”¯ä»˜ç›®å½•å‰é¢æåˆ°äº†ï¼Œå¾®ä¿¡æ”¯ä»˜å¼‚æ­¥é€šçŸ¥ä¼šå¯¹æ”¯ä»˜åŸŸåç›®å½•æœ‰è¦æ±‚ï¼Œå› æ­¤ï¼Œæ”¯ä»˜æ—¶çš„åŸŸåå¿…é¡»è¦åœ¨è®¾ç½®çš„æ”¯ä»˜åŸŸåç›®å½•ä¸‹ã€‚ é¦–å…ˆéœ€è¦åœ¨ å¾®ä¿¡å•†æˆ·å¹³å° ä¸­é…ç½® å•†æˆ·ç§˜é’¥ï¼Œæ”¯ä»˜æˆæƒç›®å½•ã€‚ è¿™é‡Œæ”¯ä»˜æˆæƒç›®å½•é…ç½®çš„æ˜¯ä»¥åçº¿ä¸Šçš„æ”¯ä»˜æˆæƒç›®å½•1http://pay.domain.com/wechat/public/ ç„¶åå†åŠ ä¸€æ¡æœ¬åœ°æµ‹è¯•æ”¯ä»˜çš„ä¸´æ—¶æˆæƒç›®å½•ï¼Œè¿™ä¸ªç›®å½•æœ€å¥½åœ¨æœ¬åœ°æµ‹è¯•å®Œæˆåï¼Œè¿›è¡Œåˆ é™¤ã€‚1http://pay.domain.com/wechat/testpay/ å¿…çŸ¥çš„ Nginx è¯­æ³•proxy_pass åçš„ url åŠ ä¸åŠ  / çš„åŒºåˆ«è¿™é‡Œåˆ—ä¸¾ nginx çš„ proxy_pass è¯­æ³•ï¼Œæ˜¯ä¸ºäº†ä¸‹ä¸€æ­¥é’ˆå¯¹ nginx çš„é…ç½®è¿›è¡Œä¿®æ”¹ã€‚ è¿™é‡Œè®¿é—® http://127.0.0.1/proxy/test.html æµ‹è¯• proxy_pass åé¢çš„ url åŠ ä¸ä¸åŠ  / çš„åŒºåˆ« 12345678server &#123; listen 80; server_name 127.0.0.1; location /proxy/ &#123; proxy_pass http://192.168.0.100/; &#125;&#125; ä»¥ä¸Š location ä¼šä»£ç†åˆ° http://192.168.0.100/test.html å³ç›¸å½“äºæ˜¯ç»å¯¹æ ¹è·¯å¾„ï¼Œåˆ™ Nginx ä¸ä¼šæŠŠ location ä¸­çš„è·¯å¾„éƒ¨åˆ†ä»£ç†èµ°ã€‚ 12345678server &#123; listen 80; server_name 127.0.0.1; location /proxy/ &#123; proxy_pass http://192.168.0.100; &#125;&#125; ä»¥ä¸Š location ä¼šä»£ç†åˆ° http://192.168.0.100/proxy/test.html å³ç›¸å½“äºç›¸å¯¹è·¯å¾„ã€‚ ä»£ç†æ”¯ä»˜åŸŸååˆ°ç¬¬ä¸‰æ–¹åŸŸåçŸ¥é“ä¸Šä¸€æ­¥ proxy_pass å / çš„ä½œç”¨åï¼Œå°±å¼€å§‹æ¥é…ç½®æ”¯ä»˜åŸŸåæŒ‡å‘çš„æœåŠ¡å™¨ä¸Šçš„ nginx çš„é…ç½®æ–‡ä»¶ã€‚ 12345678910111213server &#123; listen 80; server_name pay.domain.com; location /testpay/ &#123; proxy_set_header Host vcmq.free.ngrok.cc; proxy_pass http://vcmq.free.ngrok.cc/wide/; &#125; location / &#123; proxy_pass http://payServer; &#125;&#125; é…ç½®ä¸­çš„ wide æ˜¯æˆ‘é¡¹ç›®çš„åç§°ï¼›æ³¨æ„ï¼šè¿™é‡Œçš„ proxy_set_header Host å¿…é¡»é…ç½®ï¼Œå¦åˆ™è¿›å…¥ location å—åï¼Œä¼šæç¤º tunnel pay.domain.com not foundã€‚ å½“è®¿é—® pay.domain.com/testpay/create å¾®ä¿¡ç»Ÿä¸€ä¸‹å•æ¥å£æ—¶ï¼Œ ä¼šä»£ç†åˆ° http://vcmq.free.ngrok.cc/wide/createï¼› éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç»Ÿä¸€ä¸‹å•æ¥å£ï¼Œè®¾ç½® notify_url çš„å€¼è¦ä¸ºé…ç½®çš„æ”¯ä»˜æˆæƒç›®å½•ï¼Œæ¯”å¦‚æˆ‘çš„ http://pay.domain.com/testpay/notify ç»Ÿä¸€ä¸‹å•å¹¶å®Œæˆæ”¯ä»˜å®Œæˆåï¼Œå¾®ä¿¡æœåŠ¡å™¨ä¼šè¯·æ±‚ç»Ÿä¸€ä¸‹å•æ¥å£ä¸­çš„ notify_urlï¼Œç»è¿‡æœåŠ¡å™¨ nginx è¿›è¡Œä»£ç†åï¼Œä¼šä»£ç†åˆ° æœ¬åœ°çš„å†…ç½‘è½¬å‘åŸŸåå¼‚æ­¥é€šçŸ¥å›è°ƒæ¥å£ http://vcmq.free.ngrok.cc/wide/notifyï¼Œ ä»è€Œè¾¾åˆ°äº†æœ¬åœ°æ¥æ”¶å¾®ä¿¡æ”¯ä»˜å¼‚æ­¥é€šçŸ¥å›è°ƒè¯·æ±‚çš„ç›®çš„ã€‚ å¦‚æœåœ°å€ä¸åœ¨æ”¯ä»˜æˆæƒç›®å½•ä¸‹ï¼Œä¼šæç¤ºå½“å‰ Url æœªæ³¨å†Œã€‚å› ä¸ºæ˜¯ä»£ç†è¿‡å»ï¼Œå› æ­¤åœ°å€æ çš„åœ°å€ä¸ä¼šæ”¹å˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸èƒ½ç®€å•ä½¿ç”¨ nginx çš„ rewrite çš„åŸå› ã€‚ å¦‚æœ‰ç–‘é—®ï¼Œå¯ä»¥è”ç³»æˆ‘ã€‚ å‚è€ƒ nginx proxy_passåçš„urlåŠ ä¸åŠ /çš„åŒºåˆ« è·³è½¬ç¬¬ä¸‰æ–¹åŸŸå","tags":[{"name":"å®æˆ˜","slug":"å®æˆ˜","permalink":"http://nullpointer.pw/tags/å®æˆ˜/"},{"name":"nginxè½¬å‘","slug":"nginxè½¬å‘","permalink":"http://nullpointer.pw/tags/nginxè½¬å‘/"},{"name":"proxy_pass","slug":"proxy-pass","permalink":"http://nullpointer.pw/tags/proxy-pass/"},{"name":"æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥","slug":"æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥","permalink":"http://nullpointer.pw/tags/æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥/"}]},{"title":"Nginxå›¾ç‰‡é˜²ç›—é“¾ã€å®æˆ˜ã€‘","date":"2017-10-29T06:28:46.000Z","path":"Nginxå›¾ç‰‡é˜²ç›—é“¾ã€å®æˆ˜ã€‘.html","text":"å‰è¨€åšä¸»ç›®å‰åœ¨ä¸€å®¶åŸåˆ›å°è¯´ç½‘ç«™å…¬å¸å·¥ä½œï¼Œç”±äºç«™å†…çš„ä½œå“å…¨éƒ¨æ˜¯åŸåˆ›ï¼Œäºæ˜¯ä¹ä¸å¯é¿å…åœ°ä¼šè¢«ä¸€äº›ç›—ç‰ˆç½‘ç«™çˆ¬å–ç›—ç‰ˆï¼Œå¯¹äºé˜²ç›—ç‰ˆä¸€ç›´æ²¡æœ‰å¾ˆå¥½çš„å¯¹ç­–ï¼Œè®©å…¬å¸å¾ˆæ˜¯è‹¦æ¼ã€‚æœ€è¿‘å»ä¸€äº›ç›—ç‰ˆç½‘ç«™ä¸Šæœç´¢æˆ‘ä»¬ç½‘ç«™ä½œå“æ—¶ï¼Œå‘ç°ä»–ä»¬æ‰€ç”¨çš„å°é¢å›¾ç‰‡çš„æ¥æºæ˜¯æˆ‘ä»¬ç½‘ç«™çš„åœ°å€ï¼Œå³æ‰€è°“çš„ç›—é“¾ï¼Œè¿™å¯¹äºæˆ‘ä»¬ç½‘ç«™æœåŠ¡å™¨çš„å¸¦å®½æ˜¯ä¸€ç§æŸå¤±ï¼Œå› æ­¤éœ€è¦é‡‡å–å¯¹åº”çš„æ‰‹æ®µåº”å¯¹ã€‚ ç¯å¢ƒå‡†å¤‡è¿™é‡Œæˆ‘ä½¿ç”¨ä¸¤å°è™šæ‹Ÿæœº è™šæ‹Ÿæœºçš„å¿«é€Ÿå®‰è£…å¯ä»¥å‚è€ƒæˆ‘å¦å¤–ä¸€ç¯‡åšæ–‡ CentOSå¿«é€Ÿå®‰è£… æœåŠ¡å™¨ Aï¼š192.168.200.130 æœåŠ¡å™¨ Bï¼š192.168.200.131 Nginx å®‰è£…å‚è€ƒåšæ–‡ Nginxç¼“å­˜é…ç½® çš„ Nginx ç¯å¢ƒæ­å»ºéƒ¨åˆ†ã€‚ Nginx é˜²ç›—é“¾è®¾ç½®ä¸€ã€é…ç½® Nginx çš„é˜²ç›—é“¾12345678910111213141516171819202122# ä¿®æ”¹ nginx.conf é…ç½®æ–‡ä»¶vim /usr/local/nginx/conf/nginx.conf# æ·»åŠ  server èŠ‚ç‚¹server &#123; listen 80; server_name www.vcmq.com; #access_log logs/host.access.log main; location ~* \\.(jpg|png|gif)$ &#123; root /home/resources; valid_referers none server_names *.test1.com ~\\.test2\\.; if ($invalid_referer)&#123; rewrite ^/ http://ojt4b2cr5.bkt.clouddn.com/blog/20171028/214345352.png; &#125; &#125; location / &#123; root html; index index.html index.htm; &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘æ–°å¢çš„ server çš„åœ°å€æ˜¯ www.vcmq.comã€‚ 1location ~* \\.(jpg|png|gif)$ æ­¤è¡Œé…ç½®çš„ä½œç”¨æ˜¯åŒ¹é…ä»¥ jpg/png/gif ç»“å°¾çš„æ–‡ä»¶è¯·æ±‚ï¼Œ å¦‚æœåŒ¹é…å°±æ‰§è¡Œ æ‹¬å·å†…çš„ä»£ç ã€‚1234valid_referers none server_names *.test1.com ~\\.test2\\.;if ($invalid_referer)&#123; rewrite ^/ http://ojt4b2cr5.bkt.clouddn.com/blog/20171028/214345352.png;&#125; é¦–å…ˆçœ‹ç¬¬ä¸€è¡Œï¼Œè¿™è¡Œçš„ä½œç”¨æ˜¯é…ç½®å¯ä»¥è¯†åˆ« referï¼Œå³å¯ä»¥æ­£å¸¸è·å–èµ„æºæ–‡ä»¶çš„è¯·æ±‚ï¼Œåœ¨è¿™é‡Œé…ç½®åŠ å…¥ç™½åå•çš„è¯·æ±‚ refer åŸŸåã€‚å‚æ•°è¯´æ˜ï¼š none ä»£è¡¨è¯·æ±‚çš„ refer ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯ç›´æ¥è®¿é—®ï¼Œæ¯”å¦‚åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®å›¾ç‰‡ www.vcmq.com/test1.pngï¼Œç›´æ¥è®¿é—®æ—¶ï¼Œrefer ä¼šä¸ºç©ºã€‚ blocked refer æ¥æºä¸ä¸ºç©ºï¼Œä½†æ˜¯é‡Œé¢çš„å€¼è¢«ä»£ç†æˆ–è€…é˜²ç«å¢™åˆ é™¤äº† server_names refer æ¥æºåŒ…å«å½“å‰çš„ server_names å³ location çš„çˆ¶èŠ‚ç‚¹ server èŠ‚ç‚¹çš„ server_name çš„å€¼ã€‚ å­—ç¬¦ä¸² å®šä¹‰æœåŠ¡å™¨åç§°ï¼Œæ¯”å¦‚ *.test1.comï¼Œé…ç½®åï¼Œæ¥æºæ˜¯ä» test1.com å°±ä¼šè¢«è®¤ä¸ºæ˜¯åˆæ³•çš„è¯·æ±‚ã€‚ æ­£åˆ™è¡¨è¾¾å¼ åŒ¹é…åˆæ³•è¯·æ±‚æ¥æºï¼Œ å¦‚ ~\\.test2\\. å½“è¯·æ±‚çš„ refer æ˜¯åˆæ³•çš„ï¼Œå³å¯ä»¥è¢«åé¢ä»»ä¸€å‚æ•°æ‰€åŒ¹é…ï¼Œ $invalid_referer çš„å€¼ä¸º0ï¼Œ è‹¥ä¸åŒ¹é…åˆ™å€¼ä¸º 1ï¼Œ è¿›å…¥ if çš„ä»£ç ä¸­ã€‚æˆ‘è¿™é‡Œçš„è®¾ç½®æ˜¯ï¼Œå¦‚æœæ˜¯ä¸åˆæ³•çš„è¯·æ±‚ï¼Œå°±ç»Ÿä¸€è¿”å›ä¸€å¼ å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿”å› 403ã€‚ äºŒã€é…ç½® html æ–‡ä»¶1.åœ¨ /home ç›®å½•ä¸‹åˆ›å»ºç›®å½• resources ,åœ¨ /home/resources ç›®å½•ä¸‹æ”¾å…¥ä¸€å¼ å›¾ç‰‡ test.pngã€‚ 2.ä¿®æ”¹ nginx å®‰è£…ç›®å½•ä¸‹ html ä¸­çš„ index.html æ–‡ä»¶ã€‚æ·»åŠ ä¸€ä¸ª img æ ‡ç­¾ï¼Œsrc è®¿é—®ä¸Šä¸€æ­¥ä¸­çš„å›¾ç‰‡æ–‡ä»¶1&lt;img src=&quot;http://www.vcmq.com/test.png&quot; /&gt; 3.å¯åŠ¨ nginx1/usr/local/nginx/sbin/nginx 4.ä»¥ä¸Šæ‰€æœ‰é…ç½®æ˜¯å¯¹äºæœåŠ¡å™¨ A çš„é…ç½®ï¼Œä»¥ä¸‹è®²è§£æœåŠ¡å™¨ B çš„é…ç½® æœåŠ¡å™¨ B å’Œ æœåŠ¡å™¨ Aä¸€æ ·å®‰è£…å¥½ nginx ä¿®æ”¹ nginx.conf é…ç½®æ–‡ä»¶, æ·»åŠ ä¸¤ä¸ª server 12345678910111213141516171819server &#123; listen 80; server_name www.test1.com; #charset koi8-r; #access_log logs/host.access.log main; location / &#123; root html; index index.html index.htm; &#125;&#125; server &#123; listen 80; server_name www.test2.com; location / &#123; root html; index index.html index.htm; &#125;&#125; ä¿®æ”¹æœåŠ¡å™¨ B Nginx å®‰è£…ç›®å½•ä¸‹ html ç›®å½•ä¸­çš„ index.html æ–‡ä»¶,åŒæ ·æ·»åŠ  img æ ‡ç­¾ã€‚ 1&lt;img src=&quot;http://www.vcmq.com/test.png&quot; /&gt; å¯åŠ¨ æœåŠ¡å™¨ B çš„ Nginx é…ç½®æ³¨æ„äº‹é¡¹ é…ç½®èµ„æºçš„ location éœ€è¦åœ¨ location / ä¹‹å‰ã€‚ å¦‚æœåœ¨ location æˆ–è€…å…¶çˆ¶èŠ‚ç‚¹ server ä¸­æ²¡æœ‰é…ç½® root çš„å€¼ï¼Œ å½“è¯·æ±‚æ—¶åˆæ³•çš„æ—¶å€™ï¼Œä¼š 404 æ‰¾ä¸åˆ°èµ„æºæ–‡ä»¶ï¼Œå› æ­¤éœ€è¦åœ¨ location æˆ–è€… server èŠ‚ç‚¹è®¾ç½® root çš„å€¼ æ³¨æ„è°ƒè¯•çš„æ—¶å€™ï¼ŒåŠ¡å¿…ä½¿ç”¨ Ctrl + F5 è¿›è¡Œåˆ·æ–°ç½‘é¡µï¼Œå› ä¸º nginx ä¼šç¼“å­˜å›¾ç‰‡ï¼ æµ‹è¯•æˆ‘ä¸Šé¢é…ç½®çš„ server_name é…ç½®çš„åŸŸåæ˜¯ www.vcmq.com ï¼Œå› æ­¤æµ‹è¯•æ—¶ï¼Œéœ€è¦å°†æˆ‘ç”µè„‘çš„ host æŒ‡å‘è™šæ‹Ÿæœºçš„ ip, å¯ä»¥ä½¿ç”¨ SwitchHosts æ¥ä¾¿æ·åˆ‡æ¢ã€‚ 12345# æŒ‡å‘æœåŠ¡å™¨A192.168.200.130 www.vcmq.com# æŒ‡å‘æœåŠ¡å™¨B192.168.200.131 www.test1.com www.test2.com æµè§ˆå™¨è®¿é—® www.vcmq.comï¼Œå›¾ç‰‡æ­£å¸¸åŠ è½½ æµè§ˆå™¨è®¿é—® www.test1.com ä¸ www.test2.com è¿˜æœ‰ç›´æ¥è®¿é—®å›¾ç‰‡ http://www.vcmq.com/test.png éƒ½æ­£å¸¸åŠ è½½ ä¿®æ”¹ æœåŠ¡å™¨ A çš„ nginx.conf é…ç½®æ–‡ä»¶ 1valid_referers none server_names *.test1.com ~\\.test2\\.; å°†æ­¤è¡Œä¿®æ”¹ä¸º 1valid_referers none server_names; å³åªå…è®¸å½“å‰ server_name ä¸ æ—  refer çš„è¯·æ±‚ï¼Œå…¶ä»–è¯·æ±‚éƒ½è¿”å› rewrite çš„å›¾ç‰‡, ç„¶åé‡å¯ nginx 1/usr/local/nginx/sbin/nginx -s reload å†æ¬¡åˆ†åˆ«è®¿é—® ,æ³¨æ„éœ€è¦ä½¿ç”¨ ctrl+F5 åˆ·æ–°ä¸€ä¸‹ç¼“å­˜ www.vcmq.comã€www.test1.comã€www.test2.comã€http://www.vcmq.com/test.pngã€‚ å‘ç°åªæœ‰ www.vcmq.com ä¸ http://www.vcmq.com/test.png æ­£å¸¸æ˜¾ç¤ºï¼Œå…¶ä»–è¯·æ±‚çš†è¿”å› rewrite çš„å›¾ç‰‡ åŒç†å†æ¬¡ä¿®æ”¹ nginx.conf æ–‡ä»¶, å…è®¸æ¥è‡ª test1 çš„è®¿é—®è¯·æ±‚ 1valid_referers none server_names *.test1.com; ç»“æœå‘ç°www.test1.comå¯ä»¥è·å–æ­£å¸¸å›¾ç‰‡ï¼Œè€Œwww.test2.comè¿˜æ˜¯ rewrite ä¹‹åçš„å›¾ç‰‡ è‡³æ­¤ï¼Œå·²ç»å®ç°äº†åŸºäº Nginx çš„ç®€å•å›¾ç‰‡é˜²ç›—é“¾ã€‚ å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥è®¾ç½®å…è®¸æ¥è‡ªå…¬å¸ä¸‹çš„åŸŸåä¸ç©º refer çš„è¯·æ±‚é€šè¿‡ã€‚ è¿™é‡Œå…è®¸ ç©º refer çš„è¯·æ±‚é€šè¿‡çš„åŸå› æ˜¯ï¼Œæœ‰äº›åˆæ³•çš„è¯·æ±‚å¯èƒ½ä¼šæ²¡æœ‰å¸¦ä¸Š referã€‚ èµ„æºä¸‹è½½ æ–‡ç« æ¶‰åŠé…ç½®æ–‡ä»¶ä¸‹è½½ å‚è€ƒæ–‡ç«  https://www.bbsmax.com/A/xl56LLwxzr/","tags":[{"name":"å®æˆ˜","slug":"å®æˆ˜","permalink":"http://nullpointer.pw/tags/å®æˆ˜/"},{"name":"å›¾ç‰‡é˜²ç›—é“¾","slug":"å›¾ç‰‡é˜²ç›—é“¾","permalink":"http://nullpointer.pw/tags/å›¾ç‰‡é˜²ç›—é“¾/"},{"name":"é˜²ç›—é“¾","slug":"é˜²ç›—é“¾","permalink":"http://nullpointer.pw/tags/é˜²ç›—é“¾/"}]},{"title":"Nginxé…ç½®èµ„æºä¸‹è½½ç›®å½•","date":"2017-10-26T22:25:24.000Z","path":"Nginxé…ç½®èµ„æºä¸‹è½½ç›®å½•.html","text":"ä¹‹å‰åœ¨ç½‘ä¸Šæ‰¾ CentOs çš„é•œåƒçš„æ—¶å€™ï¼Œå‘ç°äº†é˜¿é‡Œäº‘çš„è¿™ä¸ªé•œåƒæºï¼Œé€Ÿåº¦è›®å¿«çš„ã€‚ä»Šå¤©ä¹Ÿæ¥æ­å»ºä¸€ä¸ªç±»ä¼¼çš„ç«™ï¼Œä½¿ç”¨ nginx ä½œä¸ºèµ„æºä¸‹è½½æœåŠ¡å™¨ã€‚å›¾ç‰‡è¯¦æƒ…ï¼š å®‰è£… Nginxå‚è€ƒè¿™ç¯‡æ•™ç¨‹çš„ Nginx ç¯å¢ƒæ­å»ºéƒ¨åˆ† è®¾ç½®èµ„æºå­˜å‚¨è·¯å¾„1ã€ èµ„æºå‡†å¤‡ åœ¨ home çš„ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå»ºç«‹æ–‡ä»¶å¤¹ï¼Œå¦‚ softs ,åœ¨ softs ç›®å½•ä¸­æ”¾å…¥æ–‡ä»¶å†…å®¹ã€‚ ä¿®æ”¹é…ç½®æ–‡ä»¶2ã€ ä¿®æ”¹ Nginx é…ç½®æ–‡ä»¶ 1vim conf/nginx.conf æ·»åŠ  server 123456789101112server &#123; listen 80; server_name down.vcmq.com; #sendfile on; location / &#123; alias /home/softs/; sendfile on; autoindex on; autoindex_exact_size off; autoindex_localtime on; &#125;&#125; alias è®¾ç½®ä¸ºç¬¬ä¸€æ­¥ä¸­çš„èµ„æºç›®å½•ï¼Œæˆ‘è¿™é‡Œæ˜¯ /home/softs/ 3ã€ è®¿é—®æµ‹è¯•å°†æœ¬æœº hosts æŒ‡å‘æœåŠ¡å™¨ï¼Œè®¿é—®åœ°å€ down.vcmq.com æ˜¾ç¤ºç›®å½•åˆ—è¡¨ æ³¨æ„ä¸èƒ½æ˜¯/root ç›®å½•ä¸‹çš„æ–‡ä»¶è·¯å¾„ ï¼Œä¼šæ˜¾ç¤º403æ— æƒé™","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"èµ„æºä¸‹è½½","slug":"èµ„æºä¸‹è½½","permalink":"http://nullpointer.pw/tags/èµ„æºä¸‹è½½/"}]},{"title":"å¦‚ä½•åšç¬”è®°ï¼Ÿ","date":"2017-10-26T14:10:02.000Z","path":"å¦‚ä½•è®°ç¬”è®°ï¼Ÿ.html","text":"æœ€è¿‘åœ¨å…¬å¸å¼€ä¼šï¼Œæˆ‘åˆ†äº«äº†ä¸€äº›ä¸ªäººæ—¥å¸¸å…³äºå¦‚ä½•è®°ç¬”è®°çš„å¿ƒå¾—ï¼Œç»“åˆåœ¨ç½‘ä¸Šçœ‹çš„ç›¸å…³æ–‡ç« ï¼Œæ•´ç†ä¸€ä¸‹ï¼Œç„¶ååšäº†ä¸€äº›è¡¥å……ï¼Œå†™å‡ºè¿™ç¯‡åšæ–‡ï¼Œæ–‡ç« æ¶‰åŠå·¥å…·çš„é€‰æ‹©å’Œè®°ç¬”è®°çš„æ­¥éª¤ä»¥åŠè®°ç¬”è®°çš„æŠ€å·§ä¸æ³¨æ„äº‹é¡¹ï¼Œæ¬¢è¿ç•™è¨€æ¢è®¨ã€‚ å·¥å…·çš„é€‰æ‹©å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œé¦–å…ˆè¯´è¯´å·¥å…·çš„é€‰æ‹©ï¼Œå¥½çš„å·¥å…·ä¼šè®©ä½ è®°ç¬”è®°å¾—å¿ƒåº”æ‰‹ï¼Œæ‹¥æœ‰è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œä¸å¥½çš„å·¥å…·åˆ™åšä¸åˆ°è¿™ç‚¹ï¼Œè¾¾ä¸åˆ°è®°ç¬”è®°çš„ç›®çš„ã€‚ å¸¸è§çš„ä¸»æµäº‘ç¬”è®°æœ‰ï¼š æœ‰é“äº‘ç¬”è®° OneNote ä¸ºçŸ¥ç¬”è®° å°è±¡ç¬”è®° å…ˆè¯´è¯´æˆ‘æœ€ç†Ÿæ‚‰çš„ä¸ºçŸ¥ç¬”è®°ï¼Œåœ¨ä¸€å¹´ä»¥å‰ï¼Œä¸€ç›´ç”¨çš„æ˜¯ä¸ºçŸ¥ç¬”è®°ï¼Œè®°äº†ä¸Šåƒçš„ç¬”è®°ï¼Œç”¨çš„å¾ˆä¸é”™ï¼Œé€¢äººæ¨èé‚£ç§ï¼›ä½†æ˜¯æœ‰ä¸€å¤©ï¼Œä¸ºçŸ¥ç¬”è®°çªç„¶å°±å®£å¸ƒå¿…é¡»è¦ä»˜è´¹æ‰èƒ½ç»§ç»­ä½¿ç”¨ï¼Œå¦åˆ™çš„è¯ï¼Œç¬”è®°å°†ä¸èƒ½åŒæ­¥ï¼å¯¹åº”ä¸€ä¸ªäº‘ç¬”è®°äº§å“æ¥è¯´ï¼Œæ²¡æœ‰äº†æœ€æœ€åŸºç¡€çš„åŒæ­¥åŠŸèƒ½ï¼Œå’Œåœ¨æœ¬åœ°æ–‡æ¡£é‡Œå†™æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæ²¡æœ‰åˆé€‚çš„å˜ç°æ–¹å¼ï¼Œå°±å®Œå…¨æŠ›å¼ƒäº†å…è´¹ç”¨æˆ·ï¼Œç»™æˆ‘æ„Ÿè§‰è¿™å®¶å…¬å¸ä¸å¤ªé è°±ï¼Œæ‰€ä»¥æˆ‘å°±è½¬æˆ˜ä½¿ç”¨æœ‰é“äº‘ç¬”è®°ã€‚ä½†æ˜¯ä¹‹å‰çš„ç¬”è®°è¿˜åœ¨ä¸ºçŸ¥ç¬”è®°é‡Œï¼Œæ‡’å¾—å»è½¬ç§»äº†ã€‚æ‰€ä»¥é€‰æ‹©ç¬”è®°è½¯ä»¶çš„æ—¶å€™ä¹Ÿè¦è€ƒè™‘è½¬ç§»æˆæœ¬ï¼Œä¸‡ä¸€ä¸€ä¸å°å¿ƒäº§å“å°±é»„äº†å‘¢ï¼å› æ­¤å°½é‡é€‰æ‹©å¤§å…¬å¸çš„æˆç†Ÿç¬”è®°äº§å“ã€‚ å†è¯´è¯´ç°åœ¨ç”¨çš„æœ‰é“äº‘ç¬”è®°ï¼Œç”¨ä¸€ä¸ªè¯æ¥å½¢å®¹å°±æ˜¯å¾ˆé¸¡è´¼ï¼Œä»¥å‰å¯ä»¥å¯¼å‡ºç¬”è®°ä¸ºå…¶ä»–ç¬”è®°è½¯ä»¶è¯†åˆ«çš„æ ¼å¼ï¼Œç°åœ¨åªèƒ½å¯¼å‡ºæœ‰é“èƒ½è¯†åˆ«çš„æ ¼å¼ã€‚å‡å¦‚æ˜¯é‡åº¦ç”¨æˆ·ï¼Œæƒ³è½¬ç§»ç¬”è®°ï¼Œå¾ˆå›°éš¾ã€‚å¥½åœ¨æœ‰é“äº‘ç¬”è®°æ”¯æŒ MarkDown ç¬”è®°ï¼Œæ‰€ä»¥æˆ‘ç°åœ¨å°½é‡å†™çš„ç¬”è®°éƒ½ç”¨ MarkDown æ–¹å¼ï¼Œå› ä¸º MarkDown æ ¼å¼çš„ç›´æ¥åœ¨ç¬”è®°ä¸­å°±èƒ½ç›´æ¥å¤åˆ¶èµ°ï¼Œè½¬ç§»ç¬”è®°å¾ˆè½»æ¾ã€‚MarkDownï¼Œè¯­æ³•å¾ˆç®€å•ï¼Œå¯ä»¥å­¦ä¹ ä¸€ä¸‹ï¼Œè½»æ¾æ’ç‰ˆï¼Œè¯­æ³•å¯ä»¥å‚è€ƒæœ‰é“äº‘çš„æ–‡æ¡£ï¼Œ è®°ç¬”è®°ä¸éœ€è¦å»å­¦ä¹ å¤ªå¤æ‚çš„è¯­æ³•, çœ‹ä¸‹é¢é“¾æ¥çš„ç¬¬äºŒç‚¹å°±å¯ä»¥ã€‚ æœ‰é“äº‘ç¬”è®°Markdownç®€æ˜ç‰ˆ ç„¶åè¯´è¯´å°è±¡ç¬”è®°ï¼Œæ˜¯å›½å¤– EverNote çš„å¤§é™†ç‰ˆæœ¬ï¼Œå…¶å…è´¹ç‰ˆåªèƒ½æä¾›ä¸¤ä¸ªç»ˆç«¯åŒæ­¥ï¼Œå‡å¦‚ä½ å…¬å¸ç™»é™†ä¸€ä¸ªï¼Œå®¶é‡Œç™»é™†ä¸€ä¸ªï¼Œè¿˜æƒ³è¦åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šç™»å½•å°±éœ€è¦ä»˜è´¹ï¼Œè¿˜æœ‰æ¯æœˆä¸Šä¼ 60Mæµé‡çš„é™åˆ¶ï¼Œä»˜è´¹ç‰ˆä¸€å¹´ä¸€ç™¾å¤šï¼Œæƒ³è¦æœ€ç¨³å®šçš„å¯ä»¥è€ƒè™‘ä½¿ç”¨ã€‚ æœ€åè¯´è¯´ OneNote, å·¨ç¡¬å‡ºå“ï¼Œä½†æ˜¯å›½å†… GFW çš„å­˜åœ¨ï¼ŒåŒæ­¥å¾ˆæ…¢ï¼Œç„¶åä¹Ÿæ²¡å¤ªå¼„æ¸…æ¥šæ˜¯æ€ä¹ˆç”¨çš„ï¼Œå’Œä¸Šé¢ä»‹ç»çš„ç¬”è®°äº§å“ç»„ç»‡æ ¼å¼ä¸åŒï¼Œä¹Ÿæ²¡æ€ä¹ˆä¼šç”¨ï¼Œå°±ä¸ç½®ç‚¹è¯„äº†ã€‚ æˆ‘æ¨èä½¿ç”¨æœ‰é“äº‘ç¬”è®°å’Œå°è±¡ç¬”è®°(æˆ–EverNote) è®°ç¬”è®°çš„ä½œç”¨æœ€å¤§çš„ä½œç”¨å°±æ˜¯å¯¹æŠ—é—å¿˜ï¼Œç”¨å¥½äº†ç¬”è®°ï¼Œç¬”è®°å°±æ˜¯ä½ çš„ç¬¬äºŒå¤§è„‘ï¼Œäººçš„è®°å¿†åŠ›æœ‰é™ï¼Œæˆ‘ä»¬é€šè¿‡è®°ç¬”è®°æ¥æ‹“å±•ã€‚ è®°ç¬”è®°ä¸‰æ­¥èµ°ï¼š æ”¶é›† æ•´ç† è¾“å‡º ä»¥ä¸‹è¿›è¡Œè¯¦ç»†æ­¥éª¤å™è¿°ï¼š è®°ç¬”è®°çš„æ­¥éª¤æ”¶é›†ç¬¬ä¸€æ­¥æ˜¯ç¡®å®šæ‰€è¦å†™çš„ç¬”è®°å†…å®¹ï¼Œå³æ”¶é›†ï¼Œæ”¶é›†è¿™é‡Œæˆ‘åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚ æ”¶é›†ä»–äººçš„å†…å®¹ä»–äººçš„å†…å®¹æŒ‡çš„æ˜¯ä»–äººæ‰€äº§ç”Ÿçš„å†…å®¹ï¼Œæ¯”å¦‚åˆ«äººå†™çš„ä¹¦ï¼Œåšå®¢æ–‡ç« ï¼Œå…¬ä¼—å·æ–‡ç« ç­‰ç­‰ï¼Œå½“ä½ é‡åˆ°äº†æ¯”å¦‚ä¸€ç¯‡ä½ è§‰å¾—å†™çš„å¾ˆæœ‰é“ç†æˆ–è€…å¯¹ä½ æœ‰ç”¨çš„æ–‡ç« ï¼Œè§‰å¾—æœ‰ä¿å­˜ä¸‹æ¥çš„ä»·å€¼ï¼Œä½ å¯ä»¥å°†å…¶çº³å…¥ä½ çš„ç¬”è®°å½“ä¸­å»ã€‚ æ”¶é›†è‡ªå·±çš„å†…å®¹è‡ªå·±çš„å†…å®¹æŒ‡çš„æ˜¯è‡ªå·±æ‰€äº§ç”Ÿçš„å†…å®¹ï¼Œæ¯”å¦‚çªå‘çš„çµå…‰ä¸€ç°ï¼Œå¦‚æœä¸ç«‹å³è®°å½•ä¸‹æ¥ï¼Œå¯èƒ½å°±å¿˜æ‰äº†ï¼Œç„¶åå†æƒ³çš„æ—¶å€™æ— è®ºå¦‚ä½•ä¹Ÿè®°ä¸èµ·æ¥äº†ï¼Œå°±æ„Ÿè§‰è‡ªå·±é”™è¿‡äº†ä¸€ä¸ªäº¿ã€‚æ‰€ä»¥è¦è¶ç€ä½ çš„æƒ³æ³•è¿˜æ²¡æœ‰æ¶ˆå¤±ä¹‹å‰ï¼Œç«‹å³è®°å½•åˆ°ç¬”è®°å½“ä¸­å»ã€‚ç°åœ¨äººæ‰‹éƒ½æœ‰ä¸€å‰¯æ‰‹æœºï¼Œè€Œäº‘ç¬”è®°éƒ½æœ‰å…¶å¯¹åº”çš„ç§»åŠ¨ç«¯ï¼Œè®°å½•èµ·æ¥å¾ˆæ–¹ä¾¿ã€‚ æ”¶é›†çš„è¯€çªæœ‰æ—¶å€™åœ¨æŸä¸ªç½‘ç«™çœ‹åˆ°ä¸€ç¯‡æ–‡ç« æƒ³è¦ä¿å­˜ä¸‹æ¥æ—¶å€™ï¼Œä¸€èˆ¬äººçš„åšæ³•æ˜¯è®²æ–‡ç« é€‰æ‹©æ‹·è´åˆ°ç¬”è®°å½“ä¸­å»ï¼Œè¿™ä¹ˆåšæ˜¯å¯è¡Œï¼Œä½†æ˜¯ä¼šå®Œå…¨æ²¡æœ‰äº†æ’ç‰ˆï¼Œçœ‹èµ·æ¥ä¹±ç³Ÿç³Ÿçš„ä¸€ç‰‡ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ©æµè§ˆå™¨æ’ä»¶æˆ–è€…åˆ†äº«åŠŸèƒ½æ¥å®ç°å¿«é€Ÿç¾è§‚åœ°ä¿å­˜ã€‚æœ‰é“äº‘ç¬”è®°çš„è°·æ­Œæµè§ˆå™¨æ’ä»¶å°±å¾ˆå¥½ç”¨ï¼Œåœ¨æ‰‹æœºä¸Šå¯ä»¥å…³æ³¨å…¬ä¼—å·ï¼Œåˆ†äº«åˆ°å…¬ä¼—å·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ†äº«åˆ°å¯¹åº”çš„ç¬”è®° App ä¸­ï¼Œä»è€Œå®ç°å¿«é€Ÿæ”¶é›†ã€‚ æ•´ç†æ”¶é›†å®Œçš„å†…å®¹ï¼Œåªæ˜¯å †å åˆ°äº†ä½ çš„ç¬”è®°å½“ä¸­ï¼Œå¦‚æœä¸åŠ ä»¥æ•´ç†æ€»ç»“ï¼Œå…¶å®å’Œæ•£å¸ƒåœ¨ç½‘ç»œä¸Šçš„æ–‡ç« æ¯«æ— åŒºåˆ«ï¼Œå¯¹ä½ æ²¡æœ‰ä»»ä½•çš„æ„ä¹‰ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•çš„ä»·å€¼ï¼›ä¹Ÿè®¸ä½ æƒ³æ‰¾ç¬”è®°é‡Œé¢æŸä¸€ç¯‡æ–‡ç« ï¼Œä½†æ˜¯ä½ å´æ­»æ´»ä¹Ÿæ‰¾ä¸åˆ°ï¼Œè¿™ç§æƒ…å†µä¸‹è®°ä¸ä¸è®°éƒ½ä¸€æ ·ï¼›æ­£å¦‚å»ä¸€åº§å›¾ä¹¦é¦†çœ‹ä¹¦ï¼Œä½†æ˜¯å›¾ä¹¦é¦†å´æ²¡æœ‰å›¾ä¹¦æŸ¥é˜…ç³»ç»Ÿï¼Œåœ¨æµ©æ¸ºä¹¦æµ·ä¸­æƒ³æ‰¾åˆ°ä¸€æœ¬ä¹¦çš„å›°éš¾ç¨‹åº¦å¯æƒ³è€ŒçŸ¥ï¼å› æ­¤æ”¶é›†åçš„æ•´ç†ååˆ†é‡è¦ã€‚ æ•´ç†åˆ†ä¸ºé‡æ–°æ’ç‰ˆä¸åˆ†ç±»ä»¥åŠåŠ æ ‡ç­¾ï¼ˆåœ¨ä¸‹æ–‡è¯¦è°ˆåˆ†ç±»ä¸æ ‡ç­¾ï¼‰ï¼š é€šè¿‡æµè§ˆå™¨æ’ä»¶ç­‰å·¥å…·æŠ“å–ä¿å­˜çš„å†…å®¹å¯èƒ½ä¼šä¸åŸæ–‡ä¸­çš„å†…å®¹æ’ç‰ˆç›¸å·®ç”šè¿œï¼Œæ¯”å¦‚æœ‰é“äº‘ç¬”è®°å¯¹äºä»£ç å—çš„æŠ“å–æ’ç‰ˆæ”¯æŒå°±å¾ˆå·®ï¼ˆå…¶ä»–å¾ˆä¸é”™ï¼‰ï¼Œè¿™ç§æƒ…å†µï¼Œå°±éœ€è¦æˆ‘ä»¬è‡ªå·±å¯¹å†…å®¹é‡æ–°æ’ç‰ˆï¼Œä¾¿äºä»¥åè‡ªå·±æŸ¥çœ‹ã€‚ä¸ªäººä¸€èˆ¬æ˜¯æ–°å»ºç«‹ä¸€ä¸ª Markdown ç¬”è®°ï¼Œæ‹·è´åŸæ–‡è¿›è¡Œç¼–æ’ï¼Œå¹¶åœ¨æ–‡æœ«æ ‡æ³¨æ–‡ç« æ¥æºé“¾æ¥ã€‚ è‰¯å¥½çš„ç¬”è®°åˆ†ç±»æœ‰åˆ©äºå¿«é€Ÿå‡†ç¡®åœ°å®šä½ç¬”è®°ï¼Œæå‡æ•ˆç‡ã€‚ ä¸€ç¯‡ç¬”è®°åªèƒ½æ”¾åœ¨ä¸€ä¸ªåˆ†ç±»ä¸­ï¼ˆå¯¹åº”ç¬”è®°çš„æ–‡ä»¶å¤¹)ï¼Œä½†æ˜¯å´èƒ½å¤Ÿæ·»åŠ å¤šä¸ªæ ‡ç­¾ï¼Œæˆ‘è®¤ä¸ºæ ‡ç­¾æ˜¯å¯¹åˆ†ç±»çš„ä¸€ç§è¡¥å……ã€‚å½“åˆ†ç±»ä¸è¶³ä»¥å‡†ç¡®å®šä½ç¬”è®°ï¼Œæ­¤æ—¶éœ€è¦é€šè¿‡æ·»åŠ æ ‡ç­¾æ¥å¼¥è¡¥ã€‚ è¾“å‡ºå•å•åªæ˜¯å°†å†…å®¹æ”¶é›†ï¼Œå½’ç±»åŠ æ ‡ç­¾ï¼Œå¹¶ä¸èƒ½å¤Ÿå¯¹è‡ªå·±äº§ç”Ÿå¾ˆå¤§çš„ç”¨å¤„ï¼Œæœ€å¤šçš„æ˜¯è‡ªå·±æƒ³èµ·æ¥å°±å»ç¬”è®°ä¸­å¯»æ‰¾ï¼Œæ­¤æ—¶ç¬”è®°çš„ä½œç”¨æœ€å¤šæ˜¯å……å½“å¤‡å¿˜å½•çš„ä½œç”¨ã€‚è€ŒçœŸæ­£æƒ³è¦åˆ©ç”¨å¥½ç¬”è®°ï¼Œå°±æ˜¯éœ€è¦æˆ‘ä»¬æ¥å¯¹ç¬”è®°è¿›è¡Œæ€»ç»“æ€è€ƒï¼Œæ¥è¾¾åˆ°åœ¨å¤´è„‘ä¸­æ·±åŒ–è¯¥ç¯‡ç¬”è®°çš„ä½œç”¨ã€‚ ä¸¾ä¾‹è€Œè¨€ï¼Œç°åœ¨ä½ å†™äº†ä¸€ç¯‡ã€Šæ‹†æ‰æ€ç»´é‡Œçš„å¢™ã€‹çš„è¯»ä¹¦ç¬”è®°ï¼Œä½†ç¬”è®°çš„å†…å®¹åªæœ‰å¯¹äºä¹¦ä¸­åŸæ–‡çš„éƒ¨åˆ†æ‘˜æŠ„ï¼›å…¶å®è¿™æ ·çš„ç¬”è®°ä½œç”¨ä¸å¤§ï¼Œæ—¶é—´é•¿äº†ï¼Œä½ ç”šè‡³ä¸è®°å¾—ä½ æ›¾ç»è¯»è¿‡è¿™æœ¬ä¹¦å¹¶å†™è¿‡è¯»ä¹¦ç¬”è®°ã€‚ä½†æ˜¯ä½ å¯¹æ–‡ç« è¿›è¡Œäº†æ€è€ƒï¼Œæ¦‚æ‹¬ä¹¦çš„ä¸»è¦ä¸­å¿ƒæ€æƒ³ï¼Œå†™äº†è‡ªå·±çš„æ„Ÿå—ï¼Œåœ¨è±†ç“£ä¸Šç•™ä¸‹äº†ä¹¦è¯„ï¼Œå°±ç®—æ—¶é—´ä¹…äº†ï¼Œç¿»çœ‹ç¬”è®°ä¹Ÿèƒ½å¤Ÿå›æƒ³èµ·å½“æ—¶è‡ªå·±çš„æƒ³æ³•ï¼Œè¿™ä¹¦ä¹Ÿå°±æ²¡æœ‰ç™½è¯»ï¼Œç¬”è®°ä¹Ÿå°±æ²¡æœ‰ç™½å†™ã€‚ ä¸Šæ–‡æåˆ°äº†åœ¨è±†ç“£ä¸­å†™ä¹¦è¯„ï¼Œè¿™å’Œå†™ç¬”è®°è¿›è¡Œæ€»ç»“æ€è€ƒä¸€æ ·éƒ½æ˜¯å¯¹äºçŸ¥è¯†çš„ä¸€ç§è¾“å‡ºã€‚è¾“å‡ºçš„æ–¹å¼è¿˜æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚åœ¨ç®€ä¹¦ä¸Šã€ä¸ªäººåšå®¢ä¸Šã€CSDNã€åšå®¢å›­ç­‰åœ°æ–¹å‘è¡¨æ–‡ç« ã€‚ å½“ç„¶ï¼Œä¹Ÿå¹¶éæ‰€æœ‰çš„åˆ†ç±»ä¸‹é¢éƒ½éœ€è¦è¿›è¡Œè¿™ä¸‰æ­¥ã€‚ ç»†è°ˆç¬”è®°åˆ†ç±»ä¸æ ‡ç­¾åˆ†ç±»æŒ‰ç…§ä¸ªäººçš„ä¹ æƒ¯ä¸ç»éªŒï¼Œæˆ‘å°†ç¬”è®°åˆ†ä¸ºäº†äº”å¤§ç±»ï¼Œå¦‚å›¾ï¼š 1ã€ æ”¶é›†ï¼ˆæŒ‡çš„æ˜¯ä¸Šå›¾ä¸­çš„æˆ‘çš„èµ„æºæ–‡ä»¶å¤¹ï¼Œå› ä¸ºæ˜¯æœ‰é“äº‘ç¬”è®°è‡ªåŠ¨åˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼Œæ”¹åå­—ä¹‹åä»–è¿˜ä¼šåˆ›å»ºè¿™ä¸ªï¼Œæ‰€ä»¥å°±æ²¡æœ‰æ”¹åå­—ï¼‰æ”¶é›†ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„åˆ†ç±»ï¼Œç”¨äºå­˜æ”¾æœªè¿›è¡Œæ•´ç†çš„æ”¶é›†ï¼Œæœ‰é“äº‘ç¬”è®°ç”Ÿæˆçš„æˆ‘çš„èµ„æºè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œä¼šæ ¹æ®ä½ ä½¿ç”¨çš„æ’ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹åº”æ¥æºçš„å­æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚æ¥è‡ªç½‘é¡µå‰ªæŠ¥ã€å¾®ä¿¡æ”¶è—ç­‰ï¼Œæˆ‘æ–°å»ºäº†ä¸€ä¸ª æ€ç»ªä¸‡åƒ æ–‡ä»¶å¤¹ï¼Œç”¨äºä¿å­˜çªå‘çš„æƒ³æ³•ã€‚ 2ã€ å¤‡å¿˜ é¡¾åæ€ä¹‰ï¼Œå¤‡å¿˜åˆ†ç±»ç”¨äºä¸€äº›éœ€è¦æŸ¥æ‰¾ä½¿ç”¨ï¼Œä½†åˆä¸éœ€è¦å®Œå…¨è®°å¿†çš„å†…å®¹ï¼Œæ¯”å¦‚å¾…åŠäº‹é¡¹ï¼Œå¾…è¯»ä¹¦å•ï¼Œè¿˜æœ‰ä¸€äº›çç¢çš„æ–‡æœ¬æ•°æ®å¤‡ä»½ç­‰ã€‚ 3ã€ å·¥ä½œ å·¥ä½œåˆ†ç±»ä¸‹é¢ä¸»è¦æ˜¯è®°å½•ä¸€äº›ä¸šåŠ¡éœ€æ±‚ï¼Œå·¥ä½œéš¾ç‚¹ä»¥åŠå·¥ä½œæŠ€å·§ã€‚ 4ã€ å­¦ä¹  ä¸»è¦æ˜¯ä¸€äº›å…³äºç¼–ç¨‹ç›¸å…³çš„å­åˆ†ç±»æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œå’Œå·¥ä½œåˆ†ç±»éƒ½å› äººè€Œå¼‚ã€‚ 5ã€ ç”Ÿæ´» ç”Ÿæ´»åˆ†ç±»ä¸»è¦æ”¾ä¸€äº›ç”Ÿæ´»ä¸­å­¦ä¹ çš„å†…å®¹ï¼Œæ¯”å¦‚è¯»ä¹¦ç¬”è®°ã€æŠ•èµ„æŒ‡å—ï¼Œä¿é™©ç›¸å…³çš„çŸ¥è¯†ã€‚å…¶å®è¿™ä¸ªåˆ†ç±»å’Œå­¦ä¹ åˆ†ç±»å¾ˆåƒï¼Œå› ä¸ºæˆ‘å…³äºä»£ç çš„ç¬”è®°æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å°†å…¶ä»–å’Œä»£ç ä¸ç›¸å…³çš„ç¬”è®°æ”¾åœ¨ç”Ÿæ´»åˆ†ç±»å½“ä¸­ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ†ç±»çš„å±‚çº§ä¸å®œåµŒå¥—å¤ªæ·±ï¼Œæœ€å¥½ä¿æŒåœ¨ä¸‰å±‚ä»¥å†…ï¼Œè¶…è¿‡åä¸åˆ©äºæŸ¥æ‰¾ã€‚(æ‰€ä»¥æˆ‘æŠŠä¸ä»£ç ä¸ç›¸å…³çš„æ”¾åˆ°ç”Ÿæ´»åˆ†ç±»ä¸‹) æ ‡ç­¾å†è°ˆç¬”è®°çš„æ ‡ç­¾ï¼Œæ—¢ç„¶æ ‡ç­¾æ˜¯å¯¹åˆ†ç±»çš„ä¸€ç§è¡¥å……ï¼Œå› æ­¤æ˜¯éå¿…è¦çš„ï¼ŒåŒæ—¶æ ‡ç­¾ä¸èƒ½å’Œåˆ†ç±»é‡å¤ï¼Œå‚è€ƒæ·»åŠ è¿™äº›æ ‡ç­¾ã€‚ æ–‡ç« æ¥æº ï¼ˆçŸ¥ä¹ã€ç®€ä¹¦ã€CSDNç­‰ï¼‰ å…³é”®è¯ ï¼ˆç¬”è®°çš„å…³é”®ç‚¹ï¼Œå¯ä»¥æå–å‡ ä¸ªè¯è¯­å‡ºæ¥ä½œä¸ºæ ‡ç­¾ï¼‰ ä¸è¦å¤ªå…·ä½“ ï¼ˆå¤ªå…·ä½“å°±ä¼šå¯¼è‡´æ ‡ç­¾è¿‡å¤šï¼Œåè€Œä¸åˆ©äºæ ‡ç­¾çš„ä½¿ç”¨ï¼‰ åè¨€æœ€åè¯´è¯´è®°ç¬”è®°çš„åŸåˆ™ è®°ç¬”è®°æ˜¯ä¸ºäº†ç”¨ï¼Œä¸ç”¨çš„ç¬”è®°æ²¡æœ‰ä»»ä½•ä»·å€¼ ä¸èƒ½åªæ”¶é›†ä¸å­¦ä¹  å®šæœŸå›é¡¾ï¼Œæ•´ç†ä¸å½’æ¡£ï¼ˆå®šæœŸå›é¡¾æœ‰åˆ©äºç¬”è®°å†…å®¹çš„è®°å¿†ï¼‰ è®°ç¬”è®°ä¼šé‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Ÿ å¼ºè¿«ç—‡çŠ¯äº†ï¼Œä¸çŸ¥é“è¯¥æ”¾åœ¨å“ªä¸ªåˆ†ç±»ä¸‹é¢ï¼Œ åŸåˆ™æ˜¯ç”¨ï¼Œä½ è®¤ä¸ºæ”¾åœ¨å“ªä¸ªåˆ†ç±»ä¸‹é¢æœ€å¯èƒ½è¢«ç”¨åˆ°ï¼Œå°±æ”¾åœ¨é‚£ä¸ªåˆ†ç±»ä¸‹é¢ã€‚ Nullpointerçš„åšå®¢ å‚è€ƒ https://www.zhihu.com/search?type=content&amp;q=%E7%AC%94%E8%AE%B0","tags":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"http://nullpointer.pw/tags/ç¬”è®°/"}]},{"title":"Mysqlè¡Œè½¬åˆ—è¾“å‡ºã€å®æˆ˜ã€‘","date":"2017-10-09T14:44:58.000Z","path":"Mysqlè¡Œè½¬åˆ—è¾“å‡ºã€å®æˆ˜ã€‘.html","text":"åœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œéœ€è¦å°†ä¸€è¡Œä¸€è¡Œçš„æ•°æ®è½¬æ¢æˆä¸€åˆ—æ•°æ®ã€‚æ¯”å¦‚æ¯ä¸ªäººçš„æ¯ä¸ªç§‘ç›®éƒ½æœ‰ä¸€ä¸ªåˆ†æ•°ï¼Œå¹¶åˆ†åˆ«å¯¹åº”ä¸€ä¸ªåˆ†æ•°ï¼Œä½†æ˜¯ä¸ºäº†æ›´åŠ ç›´è§‚åœ°çœ‹åˆ°ä¸€ä¸ªäººçš„æ‰€æœ‰ç§‘ç›®æˆç»©ï¼Œæ‰€ä»¥éœ€è¦å°†æ¯ä¸ªç§‘ç›®æˆç»©ç”±è¡Œè½¬æ¢æˆåˆ—ã€‚ åŸå§‹æ•°æ® id stuid name subject score 1 110 xiaoA è¯­æ–‡ 99 2 110 xiaoA æ•°å­¦ 88 3 112 xiaoB è¯­æ–‡ 69 4 112 xiaoB æ•°å­¦ 100 è¡Œæ•°æ®è½¬æ¢æˆåˆ—æ•°æ®ä¹‹å stuid name è¯­æ–‡ æ•°å­¦ 110 xiaoA 99 88 112 xiaoB 69 100 1234SELECT stuid, `name`, MAX(CASE `subject` WHEN 'C001' THEN score ELSE 0 END) as 'è¯­æ–‡', MAX(CASE `subject` WHEN 'C002' THEN score ELSE 0 END) as 'æ•°å­¦'FROM `sys_user` GROUP BY stuid; ä»¥ä¸‹é€šè¿‡ä¸¤ä¸ªåœ¨å·¥ä½œä¸­é‡åˆ°çš„å®ä¾‹ï¼Œæ¥ä½¿ç”¨ Mysql çš„è¡Œè½¬åˆ—ã€‚ å®ä¾‹å®ä¾‹ä¸€ç½‘ç«™è¿›è¡Œæ¨å¹¿ï¼Œæ¯ä¸ªæ¨å¹¿å‘˜éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€ ID å³ pidï¼Œç°åœ¨è¦ç»Ÿè®¡æ¯ä¸ªæ¨å¹¿å‘˜çš„æ¨å¹¿æ•°æ®ï¼›éœ€è¦ç»Ÿè®¡æ¨å¹¿è¿‡æ¥çš„æ–°å¢ç”¨æˆ·ï¼Œä»¥åŠæ–°å¢ç”¨æˆ·çš„å……å€¼ä»¥åŠæ¶ˆè´¹æ•°æ®ã€‚è¿™é‡Œç®€åŒ–äº†æ•°æ®ï¼Œä¾¿äºç†è§£ã€‚ æ•°æ®è¯´æ˜ï¼š create_timeï¼š æ•°æ®ç”Ÿæˆæ—¶é—´ pidï¼š æ¨å¹¿å‘˜å”¯ä¸€ID typeï¼š æ•°æ®ç±»å‹ 1ï¼š æ–°å¢ç”¨æˆ· 2ï¼š æ–°å¢å……å€¼ 3ï¼š æ–°å¢æ¶ˆè´¹ valueï¼š å¯¹åº”çš„æ•°æ®å€¼ éœ€æ±‚ç»“æœæ ·å¼ï¼š SQL æŸ¥è¯¢ï¼š 1234567SELECT create_time,MAX(CASE type WHEN 1 THEN value ELSE 0 END) 'æ–°å¢ç”¨æˆ·',MAX(CASE type WHEN 2 THEN value ELSE 0 END) 'æ–°å¢å……å€¼',MAX(CASE type WHEN 3 THEN value ELSE 0 END) 'æ–°å¢è®¢é˜…'FROM wings_companion_analytics GROUP BY create_time å®ä¾‹äºŒç»Ÿè®¡ç½‘ç«™å•æœ¬ä¹¦çš„è´­ä¹°æ¬¡æ•°ä»¥åŠè´­ä¹°é‡‘é¢ æ•°æ®è¯´æ˜ï¼š idï¼š ä¸»é”® bookIdï¼š ä¹¦çš„ ID task_idï¼š æ•°æ®ç±»å‹ 706ï¼š è´­ä¹°æ¬¡æ•° 707ï¼š è´­ä¹°é‡‘é¢ timeï¼š æ•°æ®ç”Ÿæˆæ—¶é—´ valueï¼š å¯¹åº”çš„æ•°æ®å€¼ éœ€æ±‚ç»“æœæ ·å¼ï¼š SQL æŸ¥è¯¢ï¼š 12345678SELECT bookId as 'ä½œå“ID', DATE_FORMAT(time,'%Y-%m-%d') as 'æ—¥æœŸ', MAX(CASE task_id WHEN 706 THEN `value` ELSE 0 END) AS 'è´­ä¹°æ¬¡æ•°', MAX(CASE task_id WHEN 707 THEN `value` ELSE 0 END) AS 'è´­ä¹°é‡‘é¢'from `t_task_result_day`WHERE task_id IN (706, 707)GROUP BY time, bookIdORDER BY bookId, time; èµ„æºä¸‹è½½ ç‚¹æˆ‘ä¸‹è½½å®ä¾‹æ‰€ç”¨æ•°æ® å‚è€ƒ http://blog.csdn.net/wulantian/article/details/52687640 http://blog.csdn.net/u013938484/article/details/50552747","tags":[{"name":"mysql","slug":"mysql","permalink":"http://nullpointer.pw/tags/mysql/"},{"name":"è¡Œè½¬åˆ—","slug":"è¡Œè½¬åˆ—","permalink":"http://nullpointer.pw/tags/è¡Œè½¬åˆ—/"},{"name":"å®æˆ˜","slug":"å®æˆ˜","permalink":"http://nullpointer.pw/tags/å®æˆ˜/"}]},{"title":"Nginxç¼“å­˜é…ç½®ä¹‹æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜","date":"2017-09-10T22:15:36.000Z","path":"Nginxç¼“å­˜é…ç½®ä¹‹æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜.html","text":"å‰è¨€ å‰æ–‡ä»‹ç»äº†åˆ©ç”¨ nginx çš„ nginx_ngx_cache_purge æ¨¡å—æ¥å®ç°ç¼“å­˜åŠŸèƒ½ï¼Œå¹¶è®¾ç½®äº†ç¼“å­˜æ—¶é—´ä¸ºä¸€å¤©ã€‚ ä½†æ˜¯å¦‚æœå‰ç«¯ä¿®æ”¹äº†é¡µé¢ï¼Œæ¯”å¦‚é¦–é¡µï¼Œç”±äº Nginx ç¼“å­˜çš„å­˜åœ¨ï¼Œç½‘ç«™é¦–é¡µå¹¶ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œè€Œæ˜¯è¦ç­‰åˆ°ç¼“å­˜è¿‡æœŸã€‚è¿™æ ·æ˜æ˜¾ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œæ‰‹åŠ¨ä½¿ Nginx ç¼“å­˜å¤±æ•ˆã€‚ä»¥ä¸‹ä¸ºæ“ä½œè¯¦è§£ã€‚ åŸºç¡€ç¯å¢ƒ å·²ç»è®¾ç½®ç¼“å­˜çš„ Nginx æœåŠ¡å™¨ï¼Œ å‚ç…§æˆ‘ä¹‹å‰åšæ–‡ Nginxç¼“å­˜é…ç½® Nginx é…ç½®æ–‡ä»¶æ‹†åˆ†åœ¨ä¼ä¸š Nginx åº”ç”¨ä¸­ï¼ŒNginx é…ç½®æ–‡ä»¶åº”è¯¥æ ¹æ®åŸŸåä¸åŒæ¥è¿›è¡Œæ‹†åˆ†ï¼Œç„¶ååœ¨ nginx.confä¸­è¿›è¡Œincludeå¼•å…¥ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ä¾¿äºç®¡ç†é…ç½®æ–‡ä»¶ï¼Œä¾¿äºä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œ è€Œ nginx.conf æ–‡ä»¶ä¸­åªä¿ç•™ upstream ä»¥åŠå…¶ä»–é€šç”¨é…ç½®ä¿¡æ¯ã€‚ åœ¨ Nginx çš„ conf ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ includeï¼Œ ç”¨äºä¿å­˜æ‹†åˆ†çš„é…ç½®æ–‡ä»¶ã€‚ 1mkdir include æ‹†åˆ†çš„è§„åˆ™å¯ä»¥å¦‚ä¸‹ï¼š æ¡Œé¢ç‰ˆï¼ˆWEBï¼‰çš„ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘½åä¸º nginx_web.conf æ‰‹æœºç‰ˆï¼ˆWAPï¼‰çš„ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘½åä¸º nginx_wap.conf å®‰å“çš„ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘½åä¸º nginx_apk.conf è‹¹æœçš„ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘½åä¸º nginx_ios.conf æ¸…é™¤ç¼“å­˜çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘½åä¸º purge.conf åœ¨ /usr/local/nginx/conf/nginx.conf ä¸­å¼•å…¥æ‹†åˆ†çš„é…ç½®æ–‡ä»¶ï¼Œ åœ¨é…ç½®æ–‡ä»¶ä¸­çš„ http èŠ‚ç‚¹ä¸‹è¿›è¡Œå¼•å…¥ 123456789101112http&#123; #...... # æ³¨æ„ purge.conf å¿…é¡»è¦ç¬¬ä¸€ä¸ªå¼•ç”¨ï¼ï¼ï¼ include include/purge.conf; # å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶ include include/nginx_web.conf; #include include/nginx_wap.conf; #include include/nginx_apk.conf; #include include/nginx_ios.conf;&#125; é…ç½®ç¼“å­˜æ¸…é™¤12345678910111213141516171819cd /usr/local/nginx/conf/includevi purge.conf#purge.conf æ–‡ä»¶å†…å®¹ä¸ºï¼šserver &#123; listen 80; server_name 192.168.200.129;# æ­¤å¤„æˆ‘é…ç½®çš„æ˜¯æœ¬æœºip charset utf8; location ~ /purge(/.*) &#123; allow all;# è®¿é—®æ­¤æ¥å£çš„ç™½åå•ï¼Œallä»£è¡¨æ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—®è¯¥è·¯å¾„ # tmpcache ä¸ºå‰æ–‡ä¸­ proxy_cache_path é‡Œé…ç½®çš„ keys_zone çš„å€¼ # www.domain.com$1$is_args$args è¡¨ç¤ºç¼“å­˜keyçš„åç§°ï¼Œæ¸…é™¤æŸä¸€åŸŸåä¸‹çš„ç¼“å­˜,å¯ä»¥æŒ‡å®šå‚æ•° # $1 ä»£è¡¨æ­£åˆ™åŒ¹é…ä¸­çš„ç¬¬ä¸€ç»„ proxy_cache_purge cachefile www.domain.com$1$is_args$args; &#125;&#125;# ä¿å­˜ purge.conf æ–‡ä»¶ æµ‹è¯•æ¸…é™¤ç¼“å­˜å¦‚æœè¦è¿›è¡Œç¼“å­˜æ¸…é™¤ï¼Œé¦–å…ˆéœ€è¦æœ‰ç¼“å­˜æ–‡ä»¶ï¼Œæ­¤å¤„å‚ç…§å‰æ–‡ Nginxç¼“å­˜é…ç½® ä¸­ï¼Œè®¿é—® www.domain.com/testpage2 ï¼Œåˆ·æ–°é¡µé¢ï¼Œç›´åˆ°ç¼“å­˜å·²ç»ç”Ÿæˆï¼Œå³ X-Cache çš„çŠ¶æ€ä¸º HITã€‚ è¿›å…¥ cd /tmp/cache/ ï¼ŒæŸ¥çœ‹å·²ç»ç”Ÿæˆäº†ç¼“å­˜æ–‡ä»¶ mark 123456# æµ‹è¯• nginx é…ç½®æ˜¯å¦æ­£ç¡®/usr/local/nginx/sbin/nginx -t# å¦‚æœæç¤º is okï¼Œè¯´æ˜é…ç½®æ²¡æœ‰é—®é¢˜ï¼Œå¦åˆ™éœ€è¦ä¿®æ”¹# é‡å¯ Nginx/usr/local/nginx/sbin/nginx -s reload æµè§ˆå™¨è®¿é—®ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡ curl å‘½ä»¤æ¥è®¿é—®ï¼‰ï¼š 1234# æ¸…é™¤keyä¸º www.domain.com/ çš„ç¼“å­˜192.168.200.129/purge/ # æ¸…é™¤ key ä¸º www.domain.com/testpage2 é¡µé¢ç¼“å­˜192.168.200.129/purge/testpage2 å¦‚æœè¿”å› åˆ™è¡¨ç¤ºæ¸…é™¤æˆåŠŸã€‚ èµ„æºä¸‹è½½ç¤ºä¾‹nginxé…ç½®æ–‡ä»¶","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"ç¼“å­˜","slug":"ç¼“å­˜","permalink":"http://nullpointer.pw/tags/ç¼“å­˜/"}]},{"title":"ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šæ„Ÿè§‰åˆ°å€¦æ€ ?","date":"2017-09-04T14:14:00.000Z","path":"ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šæ„Ÿè§‰åˆ°å€¦æ€ ï¼Ÿ.html","text":"ä¸ºä»€ä¹ˆäº§ç”Ÿå€¦æ€ ï¼Ÿåˆšå¼€å§‹ æ¥æ‰‹æ–°é¡¹ç›®ã€å­¦ä¹ æ–°æŠ€èƒ½æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯å…´å¥‹ä¸å·²ã€è¸Œèº‡æ»¡å¿—ã€è¿«ä¸åŠå¾…åœ°æƒ³å¤§å±•èº«æ‰‹ã€‚ä½†æ˜¯è¿‡äº†ä¸ä¹…ï¼Œæ–°é²œæ„Ÿé€€å´åï¼Œå¤§éƒ¨åˆ†çƒ­æƒ…å°±ä¼šæ¶ˆé€€ï¼Œæœ€ç»ˆå°±ä¼šå…´è¶£ç´¢ç„¶ï¼Œç§¯ææ€§ä½ï¼Œè¿›å±•ç¼“æ…¢æˆ–è€…æ¯«æ— è¿›å±•ã€‚ è¿™æ ·çš„äº‹æƒ…å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š åˆšå¼€å§‹å­¦ä¹ é©¾é©¶ï¼Œæ˜¯ä¸æ˜¯å¾ˆå…´å¥‹ï¼Ÿè¿‡äº†å¤šä¹…ä¹‹åï¼Œå°±ä¸å†çœŸæ­£å…³å¿ƒä½ çš„è½¦äº†ï¼Ÿå¤šä¹…ä»¥åï¼Œä½ å·²ç»è§‰å¾—å®ƒå·²ç»â€œè€â€äº†ï¼Ÿ é›„å¿ƒå‹ƒå‹ƒåœ°æƒ³é”»ç‚¼å‡ºä¸€å‰¯å¥½èº«æï¼ŒåŠäº†å¥èº«å¡åï¼Œå»äº†å‡ æ¬¡ä¹‹åå°±å†æ²¡å»è¿‡äº†ï¼Ÿ â€¦â€¦ æˆ‘ä»¬å½“å¼€å§‹å€¦æ€ ï¼Œäºæ˜¯æˆ‘ä»¬åŠé€”è€ŒåºŸï¼ŒåŠªåŠ›å¯»æ‰¾æ–°äº‹ç‰©ï¼Œæ‰¾å›è‡ªå·±çœŸæ­£çš„æ¿€æƒ…ã€‚ å¼€å§‹çš„æ—¶å€™æˆ‘ä»¬çš„å…´è¶£æœ€é«˜ï¼Œè€ŒåŠ¨æœºåœ¨å¼€å§‹é˜¶æ®µå¯èƒ½ä¸é«˜ï¼Œä½†æ˜¯éšç€å–å¾—è¿›å±•ï¼Œæˆ‘ä»¬çš„åŠ¨æœºæ°´å¹³å¼€å§‹ä¸Šå‡ã€‚æ—©æœŸçš„æˆåŠŸè®©ä½ æ„Ÿè§‰åˆ°æœ‰åŠ¨åŠ›ï¼Œå†²é‡åˆ™æ¨åŠ¨ä½ å‰è¿›ã€‚ ä½†æ˜¯éšç€æ—¶é—´çš„æ¨ç§»ï¼Œç¼“æ…¢çš„æˆæœè¿›å±•åœ¨ä¸æ–­æ¶ˆè€—ä½ çš„åŠ¨æœºï¼Œæœ€ç»ˆä¼šå‘ç°åŠ¨æœºå’Œå…´è¶£éƒ½æ¿’ä¸´è°·åº•ï¼Œè¿™å°±æ˜¯é‚£å µå¢™ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ„Ÿè§‰å€¦æ€ çš„åŸå› ã€‚ ä½†æ˜¯å¦‚æœæˆ‘ä»¬ç©¿è¿‡äº†è¿™é“å¢™ï¼Œæˆ‘ä»¬çš„åŠ¨æœºã€å…´è¶£ä¼šéšç€æˆæœçš„ä¸æ–­å–å¾—è€Œä¸æ–­ä¸Šå‡åŠ å¼ºï¼Œæœ€ç»ˆæˆ‘ä»¬è·å¾—äº†æœ€å¤§çš„å›æŠ¥ï¼Œåªæ˜¯èƒ½å¤Ÿç©¿è¿‡è¿™é“å¢™çš„äººå¾ˆå°‘ã€‚ å¦‚ä½•ç©¿è¿‡è¿™é“å¢™ï¼Ÿåˆ¶å®šä¸€ä¸ªç›®æ ‡æˆ–è®¡åˆ’ï¼Œé‡‡å–â€œå®šé¢å·¥ä½œæ³•â€ï¼Œå¹¶åšå†³æŒ‰ç…§è®¡åˆ’å®Œæˆå®šé¢å·¥ä½œã€‚ é¦–å…ˆéœ€è¦ç¡®ç«‹ä¸€ä¸ªç›®æ ‡ï¼Œè§„å®šè‡ªå·±è¦åœ¨é¢„å®šç¡®å®šçš„æ—¶é—´æ®µå†…éœ€è¦å–å¾—å¤šå¤§çš„è¿›å±•ã€‚ æ¯”å¦‚ï¼š æ¯å‘¨è·‘æ­¥ 3 æ¬¡ æ¯å‘¨å†™ä¸€ç¯‡åšå®¢ æ¯å¤©çœ‹åŠå°æ—¶çš„ä¹¦ æ¯å¤©å¼¹åŠå°æ—¶çš„å‰ä»– å°†æ‰€æœ‰é‡å¤æ€§å·¥ä½œçš„é¢‘ç‡è¿›è¡Œé‡åŒ–ï¼Œæœ‰çš„ä¸€æœˆä¸€æ¬¡ï¼Œæœ‰çš„ä¸€å‘¨3æ¬¡ï¼Œæœ‰çš„åˆ™æ˜¯æ¯å¤©ä¸¤æ¬¡ã€‚å¹¶æ‰¿è¯ºå®Œæˆï¼Œæ— è®ºåˆ®é£ä¸‹é›¨ã€‚ æ‰¿è¯ºæ˜¯å®šé¢å·¥ä½œæ³•çš„æ ¸å¿ƒï¼Œé™¤äº†æƒ³æ–¹è®¾æ³•å®Œæˆè‡ªå·±çš„å·¥ä½œï¼Œä¸ç»™è‡ªå·±ç•™ä¸‹ä»»ä½•å…¶ä»–çš„é€‰æ‹©ã€‚ å¤±è´¥ä¸èƒ½è¢«æ¥å—ï¼Œå› ä¸ºä½ è®©è‡ªå·±å¤±ä¿¡ä¸€æ¬¡ï¼Œå°±ä¼šæœ‰ç¬¬äºŒæ¬¡ï¼Œå¾ˆå¿«å®šé¢åœ¨ä½ çœ¼ä¸­å°±ä¼šå˜å¾—ä¸€æ–‡ä¸å€¼ã€‚ å®šé¢å·¥ä½œæ³•çš„ä¼˜ç‚¹è¿˜å¯ä»¥å¸®ä½ å…‹æœæ„å¿—åŠ›è–„å¼±çš„é—®é¢˜ã€‚é€šè¿‡é¢„å…ˆè®¾å®šå¥½çš„å¿…é¡»è¦éµå¾ªçš„è¿‡ç¨‹ï¼Œæ¶ˆé™¤éœ€è¦ä½œå‡ºå†³ç­–çš„éƒ¨åˆ†ã€‚ å³ä¸éœ€è¦åšåˆ¤æ–­â€”â€”ä½ çŸ¥é“å¿…é¡»è¦åšï¼Œåªéœ€è¦éµä»å‘½ä»¤ï¼Œé¿å…äº†æ„å¿—åŠ›è€—å°½çš„é—®é¢˜ã€‚","tags":[{"name":"è¯»ä¹¦","slug":"è¯»ä¹¦","permalink":"http://nullpointer.pw/tags/è¯»ä¹¦/"}]},{"title":"Nginxç¼“å­˜é…ç½®","date":"2017-08-20T08:09:08.000Z","path":"Nginxç¼“å­˜é…ç½®.html","text":"å‰è¨€ æœ¬æ–‡ä»‹ç»åˆ©ç”¨ nginx çš„ nginx_ngx_cache_purge æ¨¡å—æ¥å®ç°ç¼“å­˜åŠŸèƒ½ï¼Œå‰å‡ ç¯‡æ–‡ç« ä»‹ç»äº† Nginx çš„åŠ¨é™åˆ†ç¦»ä»¥åŠ CDN æŠ€æœ¯ï¼Œåœ¨å…¶åŸºç¡€ä¸Šï¼Œå†å¯¹æ•´ä¸ªé¡µé¢è¿›è¡Œç¼“å­˜ï¼Œå°†å¤§å¤§æé«˜æœåŠ¡å™¨çš„è´Ÿè½½èƒ½åŠ›ã€‚ åŸºç¡€ç¯å¢ƒ CentOS 6.8 minimal Nginx 1.12.1 ngx_cache_purge-2.3 ç¯å¢ƒæ­å»ºNginx ä¸ nginx_ngx_cache_purge ä¸‹è½½è§£å‹ å®‰è£… wget 1yum install wget ä¸‹è½½ Nginx 1wget http://nginx.org/download/nginx-1.12.1.tar.gz è§£å‹ Nginx åˆ° /usr/local/src/ ç›®å½• 1tar -zxvf nginx-1.8.1.tar.gz -C /usr/local/src/ ä¸‹è½½ ngx_cache_purge 1wget http://labs.frickle.com/files/ngx_cache_purge-2.3.tar.gz è§£å‹åˆ° Nginx åŒä¸€çº§ç›®å½• 1tar -zxvf ngx_cache_purge-2.3.tar.gz -C /usr/local/src/ ç›®å½•ç»“æ„ä¸º123---/usr/local/src --nginx-1.8.1 --ngx_cache_purge-2.3 è¿›å…¥ Nginx è§£å‹ç›®å½•1cd nginx-1.8.1 å®‰è£…å¿…è¦ä¾èµ–1yum -y install gcc pcre-devel openssl openssl-devel æ£€æŸ¥å®‰è£…ç¯å¢ƒ,å¹¶æŒ‡å®šå°†æ¥è¦å®‰è£…çš„è·¯å¾„å’Œè¦å®‰è£…çš„æ’ä»¶1./configure --prefix=/usr/local/nginx/ --with-http_realip_module --add-module=../ngx_cache_purge-2.3 å‚æ•°è¯´æ˜ï¼šâ€“prefixï¼š å°† nginx å®‰è£…åˆ°æ­¤ç›®å½•â€“with-http_realip_module å¯ç”¨è·å–ç”¨æˆ·çœŸå® IP æ¨¡å—â€“add-module=../ngx_cache_purge-2.3 æ·»åŠ  ngx_cache_purge æ¨¡å—ï¼Œç”¨äºç¼“å­˜ è¿›è¡Œç¼–è¯‘å®‰è£…1make &amp;&amp; make install ç¼–è¯‘å®Œæˆåï¼Œæ²¡æœ‰å‡ºç° error ä¸ºç¼–è¯‘å®‰è£…æˆåŠŸ è®¾ç½® Nginx ç¼“å­˜ç¼–è¾‘ nginx.conf é…ç½®æ–‡ä»¶1vi /usr/local/nginx/conf/nginx.conf æ·»åŠ å¦‚ä¸‹é…ç½® 12345678910111213141516171819202122232425262728293031# éœ€è¦åœ¨ /tmp ç›®å½•ä¸‹åˆ›å»º cache æ–‡ä»¶å¤¹ï¼#è®¾ç½®ç¼“å­˜åŒºçš„åç§°ä¸º tmpcacheï¼Œå†…å­˜ç¼“å­˜ç©ºé—´å¤§å°ä¸º 200MBï¼Œ1 å¤©æ²¡æœ‰è¢«è®¿é—®çš„å†…å®¹è‡ªåŠ¨æ¸…é™¤ï¼Œç¡¬ç›˜ç¼“å­˜ç©ºé—´å¤§å°ä¸º 5GBï¼Œ å¦‚æœè®¿é—®é¢‘ç‡ä¸é«˜çš„è¯ï¼Œ inactive æ—¶é—´å¯ä»¥è®¾ç½®é•¿ä¸€äº›ã€‚proxy_cache_path /tmp/cache levels=1:2 keys_zone=tmpcache:200m inactive=1d max_size=5g;server &#123; listen 80; server_name www.domain.com;#ä½ çš„åŸŸå charset utf8; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Up-Calling-Line-Id $http_x_up_calling_line_id; proxy_ignore_headers X-Accel-Expires Expires Cache-Control Set-Cookie; access_log logs/access.log main; location / &#123; proxy_pass http://127.0.0.1:8080; #proxy_cache çš„å€¼æ˜¯ proxy_cache_path ä¸­çš„ keys_zone çš„å€¼ proxy_cache tmpcache; #ç¼“å­˜ key çš„å€¼ proxy_cache_key $host$uri$is_args$args; proxy_cache_valid 200 301 5m; proxy_cache_use_stale updating error timeout invalid_header http_500 http_502 http_503 http_504; expires 1m; # å°†ç¼“å­˜çš„çŠ¶æ€æ·»åŠ åˆ° Header ä¸­ add_header X-Cache '$upstream_cache_status'; &#125;&#125; å¯åŠ¨ Nginx1/usr/local/nginx/sbin/nginx å¯åŠ¨ Tomcatå¯ä»¥ä½¿ç”¨è‡ªå·±çš„é¡¹ç›®ï¼Œæˆ–è€…ä½¿ç”¨æˆ‘æä¾›çš„é¡¹ç›®æ¥è¿›è¡Œæµ‹è¯•ã€‚ 1wget http://ojt4b2cr5.bkt.clouddn.com/SpringDemo.war å°†ä¸‹è½½çš„ war åŒ…æ”¾åˆ° Tomcat çš„ webapps ç›®å½•ä¸‹ï¼Œä¿®æ”¹ war åŒ…åç§°ä¸º ROOT.war ï¼Œå¯åŠ¨ Tomcatã€‚ æµ‹è¯• Nginx ç¼“å­˜ç¼“å­˜ä¹‹å‰ æŸ¥çœ‹ /tmp/cache ç›®å½•ï¼Œ ç›®å½•ä¸‹é¢æ²¡æœ‰ä»»ä½•æ–‡ä»¶ ä¿®æ”¹æœ¬æœºï¼ˆwindowsï¼‰çš„ hosts æ–‡ä»¶ï¼Œå°†é…ç½®çš„åŸŸåæŒ‡å‘æœåŠ¡å™¨ IP 1192.168.200.129 www.domain.com æ‰“å¼€æµè§ˆå™¨è®¿é—® www.domain.com/testpage1 å‘ç° X-Cache çš„çŠ¶æ€ä¸º MISS ï¼Œè¯´æ˜æ²¡æœ‰ç¼“å­˜ã€‚ å†æ¬¡åˆ·æ–°é¡µé¢å X-Cache çš„çŠ¶æ€å·²ç»å˜æˆäº† HIT åŒæ—¶åœ¨æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹ /tmp/cache ç›®å½• cd /tmp/cache/ å‘ç°è¯¥ç›®å½•ä¸‹é¢å·²ç»å¤šäº†æ–‡ä»¶ç›®å½•ï¼Œè¿›å»ä¹‹åæ‰“å¼€æ–‡ä»¶ï¼Œå‘ç°æ­£æ˜¯åˆšåˆšè®¿é—®é¡µé¢çš„æºç ï¼Œè¯´æ˜ Nginx çš„ç¼“å­˜å·²ç»é…ç½®æˆåŠŸäº†ã€‚åªè¦æ˜¯é…ç½®çš„åŸŸåä¸‹é¢çš„é¡µé¢ï¼Œ å¦‚æœæ²¡æœ‰è¿›è¡Œè¿‡æ»¤ï¼Œéƒ½ä¼šç¼“å­˜åˆ°æœåŠ¡å™¨ã€‚å½“ç¬¬äºŒæ¬¡è®¿é—®çš„æ—¶å€™ï¼Œè¯·æ±‚ç»è¿‡ Nginx æœåŠ¡å™¨æ—¶ï¼ŒNginx ç›´æ¥è¿”å›å·²ç»ç¼“å­˜çš„é™æ€é¡µé¢ï¼Œè¿™æ ·å°†å¤§å¤§é™ä½åº”ç”¨æœåŠ¡å™¨ Tomcat çš„è´Ÿè½½ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¹¶ä¸æ˜¯è¯¥åŸŸåä¸‹çš„æ‰€æœ‰é¡µé¢éƒ½éœ€è¦è¿›è¡Œç¼“å­˜ï¼Œå¦‚æœç¼“å­˜æœ‰è¯¯ï¼Œä¼šå‡ºç°å¾ˆä¸¥é‡çš„é—®é¢˜ã€‚æ¯”å¦‚ä¸æ­£ç¡®çš„å°†åŸŸåä¸‹çš„ç”¨æˆ·ä¸­å¿ƒè¿›è¡Œäº†ç¼“å­˜ï¼Œå½“å…¶ä»–ç”¨æˆ·ä¹Ÿè¿›å…¥é¡µé¢çš„æ—¶å€™ï¼Œæ˜¾ç¤ºçš„å…¨éƒ¨éƒ½æ˜¯ç¬¬ä¸€ä¸ªè¿›å…¥è¯¥é¡µé¢ç”¨æˆ·çš„ä¿¡æ¯ã€‚å› æ­¤å»ºè®®åšç¼“å­˜æ—¶ï¼Œæœ€å¥½æ ¹æ®åŸŸåæ¥åšï¼Œ æ ¹æ®ç”¨æˆ·ä¸åŒæ˜¾ç¤ºä¸åŒçš„é¡µé¢çš„åœ°å€å°±ä¸è¦åšç¼“å­˜ã€‚å½“ç„¶ï¼Œå¦‚æœæ¥å£åœ°å€è§„èŒƒï¼Œäº¦å¯ä»¥é€šè¿‡ Nginx æ­£åˆ™åŒ¹é…è·¯å¾„çš„æ–¹å¼ï¼Œåªå°†æŸäº›åŒ¹é…çš„è·¯å¾„åšç¼“å­˜ã€‚","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"ç¼“å­˜","slug":"ç¼“å­˜","permalink":"http://nullpointer.pw/tags/ç¼“å­˜/"}]},{"title":"é˜¿é‡Œäº‘CDNå®ç°ç½‘ç«™æ–‡ä»¶åŠ¨é™åˆ†ç¦»","date":"2017-08-19T23:21:04.000Z","path":"é˜¿é‡Œäº‘CDNå®ç°ç½‘ç«™æ–‡ä»¶åŠ¨é™åˆ†ç¦».html","text":"å‰è¨€ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº†å¦‚ä½•åˆ©ç”¨ Nginx æ¥å®ç°é™æ€èµ„æºè¯·æ±‚ä¸åŠ¨æ€è¯·æ±‚çš„åˆ†ç¦»ï¼Œè™½ç„¶ä¸æ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½å‹åˆ° Tomcat åº”ç”¨æœåŠ¡å™¨ï¼Œä½†æ˜¯é™æ€èµ„æºè¯·æ±‚è¿˜æ˜¯éƒ½ä¼šåˆ° ä¸»æœºä¸Šç»™ä¸»æœºå¸¦æ¥å‹åŠ›ï¼Œå› æ­¤æœ¬æ–‡é€šè¿‡åˆ©ç”¨é˜¿é‡Œäº‘çš„ CDN æŠ€æœ¯æ¥æ›´åŠ å½»åº•åœ°é™ä½åº”ç”¨è®¿é—®çš„è´Ÿè½½ã€‚ é…ç½®é™æ€èµ„æºåŸŸåå»ºç«‹ä¸€ä¸ªåªç”¨äºè¯·æ±‚é™æ€èµ„æºæ–‡ä»¶çš„äºŒçº§åŸŸåï¼Œå°†åŠ¨æ€è¯·æ±‚ä¸é™æ€è¯·æ±‚åˆ†ç¦»å¼€ã€‚ æ¯”å¦‚é™æ€èµ„æºè¯·æ±‚çš„åŸŸåæ˜¯ res.domain.com ï¼Œ åŠ¨æ€è¯·æ±‚çš„åŸŸåæ˜¯ www.domain.com é…ç½® Nginx é™æ€èµ„æºè®¾ç½®å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç«  NginxåŠ¨é™åˆ†ç¦» é˜¿é‡Œäº‘ CDN é…ç½®ç™»å½•é˜¿é‡Œäº‘ CDN æ§åˆ¶å°ï¼Œæ·»åŠ åŸŸåã€‚ éœ€è¦æ³¨æ„çš„æ˜¯èµ„æºæ–‡ä»¶åªéœ€è¦æ”¾åˆ°ä¸€å°ä¸»æœºä¸Šå³å¯ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚ æ·»åŠ  CDN åŸŸåæˆåŠŸåï¼Œå›åˆ°åŸŸåç®¡ç†é¡µé¢ï¼Œ åœ¨åŸŸååˆ—è¡¨ä¸­æ‰¾åˆ°æ–°åŠ çš„åŸŸåï¼Œå…‰æ ‡æ‚¬æµ®åˆ°è¯¥åŸŸåä¸Šï¼Œä¼šå‡ºç°ä¸€ä¸ª å¤åˆ¶ CNAME çš„æŒ‰é’®ï¼Œé€‰æ‹©å¤åˆ¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç±»ä¼¼äº res.domain.com.w.kunlunle.com çš„åŸŸåã€‚ DNS é…ç½®è¿›å…¥ä½ çš„åŸŸåçš„ DNS æœåŠ¡æä¾›å•†æ§åˆ¶å°ï¼Œæˆ‘è¿™é‡Œæ˜¯ DNSPOD ï¼Œ æ‰¾åˆ°é™æ€èµ„æºåŸŸåï¼Œæˆ‘çš„æ˜¯ res.domain.com ä¿®æ”¹è®°å½•ç±»å‹ä¸º CNAME ï¼Œè®°å½•å€¼ä¿®æ”¹ä¸ºä¸Šä¸€æ­¥å¤åˆ¶çš„ åŸŸåï¼Œå¦‚ res.domain.com.w.kunlunle.comã€‚ é€‰æ‹©ä¿å­˜ï¼Œç­‰å¾…å‡ åˆ†é’Ÿ DNS ç”Ÿæ•ˆåï¼Œè®¿é—®åŸŸåè¯•è¯•å§ï¼ æ¯”å¦‚æˆ‘çš„ res.domain.com/_res/a.jpg ï¼ˆéœ€è¦äº‹å…ˆåœ¨èµ„æºæœåŠ¡å™¨ä¸Šäº‹å…ˆæ”¾ç½®è¯¥é™æ€æ–‡ä»¶ï¼‰ å¦‚æœè®¿é—®ä¸åˆ°è¯´æ˜é…ç½®æœ‰è¯¯æˆ–è€…ç¼“å­˜è¿˜æœªç”Ÿæ•ˆã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå‘å°±æ˜¯ï¼Œè‡ªå·±çš„ç”µè„‘æœ‰å¯èƒ½å› ä¸ºç¼“å­˜æ²¡åˆ·æ–°è®¿é—®ä¸åˆ°è¯¥è·¯å¾„é™æ€èµ„æºï¼Œè€Œåˆ«äººçš„ç”µè„‘å¯ä»¥ï¼Œå¯ä»¥æ¢ä¸€å°ç”µè„‘å°è¯•è®¿é—®ï¼Œæˆ–è€…é€šè¿‡æ‰‹æœºæµè§ˆå™¨è®¿é—®å°è¯•ã€‚ Endã€‚","tags":[{"name":"åŠ¨é™åˆ†ç¦»","slug":"åŠ¨é™åˆ†ç¦»","permalink":"http://nullpointer.pw/tags/åŠ¨é™åˆ†ç¦»/"}]},{"title":"NginxåŠ¨é™åˆ†ç¦»","date":"2017-08-19T09:44:23.000Z","path":"NginxåŠ¨é™åˆ†ç¦».html","text":"å‰è¨€æœ€æ–°å…¬å¸æ–°å¼€äº†ä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®ç”±æˆ‘æ¥é…ç½®åŸºç¡€ç¯å¢ƒï¼Œä¼šå†™ä¸€ç³»åˆ—çš„æ•™ç¨‹æ¥å±•ç¤ºï¼Œä¸€ä¸ªç½‘ç«™ä»é›¶åˆ°ä¸Šçº¿çš„æ•´ä¸ªè¿‡ç¨‹ã€‚é¦–å…ˆæœ¬æ–‡ä»‹ç»èµ„æºæ–‡ä»¶çš„éš”ç¦»ã€‚ ä¸ºä»€ä¹ˆè¦å®ç°åŠ¨é™åˆ†ç¦»ä¸ºä»€ä¹ˆè¦å°†é™æ€èµ„æºæ–‡ä»¶ä¸åŠ¨æ€è¯·æ±‚è¿›è¡Œåˆ†ç¦»ï¼Ÿ ä¸ºäº†é™ä½ Tomcat æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œå¯ä»¥é€šè¿‡æœ¬æ–‡è®¾ç½®å¹¶ç»“åˆ CDN æ¥å®ç°æ¥æ›´å½»åº•åœ°é™ä½æœåŠ¡å™¨çš„è´Ÿè½½ã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½å‹åˆ°äº†åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œ æ— è®ºé™æ€è¿˜æ˜¯åŠ¨æ€çš„è¯·æ±‚ï¼Œè¿™æ ·æµé‡å¤§çš„è¯åŠ¿å¿…ä¼šé€ æˆæœåŠ¡å™¨çš„è´Ÿè½½è¿‡é«˜ï¼Œå› ä¸ºåŠ¨é™åˆ†ç¦»æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ ç¯å¢ƒä»‹ç»é¦–å…ˆè¿™æ˜¯æˆ‘ä»¬é¡¹ç›®çš„ç›®å½•ç»“æ„ï¼Œ resource ç›®å½•å’Œ _res ç›®å½•ä¸­éƒ½æ˜¯é™æ€èµ„æºæ–‡ä»¶ï¼Œå­˜æ”¾æ¯”å¦‚ js/css/img ç­‰èµ„æºã€‚è¿™ä¸¤ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æœ‰æ‰€ä¸åŒï¼Œ_res ç›®å½•ä¸‹é¢æ˜¯å‹ç¼©ç‰ˆæœ¬çš„ï¼Œæ¯”å¦‚å‹ç¼©çš„js/cssã€‚é€šè¿‡ Git æˆ–è€… SVN å°†é¡¹ç›®ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šåï¼Œé…ç½® Nginx æ¥å®Œæˆé™æ€èµ„æºçš„åˆ†ç¦»ã€‚ é¦–å…ˆçœ‹ä¸€å¼ å›¾(å›¾çš„æ¥æºæ˜¯ï¼šhttp://www.cnblogs.com/xiaoblog/p/4241086.html) å½“è¯·æ±‚ç»è¿‡ Nginx æ—¶ï¼Œå¦‚æœæ˜¯é™æ€èµ„æºçš„è¯·æ±‚ï¼Œå°±ç›´æ¥è¿”å›ä¸»æœºä¸Šé™æ€èµ„æºå³å¯ï¼Œ å¦‚æœæ˜¯åŠ¨æ€è¯·æ±‚ï¼Œåˆ™å»è¯·æ±‚ Tomcat æœåŠ¡å™¨åå†è¿”å›ã€‚å¦‚æœæµé‡ä¸æ˜¯å¾ˆå¤§ï¼Œé™æ€èµ„æºå¯ä»¥å’Œ Tomcat æœåŠ¡å™¨æ”¾åœ¨åŒä¸€å°ä¸»æœºä¸Šï¼Œå¦åˆ™éœ€è¦å°†é™æ€èµ„æºä¸ Tomcat æœåŠ¡å™¨åˆ†å¼€ã€‚ æˆ‘å¸å¯¹äºèµ„æºæ–‡ä»¶çš„åšæ³•æ˜¯æ–°å»ºä¸€ä¸ªäºŒçº§åŸŸåï¼Œè¯¥åŸŸååªç”¨äºåŠ è½½é™æ€èµ„æºæ–‡ä»¶ã€‚å¦‚ res.domain.comï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ç®€åŒ–äº†åœ¨ Nginx çš„ é…ç½®ã€‚ é…ç½® Nginxé¦–å…ˆéœ€è¦å®‰è£… Nginxï¼Œ å¯ä»¥å‚è€ƒæˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç«  Nginxå®ç°Tomcaté›†ç¾¤ã€‚è¿™é‡Œåªéœ€è¦å‚è€ƒåˆ°å®‰è£… Nginx å³å¯ã€‚ Nginx é™æ€èµ„æºé…ç½® æ‰“å¼€ Nginx é…ç½®æ–‡ä»¶ vim /usr/local/nginx/conf/nginx.conf æ·»åŠ  server 1234567891011121314151617181920212223242526272829303132333435server &#123; # åªæ¥æ”¶é™æ€èµ„æºè¯·æ±‚ listen 80; server_name res.domain.com; charset utf8; default_type text/plain; add_header Access-Control-Allow-Origin *; #access_log logs/heiyan.image.access.log click; location ~* \\.(zip|rar|gz|tar.gz|gz|exe)$ &#123; return 500; &#125; location / &#123; #èµ„æºæ–‡ä»¶çš„ç›®å½• root /home/resources; index index.html; expires 30d; default_type text/plain; &#125;&#125;server &#123; # æ¥æ”¶åŠ¨æ€è¯·æ±‚ listen 80; server_name www.domain.com; charset utf8; access_log logs/access.log main; location / &#123; proxy_pass http://127.0.0.1:8080; &#125;&#125; æ‹·è´é¡¹ç›®ä¸­èµ„æºæ–‡ä»¶åˆ°æŒ‡å®šçš„èµ„æºç›®å½•åœ¨ Nginx çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šäº†èµ„æºæ–‡ä»¶çš„ç›®å½•ä¸º /home/resources ï¼Œæ‰€ä»¥éœ€è¦å°†èµ„æºæ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ï¼Œè¿›å…¥ä¸Šæ–‡ä¸‹è½½çš„é¡¹ç›®çš„ç›®å½•ä¸­ï¼Œå°†èµ„æºç›®å½•ï¼ˆæˆ‘è¿™é‡Œæ˜¯_resç›®å½•)æ‹·è´åˆ° /home/resourcesç›®å½•ä¸‹é¢ã€‚ cp -rf _res /home/resources æ‹·è´å®Œæˆåçš„ç›®å½•åº”è¯¥æ˜¯ï¼š /home/resources/_res åœ¨ /home/resources/_res ç›®å½•ä¸‹æ”¾ä¸€å¼ å›¾ç‰‡ a.jpg ï¼Œç”¨äºæµ‹è¯•ã€‚ æµ‹è¯•é™æ€èµ„æºè·å–å¯åŠ¨ Nginx æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š http://res.domain.com/_res/a.jpg å¦‚æœæ˜¯åŠ¨æ€è¯·æ±‚ï¼Œåˆ™ä½¿ç”¨ http://www.domain.com åŸŸå è¿”å›ç»“æœï¼š å› ä¸ºé™æ€èµ„æºæ–‡ä»¶åŒ…å« css/js ç­‰æ–‡ä»¶ï¼Œä¿®æ”¹æäº¤åéœ€è¦æ‹·è´å¢é‡ä¸ä¿®æ”¹çš„æ–‡ä»¶åˆ° /home/resources ç›®å½•ä¸‹ï¼Œå¦‚æœå«Œéº»çƒ¦ï¼Œå¯ä»¥ç›´æ¥åœ¨ Nginx é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½® è·¯å¾„ä¸ºé¡¹ç›®çš„èµ„æºæ–‡ä»¶å¤¹æ ¹è·¯å¾„ï¼Œæ¯”å¦‚ /home/wide-api/src/main/java/resources/_resï¼Œ è¿™ç§åœ¨æ›´æ–°ä»£ç ä¹‹åï¼Œå¯ä»¥ç›´æ¥è¯·æ±‚åˆ°æ–°çš„èµ„æºæ–‡ä»¶ã€‚ä¹‹åä¼šå†™ä¸€ç¯‡é€šè¿‡é˜¿é‡Œäº‘CDNæ¥å®Œæˆé™æ€åˆ†ç¦»ã€‚ æ³¨ï¼š ç”±äºæˆ‘çš„æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šçš„ Nginx è¿›è¡Œæµ‹è¯•ï¼Œä¹Ÿæ²¡æœ‰åŸŸåï¼Œä¸”æ˜¯minimalç‰ˆæœ¬ç³»ç»Ÿï¼Œæ²¡æœ‰æ¡Œé¢ç¯å¢ƒï¼Œæ‰€ä»¥éœ€è¦é…ç½®å®¿ä¸»æœºçš„hostsï¼Œ åœ¨å®¿ä¸»æœºçš„æµè§ˆå™¨ä¸­è®¿é—®ã€‚åœ¨çœŸå®æœåŠ¡å™¨ä¸”æœ‰è‡ªå·±ç»‘å®šåˆ°æœåŠ¡å™¨ä¸ŠåŸŸåçš„å°±ç›´æ¥æµ‹è¯•å³å¯ã€‚ ä½¿ç”¨ SwitchHosts è½¯ä»¶ é…ç½® hostsï¼Œæˆ‘çš„è™šæ‹Ÿæœº ip ä¸º192.168.200.129 1192.168.200.129 www.domain.com res.domain.com","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"åŠ¨é™åˆ†ç¦»","slug":"åŠ¨é™åˆ†ç¦»","permalink":"http://nullpointer.pw/tags/åŠ¨é™åˆ†ç¦»/"}]},{"title":"CentOSå¿«é€Ÿå®‰è£…","date":"2017-08-18T23:40:27.000Z","path":"CentOSå¿«é€Ÿå®‰è£….html","text":"å‰è¨€æœ€è¿‘å­¦ä¹ è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨åˆ° Linux ç³»ç»Ÿï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æœåŠ¡å™¨ï¼Œå› æ­¤é€šè¿‡è™šæ‹Ÿæœºæ¥å®Œæˆã€‚æœ¬æ–‡ä¸ä»å¤´å¼€å§‹ä»‹ç»è™šæ‹Ÿæœºçš„å®‰è£…ï¼Œåªè®²è§£ è™šæ‹Ÿæœºè‡ªåˆ¶é•œåƒ å¤‡ä»½çš„å¿«é€Ÿè¿˜åŸï¼Œå¦‚æœä½ éœ€è¦ä»å¤´å¼€å§‹å®‰è£…çš„ï¼Œè¯·å¦å¯»æ•™ç¨‹ã€‚æœ¬æ–‡ä¸­æ¶‰åŠçš„é•œåƒä¼šæä¾›ä¸‹è½½åœ°å€ï¼Œä»¥ä¾›å‚è€ƒã€‚ å­¦ä¹ è¿‡ç¨‹ä¸­å®‰è£…è™šæ‹Ÿæœºæ—¶æ€»æ˜¯ä¼šé‡åˆ°ä¸€äº›éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´æ‰èƒ½è§£å†³çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸èƒ½è”ç½‘ã€æ•°æ®åº“è¿æ¥ä¸ä¸Šã€ssh è¿æ¥ä¸äº†ç­‰é—®é¢˜ï¼Œä¸ºäº†ä¾¿äºå­¦ä¹ ï¼Œæœ¬äººå°†å®‰è£…å¥½çš„ç³»ç»Ÿå¯¼å‡ºä¸ºé•œåƒæ–‡ä»¶ï¼Œä»¥åå¦‚æœéœ€è¦æ·»åŠ è™šæ‹Ÿæœºæ—¶ï¼Œç›´æ¥è¿˜åŸé•œåƒä¿®æ”¹éƒ¨åˆ†é…ç½®å³å¯ï¼Œä»¥ä¸‹ä¸ºæ•™ç¨‹ã€‚ ç¯å¢ƒå‡†å¤‡ è™šæ‹Ÿæœºè½¯ä»¶ VMwareÂ® Workstation 11 ç³»ç»Ÿé•œåƒç‰ˆæœ¬ CentOS 6.8 minimal (å‘½ä»¤è¡Œç‰ˆæœ¬ï¼Œæ— æ¡Œé¢) è‡ªå®šä¹‰é•œåƒä»¥åŠVMwareä¸‹è½½ é“¾æ¥ï¼šhttp://pan.baidu.com/s/1nuKxhpf å¯†ç ï¼š8dt8è‹¥é“¾æ¥å¤±æ•ˆï¼Œå‘é‚®ä»¶ç»™æˆ‘è¡¥é“¾æ¥ è”ç³»æˆ‘ VMware é…ç½®éœ€è¦å®‰è£…çš„è™šæ‹Ÿæœºé‡‡å– NAT æ–¹å¼è”ç½‘ï¼Œå› æ­¤ éœ€è¦åœ¨ VMware ä¸­é…ç½®ç½‘å…³åœ°å€ã€‚ æ‰“å¼€è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ï¼Œè®¾ç½®å­ç½‘ IP ç‚¹å‡» NAT è®¾ç½®ï¼Œè®¾ç½®ç½‘å…³åœ°å€IP ï¼ˆç½‘å…³ç›¸å½“äºä¸€ä¸ªè·¯ç”±å™¨ï¼‰ï¼Œæ³¨æ„ç½‘å…³ IP è¦å’Œå­ç½‘ IP å¤„äºåŒä¸€ä¸ªç½‘æ®µã€‚å¦‚192.168.200.x å¯¼å…¥é•œåƒæ–‡ä»¶ä¾æ¬¡é€‰æ‹©èœå•ï¼Œ æ–‡ä»¶â€“&gt;æ‰“å¼€â€“&gt; æ‰¾åˆ°ä¸‹è½½é•œåƒè§£å‹çš„æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©192.168.200.129.ovf æ–‡ä»¶ è®¾ç½®è™šæ‹Ÿæœºåç§°å’Œè™šæ‹Ÿæœºä¿å­˜è·¯å¾„ï¼Œé€‰æ‹©å¯¼å…¥ã€‚ ç¨ç­‰ä¸€ä¼šå„¿å¯¼å…¥æˆåŠŸåï¼Œå¼€å¯è™šæ‹Ÿæœºã€‚ è™šæ‹Ÿæœºç½‘ç»œé…ç½®ç™»å½•è´¦å·ï¼šroot å¯†ç ï¼š123456 åˆšå®‰è£…å®Œæ˜¯æ— æ³• ping é€šå¤–ç½‘çš„ï¼Œéœ€è¦ä¿®æ”¹ç½‘ç»œé…ç½®ï¼Œ å½“å‰é•œåƒå·²ç»è®¾ç½®äº†é™æ€ ipï¼Œä¾¿äºä½¿ç”¨ã€‚ ä¿®æ”¹ 70-persistent-net.rules æ–‡ä»¶ vi /etc/udev/rules.d/70-persistent-net.rules æ³¨é‡Šæ‰ eth0 æ‰€åœ¨è¡Œï¼Œç»“æœåº”è¯¥ä¸ºï¼š1234# PCI device 0x8086:0x100f (e1000)#SUBSYSTEM==\"net\", ACTION==\"add\", DRIVERS==\"?*\", ATTR&#123;address&#125;==\"00:0c:29:30:a4:b5\", ATTR&#123;type&#125;==\"1\", KERNEL==\"eth*\", NAME=\"eth0\"# PCI device 0x8086:0x100f (e1000)SUBSYSTEM==\"net\", ACTION==\"add\", DRIVERS==\"?*\", ATTR&#123;address&#125;==\"00:0c:29:cd:05:ea\", ATTR&#123;type&#125;==\"1\", KERNEL==\"eth*\", NAME=\"eth1\" ä¿®æ”¹ç½‘ç»œé…ç½®æ–‡ä»¶ï¼Œè®¾ç½®é™æ€IPåœ°å€å’Œç½‘å…³åœ°å€vi /etc/sysconfig/network-scripts/ifcfg-eth0 1234567891011DEVICE=eth1 # ä¿®æ”¹eth0 ä¸ºeth1TYPE=EthernetONBOOT=yesNM_CONTROLLED=yesBOOTPROTO=staticIPADDR=192.168.200.132 # ä¿®æ”¹ä¸ºæƒ³è¦çš„é™æ€ipåœ°å€ï¼Œ å¦‚æœç½‘å…³åœ°å€ä¸º192.168.100.2 åˆ™ipåœ°å€ä¸º 192.168.100.x xä¸º1-254ï¼Œä¸”ä¸ä¸ç½‘å…³åœ°å€é‡å¤GATEWAY=192.168.200.2 # ä¿®æ”¹ä¸ºä½ è™šæ‹Ÿæœºçš„ç½‘å…³åœ°å€ IPNAME=\"System eth0\"NETMASK=255.255.255.0DNS1=8.8.8.8DNS2=4.4.4.4 é‡å¯è™šæ‹Ÿæœº reboot è¿™æ˜¯å¿…é¡»çš„æ­¥éª¤ï¼ æ£€éªŒæ˜¯å¦ä¿®æ”¹ç”Ÿæ•ˆ é‡å¯ç™»å½•æˆåŠŸåï¼Œ è¾“å…¥ ip addrï¼Œ å¦‚æœä½ æ˜¾ç¤ºçš„å’Œæˆ‘ä¸€è‡´ï¼Œåˆ™æ˜¯æ­£ç¡®çš„ã€‚ å¦‚æœä½ çš„å‡ºç°äº†ä¸¤æ¡ inetï¼Œ è¯´æ˜ç¬¬ 1 æ­¥ï¼Œ å’Œç¬¬ 2 æ­¥æ²¡æœ‰é…ç½®æ­£ç¡®ã€‚æ­¤æ—¶ ping ä¸€ä¸‹ç™¾åº¦ï¼Œå‘ç°å·²ç»å¯ä»¥ ping é€šäº†ã€‚ è‡³æ­¤ï¼Œè™šæ‹Ÿæœºå·²ç»é…ç½®å¥½äº†ã€‚å¯ä»¥é€šè¿‡ SSH è½¯ä»¶è¿›è¡Œè¿æ¥äº†ã€‚ å»ºè®®ï¼šè™šæ‹Ÿæœºå®‰è£…å®Œæˆåï¼Œå¯¹å…¶è¿›è¡Œå¿«ç…§ï¼Œé˜²æ­¢å¼„åäº†è¿˜éœ€è¦é‡æ–°å®‰è£…ã€‚ åœ¨å¿«ç…§ç®¡ç†å™¨ä¸­ï¼Œå¯ä»¥é€‰æ‹©ä¿å­˜çš„å¿«ç…§ï¼Œè¿˜åŸåˆ°å¿«ç…§æ—¶çš„ç³»ç»Ÿã€‚","tags":[{"name":"centos","slug":"centos","permalink":"http://nullpointer.pw/tags/centos/"},{"name":"è™šæ‹Ÿæœº","slug":"è™šæ‹Ÿæœº","permalink":"http://nullpointer.pw/tags/è™šæ‹Ÿæœº/"}]},{"title":"Javaä¹‹wordå¯¼å‡ºä¸‹è½½","date":"2017-07-27T14:12:07.000Z","path":"Javaä¹‹wordå¯¼å‡ºä¸‹è½½.html","text":"å‰è¨€æœ€è¿‘é‡åˆ°é¡¹ç›®éœ€æ±‚éœ€è¦å°†æ•°æ®åº“ä¸­çš„éƒ¨åˆ†æ•°æ®å¯¼å‡ºåˆ° word ä¸­ï¼Œå…·ä½“æ˜¯åœ¨ä¸€ä¸ªæ–°é—»åˆ—è¡¨ä¸­å°†é€‰ä¸­çš„æ–°é—»å¯¼å‡ºåˆ°ä¸€ä¸ª word ä¸­ã€‚å‚è€ƒäº†ç½‘ä¸Šä¸€äº›æ•™ç¨‹ï¼Œå®ç°äº†è¯¥åŠŸèƒ½ï¼Œåœ¨æ­¤è®°å½•ä¸‹æ¥ã€‚ å¯¼å‡ºç»“æœå¦‚ä¸‹ï¼š å›¾ä¸­ä¸ºå¯¼å‡ºçš„å…¶ä¸­ä¸¤æ¡æ–°é—»ã€‚ æœç´¢ç½‘ä¸Šå¯¼å‡º word çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œä½†æ˜¯å¾ˆå¤šéƒ½æ˜¯ä¸€ç¬”å¸¦è¿‡ï¼Œæœ‰ç¤ºä¾‹ä»£ç çš„åªæ‰¾åˆ°äº† POI å¯¼å‡ºï¼Œå’Œé€šè¿‡ FreeMarker æ–¹å¼å¯¼å‡ºï¼Œä½†æ˜¯åªæ˜¯å…·æœ‰å‚è€ƒæ„ä¹‰ã€‚æœ¬æ–‡é‡‡å–ä½¿ç”¨ FreeMark æ–¹å¼ã€‚ å®ç°æ­¥éª¤ Maven å·¥ç¨‹å¼•å…¥FreeMarker çš„ä¾èµ–ï¼Œé Maven å·¥ç¨‹æ·»åŠ  jar åŒ… 12345&lt;dependency&gt; &lt;groupId&gt;org.freemarker&lt;/groupId&gt; &lt;artifactId&gt;freemarker&lt;/artifactId&gt; &lt;version&gt;2.3.26-incubating&lt;/version&gt;&lt;/dependency&gt; åˆ›å»º word æ¨¡æ¿ æ–°å»º word æ›¿æ¢å†…å®¹ä¸ºå ä½ç¬¦ å¦å­˜æ¨¡æ¿ä¸º XML æ–‡ä»¶ ä½¿ç”¨ NotePad++ æ‰“å¼€ xml æ–‡ä»¶ é€‰ä¸­å…¨éƒ¨å†…å®¹ï¼Œåˆ°è¿™é‡Œè¿›è¡Œæ ¼å¼åŒ– å°†åŸå†…å®¹æ›¿æ¢ä¸ºæ ¼å¼åŒ–åçš„å†…å®¹ å› ä¸ºæˆ‘çš„ word çš„å†…å®¹æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ ä¸€ä¸ª freemarer æ ‡ç­¾æ ‡è¯† æ‰¾åˆ°&lt;w:document&gt; å…ƒç´ ä¸‹é¢çš„ &lt;w:body&gt; å…ƒç´ ï¼Œæ·»åŠ &lt;#list newsList news&gt; ï¼Œ å¹¶åœ¨&lt;/w:body&gt;ç»“æŸæ ‡ç­¾ä¹‹å‰é—­åˆ &lt;/#list&gt;ï¼Œ æ­¤å¤„çš„ newsList ä¸ºåå°è¯»å–æ¨¡æ¿æ—¶éœ€è¦éœ€è¦æ¸²æŸ“æ•°æ®mapé›†åˆçš„keyï¼Œ å…¶æ‰€å¯¹åº”çš„æ˜¯ä¸€ä¸ªlisté›†åˆã€‚ æ›¿æ¢æ¨¡æ¿ä¸­çš„å ä½ç¬¦ &lt;w:t&gt;${news.title}&lt;/w:t&gt; ä¸ &lt;w:t&gt;${news.content}&lt;/w:t&gt; ä¸ºéå†é›†åˆçš„å€¼ï¼Œè¿™é‡Œçš„ FreeMarker è¯­æ³•å¯ä»¥å‚è€ƒç½‘ä¸Šçš„æ•™ç¨‹ã€‚ ä¿å­˜ä¸º FreeMarker çš„æ¨¡æ¿æ–‡ä»¶ï¼Œåç¼€ä¸º ftl æ ¼å¼ï¼Œæ‹·è´åˆ°é¡¹ç›®ä¸­ ç¼–å†™ä»£ç  ä»æ•°æ®ä¸­æŸ¥è¯¢æ•°æ®é›†åˆæ”¾å…¥Mapä¸­ï¼Œ è°ƒç”¨å·¥å…·æ–¹æ³•ï¼Œè¿”å›æµ 12345Map&lt;String, Object&gt; root = new HashMap&lt;String, Object&gt;();root.put(\"newsList\", newsList);//newsListä¸ºæ–°é—»å¯¹è±¡é›†åˆString template = \"/temp.ftl\"; //æ¨¡æ¿æ–‡ä»¶çš„åœ°å€ByteArrayOutputStream outputStream = WordUtil.process(root, template);return outputStream; è°ƒç”¨ä¸‹è½½å·¥å…·ç±»è¿›è¡Œä¸‹è½½å³å¯ã€‚ 1DownloadUtil.download(byteArrayOutputStream, response, returnname); æ³¨ï¼šåœ¨å®ç°åŠŸèƒ½çš„æ—¶å€™ï¼Œç”±äºé‡‡å–çš„æ˜¯ ajax è¯·æ±‚æ–¹å¼ï¼Œå¯¼è‡´åªæ˜¯å°†æµå†™å…¥ Response æ—¶ï¼Œ Response ä¸º xml æ ¼å¼çš„æ•°æ®ã€‚ä½†æ˜¯æƒ³è¦å®ç°çš„æ•ˆæœæ˜¯å¼¹å‡ºä¸‹è½½æ¡†ï¼Œä¸‹è½½ word æ–‡æ¡£ã€‚æœ€åæŸ¥è¯¢èµ„æ–™ï¼Œä¿®æ”¹ajaxè¯·æ±‚ä¸ºformè¡¨å•æäº¤æ–¹å¼(ajax form)ï¼Œæ‰å¼¹å‡ºä¸‹è½½æ¡†å®ç°äº†åŠŸèƒ½ã€‚ æ–‡ç« æ¶‰åŠå·¥å…·ç±»12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758//WordUtil.javaimport java.io.BufferedWriter;import java.io.ByteArrayOutputStream;import java.io.OutputStreamWriter;import java.io.Writer;import java.util.Map;import freemarker.template.Configuration;import freemarker.template.Template;public final class WordUtil &#123; private static Configuration configuration = null; private WordUtil() &#123; throw new AssertionError(); &#125; /** * æ ¹æ®æ¨¡æ¿ç”Ÿæˆç›¸åº”çš„æ–‡ä»¶ * @param root ä¿å­˜æ•°æ®çš„map * @param template æ¨¡æ¿æ–‡ä»¶çš„åœ°å€ * @param path ç”Ÿæˆçš„wordæ–‡æ¡£è¾“å‡ºåœ°å€ * @return */ public static synchronized ByteArrayOutputStream process(Map&lt;?, ?&gt; root, String template) &#123; if (null == root ) &#123; throw new RuntimeException(\"æ•°æ®ä¸èƒ½ä¸ºç©º\"); &#125; if (null == template) &#123; throw new RuntimeException(\"æ¨¡æ¿æ–‡ä»¶ä¸èƒ½ä¸ºç©º\"); &#125; ByteArrayOutputStream outputStream = new ByteArrayOutputStream(); String templatePath = template.substring(0, template.lastIndexOf(\"/\")); String templateName = template.substring(template.lastIndexOf(\"/\") + 1, template.length()); if (null == configuration) &#123; configuration = new Configuration(Configuration.VERSION_2_3_23); // è¿™é‡ŒConfigurantionå¯¹è±¡ä¸èƒ½æœ‰ä¸¤ä¸ªï¼Œå¦åˆ™å¤šçº¿ç¨‹è®¿é—®ä¼šæŠ¥é”™ configuration.setDefaultEncoding(\"utf-8\"); configuration.setClassicCompatible(true); &#125; configuration.setClassForTemplateLoading(WordUtil.class, templatePath); Template t = null; try &#123; t = configuration.getTemplate(templateName); Writer w = new BufferedWriter(new OutputStreamWriter(outputStream, \"utf-8\")); t.process(root, w); // è¿™é‡Œwæ˜¯ä¸€ä¸ªè¾“å‡ºåœ°å€ï¼Œå¯ä»¥è¾“å‡ºåˆ°ä»»ä½•ä½ç½®ï¼Œå¦‚æ§åˆ¶å°ï¼Œç½‘é¡µç­‰ w.close(); &#125; catch (Exception e) &#123; throw new RuntimeException(e); &#125; return outputStream; &#125;&#125; 1234567891011121314151617181920212223242526272829//DownloadUtil.javaimport java.io.ByteArrayOutputStream;import java.io.File;import java.io.FileInputStream;import java.io.IOException;import java.io.OutputStream;import javax.servlet.ServletOutputStream;import javax.servlet.http.HttpServletResponse;import org.apache.commons.io.FileUtils;public class DownloadUtil &#123; /** * @param byteArrayOutputStream å°†æ–‡ä»¶å†…å®¹å†™å…¥ByteArrayOutputStream * @param response HttpServletResponse å†™å…¥response * @param returnName è¿”å›çš„æ–‡ä»¶å */ public static void download(ByteArrayOutputStream byteArrayOutputStream, HttpServletResponse response, String returnName) throws IOException&#123; response.setContentType(\"application/msword\"); response.setHeader(\"Content-Disposition\", \"attachment; filename=\" + returnName); response.setContentLength(byteArrayOutputStream.size()); OutputStream outputstream = response.getOutputStream(); //å–å¾—è¾“å‡ºæµ byteArrayOutputStream.writeTo(outputstream); //å†™åˆ°è¾“å‡ºæµ byteArrayOutputStream.close(); //å…³é—­ outputstream.flush(); //åˆ·æ•°æ® &#125;&#125; æºç ä¸‹è½½ç‚¹æˆ‘ä¸‹è½½ å‚è€ƒé“¾æ¥ http://itindex.net/detail/55080-springboot-freemarker-%E6%A0%BC%E5%BC%8F","tags":[{"name":"word","slug":"word","permalink":"http://nullpointer.pw/tags/word/"},{"name":"freemarker","slug":"freemarker","permalink":"http://nullpointer.pw/tags/freemarker/"}]},{"title":"Javaé…ç½®åˆ†ç¦»ä¹‹Springè¿œç¨‹é…ç½®","date":"2017-07-16T01:14:30.000Z","path":"Javaé…ç½®åˆ†ç¦»ä¹‹è¿œç¨‹é…ç½®.html","text":"å‰è¨€é›†ç¾¤åº”ç”¨çš„é…ç½®æ–‡ä»¶å¦‚æœå†™åœ¨é¡¹ç›®çš„ resources ç›®å½•ä¸‹é¢ï¼Œå½“é‡åˆ°éœ€è¦ä¿®æ”¹æŸä¸€ä¸ªé…ç½®å€¼æ—¶ï¼Œéœ€è¦å°†é›†ç¾¤çš„æ‰€æœ‰åº”ç”¨çš„é…ç½®ä¿¡æ¯è¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä¸”å°†æœºå¯†çš„é…ç½®ä¿¡æ¯æ¯”å¦‚æ•°æ®åº“è´¦å·å¯†ç å¦‚æœä¸è¿›è¡ŒåŠ å¯†é…ç½®åœ¨é¡¹ç›®ä¸­å¾ˆå±é™©ï¼Œä¸€æ—¦å‘ç”Ÿä»£ç æ³„éœ²é—®é¢˜ï¼Œåæœå¾ˆä¸¥é‡ã€‚ ä¸ºäº†é¿å…ä¸Šè¿°æƒ…å†µå‘ç”Ÿï¼Œå°†é…ç½®ä¿¡æ¯å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥ã€ç”¨æˆ·åã€ä»¥åŠå¯†ç ï¼Œé€šè¿‡ Config é¡¹ç›®çš„ä¸€ä¸ªæ¥å£æä¾›è·å–é…ç½®ä¿¡æ¯ã€‚Config é¡¹ç›®åªç”¨äºè¯»å–é…ç½®ä¿¡æ¯ã€‚ è¿œç¨‹é…ç½®ä¸€ï¼‰æ–°å»ºç±» RemoteProperties 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import com.alibaba.fastjson.JSONArray;import com.alibaba.fastjson.JSONObject;public class RemoteProperties implements InitializingBean, FactoryBean&lt;Properties&gt; &#123; private String url = null; private Properties properties = new Properties(); @Override public Properties getObject() throws Exception &#123; return properties; &#125; @Override public Class&lt;?&gt; getObjectType() &#123; return properties.getClass(); &#125; @Override public boolean isSingleton() &#123; return true; &#125; @Override public void afterPropertiesSet() throws Exception &#123; loadProperty(); &#125; public String getUrl() &#123; return url; &#125; public void setUrl(String url) &#123; this.url = url; &#125; private void loadProperty() &#123; if (StringUtil.strIsNull(url)) return; String content = HttpClientUtil.urlGet(url); JSONObject object = JSONObject.parseObject(content); JSONArray data = object.getJSONArray(\"datasource\"); for (Object obj : data) &#123; JSONObject jsonObject = (JSONObject) obj; String key = obj.getString(\"key\"); String value = obj.getString(\"value\"); properties.put(key, value); &#125; &#125;&#125; æ­¤ç±»ç”¨äºå‘é€è¯·æ±‚è·å–é…ç½®ä¿¡æ¯ï¼Œè¯·æ±‚è¿”å›æ ¼å¼ä¸º JSON çš„é…ç½®ä¿¡æ¯, å¦‚ï¼š1234567891011121314151617181920&#123; \"datasource\":[ &#123; \"value\":\"com.mysql.jdbc.Driver\", \"key\":\"jdbc.driver\" &#125;, &#123; \"value\":\"jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=utf8\", \"key\":\"jdbc.url\" &#125;, &#123; \"value\":\"root\", \"key\":\"jdbc.username\" &#125;, &#123; \"value\":\"root\", \"key\":\"jdbc.password\" &#125; ]&#125; äºŒï¼‰ç¼–å†™ Spring é…ç½®æ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:dubbo=\"http://code.alibabatech.com/schema/dubbo\" xmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:aop=\"http://www.springframework.org/schema/aop\" xmlns:p=\"http://www.springframework.org/schema/p\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd\"&gt; &lt;bean id=\"propertyConfigurerUserServer\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt; &lt;property name=\"properties\"&gt; &lt;bean id=\"remoteProperties\" class=\"com.craft.partner.server.util.RemoteProperties\" p:url=\"http://api.xxx.com/config\"/&gt; &lt;!--è¿œç¨‹é…ç½®æä¾›æ¥å£--&gt; &lt;/property&gt; &lt;!--è¿˜å¯ä»¥åŠ è½½æœ¬åœ°çš„propertiesæ–‡ä»¶--&gt; &lt;property name=\"locations\"&gt; &lt;list&gt; &lt;value&gt;classpath:configure.properties&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;bean id=\"dataSource\" class=\"com.mchange.v2.c3p0.ComboPooledDataSource\" destroy-method=\"close\" p:driverClass=\"$&#123;jdbc.driver&#125;\" p:jdbcUrl=\"$&#123;jdbc.url&#125;\" p:user=\"$&#123;jdbc.username&#125;\" p:password=\"$&#123;jdbc.password&#125;\"&gt; &lt;property name=\"initialPoolSize\" value=\"10\" /&gt; &lt;property name=\"minPoolSize\" value=\"10\" /&gt; &lt;property name=\"maxPoolSize\" value=\"50\" /&gt; &lt;property name=\"maxStatements\" value=\"0\" /&gt; &lt;property name=\"maxIdleTime\" value=\"600\" /&gt; &lt;property name=\"idleConnectionTestPeriod\" value=\"300\" /&gt; &lt;property name=\"acquireIncrement\" value=\"5\" /&gt; &lt;property name=\"autoCommitOnClose\" value=\"true\" /&gt; &lt;property name=\"checkoutTimeout\" value=\"2000\" /&gt; &lt;/bean&gt; &lt;bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt; &lt;property name=\"dataSource\" ref=\"dataSource\"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\"&gt; &lt;tx:attributes&gt; &lt;tx:method name=\"save*\" propagation=\"REQUIRED\" /&gt; &lt;tx:method name=\"update*\" propagation=\"REQUIRED\" /&gt; &lt;tx:method name=\"delete*\" propagation=\"REQUIRED\" /&gt; &lt;tx:method name=\"find*\" read-only=\"true\" /&gt; &lt;tx:method name=\"*\" propagation=\"REQUIRED\" read-only=\"true\"/&gt;&lt;!--å…¶ä»–ä¸ç¬¦åˆè§„èŒƒçš„æ–¹æ³•åªå…è®¸è¯»æ“ä½œ--&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;aop:config expose-proxy=\"false\"&gt; &lt;aop:pointcut id=\"serviceMethod\" expression=\"execution(* com.craft.partner.server.service.*.*(..))\"/&gt; &lt;aop:advisor advice-ref=\"txAdvice\" pointcut-ref=\"serviceMethod\"/&gt; &lt;/aop:config&gt;&lt;/beans&gt; æ³¨æ„ï¼š é€šè¿‡ p:url=â€åœ°å€â€ çš„æ–¹å¼ï¼Œè°ƒç”¨ RemoteProperties çš„æ–¹æ³•ï¼Œå‘é€è¯·æ±‚è·å–é…ç½®ä¿¡æ¯ï¼Œé€šè¿‡ Spring è¿›è¡Œæ³¨å…¥ã€‚æ³¨å…¥åï¼Œå¯ä»¥é€šè¿‡ p:å±æ€§ çš„æ–¹å¼è·å–é…ç½®ã€‚ å‚è€ƒ http://www.cnblogs.com/yjmyzz/p/how-to-load-remote-config-in-spring.html","tags":[{"name":"è¿œç¨‹é…ç½®","slug":"è¿œç¨‹é…ç½®","permalink":"http://nullpointer.pw/tags/è¿œç¨‹é…ç½®/"}]},{"title":"Javaä¸Šä¼ å›¾ç‰‡åˆ°OSSçš„å®ç°","date":"2017-05-06T15:01:57.000Z","path":"Javaä¸Šä¼ å›¾ç‰‡åˆ°OSSçš„å®ç°.html","text":"å‰è¨€ï¼š ä»¥å‰åšé¡¹ç›®ç”¨çš„éƒ½æ˜¯å¼€æºçš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚FastDFSã€‚æœ€è¿‘å‡ å¹´ï¼Œéšç€äº‘çš„å‘å±•ï¼Œå›½å†…å¤–çš„å·¨å¤´å…¬å¸ä¹Ÿç›¸åº”çš„æ¨å‡ºäº†ç›¸å…³å•†ç”¨çš„ç±»ä¼¼äº§å“ã€‚æ¯”å¦‚Amazon S3ï¼Œé˜¿é‡Œäº‘çš„OSSï¼Œè…¾è®¯äº‘çš„COSã€‚ä»Šå¤©æˆ‘é€‰æ‹©ä½¿ç”¨é˜¿é‡Œäº‘çš„OSSæ¥ä½œä¸ºä¾‹å­ï¼Œæ¥å®ç°å›¾ç‰‡çš„ä¸Šä¼ ã€‚ å‡†å¤‡å·¥ä½œé˜¿é‡Œäº‘OSSå®˜æ–¹æ–‡æ¡£åœ°å€ ä¸€ã€å¼€é€šé˜¿é‡Œäº‘OSS ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°å¼€é€šOSSæœåŠ¡ï¼Œå¹¶åˆ›å»ºAccessKeyIdå’ŒAccessKeySecret åœ¨OSSæ§åˆ¶é¢æ¿ä¸Šæ–°å»ºBucket è¿›å…¥æ–°å»ºçš„Bucketé€‰æ‹©å·¦ä¾§çš„Objectç®¡ç†ï¼Œæ–°å»ºä¸€ä¸ªimgçš„æ–‡ä»¶å¤¹ï¼Œä¾¿äºå­˜å‚¨å½’ç±» äºŒã€mavené¡¹ç›®ä¸­å¼•å…¥ä¾èµ–åœ¨mavenå·¥ç¨‹ä¸­çš„pom.xmlæ·»åŠ ä¾èµ–12345&lt;dependency&gt; &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt; &lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt; &lt;version&gt;2.6.0&lt;/version&gt;&lt;/dependency&gt; ç¼–å†™ä»£ç  æ³¨ï¼šæˆ‘æ‰€ä½¿ç”¨çš„çš„æ¡†æ¶æ˜¯ï¼šSpringMVC+Spring+Mybatis ä¸€ã€ä¸Šä¼ æ–‡ä»¶åˆ°OSSä¹‹HelloWorldä¸Šä¼ å›¾ç‰‡ä¹‹å‰ï¼Œå…ˆæƒ¯ä¾‹æ¥ä¸€ä¸ªHelloWorldç¤ºä¾‹ï¼1234567891011121314151617181920212223242526272829303132333435363738394041import com.aliyun.oss.OSSClient;import com.aliyun.oss.model.ObjectMetadata;import com.aliyun.oss.model.PutObjectResult;import com.nullpointer.common.Constants;import com.nullpointer.service.AliyunOSSService;import org.springframework.stereotype.Service;import org.springframework.web.multipart.MultipartFile;import javax.annotation.PostConstruct;import java.io.File;import java.io.IOException;import java.io.InputStream;@Servicepublic class AliyunOSSServiceImpl implements AliyunOSSService &#123; public static final String IMG = \"img/\";//å¯¹åº”Objectçš„æ–‡ä»¶å¤¹åç§° private static final int maxLength = 5 * 1024 * 1024;//ç®€å•ä¸Šä¼ OSSé™åˆ¶ä¸º5Gä»¥ä¸‹ public static final String ENDPOINT = File.separatorChar == '/' ? \"oss-cn-hangzhou-internal.aliyuncs.com\" : \"http://oss-cn-hangzhou.aliyuncs.com\";//ç”¨äºé€‰æ‹©ä¸åŒçš„åŸŸå private OSSClient client; private static String bucketName; /** * åˆå§‹åŒ–OSSClient */ @PostConstruct public void init() &#123; String accessId = \"xxxxxxxxxxxxx\";//ä½ çš„AccessIdï¼Œ åœ¨OSSæ§åˆ¶å°å¯ä»¥ç”Ÿæˆ String accessKey = \"xxxxxxxxxxxxxxxxx\";//ä½ çš„AccessKey bucketName = \"xxxxx\";//åˆ›å»ºçš„Bucketçš„åç§°ï¼Œæ³¨æ„è¦ä¸€è‡´åŒºåˆ†å¤§å°å†™ client = new OSSClient(ENDPOINT, accessId, accessKey);//åˆå§‹åŒ– &#125; public String uploadIm() &#123; String content = \"Hello OSS\"; PutObjectResult test01 = client.putObject(bucketName, \"test01\", new ByteArrayInputStream(content.getBytes())); return test01.getETag(); &#125;&#125; æ‰“å¼€OSSæ§åˆ¶å°çš„Objectç®¡ç†ï¼Œæ˜¯ä¸æ˜¯å‘ç°æ–°å¢äº†ä¸€ä¸ªæ–‡ä»¶å‘¢ï¼Ÿ äºŒã€ç¼–å†™å›¾ç‰‡ä¸Šä¼ æœåŠ¡ç±»HelloWorldç¤ºä¾‹å®Œæˆäº†ï¼Œå¼€å§‹æ­£å¼ç¼–å†™å›¾ç‰‡ä¸Šä¼ ä»£ç äº†ã€‚æ³¨é‡Šéƒ½æœ‰ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374@Servicepublic class AliyunOSSServiceImpl implements AliyunOSSService &#123; public static final String IMG = \"img/\";//å¯¹åº”Objectçš„æ–‡ä»¶å¤¹åç§° private static final int maxLength = 5 * 1024 * 1024;//ç®€å•ä¸Šä¼ OSSé™åˆ¶ä¸º5Gä»¥ä¸‹ public static final String ENDPOINT = File.separatorChar == '/' ? \"oss-cn-hangzhou-internal.aliyuncs.com\" : \"http://oss-cn-hangzhou.aliyuncs.com\";//ç”¨äºé€‰æ‹©ä¸åŒçš„åŸŸå private OSSClient client; private static String bucketName; /** * åˆå§‹åŒ–OSSClient */ @PostConstruct public void init() &#123; String accessId = \"xxxxxxxxxxxxx\";//ä½ çš„AccessIdï¼Œ åœ¨OSSæ§åˆ¶å°å¯ä»¥ç”Ÿæˆ String accessKey = \"xxxxxxxxxxxxxxxxx\";//ä½ çš„AccessKey bucketName = \"xxxxx\";//åˆ›å»ºçš„Bucketçš„åç§°ï¼Œæ³¨æ„è¦ä¸€è‡´åŒºåˆ†å¤§å°å†™ client = new OSSClient(ENDPOINT, accessId, accessKey);//åˆå§‹åŒ– &#125; /*public String uploadIm() &#123; String content = \"Hello OSS\"; PutObjectResult test01 = client.putObject(bucketName, \"test01\", new ByteArrayInputStream(content.getBytes())); return test01.getETag(); &#125;*/ @Override public String saveImage(MultipartFile file) &#123; try &#123; String fileName = this.saveImage(file.getSize(), file.getOriginalFilename(), file.hashCode(), file.getInputStream()); return getHttpUrl(fileName); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; return null; &#125; private String getHttpUrl(String fileName) &#123; return Constants.OSS_HTTP + \"/\" + IMG + fileName; &#125; @Override public String saveImage(long size, String extName, int hashCode, InputStream is) &#123; if (size &gt; maxLength)//è¶…è¿‡5G return null; String name = extName.toLowerCase(); name = name.substring(name.indexOf(\".\"));//è·å¾—ä¸Šä¼ æ–‡ä»¶çš„åç¼€åç§°å¦‚ .jpg String fileName = System.currentTimeMillis() + \"_\" + hashCode + name;//ä¸ºäº†é˜²æ­¢é‡å¤ï¼Œ ä½¿ç”¨æ—¶é—´æˆ³+hashcodeçš„æ–¹å¼æ¥å‘½å return this.saveImage(size, fileName, is); &#125; @Override public String saveImage(long size, String fileName, InputStream is) &#123; String key = IMG + fileName;//ä¿å­˜åˆ°imgæ–‡ä»¶å¤¹ä¸‹ this.uploadObject(key, size, is); return fileName; &#125; @Override public void uploadObject(String key, long size, InputStream is) &#123; ObjectMetadata metadata = new ObjectMetadata();//è®¾ç½®æ–‡ä»¶çš„metaä¿¡æ¯ metadata.setContentLength(size); metadata.setContentType(\"image/jpeg\"); PutObjectResult result = client.putObject(bucketName, key, is);//è°ƒç”¨SDKçš„ä¸Šä¼ æ–¹æ³• System.out.println(result); &#125;&#125; ä¸‰ã€ç¼–å†™Controllerå±‚çš„ä¸Šä¼ æ¥å£123456789101112@RequestMapping(value = \"/upload\", method = RequestMethod.POST)public void uploadOSS(MultipartFile pic, HttpServletResponse response, Model model) throws Exception &#123; String imgUrl = aliyunOSSService.saveImage(pic); System.out.println(\"path = \" + imgUrl); //å›¾ç‰‡å›æ˜¾ JSONObject jsonObject = new JSONObject(); jsonObject.put(\"path\", imgUrl); response.setContentType(\"application/json;charset=UTF-8\"); response.getWriter().write(jsonObject.toString());&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå…¥å‚ä¸­çš„MultipartFIleæ˜¯ä¸€ä¸ªæ¥å£ï¼Œéœ€è¦åœ¨Springçš„é…ç½®æ–‡ä»¶applicationContext.xmlä¸­å°†å…¶å®ç°ç±»æ³¨å…¥ã€‚1&lt;bean id=\"multipartResolver\" class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"/&gt; å››ã€ç¼–å†™é¡µé¢JSP12345678910111213141516171819202122232425262728293031323334353637&lt;%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %&gt;&lt;html&gt;&lt;head&gt; &lt;script src=\"/static/js/jquery.js\" type=\"text/javascript\"&gt;&lt;/script&gt; &lt;script src=\"/static/js/jquery.form.js\" type=\"text/javascript\"&gt;&lt;/script&gt; &lt;%@ page isELIgnored=\"false\" %&gt; &lt;title&gt;home&lt;/title&gt; &lt;script type=\"application/javascript\"&gt; function uploadPic() &#123; var options = &#123; url: \"/upload\", type: \"POST\", dataType: \"json\", success: function (data) &#123; $(\"#imgUrl\").attr(\"src\", data.path); &#125; &#125; $(\"#jform\").ajaxSubmit(options); &#125; &lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div class=\"container-fluid\"&gt; &lt;div class=\"row-fluid\" align=\"content\"&gt; &lt;form action=\"/uploadOSS\" method=\"POST\" id=\"jform\"&gt; &lt;div class=\"span12\"&gt; &lt;img alt=\"img\" class=\"img-polaroid\" id=\"imgUrl\"/&gt; &lt;input type=\"file\" name=\"pic\" onchange=\"uploadPic()\"/&gt; &lt;/div&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; é¡µé¢ä¸æ˜¯æˆ‘æ‰€æ“…é•¿ï¼Œèƒ½æ˜¾ç¤ºæ•ˆæœå³å¯ã€‚ äº”ã€æµ‹è¯•å›¾ç‰‡ä¸Šä¼ å¯åŠ¨é¡¹ç›®ï¼Œè¿›å…¥å›¾ç‰‡ä¸Šä¼ çš„é¡µé¢ã€‚ ä¸Šä¼ å›¾ç‰‡æ§åˆ¶å°æ‰“å°äº†å¦‚ä¸‹å†…å®¹ï¼š é¡µé¢æ˜¾ç¤ºï¼š","tags":[{"name":"OSS","slug":"OSS","permalink":"http://nullpointer.pw/tags/OSS/"},{"name":"å¯¹è±¡å­˜å‚¨ç³»ç»Ÿ","slug":"å¯¹è±¡å­˜å‚¨ç³»ç»Ÿ","permalink":"http://nullpointer.pw/tags/å¯¹è±¡å­˜å‚¨ç³»ç»Ÿ/"}]},{"title":"Nginxå®ç°Tomcaté›†ç¾¤","date":"2017-05-05T14:12:54.000Z","path":"Nginxå®ç°Tomcaté›†ç¾¤.html","text":"æœ¬æ–‡ä»‹ç»äº†åˆ©ç”¨nginxæ­å»ºäº†ä¸€ä¸ªç®€å•çš„è´Ÿè½½å‡è¡¡ã€‚ ä¸€ã€å‡†å¤‡å·¥ä½œLinuxç³»ç»Ÿ: CentOS 7 x64 Nginxç‰ˆæœ¬:1.12.0 Tomcatç‰ˆæœ¬: 7.0.77 äºŒã€å®‰è£…CentOS å¿«é€Ÿå®‰è£…ï¼Œè§æˆ‘å¦å¤–ä¸€ç¯‡æ–‡ç« CentOSå¿«é€Ÿå®‰è£…å®‰è£…Nginxä¾èµ–1234567891011# gcc ç”¨æ¥ç¼–è¯‘nginxyum install gcc-c++# PCRE nginxçš„httpæ¨¡å—ä½¿ç”¨pcreæ¥è§£ææ­£åˆ™è¡¨è¾¾å¼yum -y install pcre*# zlib nginxä½¿ç”¨zlibå¯¹httpçš„å†…å®¹è¿›è¡Œgzipå‹ç¼©yum install -y zlib zlib-devel# openssl httpsæ”¯æŒyum -y install openssl ä¸‹è½½Nginx1234# å®‰è£…wgetyum install wget# ä¸‹è½½nginxwget http://nginx.org/download/nginx-1.12.0.tar.gz ç¼–è¯‘å®‰è£…Nginx123456789# è§£å‹nginxtar -zxvf nginx-1.12.0.tar.gz# è¿›å…¥è§£å‹ç›®å½•cd nginx-1.12.0./configure# è‹¥æ— é”™è¯¯ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å®‰è£…makemake install# é»˜è®¤å®‰è£…åˆ°/usr/local/nginxç›®å½• Nginxæµ‹è¯•12345678910111213141516# å¯åŠ¨nginx/usr/local/nginx/sbin/nginx# è®¿é—®localhostwget localhost# æ­¤å‘½ä»¤ä¼šä¸‹è½½ä¸€ä¸ªindex.htmlæ–‡ä»¶vim index.html# index.htmlä¸­æœ‰å…³äºnginxçš„ç±»ä¼¼äºhelloworldè¯­å¥# ç”±äºæˆ‘çš„Linuxå®‰è£…åœ¨è™šæ‹Ÿæœºä¸­ï¼Œæƒ³è¦å¤–éƒ¨è®¿é—®è™šæ‹Ÿæœºå†…ï¼Œéœ€è¦å…³é—­é˜²ç«å¢™æˆ–å¼€æ”¾ç«¯å£# ç¼–è¾‘é˜²ç«å¢™ï¼Œ CentOS 7é»˜è®¤çš„é˜²ç«å¢™ä¸æ˜¯iptablesï¼Œéœ€è¦å¦è¡Œå®‰è£…ï¼Œè¯·è‡ªè¡Œè§£å†³vim /etc/sysconfig/iptables# æ·»åŠ 80ç«¯å£-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT# é‡å¯é˜²ç«å¢™service iptables restart# é€šè¿‡æœ¬æœºçš„æµè§ˆå™¨è®¿é—®è™šæ‹Ÿæœºçš„iphttp://192.168.243.127(æ­¤å¤„ä¸ºè™šæ‹Ÿæœºçš„ip) ä¸‰ã€é…ç½®ç”¨äºé›†ç¾¤çš„Tomcat1234567891011121314151617181920212223242526# ä¸‹è½½Tomcatwget http://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-7/v7.0.77/bin/apache-tomcat-7.0.77.tar.gz# åˆ›å»ºç›®å½•mkdir /usr/local/tomcats# è§£å‹Tomcattar -zxvf apache-tomcat-7.0.77.tar.gz -C /usr/local/tomcats# ä¿®æ”¹è§£å‹çš„Tomcatç›®å½•åç§°mv apache-tomcat-7.0.77 tomcat1# ä¸ºäº†æµ‹è¯•nginxè´Ÿè½½å‡è¡¡,éœ€è¦å¯¹tomcatçš„server.xmlé…ç½®ä¸€ä¸‹vim tomcat1/conf/server.xml# æ˜¾ç¤ºè¡Œå·:set nu# åœ¨105è¡Œä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼Œ å¹¶ä¿å­˜é€€å‡º&lt;Engine name=\"Catalina\" defaultHost=\"localhost\" jvmRoute=\"jvm1\"&gt;# ä¿®æ”¹ç¤ºä¾‹ç¨‹åºecho 'tomcat1:&lt;%=session.getId()%&gt;' &gt; tomcat1/webapps/ROOT/index.jsp# æ‹·è´tomcat1ç›®å½•ä¸ºtomcat2cp -r tomcat1 tomcat2# ä¿®æ”¹tomcat2çš„server.xmlä¸­çš„ç«¯å£å·vim tomcat2/conf/server.xml# ä¿®æ”¹22è¡Œ/71è¡Œ/93è¡Œçš„ç«¯å£# ä¿®æ”¹105è¡Œ&lt;Engine name=\"Catalina\" defaultHost=\"localhost\" jvmRoute=\"jvm2\"&gt;# ä¿®æ”¹ç¤ºä¾‹ç¨‹åºecho 'tomcat2:&lt;%=session.getId()%&gt;' &gt; tomcat1/webapps/ROOT/index.jsp å››ã€é…ç½®Nginx1vim /usr/local/nginx/conf/nginx.conf å¯åŠ¨tomcat123# å¯åŠ¨ä¸¤ä¸ªtomcat./tomat2/bin/startup.sh./tomat1/bin/startup.sh æµ‹è¯•å¤–éƒ¨è®¿é—®è™šæ‹Ÿæœº http://192.168.243.127(æ­¤å¤„ä¸ºè™šæ‹Ÿæœºçš„ip) å¤šåˆ·æ–°å‡ æ¬¡ï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢çš„å†…å®¹åœ¨å˜åŒ–ï¼Œåœ¨tomcat1å’Œtomcat2ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œè‡³æ­¤å®Œæˆäº†ç®€å•nginxè´Ÿè½½å‡è¡¡çš„æ­å»ºã€‚","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"tomcat","slug":"tomcat","permalink":"http://nullpointer.pw/tags/tomcat/"}]},{"title":"ã€Šèªæ˜äººéƒ½ç”¨æ–¹æ ¼ç¬”è®°æœ¬ã€‹è¯»ä¹¦ç¬”è®°","date":"2017-01-22T10:08:00.000Z","path":"ã€Šèªæ˜äººéƒ½ç”¨æ–¹æ ¼ç¬”è®°æœ¬ã€‹è¯»ä¹¦ç¬”è®°.html","text":"2017å¹´è¯»çš„ç¬¬ä¸€æœ¬ä¹¦ï¼Œè¯»å®Œäº†ä¸€ç›´æ²¡æœ‰å†™è¯»ä¹¦ç¬”è®°ï¼Œæ‹–å»¶åˆ°ä»Šå¤©ï¼Œæ‰å‹‰å¼ºå†™å®Œã€‚ä¸­é€”çœ‹åˆ°ã€Šå¦‚ä½•æœ‰æ•ˆé˜…è¯»ä¸€æœ¬ä¹¦ã€‹ï¼Œå°±ä¸€èµ·è¯»äº†ï¼Œå­¦å­¦è¯»ä¹¦ç¬”è®°çš„å†™æ³•ã€‚ æ­¤ä¹¦ä¸»è¦è®²äº†ç¬”è®°æœ¬å¯¹äºç¬”è®°çš„å½±å“ï¼Œå¥½çš„ç¬”è®°æœ¬è®©ç¬”è®°å‘æŒ¥å®ƒåº”æœ‰çš„åŠŸèƒ½ï¼Œè€Œä¸å¥½çš„ç¬”è®°æœ¬ä½“ç°ä¸å‡ºç¬”è®°çš„ä»·å€¼æ‰€åœ¨ã€‚ä½œè€…ä»¥ä¸‰ä¸ªè‘—åæœºæ„ä½¿ç”¨çš„ç¬”è®°æœ¬ä¸ºä¾‹ï¼Œåˆ—ä¸¾äº†æ–¹æ ¼ç¬”è®°æœ¬çš„ç§ç§ç›Šå¤„ï¼Œå¹¶é€šè¿‡é…å›¾çš„æ–¹å¼ï¼Œè®©è¯»è€…ä¸€ç›®äº†ç„¶åœ°äº†è§£æ–¹æ ¼ç¬”è®°æœ¬è®°å½•ç¬”è®°çš„æ–¹å¼ã€‚ ä¹¦å ä½œè€… å¼€å§‹æ—¶é—´ ç»“æŸæ—¶é—´ èªæ˜äººéƒ½ç”¨æ–¹æ ¼ç¬”è®°æœ¬ é«˜æ¡¥æ”¿å² 2017.01.01 2017.01.04 å°†æ–¹æ ¼ç¬”è®°æœ¬â€œåˆ†ä¸ºä¸‰éƒ¨åˆ†â€è®°å½•ã€‚ä»å·¦å‘å³ä¾æ¬¡å°†ç¬”è®°æœ¬åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼ŒæŒ‰ç…§â€œäº‹å®â†’è§£é‡Šâ†’è¡ŒåŠ¨â€çš„é¡ºåºè®°å½•ç¬”è®°ã€‚ ä¸€ï¼‰ç¬”è®°æœ¬çš„åŒºåˆ«1. â˜†ç¬”è®°æœ¬çš„å¯¹æ¯” ä½¿å¤´è„‘å˜èªæ˜çš„ç¬”è®°æœ¬ é˜»ç¢èƒ½åŠ›å‘æŒ¥çš„ç¬”è®°æœ¬ å¯¹æ¯” çœ‹èµ·æ¥å·¥æ•´ ç¬¬ä¸€å°è±¡ç»™äººè„ä¹±çš„æ„Ÿè§‰ï¼Œä½¿äººä¸æ„¿å†çœ‹ç¬¬äºŒçœ¼ ç†è§£åŠ›ã€ç§¯ææ€§ä½ä¸‹ æ¯”A4çº¸å¤§ æ¯”A6çº¸å°ã€è®°äº‹æœ¬å‹ æ€è€ƒå¤æ‚é—®é¢˜çš„èƒ½åŠ›ã€é€»è¾‘æ€ç»´èƒ½åŠ›ä½ä¸‹ é¢œè‰²ä¸è¶…è¿‡ä¸‰ç§ ç”¨äº†å››ç§ä»¥ä¸Šçš„é¢œè‰² åˆ¤æ–­ä¼˜å…ˆé¡ºåºçš„èƒ½åŠ›ã€åˆ¤æ–­åŠ›ä½ä¸‹ æ¯ä¸€é¡µéƒ½æœ‰ä¸€ä¸ªä¸»é¢˜ è¿™ä¹Ÿå†™ã€é‚£ä¹Ÿå†™ èˆå¼ƒèƒ½åŠ›ã€æ•´ç†èƒ½åŠ›ä½ä¸‹ æ˜¯é»‘æ¿ã€ç™½æ¿æ¿ä¹¦å†…å®¹çš„æç‚¼ ç…§æŠ„é»‘æ¿ã€ç™½æ¿æ¿ä¹¦ è®°å¿†åŠ›ã€ç‹¬ç«‹æ€è€ƒèƒ½åŠ›ä½ä¸‹ ç•™æœ‰ç©ºç™½åŒºåŸŸ æ— ç©ºéš™ï¼Œå†™å¾—æ»¡æ»¡å½“å½“ ç†è§£èƒ½åŠ›ã€å¤ä¹ èƒ½åŠ›ä½ä¸‹ ç”»æœ‰è®¸å¤šå›¾ã€è¡¨ã€ç”» æ— å›¾ã€è¡¨ã€ç”»ï¼Œåªæœ‰æ–‡å­— è§†è§‰æŠŠæ¡èƒ½åŠ›ã€è¡¨ç°åŠ›ä½ä¸‹ æ—¥åçœ‹ç¬”è®°æ—¶ä¾ç„¶å¯å†ç°å½“æ—¶çš„å†…å®¹ æ—¥åçœ‹ç¬”è®°æ—¶æ— æ³•å†ç°å½“æ—¶çš„å†…å®¹ å­¦ä¹ èƒ½åŠ›ã€ç†è§£åŠ›ä½ä¸‹ 2. â˜…å¥½ä¸åçš„ç¬”è®°æœ¬çš„åŒºåˆ«å¥½ç¬”è®°æœ¬çœ‹ä¸Šå»ä¸€ç›®äº†ç„¶ï¼Œèƒ½å¤Ÿè¿…é€ŸæŠŠæ¡é‡ç‚¹ï¼Œå¤ç°è®°ç¬”è®°æ—¶çš„åœºæ™¯ï¼›è€Œåç¬”è®°å°±æ˜¯è®©ä½ æ ¹æœ¬æ²¡æœ‰çœ‹çš„æ¬²æœ›ï¼Œå³ä½¿æ˜¯çœ‹äº†ï¼Œä¹Ÿä¸èƒ½æå–æœ‰æ•ˆå†…å®¹ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåç¬”è®°æœ¬çš„ä½œç”¨å°±æ˜¯æ²¡æœ‰ä½œç”¨ã€‚ äºŒï¼‰è®°ç¬”è®°çš„ç›®çš„1. â˜†è®°ç¬”è®°çš„è¯¯åŒºä¸ç®¡ä½ å‚åŠ çš„æ˜¯å¤šä¹ˆä¼˜ç§€çš„åŸ¹è®­ã€è®²åº§ã€ç ”è®¨ï¼Œå¦‚æœä½ çš„ç¬”è®°æ— æ³•å†ç°å½“æ—¶çš„å­¦ä¹ å†…å®¹ï¼Œé‚£ä¹ˆï¼Œä½ å¥½ä¸å®¹æ˜“å­¦åˆ°çš„çŸ¥è¯†ã€æŠ€å·§åŒ–ä¸ºä¹Œæœ‰çš„å¯èƒ½æ€§å°†å¾ˆå¤§ã€‚ ç¬”è®°çš„ç”Ÿå‘½çº¿æ˜¯â€œå†ç°æ€§â€ï¼Œè¿™æ˜¯è®°ç¬”è®°çš„æœ€ç»ˆç›®çš„ã€‚ å¯æ˜¯ï¼Œæ²¡æœ‰å­¦ä¹ è¿‡ç¬”è®°æœ¬ä½¿ç”¨æ–¹æ³•çš„äººæ—¥åå†çœ‹è‡ªå·±çš„ç¬”è®°æ—¶ï¼Œåªèƒ½çœ‹åˆ°ä¸Šé¢çš„è¯è¯­å’Œå¥å­ï¼Œå´å›å¿†ä¸å‡ºâ€œä¸ºä½•éœ€è¦è¿™äº›ä¿¡æ¯â€â€œè¿™äº›ä¿¡æ¯æœ‰ä»€ä¹ˆä½œç”¨â€è¿™äº›æ›´ä¸ºé‡è¦çš„éƒ¨åˆ†ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬ç”¨çš„æ˜¯ç¼ºä¹å†ç°æ€§çš„è®°ç¬”è®°æ³•ã€‚ ä¸ºä»€ä¹ˆè¦åšç¬”è®°ï¼Ÿ æˆ‘æ˜¯æ€•æ—¥åå¿˜è®°æ‰è®°çš„ æˆ‘åªæ˜¯ç…§æŠ„æ¿ä¹¦ç½¢äº† æˆ‘æœ‰è®°ç¬”è®°çš„ä¹ æƒ¯ 2. â˜…è®°ç¬”è®°éœ€è¦å…‹æœçš„å›°éš¾ä½œè€…è¯´ï¼ŒæŠ±ç€ä»¥ä¸Šè¿™å‡ ç§ç›®çš„è€Œåšç¬”è®°çš„äººéœ€è¦å˜åŒ–è®°ç¬”è®°çš„æ–¹å¼ï¼Œåº”å½“åœæ­¢å½“å‰è¿™ç§è®°ç¬”è®°çš„æ–¹æ³•ã€‚ä¸€ç›´ä»¥æ¥ï¼Œè®°äº†å¾ˆå¤šç¬”è®°ï¼Œä½†æ˜¯æˆ‘æ¯æ¬¡è®°å®Œçš„ç¬”è®°åªæ˜¯å½“æˆäº†å¤‡å¿˜ï¼ŒæŠŠç¬”è®°æœ¬å½“æˆäº†å­—å…¸ã€‚ éœ€è¦ä½¿ç”¨ä»¥å‰è®°è¿‡çš„ç¬”è®°çš„æ—¶å€™ï¼Œå°±å€ŸåŠ©ä¸ªäººè‰¯å¥½çš„åˆ†ç±»ä¹ æƒ¯æŸ¥æ‰¾å¯¹åº”çš„ç¬”è®°ï¼Œä»¥åŠå€ŸåŠ©è½¯ä»¶çš„å…¨æ–‡æ£€ç´¢åŠŸèƒ½æŸ¥æ‰¾æˆ‘æ‰€éœ€è¦çš„ç¬”è®°ã€‚ é•¿è€Œä¹…ä¹‹ï¼Œä¾¿å…»æˆäº†ä¾èµ–çš„ä¹ æƒ¯ï¼Œè®°ç¬”è®°è®°å®Œä¹Ÿåªæ˜¯åœ¨è„‘æµ·ä¸­ä¿ç•™ä¸€ä»½å…³é”®å­—ï¼Œè€Œå†…å®¹å´ä¸€æ¦‚å¿˜è®°ï¼Œè¿™ææ€•æ˜¯æˆ‘çš„è®°ç¬”è®°æ–¹å¼çš„æœ€å¤§å¼Šç—…ï¼Œå†ç°ç¬”è®°çš„å†…å®¹æ˜¯ä¸ªäººéœ€è¦å…‹æœçš„éš¾ç‚¹ã€‚ ä¸‰ï¼‰æ¡†æ¶Â·é»„é‡‘ä¸‰åˆ†æ³•1. â˜†è°é‡‡å–äº†è¿™ç§æ¡†æ¶ åº·å¥ˆå°”ç¬”è®°æœ¬åˆ†ä¸ºâ€œNoteâ€ï¼ˆæ¿ä¹¦ï¼‰ã€â€œQueueâ€ï¼ˆå‘ç°ç‚¹ï¼‰ã€â€œSummaryâ€ï¼ˆæ€»ç»“ï¼‰ä¸‰éƒ¨åˆ†ã€‚ ä¸œå¤§å½•å–ç”Ÿä¸­çš„å¤§å¤šæ•°å­¦ç”Ÿå°†ç¬”è®°æœ¬çš„å·¦å³ä¸¤é¡µä½œä¸ºä¸€é¡µä½¿ç”¨ï¼Œå·¦ä¾§è®°å½•â€œæ¿ä¹¦â€ï¼Œå³ä¾§å†™â€œå‘ç°ç‚¹â€å’Œâ€œæ€»ç»“â€ï¼Œå’Œåº·å¥ˆå°”ç¬”è®°æœ¬çš„æ„é€ å®Œå…¨ç›¸åŒã€‚ éº¦è‚¯é”¡å…¬å¸çš„â€œç©ºÂ·é›¨Â·ä¼â€ï¼ŒåŸƒæ£®å“²å…¬å¸çš„â€œPoint Sheetâ€ï¼Œæ‰€æœ‰å¤–èµ„ç®¡ç†å’¨è¯¢å…¬å¸çš„å’¨è¯¢é¡¾é—®éƒ½æ˜¯æŒ‰ç…§â€œäº‹å®â†’è§£é‡Šâ†’è¡ŒåŠ¨â€çš„ä¸‰åˆ†æ³•å±•å¼€æ€è€ƒçš„ã€‚ 2. â˜†æ¡†æ¶çš„ç»„æˆ å†…å®¹ å¯¹åº” æ¿ä¹¦ äº‹å® å‘ç° è§£é‡Š æ€»ç»“ è¡ŒåŠ¨ 3. â˜…æ¡†æ¶çš„ä½¿ç”¨æ­¥éª¤ æ‘˜æŠ„åŸæ–‡ï¼šåŠ æ·±å¯¹åŸæ–‡çš„å°è±¡ æå‡ºé—®é¢˜ï¼Œåšå‡ºè§£é‡Šï¼šåŸºäºåŸæ–‡è¿›è¡Œæ€è€ƒï¼Œå¹¶ç»™å‡ºç»“æœ è¿›è¡Œæ€»ç»“ï¼šå¯¹äºæ•´ç¯‡æ–‡ç« çš„æ€»ä½“æ¦‚è¿° æŒ‰ç…§é»„é‡‘ä¸‰åˆ†æ³•æ¥åšç¬”è®°ï¼Œå¯ä»¥æé«˜ç¬”è®°å¯¹çŸ¥è¯†çš„å†ç°æ€§ï¼ŒçŸ¥åæœºæ„éƒ½é‡‡å–çš„æ˜¯é»„é‡‘ä¸‰åˆ†æ³•è¿™ç§æ¡†æ¶æ¥åšç¬”è®°ã€‚ å››ï¼‰ç¬”è®°æœ¬çš„ç»“æ„1. â˜†ç¬”è®°æœ¬çš„æ–¹å‘äººçš„æ€è€ƒä¼šå—åˆ°çœ¼ç›æ„é€ çš„å·¦å³ï¼Œæ‰€ä»¥è¿›å…¥è§†é‡çš„æ˜¯â€œçºµå‘â€æ¡†æ¶è¿˜æ˜¯â€œæ¨ªå‘â€æ¡†æ¶ï¼Œèƒ½å¤Ÿå½±å“äººä»¬çš„ç†è§£é€Ÿåº¦ä»¥åŠå¯¹ä¿¡æ¯çš„æŠŠæ¡ç¨‹åº¦ã€‚ åœ¨æŠŠæ¡æ•´ä½“æƒ…å†µæ—¶ï¼Œéœ€è¦è§£å†³çš„é—®é¢˜è¶Šå¤æ‚ã€å‚è€ƒçš„ä¿¡æ¯é‡è¶Šåºå¤§ï¼Œå°±è¶Šéœ€è¦åœ¨çŸ­æ—¶é—´å†…è¿…é€ŸæŠ“ä½é‡ç‚¹ã€‚ éšç€å­¦ä¹ ã€å·¥ä½œå±‚æ¬¡çš„æå‡ï¼Œâ€œæ—¢è§æ ‘æœ¨ï¼Œåˆè§æ£®æ—â€è¿™ä¸€æ€è€ƒæ–¹å¼çš„é‡è¦æ€§ä¹Ÿå°±æ›´ä¸ºçªæ˜¾ã€‚ 2. â˜†ç¬”è®°æœ¬çš„å¤§å°â€œä¸å–„äºæç‚¼æƒ³æ³•â€â€œå¾ˆéš¾æŒ‰é€»è¾‘æ€§æ€ç»´æ€è€ƒâ€â€œä¸ä¼šè¨€ç®€æ„èµ…åœ°è¡¨è¾¾â€çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ ç¬”è®°æœ¬çš„å¤§å°æ„å‘³ç€æ€è€ƒèƒ½åŠ›çš„å¼ºå¼±ã€‚ 3. â˜†ç¬”è®°çš„é¢œè‰²ç”¨é»‘è‰²æˆ–è“è‰²ä¹¦å†™ç¬”è®°ï¼Œç”¨çº¢è‰²ä½œä¸ºåˆ¤æ–­ï¼Œä¹Ÿå°±æ˜¯é‡åˆ°éå¸¸é‡è¦æˆ–éœ€è¦ä¿®æ”¹çš„åœ°æ–¹æ—¶ä½¿ç”¨çº¢è‰²ã€‚ ç”¨æ­¤ç§ç®€å•æ–¹æ³•åŒºåˆ†ä½¿ç”¨é¢œè‰²çš„è¯ï¼Œä¾¿ä¼šåœ¨è®°ç¬”è®°çš„åŒæ—¶è‡ªç„¶èˆå¼ƒæ‰æ— ç”¨çš„å†…å®¹ï¼Œå°†æ€è€ƒé‡ç‚¹æ”¾åœ¨ä¸»è¦é—®é¢˜ä¸Šï¼Œå…»æˆåˆ¤æ–­ä¸»æ¬¡å…ˆåçš„ä¹ æƒ¯ï¼Œé€æ­¥æé«˜è§£å†³é—®é¢˜çš„é€Ÿåº¦å’Œè´¨é‡ã€‚ é¢œè‰²æœ€å¤šç”¨ä¸‰ç§ã€‚ åªè¦èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œäº‹åå†ç¿»çœ‹ç¬”è®°æ—¶ï¼Œä»…çœ‹é¢œè‰²å°±èƒ½ç«‹åˆ»åŒºåˆ†å‡ºä¸»æ¬¡é¡ºåºï¼Œè®°ç¬”è®°æ—¶çš„æ€è·¯ä¹Ÿèƒ½åœ¨å¤§è„‘ä¸­æ¸…æ™°é‡ç°ï¼Œè¿›ä¸€æ­¥æå‡ä¿¡æ¯æ•´ç†å’Œè¾“å‡ºçš„æ•ˆç‡ã€‚ 4. â˜†ç¬”è®°æ ‡é¢˜åŒºåŸŸçš„åˆ©ç”¨é€šå¸¸ä¼šåœ¨ç¬”è®°æœ¬ä¸Šéƒ¨çš„ç©ºç™½åŒºåŸŸå†™å…¥è®ºç‚¹å’Œç»“è®ºã€‚ä»¥è§£å†³å·¥ä½œé—®é¢˜çš„ç¬”è®°æœ¬ä¸ºä¾‹ï¼Œâ€œè®ºç‚¹=é—®é¢˜çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆâ€â€œç»“è®º=è¿™æ ·åšä¾¿å¯ä»¥è§£å†³é—®é¢˜â€ã€‚ 5. â˜…ç¬”è®°æœ¬ç»“æ„å¯¹äºç¬”è®°çš„å½±å“ ç¬”è®°é‡‡å–æ¨ªå‘ç»“æ„ï¼Œå¯ä»¥èµ·åˆ°ä¸€ç›®äº†ç„¶çš„ä½œç”¨ï¼Œå‚è€ƒçš„æ–‡ç« ä¿¡æ¯ä¾¿äºæå–åˆ°å¤§è„‘ä¸­ã€‚ å°ç¬”è®°æœ¬ä¸åˆ©äºæ€»ç»“æƒ³æ³•ï¼Œæ¥å›åœ°ç¿»é¡µä¼šæ‰“æ–­æ€è€ƒçš„ä¹¦å†™ã€‚å› æ­¤ä½¿ç”¨å¤§ç¬”è®°æœ¬æ¥è®°ç¬”è®°ã€‚ å¤ªå¤šçš„é¢œè‰²ä¼šå¯¼è‡´æ‰¾ä¸åˆ°é‡ç‚¹ï¼Œå¤„å¤„æ˜¯é‡ç‚¹çš„æƒ…å†µï¼Œ åˆç†æ ‡è®°æ ‡é¢˜ï¼Œæ¢³ç†æ ¸å¿ƒå†…å®¹ï¼Œæœ‰åŠ©äºå¿«é€Ÿç†è§£ç¬”è®°å†…å®¹ã€‚ äº”ï¼‰ç¬”è®°æœ¬çš„åŠŸèƒ½1. â˜†è®°å¿†æ€§ç¬”è®°æœ¬ä¸Šè¯¾ã€ç ”è®¨æˆ–æ˜¯è¦è®°å¿†ã€ç†è§£å­¦ä¹ å†…å®¹æ—¶è®°å½•çš„ç¬”è®°ï¼Œä¸ºäº†è®°åœ¨è„‘å­é‡Œè€Œå†™çš„ç¬”è®°ã€‚æœ¬ä¹¦å°†è¿™ç±»ç¬”è®°æœ¬ç§°ä¸ºâ€œå­¦ä¹ ç¬”è®°æœ¬â€ã€‚ 2. â˜†æ€è€ƒæ€§ç¬”è®°æœ¬ä¸ºçœ‹å‡ºäº‹ç‰©æœ¬è´¨ã€ç†è§£é‡ç‚¹ã€å¾—å‡ºç»“è®ºè€Œå†™çš„ç¬”è®°ï¼Œå¸¸è§äºå·¥ä½œä¸­ã€‚æœ¬ä¹¦å°†è¿™ç±»ç¬”è®°æœ¬ç§°ä¸ºâ€œå·¥ä½œç¬”è®°æœ¬â€ã€‚ 3. â˜†ä¼ è¾¾æ€§ç¬”è®°æœ¬ä¼ è¾¾æ€§ç¬”è®°å³èƒ½å¤Ÿä»ä¸°å¯Œçš„ä¿¡æ¯ä¸­ç­›é€‰å‡ºå¯¹æ–¹æ‰€éœ€çš„æ”¹å–„ç­–ç•¥åŠè§£å†³æ–¹æ³•ï¼Œä¸ºäº†è¯´æœå¯¹æ–¹è€Œå†™çš„ç¬”è®°ã€‚æœ¬ä¹¦å°†å†™è¿™ç±»ç¬”è®°çš„ç¬”è®°æœ¬ç§°ä¸ºâ€œææ¡ˆç¬”è®°æœ¬â€æˆ–â€œåšå¼ˆç¬”è®°æœ¬â€ã€‚ 4. â˜…ä¸åŒåŠŸèƒ½ç¬”è®°æœ¬å¯¹çš„è®°æ³•ä½œè€…çš„è¿™æœ¬ä¹¦æ‰€æè¿°çš„é»„é‡‘ä¸‰åˆ†æ³•æœ€é€‚åˆäºåšæ€è€ƒæ€§ç¬”è®°ï¼Œè€Œå¯¹äºè®°å¿†æ€§ç¬”è®°æœ¬çš„è®°æ³•ï¼Œé‡‡å–è¿™ç§æ–¹å¼ï¼Œä¹Ÿèƒ½èµ·åˆ°ä¸€å®šåŠ æ·±å°è±¡çš„ä½œç”¨ã€‚å¯¹äºä¼ è¾¾æ€§ç¬”è®°æœ¬è€Œè¨€ï¼Œæ—¢åˆ—å‡ºäº‹å®ï¼Œåˆç»™å‡ºåˆç†è§£é‡Šï¼Œä¹Ÿæ˜¯ä¸é”™çš„æ–¹å¼ã€‚ å…­ï¼‰ æé«˜ç¬”è®°æœ¬çš„ä½œç”¨1. â˜†èƒ½å½¢æˆâ€œæ°¸ä¹…è®°å¿†â€çš„ç”¨çœ¼æ–¹æ³•å¦‚æœä½ ä¹‹å‰æ˜¯ä¸€è¾¹çœ‹ç€è€å¸ˆåœ¨é»‘æ¿ä¸Šå†™ä¸‹çš„å†…å®¹ï¼Œä¸€è¾¹åŸå°ä¸åŠ¨åœ°æŠ„å†™åœ¨ç¬”è®°æœ¬ä¸Šçš„è¯ï¼Œé‚£ä¹ˆï¼Œè¯·ä½ æ”¹å˜ä¸€ä¸‹æŠ„å†™ç¬”è®°æ—¶çš„â€œç”¨çœ¼æ–¹æ³•â€å§ï¼ å°†æ­¤å‰ï¼šÃ—â€œçœ‹é»‘æ¿â†’å†™ç¬”è®°â€çš„è®°å½•æ–¹æ³•æ”¹ä¸ºï¼š â€œçœ‹é»‘æ¿â†’å°åœ¨å¤§è„‘ä¸­â†’ä¸çœ‹é»‘æ¿ï¼Œå°†å°åœ¨å¤§è„‘ä¸­çš„å†…å®¹é‡ç°åœ¨ç¬”è®°æœ¬ä¸Šâ€ã€‚ ä¸æ˜¯ä¸€è¾¹çœ‹é»‘æ¿ä¸€è¾¹æŠ„å†™ï¼Œè€Œæ˜¯åœ¨â€œçœ‹é»‘æ¿â†’æŠ„å†™â€ä¹‹é—´åŠ å…¥â€œå°åœ¨å¤§è„‘ä¸­çš„ä¸€ç§’é’Ÿâ€ã€‚ æˆ‘æŠŠè¿™ä¸€ç§’é’Ÿç§°ä¸ºâ€œç©ºç™½çš„ä¸€ç§’é’Ÿâ€ã€‚ åªéœ€è¦è¿™ä¸€ç§’é’Ÿï¼Œä½ çš„ç¬”è®°æœ¬å°±èƒ½å‡çº§æˆèƒ½ä½¿å¤§è„‘è¶Šå˜è¶Šèªæ˜çš„ç¬”è®°æœ¬ã€‚ 2. â˜…æ–¹æ³•çš„æ•ˆæœåœ¨æŠ„å†™çš„è¿™ä¸€æ­¥éª¤ä¸­åŠ å…¥æ˜ å…¥å¤§è„‘ï¼Œå¯ä»¥åŠ æ·±å¯¹æ‰€æŠ„å†™å†…å®¹çš„è®°å¿†ã€‚ è®°å¾—ä»¥å‰åœ¨èƒŒæ—¥è¯­å•è¯æ—¶ï¼Œé‡‡å–çš„å°±æ˜¯è¿™ç§æ–¹æ³•ï¼Œçœ‹ä¸€ä¸‹å•è¯ï¼Œç„¶åé—­ä¸Šçœ¼ç›ï¼Œè®©å•è¯åœ¨è„‘æµ·ä¸­æµ®ç°å‡ºæ¥ï¼Œæ•ˆæœæ¯”ç›´æ¥æŠ„å†™åˆ°æœ¬ä¸Šçš„æ–¹æ³•è¦å¥½ã€‚ 3. â˜†é€»è¾‘è¿æ¥è¯çš„ç§ç±»ä¸ç”¨é€” 4. â˜…è¿æ¥è¯çš„æ•ˆæœæ‰¾åˆ°é€‚åˆè‡ªå·±çš„é€»è¾‘è¿æ¥è¯ï¼Œå°†æ€è€ƒè¿›è¡Œæµç¨‹åŒ–ã€‚ï¼ˆåœ¨ä¸­éƒ¨åŒºåŸŸä½¿ç”¨ï¼‰ 5. â˜†ä¸‰ä¸ªç®­å¤´çš„ä½¿ç”¨ 6. â˜†ä¸¤ä¸ªèƒ½åŠ›çš„å®è´¨ æé—®èƒ½åŠ› æ¦‚æ‹¬èƒ½åŠ› æ‰€è°“â€œæé—®èƒ½åŠ›â€ï¼Œå°±æ˜¯å¾—åˆ°æŸä¸ªä¿¡æ¯åå¹¶ä¸ä¼šç›´æ¥ä¸€å£åä¸‹ï¼Œè€Œæ˜¯ä¼šæå‡ºç±»ä¼¼â€œè¿™åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€â€â€œä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆè¯´â€ä¹‹ç±»é—®é¢˜çš„èƒ½åŠ›ã€‚ æ‰€è°“â€œæ¦‚æ‹¬èƒ½åŠ›â€ï¼Œå°±æ˜¯èƒ½çœ‹é€äº‹ç‰©æœ¬è´¨ï¼Œå¹¶ä¸”å°†æ¢³ç†åçš„é‡ç‚¹å†…å®¹è®°åœ¨è„‘å­é‡Œï¼Œç„¶åç®€å•æ˜äº†åœ°è®²ç»™åˆ«äººå¬ã€‚ 7. â˜…ä¸¤ä¸ªèƒ½åŠ›çš„ä½œç”¨å¦‚ä½•åº”ç”¨å­¦ä¹ çš„çŸ¥è¯†ï¼Œæ˜¯ç”±è¿™ä¸¤ä¸ªèƒ½åŠ›æ¥å†³å®šã€‚è¿™ä¸¤ä¸ªèƒ½åŠ›çš„æé«˜ä¸æ¯å¤©çš„è„‘åŠ›è®­ç»ƒæ˜¯å¯†ä¸å¯åˆ†çš„ï¼Œåªæœ‰ä¸æ–­åœ°è”ç³»ï¼Œé€æ¸å¼ºåŒ–ï¼Œè¿™äºŒè€…çš„èƒ½åŠ›å¯¹äºä¸ªäººçš„æå‡å°±ä¼šè¶Šå‘æ˜æ˜¾ã€‚ 8. â˜†ä¸è¦è®©ä½ çš„ç¬”è®°æœ¬å˜å¾—ä»£è°¢ä¸è‰¯â€œä»£è°¢ä¸è‰¯ç¬”è®°æœ¬â€æ˜¯ä¸åˆ†æœ‰ç”¨ä¿¡æ¯å’Œæ— ç”¨ä¿¡æ¯ã€ä»€ä¹ˆéƒ½å¾€ä¸Šå†™çš„ã€ä¸è¿›è¡Œæ•´ç†æ€»ç»“çš„â€œé˜»ç¢èƒ½åŠ›å‘æŒ¥çš„ç¬”è®°æœ¬â€çš„å…¸å‹ä¾‹å­ã€‚ å¦‚æœè¿™ä¹Ÿè®°ã€é‚£ä¹Ÿè®°çš„è¯ï¼Œé‚£ä¹ˆä¸çŸ¥ä¸è§‰ä¸­ï¼Œç¬”è®°æœ¬ä¸­çš„â€œç»“è®ºå’Œè®ºç‚¹â€å°±ä¼šå˜å¾—æ¨¡ç³Šï¼Œä»€ä¹ˆæ˜¯â€œè¯¥èˆå¼ƒçš„æ— ç”¨ä¿¡æ¯â€ï¼Œä»€ä¹ˆæ˜¯â€œåº”è¯¥ç•™ä¸‹çš„é‡ç‚¹å†…å®¹â€ï¼Œä¹Ÿä¼šå˜å¾—éš¾ä»¥åŒºåˆ†ã€‚ â€œè¿™ä¹Ÿè®°ã€é‚£ä¹Ÿè®°â€â€œå…ˆè®°ä¸‹å†è¯´â€â€œè¯´ä¸å®šä»¥åä¼šç”¨åˆ°â€â€¦â€¦æŒ‰ç…§è¿™æ ·çš„æƒ³æ³•è®°ç¬”è®°çš„è¯ï¼Œè®°åœ¨ç¬”è®°ä¸Šçš„ä¿¡æ¯æ—¥åè¢«ä½¿ç”¨çš„æ¦‚ç‡å‡ ä¹ä¸ºé›¶ã€‚ 9. â˜…ä»£è°¢ä¸è‰¯ç¬”è®°æœ¬çš„åå¤„å¦‚æœä»€ä¹ˆéƒ½è®°ã€ä¹Ÿä¸è¿›è¡Œæ•´ç†æ€»ç»“ï¼Œè¿™æ ·è®°å½•çš„ç¬”è®°åªæ˜¯æ‘˜æŠ„ç½¢äº†ï¼Œå°±åƒä¸­å­¦æ—¶ä½¿ç”¨çš„æ‘˜æŠ„æœ¬ï¼Œ å¦‚æœä¸å¯¹æ‘˜æŠ„è¿›è¡Œåˆ†ç±»ï¼Œä¸æ—¶å¸¸å»ç¿»çœ‹ï¼Œæ‘˜æŠ„çš„å†…å®¹æ˜¯ä¸ä¼šè¢«å®Œæ•´åœ°å­˜å‚¨åˆ°è®°å¿†å½“ä¸­ã€‚","tags":[{"name":"è¯»ä¹¦","slug":"è¯»ä¹¦","permalink":"http://nullpointer.pw/tags/è¯»ä¹¦/"}]},{"title":"ã€Šå¦‚ä½•æœ‰æ•ˆé˜…è¯»ä¸€æœ¬ä¹¦:è¶…å®ç”¨è¯»ä¹¦ç¬”è®°æ³•ã€‹è¯»ä¹¦ç¬”è®°","date":"2017-01-15T12:37:00.000Z","path":"ã€Šå¦‚ä½•æœ‰æ•ˆé˜…è¯»ä¸€æœ¬ä¹¦ï¼šè¶…å®ç”¨è¯»ä¹¦ç¬”è®°æ³•ã€‹è¯»ä¹¦ç¬”è®°.html","text":"ä¹°å®ŒKindleè¯»çš„ç¬¬ä¸‰æœ¬ä¹¦ï¼Œä½œè€…çš„è§‚ç‚¹éƒ¨åˆ†é€‚ç”¨äºç°åœ¨çš„æˆ‘ï¼Œå¯èƒ½æ˜¯ç”±äºç¯å¢ƒçš„ä¸åŒï¼ˆä½œè€…åœ¨æ—¥æœ¬ï¼‰ã€‚ä½œè€…æå€¡ä½¿ç”¨çº¸è´¨ç¬”è®°æœ¬æ¥è®°å½•è¯»ä¹¦ç¬”è®°ï¼Œä½†æ˜¯å¯¹äºä¸€ä¸ªå‡ºé—¨ä¸å–œæ¬¢èƒŒåŒ…çš„äººæ¥è¯´ï¼Œè¿™å¾ˆmuli~åŸæ–‡å¯¹äºå¦‚ä½•é€‰ä¹¦ã€è´­ä¹¦è¯´äº†å¾ˆå¤šï¼Œå¯¹äºå¦‚ä½•è®°ç¬”è®°çš„å†…å®¹ä¸å¤ªå¤šï¼Œä¸è¿‡ï¼Œè¿˜æ˜¯å¾ˆæœ‰å‚è€ƒä»·å€¼ã€‚ ä¹¦å ä½œè€… å¼€å§‹æ—¶é—´ ç»“æŸæ—¶é—´ å¦‚ä½•æœ‰æ•ˆé˜…è¯»ä¸€æœ¬ä¹¦ï¼šè¶…å®ç”¨è¯»ä¹¦ç¬”è®°æ³• å¥¥é‡å®£ä¹‹ 2017.01.11 2017.01.15 ä¸€ã€è´­ä¹¦ â˜†åªæœ‰ä»æ—¥å¸¸ç”Ÿæ´»ä¸­å–æï¼Œæ‰èƒ½åˆ—å‡ºåæ˜ è‡ªå·±çœŸæ­£éœ€æ±‚çš„è´­ä¹¦æ¸…å•ã€‚ â˜… ä¹¦å•å†…å®¹æ¥æºäºç”Ÿæ´»ï¼Œå¯èƒ½æ˜¯åˆ«äººçš„æ¨èã€ä¹Ÿå¯èƒ½æ˜¯å®£ä¼ ã€æˆ–è€…è‡ªå·±è„‘æµ·ä¸­è¹¦å‡ºçš„å…³é”®è¯ã€‚æ”¶é›†è¿™äº›å†…å®¹ï¼Œè¿™æ ·åˆ°äº†ä¹¦åº—ï¼Œåœ¨ä¹¦æµ·ä¸­å°±ä¸ä¼šèŒ«ç„¶è‹¥å¤±ï¼Œä¸çŸ¥é“æƒ³è¦ä¹°äº›ä»€ä¹ˆæ ·çš„ä¹¦äº†ã€‚æœ‰ç›®çš„åœ°é€›ä¹¦åº—ï¼Œä¹°è‡ªå·±æƒ³è¦çš„ä¹¦ äºŒã€å¦‚ä½•åšè¯»ä¹¦ç¬”è®°1)åšæŒåšè¯»ä¹¦ç¬”è®°â˜† 2013å¹´8æœˆ5æ—¥ï¼Œæˆ‘è¯»äº†ã€ŠXXXXã€‹ã€‚è¿™æœ¬ä¹¦æ¯”æˆ‘æƒ³è±¡ä¸­æœ‰æ„æ€ã€‚ å¦‚æœå†™å¾—è¿™æ ·ç®€å•ï¼Œå°±æ›´å®¹æ˜“åšæŒä¸‹å»äº†.ç¬¬ä¸€æ­¥è¦åšåˆ°çš„å°±æ˜¯åšæŒä¸‹å»ï¼Œæ¯«ä¸å¤¸å¼ åœ°è¯´ï¼Œåªæœ‰åšæŒä¸‹å»ï¼Œè¯»ä¹¦ç¬”è®°æ‰èƒ½å‘æŒ¥ä½œç”¨ã€‚è¯»ä¹¦æ—¶åº”è¯¥æ—¶åˆ»è®°å¾—è¿™ä¸ªç›®çš„ï¼Œæ­£ç¡®åœ°å¯¹å¾…å†™è¯»ä¹¦ç¬”è®°è¿™ä»¶äº‹ã€‚ äººä»¬ç»å¸¸è¯´â€œä½ ä¸ºåˆ«äººè®²è§£ä¹¦ä¸­çš„å†…å®¹æ—¶ï¼Œæ‰ä¼šçœŸæ­£ç†è§£å®ƒã€‚â€æŠŠè®°è¯»ä¹¦ç¬”è®°ä½œä¸ºç›®æ ‡å»è¯»ä¹¦ï¼Œå¾—åˆ°çš„æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å½“ä½ ä»¥æ€æƒ³è¾“å‡ºä¸ºå‰æå»è¯»ä¹¦æ—¶ï¼Œæ€æƒ³è¾“å…¥çš„è´¨é‡ä¹Ÿä¼šæœ‰æ‰€æå‡ï¼Œè€Œä¸”äº²æ‰‹å†™æ–‡ç« çš„å¥½å¤„æ¯”å£å¤´å™è¿°è¦å¤šã€‚ â˜… åˆšå¼€å§‹å­¦ä¹ åšè¯»ä¹¦ç¬”è®°æ—¶ï¼Œä¸å¿…è‹›åˆ»è‡ªå·±è¦åšå¾—å¤šä¹ˆå¥½ï¼Œæ€»ç»“å¾—å¤šä¹ˆå¦™ï¼Œæœ€å¼€å§‹çš„æ—¶å€™ï¼Œæœ€é‡è¦çš„æ˜¯åŸ¹å…»è‡ªå·±åšè¯»ä¹¦ç¬”è®°çš„ä¹ æƒ¯ã€‚è¯»ä¹¦ç¬”è®°ä¸»è¦æ˜¯å¯¹è‡ªå·±è¯»ä¹¦çš„ä¸€ç§æ€»ç»“ï¼Œå¸æ”¶ä¹¦ä¸­çš„ç²¾åï¼Œè€Œå¹¶éæ˜¯ä¸ºäº†ä»–äººè€Œå†™ã€‚ 2)è¯»ä¹¦ç¬”è®°ä»ä¸€å¥è¯å¼€å§‹â˜† ä¹¦å†™è¿™ä¸€åŠ¨ä½œï¼Œä¹Ÿæœ‰æ•´ç†è‡ªå·±æƒ³æ³•çš„å«ä¹‰ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œè¯»å®Œå†’é™©é¢˜æçš„çºªå®æ–‡å­¦ä»¥åï¼Œå°±ä¼šæƒ³åœ¨è¯»ä¹¦ç¬”è®°é‡Œå†™ä¸Šâ€œè¿™ä¸ªäººçœŸå‰å®³â€ã€‚ä½ æ‹¿èµ·ç¬”æ—¶ï¼Œä¼šæƒ³åˆ°ã€‚ç­‰ä¸€ä¸‹ï¼Œä¸å†™ä¸Šè¿™ä¸ªäººæ˜¯å“ªé‡Œå‰å®³ã€ä¸ºä»€ä¹ˆå‰å®³çš„è¯ï¼Œä¸‹æ¬¡å†è¯»åˆ°è¿™å¥è¯æ—¶ä¼šçœ‹ä¸æ‡‚å§â€ï¼Œäºæ˜¯ä½ ä¼šè¿™æ ·å†™ä½œè€…çš„ä½“åŠ›å’Œç²¾ç¥æ‰¿å—åŠ›éƒ½å¤ªå¼ºäº†ã€‚æ™®é€šäººåœ¨å¤±æ˜åä¸€å®šä¼šæ„Ÿåˆ°ç»æœ›ï¼Œå°±ç®—ä»–æ¯”ä¸€èˆ¬äººå¼ºå£®ï¼Œåœ¨è¿™æ ·çš„ç¯å¢ƒä¸‹ä¹Ÿå¾ˆéš¾ç”Ÿè¿˜ã€‚ä¸ºä»€ä¹ˆä½œè€…å¯ä»¥å¦‚æ­¤åšå¼º? æœ¬æ¥åªæƒ³å†™ä¸€å¥è¯ï¼Œå´æŠŠè‡ªå·±çš„æ„Ÿå—ä¸€è‚¡è„‘å„¿åœ°å†™äº†ä¸‹æ¥ï¼Œå¹¶ç”±æ­¤å±•å¼€æ€è€ƒï¼Œè¯»ä¹¦ç¬”è®°å°±è¿™æ ·å……å®äº†èµ·æ¥ã€‚ â˜… ä¸€ç¯‡ä¸Šä¸‡å­—çš„æ–‡ç« ä¹Ÿæ˜¯ä»ä¸€å¥è¯å¼€å§‹çš„ï¼Œä¸Šç™¾ä¸‡å­—çš„å°è¯´å¯èƒ½ä¹Ÿåªæ˜¯é€šè¿‡ä¸€ä»½ä¸è¿‡åƒå­—çš„å¤§çº²é€æ¸æ‰©å±•è€Œæ¥ã€‚ä¸æ€•å†™ä¸å‡ºä¸€ä¸‡å­—çš„é•¿æ–‡ï¼Œåªæ€•è¿ä¸€å¥æœ€æœ€ç®€å•çš„è¯éƒ½ä¸å†™ã€‚ 3)æ— æ³•åšæŒåšç¬”è®°çš„åŸå› â˜† éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåƒä¸‡ä¸è¦ä¸ºäº†åšæŒå†™è¯»ä¹¦ç¬”è®°è€Œèµ°å½¢å¼ä¸»ä¹‰ã€‚ä¸ç®¡é‡‡ç”¨ä»€ä¹ˆæ–¹å¼ï¼Œéƒ½è¦è¸å®åœ°å†™ç¬”è®°ï¼Œå¹¶çœŸæ­£ç†è§£ä¹¦çš„å†…å®¹ã€‚ â˜… å¹¶éå¦‚ä½œè€…æ‰€è¯´ï¼Œæˆ‘ä»¬ä¸å¯èƒ½çœŸæ­£ç†è§£æ‰€æœ‰è¯»è¿‡çš„ä¹¦çš„å†…å®¹ï¼Œä½†æ˜¯å†™ç¬”è®°ä¸€å®šè¦è¸å®åœ°å»åšä¾¿æ˜¯ã€‚ ä¸‰) åšç¬”è®°çš„æ­¥éª¤1) é’ˆå¯¹çº¸è´¨ä¹¦ â˜… åˆšå¼€å§‹è®¤ä¸ºè¿™æ ·æ˜¯å¯¹äºä¹¦çš„ä¸€ç§ä¸çˆ±æŠ¤çš„è¡¨ç°ï¼Œç°åœ¨æ‰è§‰å¾—å…¶å®è¿™ä¹ˆåšçš„æ–¹å¼å¹¶æ²¡æœ‰å¤šä¹ˆä¸å¥½ï¼Œå‰ææ˜¯ä¹¦çš„ä¸»äººæ˜¯è‡ªå·±ã€‚ä¸å…¶çœ‹è¿‡ä¸€éå°±æ‰”æ‰æˆ–è€…å†ä¹Ÿä¸çœ‹ï¼›ä¸å¦‚è®©çœ‹è¿‡çš„ä¹¦ç•™ä¸‹è‡ªå·±è¯»è¿‡çš„ç—•è¿¹ï¼Œæ›´å¥½çš„å¸æ”¶ä¹¦ä¸­çš„å†…å®¹ã€‚ 2) é’ˆå¯¹ç”µå­ä¹¦Kindleâ˜… ä»¥ä¸‹é’ˆå¯¹Kindleçš„éƒ¨åˆ†ä¸ºä¸ªäººæ€»ç»“ï¼Œä¹¦ä¸­å¹¶æœªæåŠã€‚ 1.é€šè¯»:æŠŠè¯»èµ·æ¥è§‰å¾—ä¸é”™çš„é‚£ä¸€é¡µçš„ä¸­é—´éƒ¨åˆ†çš„ä¸¤ä¸ªå­—åŠ å…¥ç¬”è®°ã€ç¬”è®°å†…å®¹ä¸º1ï¼ˆ1åªæ˜¯åšçš„ä¸€ä¸ªæ ‡è®°ï¼‰ ç”±äºKindleåœ¨æ·»åŠ ç¬”è®°æ—¶ä¼šåŒæ—¶æ’å…¥ä¸€æ¡ç¬”è®°å’Œä¸€æ¡æ ‡æ³¨è®°å½•ã€æ‰€ä»¥éœ€è¦åˆ é™¤æ ‡è®°é‚£æ¡è®°å½•ã€‚åˆ é™¤ç¬¬ä¸€æ¡è®°å½•ã€ä¿ç•™ç¬”è®°å†…å®¹ä¸º1çš„è®°å½•ã€‚ 2.é‡è¯»è¯»å®Œä¸€éä¹‹åï¼Œå†æŠŠç¬”è®°åˆ—è¡¨ä¸­çš„å‡ é¡µé‡æ–°è¯»ä¸€éã€‚å¦‚æœä»ç„¶è§‰å¾—å¾ˆå¥½ï¼Œæ·»åŠ ä¹¦ç­¾ 3.æ ‡è®°å†é‡æ–°è¯»ä¸€éåŠ æœ‰ä¹¦ç­¾çš„å‡ é¡µï¼Œå¦‚æœç¬¬ä¸‰æ¬¡é˜…è¯»åä»ç„¶è§‰å¾—å€¼å¾—ä¸€è¯»ï¼Œå°±ç”¨æ ‡è®°åŠŸèƒ½åœ¨ä¸Šé¢åšè®°å·ã€‚æœ€åç•™ä¸‹æ¥çš„å°±æ˜¯ä½ è®¤ä¸ºæœ€æœ‰ç”¨çš„éƒ¨åˆ†äº†ã€‚è¿™ä¸€é¡µä¸Šä¼šæœ‰é€šè¯»æ­¥éª¤çš„ç¬”è®°è®°å½•ã€æœ‰é‡è¯»æ­¥éª¤åŠ çš„ä¹¦ç­¾ã€æœ‰æ ‡è®°æ­¥éª¤æ—¶åˆ’çš„æ ‡è®°ã€‚ å¯ä»¥é€šè¿‡Kindle Mateè¿™ä¸ªè½¯ä»¶å°†æ ‡è®°çš„å†…å®¹å¯¼å‡ºæ¥ï¼Œä¾¿äºåšè¯»ä¹¦ç¬”è®°ã€‚è¯»ä¹¦ç¬”è®°å¯ä»¥ç”¨æœ‰é“äº‘ç¬”è®°ï¼Œä¸ªäººä½¿ç”¨æœ‰é“äº‘çš„Markdownåšç¬”è®°ï¼Œå¦‚æœæƒ³ä¿å­˜Kindleç”µå­ä¹¦ä¸­çš„å›¾ç‰‡ï¼Œå¯ä»¥æŒ‰ä½å·¦ä¸‹è§’å’Œå³ä¸Šè§’è¿›è¡Œæˆªå›¾ï¼Œä¼šè‡ªåŠ¨ä¿å­˜ï¼Œè¿æ¥ç”µè„‘åKindelæ‰€åœ¨ç›˜çš„æ ¹ç›®å½•å¯ä»¥æ‰¾åˆ°ã€‚ å››)è‘±é²”[wÄ›i]é”…å¼è¯»ä¹¦ç¬”è®°â˜† è‘±é²”ç«é”…å¼è¯»ä¹¦ç¬”è®°=æ‘˜æŠ„+è¯„è®ºå†™è¯»ä¹¦ç¬”è®°ä¹‹å‰æ³¨æ„çš„ä¸‰ä¸ªäº‹é¡¹: å†™è¯»ä¹¦ç¬”è®°çš„æ—¥æœŸ ä¹¦å ä½œè€…å é™¤äº†ä»¥ä¸Šä¸‰ä¸ªè¦ç´ ã€ä¹Ÿå¯ä»¥åŠ ä¸Šä»¥ä¸‹ä¸¤ä¸ªè¦ç´ ã€‚ å¯¹è‡ªå·±æ¥è¯´é‡è¦çš„å†…å®¹ï¼ˆæ‘˜æŠ„ï¼‰ è‡ªå·±å¯¹è¿™ç¯‡æ–‡ç« çš„æ„Ÿæƒ³ï¼ˆè¯„è®ºï¼‰ æ­¥éª¤: å†™ä¸Šæ—¥æœŸï¼Œæ¯æ¬¡æ¢è¡Œéƒ½è¦ç•™ä¸€è¡Œç©ºç™½ï¼Œè€Œæ¯ä¸ªæ®µè½ä¹‹é—´ç•™ä¸¤è¡Œç©ºç™½ï¼Œä¾¿äºæ—¥åé‡è¯»ã€æ’å…¥æ–‡å­—å’Œæ›´æ­£ä¿®æ”¹ã€‚ æ‘˜æŠ„å’Œå†™è¯„è®ºï¼Œé‡è¯»åšè¿‡è®°å·çš„å†…å®¹ï¼Œä¸¥æ ¼ç­›é€‰å‡ºè‡ªå·±è®¤ä¸ºå¯ä»¥å¤šè¯»å‡ éçš„éƒ¨åˆ†ã€æœ€ååœ¨æ‘˜æŠ„å®Œçš„æ–‡ç« åé¢ç•™å‡ºä¸€äº›ç©ºç™½ï¼Œå†™ä¸Šè‡ªå·±çš„è¯„è®ºã€‚æ‘˜æŠ„éƒ¨åˆ†ç”¨â˜†è¡¨ç¤ºï¼Œè€Œç”¨è‡ªå·±è¯­è¨€è¡¨è¾¾çš„æ„Ÿæƒ³å’Œè¡¥å……è¯´æ˜åˆ™æ ‡ä¸Šâ˜…ä»¥æ­¤ä½œä¸ºåŒºåˆ†ï¼Œäº¤æ›¿æ ‡åœ¨æ¯ä¸ªæ®µè½å‰ã€‚ äº”)ç¤ºä¾‹ã€080715ã€‘ã€Šå†³å®šäººç±»æœªæ¥çš„50ä»¶äº‹ã€‹/æ°è¥¿å¡Â·å¨å»‰å§†æ–¯/è‰æ€ç¤¾ â˜†è‡ªæ€è€…ä¸­æœ‰ä¸‰åˆ†ä¹‹äºŒæ˜¯å› ä¸ºæŠ‘éƒã€‚(P180) â˜…ä½œè€…è¯´ï¼Œä¸–ç•Œä¸Šçš„è‡ªæ€è€…æ¯”åœ¨æˆ˜äº‰ä¸­æ­»å»çš„äººè¿˜è¦å¤šã€‚äººç±»åœ¨æˆ˜äº‰å¹³ä»£ä¼šæ­»äº¡ï¼Œåœ¨å’Œå¹³å¹´ä»£ä¹Ÿä¼šæ­»äº¡ï¼ŒçœŸæ˜¯ä¸å®¹æ˜“ã€‚ â˜†æ‰€è°“å¥´éš¶ï¼Œå°±æ˜¯è¢«å‰¥å¤ºäº†äººæƒçš„äººã€‚å³ä½¿æ˜¯è¿™æ ·ï¼Œå¥´éš¶ç¤¾ä¼šä¸­ä¹Ÿå­˜åœ¨å¯¹å¾…å¥´éš¶äººæ€§åŒ–çš„æƒ…å†µï¼Œå¥´éš¶ä»¬åœ¨é¥¥é¥¿æˆ–è€…ç”Ÿç—…çš„æ—¶å€™æ˜¯å¯ä»¥ä¸å·¥ä½œçš„ã€‚ä½†åœ¨ç°ä»£ç¤¾ä¼šã€å¥´éš¶å°±æ˜¯ä¸€æ¬¡æ€§çš„è´¢äº§ï¼Œè¢«è´±ä¹°è´±å–ã€‚ â˜…ä»¥å‰çš„å¥´éš¶æ˜¯é•¿æœŸé›‡ä½£åˆ¶ï¼Œè€Œç°åœ¨çš„åˆ™æ˜¯å› ä¸ºæŠµæŠ¼è´·æ¬¾è€Œè¢«äººèº«ä¹°å–ã€‚ä¸ºäº†äº‹åä¸ç•™éº»çƒ¦ï¼Œå¥´éš¶ä»¬è¢«é€å»åšåˆåŒå·¥æˆ–é›¶å·¥ï¼Œè¢«ä»»æ„é©±ä½¿ã€‚ä¸€ä¸ªäººæ´»åœ¨ä¸–ä¸Šï¼Œæœ€ä¸å¯æˆ–ç¼ºçš„åˆ°åº•æ˜¯äººæƒè¿˜æ˜¯é‡‘é’±å‘¢? â€œâ˜†â€ã€‚åé¢æ˜¯æ‘˜æŠ„ã€‚æ³¨æ„ä¸è¦çœç•¥ï¼Œè¦ä¿æŒåŸæ±åŸå‘³ã€‚ â€œâ˜…â€åé¢åˆ™æ˜¯è‡ªå·±çš„è¯„è®ºï¼Œå†™ä¸€äº›å¯¹æ‘˜æŠ„å†…å®¹çš„æ„Ÿæƒ³ å¹¶éæ‰€æœ‰çš„ä¹¦éƒ½è¦æŒ‰ç…§è¿™ç§æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ ¹æ®å¯¹ä½œå“çš„é‡è§†ç¨‹åº¦æ”¹å˜ç¬”è®°çš„å†™æ³• æ¯”å¦‚åƒâ€œæ–‡ä»¶æ•´ç†æŠ€å·§â€ä¸€ç±»çš„çº¯å®ç”¨æŠ€å·§ä¹¦ã€å¯ä»¥ä¸å»æ‘˜æŠ„ï¼Œè€Œæ˜¯åªæ ‡è®°â€œâ˜…â€å¹¶æ€»ç»“è¦ç‚¹ã€‚å¦‚æœæ˜¯å°è¯´ç­‰ä¼‘é—²è¯»ç‰©ï¼Œå¯ä»¥ç›´æ¥åˆ†æ¡ä¹¦å†™è‡ªå·±å¯¹è¿™æœ¬ä¹¦çš„æ„Ÿæƒ³ã€‚ å…­)å¯»æ‰¾æœ€å…·ä»£è¡¨æ€§çš„è¯­å¥ â˜† åªæœ‰è®©è‡ªå·±æ„ŸåŠ¨çš„æ®µè½æ‰å€¼å¾—æ‘˜æŠ„ï¼Œä¸€å®šæ˜¯æ‘˜æŠ„è®©è‡ªå·±å¿ƒåŠ¨çš„è¯­å¥ã€‚ å¦ä¸€æ–¹é¢ï¼Œé€‰æ‹©æ‘˜æŠ„æ®µè½æ—¶ï¼Œä¸æ˜¯æ‰¾è®©äººè§‰å¾—â€œç†åº”å¦‚æ­¤â€çš„æ–‡ç« ï¼Œè€Œæ˜¯è§‰å¾—â€œè¿™ä¹ˆä¸€è¯´ç¡®å®æœ‰é“ç†â€çš„å†…å®¹ã€‚ è¯»è¿‡ä¸€æœ¬ä¹¦ä»¥åï¼Œå¯¹ä¹¦ä¸­å†…å®¹æ„ŸåŒèº«å—å›ºç„¶è®©äººå¿ƒæƒ…æ„‰æ‚¦ï¼Œä½†è¿™ä¹Ÿä»£è¡¨è¿™æ¬¡è¯»ä¹¦æ²¡æœ‰ç»™ä½ å¸¦æ¥æ–°ä¸œè¥¿ã€‚ç›¸åï¼Œå¦‚æœä¸€ç¯‡æ–‡ç« é¢ è¦†äº†ä½ ä¹‹å‰çš„æƒ³æ³•ï¼Œä½¿ä½ çš„è®¤è¯†å‘ç”ŸåŠ¨æ‘‡ï¼Œåœ¨æŠ„å†™å’Œé‡è¯»çš„è¿‡ç¨‹ä¸­ä»ç„¶ä¼šè®©äººä¿¡æœæˆ–æ˜¯æ„Ÿè§‰éœ‡æ’¼ï¼Œè¿™ç§æ–‡ç« æ‰æ˜¯å€¼å¾—æ‘˜æŠ„çš„ã€‚ ä¸ƒ)æ¿€å‘æ€æƒ³çš„ç«èŠ±â˜† åœ¨æ‘˜æŠ„çš„åŒæ—¶ï¼Œé™„ä¸Šè‡ªå·±çš„æ„Ÿæƒ³å’Œæ€è€ƒï¼ŒæŠŠä½œè€…çš„è¯å’Œè‡ªå·±çš„è¯æ”¾åœ¨ä¸€èµ·ï¼Œæ„Ÿå—è½å·®ã€‚å¥½ä¸»æ„ä¸ä¼šå‡­ç©ºå‡ºç°ã€‚ä¸è®ºæ˜¯ä»€ä¹ˆæƒ³æ³•ï¼Œéƒ½ä¸€å®šæ˜¯å¯¹æŸç§åˆºæ¿€åšå‡ºçš„å›åº”ã€‚åªæœ‰åœ¨è¯»å®Œä¹¦åå¯¹ä¹¦ä¸­å†…å®¹åšå‡ºååº”ï¼Œè¿›è¡Œä¸»åŠ¨æ€è€ƒï¼Œæ‰èƒ½çœŸæ­£æŒæ¡è¿™æœ¬ä¹¦çš„å†…å®¹ã€‚ ä¸¤ä¸ªæ¦‚å¿µ â€œå¸å–ç²¾åâ€:åŸå°ä¸åŠ¨åœ°å¸å–ä¹¦ä¸Šçš„çŸ¥è¯†ã€‚ â€œè¯»ä¹¦ä½“éªŒâ€: â— â€œä¹¦ä¸Šå†™çš„è¿™äº›ï¼Œæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„â€ â— â€œä»¥æ­¤ä¸ºå¥‘æœºï¼Œæˆ‘æƒ³åˆ°äº†ä¸€ä»¶äº‹â€¦â€¦â€ â˜… æ²¡æœ‰ä¸»åŠ¨æ€è€ƒçš„é˜…è¯»ï¼Œä¹¦ä¸­çš„å†…å®¹è¢«æŒæ¡çš„æå…¶æœ‰é™ï¼Œç”šè‡³äºæœªè¯»è¿‡ä¸€æ ·ã€‚","tags":[{"name":"è¯»ä¹¦","slug":"è¯»ä¹¦","permalink":"http://nullpointer.pw/tags/è¯»ä¹¦/"}]},{"title":"ç‚¹å‡»æŒ‰é’®æ‹·è´ä»£ç çš„å®ç°","date":"2016-10-09T06:33:00.000Z","path":"ç‚¹å‡»æŒ‰é’®æ‹·è´ä»£ç çš„å®ç°.html","text":"ä¾‹å­ï¼š 1ã€ headä¸­å¼•å…¥ä¸€ä¸ªjs clipboard.js 1&lt;script src=\"//cdn.bootcss.com/clipboard.js/1.5.15/clipboard.js\"&gt;&lt;/script&gt; 2ã€åˆå§‹åŒ–å¯¹è±¡ 123&lt;script type=\"text/javascript\"&gt; new Clipboard('.btn');//æ­¤å¤„btnæ˜¯copyæŒ‰é’®çš„id&lt;/script&gt; 3ã€ä½¿ç”¨copy 1234567&lt;div class=\"col-lg-6 col-md-8 col-sm-8\"&gt; &lt;input type=\"text\" class=\"form-control\" id=\"murl\" value=\"$&#123;murl&#125;\" /&gt;&lt;/div&gt;&lt;button type=\"button\" class=\"btn\" data-clipboard-target=\"#murl\" &gt;å¤åˆ¶&lt;/button&gt;&lt;!-- data-clipboard-target è¦å¤åˆ¶çš„ç›®æ ‡--&gt; å‚è€ƒ http://clipboardjs.52fhy.com/","tags":[{"name":"JS","slug":"JS","permalink":"http://nullpointer.pw/tags/JS/"}]},{"title":"Onsæ¶ˆæ¯é˜Ÿåˆ—","date":"2016-10-02T04:17:00.000Z","path":"Onsæ¶ˆæ¯é˜Ÿåˆ—.html","text":"Onsæ¶ˆæ¯é˜Ÿåˆ—å‰å¼•ï¼šå…¬å¸é¡¹ç›®éœ€è¦å†™ä¸€ä¸ªæ¨å¹¿ç³»ç»Ÿï¼Œæ¨å¹¿ç³»ç»Ÿæ˜¯ä¸€ä¸ªé¡¹ç›®ï¼Œå’Œä¸»é¡¹ç›®åˆ†ç¦»ï¼Œé¡¹ç›®é—´çš„é€šä¿¡ä½¿ç”¨Onsæ¥å®Œæˆï¼Œä»¥ä¸‹æ˜¯å…¬å¸ä»£ç ç•¥å¾®ä¿®æ”¹çš„ç»“æœï¼Œä»¥ä¾›å‚è€ƒã€‚ æœ¯è¯­ï¼š Producerï¼šæ¶ˆæ¯ç”Ÿäº§è€…ï¼Œè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯ï¼Œä¸€èˆ¬ç”±ä¸šåŠ¡ç³»ç»Ÿè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯ã€‚ Consumerï¼šæ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œè´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯ï¼Œä¸€èˆ¬æ˜¯åå°ç³»ç»Ÿè´Ÿè´£å¼‚æ­¥æ¶ˆè´¹ã€‚ Producer IDï¼šä¸€ç±» Producer çš„é›†åˆåç§°ï¼Œè¿™ç±» Producer é€šå¸¸å‘é€ä¸€ç±»æ¶ˆæ¯ï¼Œä¸å‘é€é€»è¾‘ä¸€è‡´ã€‚ Consumer IDï¼šä¸€ç±» Consumer çš„é›†åˆåç§°ï¼Œè¿™ç±» Consumer é€šå¸¸æ¶ˆè´¹ä¸€ç±»æ¶ˆæ¯ï¼Œä¸æ¶ˆè´¹é€»è¾‘ä¸€è‡´ã€‚ å¹¿æ’­æ¶ˆè´¹ï¼šä¸€æ¡æ¶ˆæ¯è¢«å¤šä¸ª Consumer æ¶ˆè´¹ï¼Œå³ä½¿è¿™äº› Consumer å±äºåŒä¸€ä¸ª Consumer IDï¼Œæ¶ˆæ¯ä¹Ÿä¼šè¢« Consumer IDä¸­çš„æ¯ä¸ª Consumer éƒ½æ¶ˆè´¹ä¸€æ¬¡ï¼Œå¹¿æ’­æ¶ˆè´¹ä¸­çš„ Consumer ID æ¦‚å¿µå¯ä»¥è®£ä¸ºåœ¨æ¶ˆæ¯åˆ’åˆ†æ–¹é¢æ— æ„ä¹‰ã€‚ é›†ç¾¤æ¶ˆè´¹ï¼šä¸€ä¸ª Consumer ID ä¸­çš„ Consumer å®ä¾‹å¹³å‡åˆ†æ‘Šæ¶ˆè´¹æ¶ˆæ¯ã€‚ ä¾‹å¦‚æŸä¸ª Topic æœ‰ 9 æ¡æ¶ˆæ¯ï¼Œ å…¶ä¸­ä¸€ä¸ª ConsumerId æœ‰ 3 ä¸ªå®ä¾‹ï¼ˆå¯èƒ½æ˜¯ 3 ä¸ªè¿›ç¨‹ï¼Œæˆ–è€… 3 å°æœºå™¨ï¼‰ ï¼Œé‚£ä¹ˆæ¯ä¸ªå®ä¾‹åªæ¶ˆè´¹å…¶ä¸­çš„ 3 æ¡æ¶ˆæ¯ å¼•å…¥ä¾èµ– Mavenæ–¹å¼ 12345&lt;dependency&gt; &lt;groupId&gt;com.aliyun.openservices&lt;/groupId&gt; &lt;artifactId&gt;ons-client&lt;/artifactId&gt; &lt;version&gt;1.1.2&lt;/version&gt;&lt;/dependency&gt; jaråŒ…æ–¹å¼ http://onsall.oss-cn-hangzhou.aliyuncs.com/aliyun-ons-client-java.tar.gz ä¸€ã€å‘é€æ¶ˆæ¯1ã€åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­é…ç½® Topicã€Producer IDï¼Œ Consumer ID2ã€åˆ›å»ºOnsæ¶ˆæ¯ç”Ÿäº§è€…1234567891011121314151617181920212223242526272829303132333435363738394041@Servicepublic class ProducerService implements IProducerService &#123; private Producer producer; @Override public void sendMessage(String topic, String tag, String content) &#123; try &#123; byte[] bytes = content.getBytes(\"UTF-8\"); Message msg = new Message(topic, tag, bytes); SendResult sendResult = producer.send(msg); System.out.println(\"SendMessageIng... topic:\" + topic + \" tag:\" + tag + \" \"+ sendResult); &#125; catch (UnsupportedEncodingException e) &#123; e.printStackTrace(); &#125; &#125; @PostConstruct public void init() &#123; Properties properties = new Properties(); //PropertyKeyConst æ˜¯Onså®˜æ–¹å®šä¹‰çš„å¸¸é‡ //éœ€è¦åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°åˆ›å»º AccessKeyï¼ŒSecretKey properties.put(PropertyKeyConst.ProducerId, ProducerConstants.PRODUCERID_PCHOME); //PRODUCERID_PCHOMEæ˜¯åœ¨æ§åˆ¶å°é…ç½®Topic çš„ Producer ID properties.put(PropertyKeyConst.AccessKey, ProducerConstants.ACCESSID); properties.put(PropertyKeyConst.SecretKey, ProducerConstants.ACCESSKEY); producer = ONSFactory.createProducer(properties); // åœ¨å‘é€æ¶ˆæ¯å‰ï¼Œå¿…é¡»è°ƒç”¨startæ–¹æ³•æ¥å¯åŠ¨Producerï¼Œåªéœ€è°ƒç”¨ä¸€æ¬¡å³å¯ã€‚ producer.start(); &#125; @PreDestroy public void destory() &#123; // åœ¨åº”ç”¨é€€å‡ºå‰ï¼Œé”€æ¯Producerå¯¹è±¡ // æ³¨æ„ï¼šå¦‚æœä¸é”€æ¯ä¹Ÿæ²¡æœ‰é—®é¢˜ producer.shutdown(); &#125;&#125; 3ã€åˆ›å»ºå‘é€æ¶ˆæ¯ç±»1234567891011121314151617181920212223242526272829import net.minidev.json.JSONObject;import com.aliyun.openservices.ons.api.Action;import com.aliyun.openservices.ons.api.ConsumeContext;import com.aliyun.openservices.ons.api.Message;import com.aliyun.openservices.ons.api.MessageListener;@Servicepublic class OnsService implements IOnsService, MessageListener &#123; @Resource private IProducerService producerService; public static final String TOPIC = \"TopicTestONS\"; public static final String TOPIC_TAG = \"TagA\"; @Override public Action consume(Message message, ConsumeContext context) &#123; return null; &#125; @Override public void sendBindObject(int uid, int tid, int eid, String pageUrl) &#123; JSONObject json = new JSONObject(); json.put(\"uid\", uid); json.put(\"tid\", tid); json.put(\"eid\", eid); json.put(\"pageUrl\", pageUrl); producerService.sendMessage(TOPIC, TOPIC_TAG, json.toJSONString()); //ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯éœ€è¦å‘é€çš„å†…å®¹ï¼Œå…¬å¸ä½¿ç”¨çš„Json &#125;&#125; äºŒã€è®¢é˜…æ¶ˆæ¯1ã€åˆ›å»ºOnsæ¶ˆæ¯æ¶ˆè´¹è€…1234567891011121314151617181920212223242526272829303132@Service@Lazy(value=false)public class ConsumerService implements IConsumerService &#123; private Consumer consumer; @PostConstruct public void init() &#123; System.out.println(\"init....\"); Properties properties = new Properties(); properties.put(PropertyKeyConst.ConsumerId, ConsumerConstants.CONSUMERID); properties.put(PropertyKeyConst.AccessKey,ConsumerConstants.ACCESSID); properties.put(PropertyKeyConst.SecretKey,ConsumerConstants.ACCESSKEY); properties.put(PropertyKeyConst.MessageModel,PropertyValueConst.CLUSTERING); consumer = ONSFactory.createConsumer(properties); consumer.start(); &#125; //MessageListener æ˜¯é˜¿é‡ŒOnsåŒ…å†…çš„æ¶ˆæ¯ç›‘å¬å™¨ @Override public void subscribe(final String topic, final String subExpression, final MessageListener listener) &#123; consumer.subscribe(topic, subExpression, listener); &#125; @PreDestroy public void desotry() &#123; if (consumer != null) &#123; consumer.shutdown(); &#125; &#125;&#125; 2ã€åˆ›å»ºæ¶ˆè´¹æ¶ˆæ¯ç±»123456789101112131415161718192021222324@Servicepublic class OnsConsumerService implements IOnsConsumerService &#123; @Resource private IConsumerService consumerService; public static final String TOPIC = \"TopicTestONS\"; @PostConstruct public void init() &#123; System.out.println(\"starting...\"); onsConsumerService.subscribe(TOPIC, \"*\", new MessageListener() &#123; @Override public Action consume(Message message, ConsumeContext context) &#123; JSONObject parse = (JSONObject) JSONValue.parse(message.getBody()); int uid = JsonUtil.getInt(parse, \"uid\"); int tid = JsonUtil.getInt(parse, \"tid\"); int eid = JsonUtil.getInt(parse, \"eid\"); String pageUrl = JsonUtil.getString(parse, \"pageUrl\"); System.out.println(uid + tid + eid + pageUrl); return Action.CommitMessage; &#125; &#125;); &#125;&#125; ä»¥ä¸Šä¸ºOnsçš„é›†ç¾¤è®¢é˜…æ¶ˆæ¯ä»£ç ã€‚ å‚è€ƒï¼š Onså®˜æ–¹æ–‡æ¡£ http://onsteam.oss-cn-hangzhou.aliyuncs.com/ALIYUN_ONS_USER_GUIDE.pdf","tags":[{"name":"Ons","slug":"Ons","permalink":"http://nullpointer.pw/tags/Ons/"},{"name":"æ¶ˆæ¯é˜Ÿåˆ—","slug":"æ¶ˆæ¯é˜Ÿåˆ—","permalink":"http://nullpointer.pw/tags/æ¶ˆæ¯é˜Ÿåˆ—/"}]}]