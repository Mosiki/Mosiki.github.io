[{"title":"è®°ä¸€æ¬¡IDEAæ‰“å¼€é¡¹ç›®æ…¢æ’æŸ¥","date":"2022-05-11T13:52:26.000Z","path":"idea-preparing-workspace-so-slowly.html","text":"å‡çº§ IDEA ç‰ˆæœ¬åˆ° 2022.3.1 åï¼Œæœ€è¿‘å‡ºç°äº†æ‰“å¼€ä¸€ä¸ªé¡¹ç›®éœ€è¦ 5 åˆ†é’Ÿçš„æƒ…å†µï¼Œå¯åŠ¨æ˜¾ç¤ºï¼šPreparing workspaceâ€¦ ï¼Œç‚¹å‡» cancel åï¼ŒIDEA å°±ä¼šå‡ºç°å‡æ­»çš„æƒ…å†µï¼Œè¦ä¹ˆç­‰è¦ä¹ˆå°±åªèƒ½å¼ºåˆ¶æ€æ‰è¿›ç¨‹ï¼Œæå¾—å¾ˆçƒ¦ï¼Œç‰¹æ­¤è®°å½•ä¸€ä¸‹è§£å†³è¿‡ç¨‹ã€‚ IDEA ç‰ˆæœ¬æ˜¯ï¼šIntelliJ IDEA 2021.3.1 (Ultimate Edition) å‚è€ƒ https://youtrack.jetbrains.com/issue/IDEA-286039/Preparing-workspace-so-slowly è¿™ä¸ªé“¾æ¥ï¼Œå‘ç°é‡åˆ°çš„æ˜¯ç›¸åŒçš„é—®é¢˜ï¼Œé€šè¿‡èœå•æ‰¾åˆ° idea çš„æ—¥å¿—ç›®å½•(help-Show Log in Finder)ï¼ŒæŸ¥çœ‹ idea.log æ—¥å¿—ï¼Œæœç´¢ FileEditorManagerImplï¼Œè€—æ—¶ 27 ä¸‡ ms å¯¼è‡´æ…¢çš„å…ƒå‡¶æ˜¯ Package Search è¿™ä¸ªæ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶ç”¨äºæ£€æŸ¥ maven/gradle çš„ä¾èµ–ç‰ˆæœ¬ï¼Œä¸çŸ¥é“æ˜¯ IDEA çš„å“ªä¸ªç‰ˆæœ¬åŠ ä¸Šå»çš„ï¼Œåœ¨è®¾ç½®é‡Œé¢ç¦ç”¨æ‰è¿™ä¸ªæ’ä»¶é‡å¯ IDEA å°±è§£å†³äº†ã€‚","tags":[]},{"title":"sqliteé›†æˆè¸©å‘","date":"2021-11-28T08:52:26.000Z","path":"sqlite-xx.html","text":"ä»…è®°å½•ä¸€ä¸ªè¸©å‘é—®é¢˜ å­¦ä¹ éœ€è¦ï¼Œä¸æƒ³ç”¨ MySQL é‚£ä¸€å¥—ï¼Œæƒ³æä¸€ä¸ªå¯ä»¥æŒä¹…åŒ–çš„ç®€å•æ•°æ®åº“ï¼Œé¦–å…ˆæ’é™¤äº† H2ï¼Œäºæ˜¯æƒ³åˆ°ç”¨ sqliteï¼Œå¥ˆä½•æäº†åŠå¤©ï¼Œä¸€ç›´å¯åŠ¨ä¸èµ·æ¥ï¼Œåœ¨ç½‘ä¸Šæ‰¾äº†ä¸€åœˆ demoï¼ŒåŒæ ·çš„ä»£ç é…ç½®åœ¨æˆ‘çš„å·¥ç¨‹é‡Œæ„£æ˜¯è·‘ä¸èµ·æ¥ã€‚ å·®å¼‚å°±åœ¨ç½‘ä¸Šçš„ demo éƒ½æ˜¯åŸºäº maven çš„ï¼Œè€Œæˆ‘çš„å·¥ç¨‹æ˜¯ gradle çš„ æ¯”å¦‚è¿™ä¸ªï¼šhttps://www.jianshu.com/p/85866250850c ä¸‹è½½ä»–çš„å·¥ç¨‹æœ¬åœ°å¯ä»¥æ­£å¸¸è¿è¡Œä½¿ç”¨ï¼Œå®Œå…¨ copy æ–‡ç« æä¾›çš„ demo é…ç½®åˆ°è‡ªå·±çš„ gradle å·¥ç¨‹ä¸­ï¼Œè¿è¡Œå°±æç¤º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182Failed to load ApplicationContextjava.lang.IllegalStateException: Failed to load ApplicationContext at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123) at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190) at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132) at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289) at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97) at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329) at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293) at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306) at org.junit.runners.ParentRunner.run(ParentRunner.java:413) at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:110) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58) at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38) at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62) at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) at com.sun.proxy.$Proxy2.processTestClass(Unknown Source) at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:118) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182) at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164) at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:412) at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64) at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56) at java.base/java.lang.Thread.run(Thread.java:834)Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#x27;userMapper&#x27; defined in file [/Users/wejan/Coding/Projects/2021/test-sqlite2/build/classes/java/main/com/shinemo/baas/repository/mapper/UserMapper.class]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Property &#x27;sqlSessionFactory&#x27; or &#x27;sqlSessionTemplate&#x27; are required at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1794) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:594) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:878) at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:879) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:551) at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120) at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ... 50 moreCaused by: java.lang.IllegalArgumentException: Property &#x27;sqlSessionFactory&#x27; or &#x27;sqlSessionTemplate&#x27; are required at org.springframework.util.Assert.notNull(Assert.java:201) at org.mybatis.spring.support.SqlSessionDaoSupport.checkDaoConfig(SqlSessionDaoSupport.java:122) at org.mybatis.spring.mapper.MapperFactoryBean.checkDaoConfig(MapperFactoryBean.java:73) at org.springframework.dao.support.DaoSupport.afterPropertiesSet(DaoSupport.java:44) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1853) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1790) ... 66 more ä¸€ç•ªæ’æŸ¥æ‰å‘ç°æŒ‰ç…§ç½‘ä¸Šçš„é…ç½®ä¸è¡Œè¦æ”¹æˆå¦‚ä¸‹ 12345spring: datasource: url: jdbc:sqlite::resource:db/test.db type: org.sqlite.SQLiteDataSource #driver-class-name: org.sqlite.JDBC å¦‚æœ type å‚æ•°æœªæŒ‡å®šï¼Œå°±ä¼šæŠ¥é”™ã€‚","tags":[]},{"title":"GithubPagesåšå®¢è‡ªå®šä¹‰åŸŸåHTTPSåŒ–","date":"2021-06-18T14:56:11.000Z","path":"github-pages-https.html","text":"ç©åšå®¢ä» 16 å¹´åˆ°ç°åœ¨ï¼Œä¸»é¢˜ä¸çŸ¥é“æ¢äº†å¤šå°‘ä¸ªï¼Œä½†æ˜¯å›¾åºŠæœåŠ¡ä¸€ç›´ä¾èµ–çš„ä¸ƒç‰›äº‘æ²¡æœ‰æ¢è¿‡ï¼Œä¹Ÿè®¸æ˜¯ç™½å«–æƒ¯äº†ï¼Œæ²¡å¾€ä¸ƒç‰›äº‘å……è¿‡ä¸€æ¯›é’±ï¼Œç”šè‡³è´¦å•é‡Œæ˜¾ç¤ºæ¬ äº† 2 å—é’± ğŸ˜†ã€‚å‡ ä¸ªæœˆå‰ä¸ƒç‰›äº‘æ›´æ”¹äº†æµ‹è¯•åŸŸåçš„é™åˆ¶ï¼Œæ¯ä¸ª bucket åˆ†é…çš„åŸŸååªæœ‰ä¸€ä¸ªæœˆçš„æœ‰æ•ˆæœŸï¼Œåˆ°æœŸè‡ªåŠ¨é‡Šæ”¾æ— æ³•ä½¿ç”¨ã€‚å› ä¸ºè¿™ä¸ªåŸå› ï¼Œä¸´æ—¶ç”¨äº†ä¸ƒç‰›ç‰çš„æ–‡ä»¶åŒæ­¥æœåŠ¡ï¼Œæ¯ä¸ªæœˆæ–°å¢ä¸€ä¸ª bucketï¼Œç„¶åå†æŠŠåŸŸåé‡Šæ”¾äº†çš„ bucket åŒæ­¥åˆ°æ–°çš„ bucket ä¸­ï¼Œå†æ‰‹åŠ¨å…¨å±€æ›¿æ¢åšå®¢ä¸­æ‰€æœ‰å›¾ç‰‡çš„åŸŸåï¼Œå¾ˆæ˜¯éº»çƒ¦ã€‚ä½†æ˜¯ä¹Ÿä¸€ç›´æ²¡æ‰¾åˆ°è§£å†³çš„æ–¹æ³•ã€‚è€Œä¸”å› ä¸ºä¸ƒç‰›äº‘çš„æµ‹è¯•åŸŸåæ˜¯ http çš„ï¼Œä¹Ÿä¸€ç›´å› ä¸ºè¿™ä¸ªåŸå› ï¼Œå¯¼è‡´åšå®¢è¿Ÿè¿Ÿæ²¡æœ‰è¿™ä¹ˆä¹… HTTPS åŒ–ã€‚ç›´åˆ°å‰ä¸¤å¤©ï¼Œå®åœ¨å—ä¸äº†æ¯ä¸ªæœˆçš„é‡å¤æœºæ¢°æ“ä½œï¼Œæƒ³åŠæ³•è§£å†³äº†å›¾åºŠçš„é—®é¢˜ï¼ŒåŒæ—¶é¡ºä¾¿æŠŠåšå®¢ææˆäº† HTTPSï¼Œä»¥ä¾›å‚è€ƒã€‚ å›¾åºŠè¿ç§»ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨ https åŸŸåç½‘é¡µä¸­ï¼Œæ— æ³•å¼•ç”¨é https çš„èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡ï¼Œä¼šå¯¼è‡´èµ„æºæ— æ³•åŠ è½½ã€‚æ‰€ä»¥å¦‚æœæƒ³è¦å°†åšå®¢ HTTPS åŒ–ï¼Œé¦–å½“å…¶å†²å°±æ˜¯è§£å†³å›¾åºŠçš„é—®é¢˜ï¼Œå³éœ€è¦ä¸€ä¸ª https çš„å›¾åºŠã€‚å¦‚æœä½¿ç”¨ä¸ƒç‰›äº‘ï¼Œåªèƒ½è‡ªå®šä¹‰åŸŸåï¼Œç¬”è€…æ²¡æœ‰å…¶ä»–çš„åŸŸåï¼Œä¹Ÿè§‰å¾—å¤‡æ¡ˆæµç¨‹å¾ˆéº»çƒ¦ï¼Œåªèƒ½æ”¾å¼ƒè¿™ä¸€æƒ³æ³•ã€‚å¦‚æœä½¿ç”¨å…¬å¼€çš„å…¶ä»–å›¾åºŠï¼Œåˆå®³æ€•ä¸å¤Ÿç¨³å®šï¼Œå¯¼è‡´èµ„æºå›¾ç‰‡å…¨éƒ¨ä¸¢å¤±å°±å¤ªä¸åˆ’ç®—äº†ï¼Œè¿™æ¡è·¯ä¹Ÿåªèƒ½æ”¾å¼ƒã€‚æœ€ç»ˆé€‰æ‹©åœ¨ github ä¸Šå¼€äº†ä¸€ä¸ªæ–°çš„ä»“åº“ï¼Œä¸“é—¨ç”¨äºå­˜æ”¾åšå®¢çš„å›¾ç‰‡ä¸èµ„æºã€‚ ä¸ƒç‰›äº‘æä¾›äº†ä¸€ä¸ª qshell å·¥å…·å¯ä»¥å¿«é€Ÿä¸‹è½½ bucket ä¸­çš„æ‰€æœ‰æ–‡ä»¶ é¦–å…ˆå»ä¸ƒç‰›äº‘åå° è·å– ak/sk ç„¶åè®¾ç½® qshell çš„å¯†é’¥ 1./qshell account ak sk å†æ·»åŠ ä¸€ä¸ª qn.conf é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹dest_dir ä¸ºä¿å­˜ä¸‹è½½æ–‡ä»¶çš„ä½ç½®ï¼Œä¿®æ”¹ bucket ä¸ºä½ çš„ä¸ƒç‰›å­˜å‚¨åº“åç§°ï¼Œcdn_domain ä¿®æ”¹ä¸º bucket åˆ†é…çš„æµ‹è¯•åŸŸåï¼ˆå¦‚æœæµ‹è¯•åŸŸååˆ°æœŸäº†ï¼Œå¯ä»¥æ–°å»ºä¸€ä¸ªä¸åŒäºå½“å‰ bucketåŒºåŸŸçš„ bucketï¼Œæ¯”å¦‚å½“å‰æ˜¯ååŒ—çš„ï¼Œå°±åˆ›å»ºä¸€ä¸ªåå—çš„ bucketï¼Œå¯ä»¥é€šè¿‡è·¨åŒºåŸŸåŒæ­¥å°†æ—§çš„ bucket æ–‡ä»¶åŒæ­¥åˆ°æ–°çš„ bucket ä¸­ï¼Œé…ç½®ä¸­çš„ bucket å€¼ä¹Ÿè¦æ”¹æˆæ–°çš„ bucket åç§°ï¼‰ 123456789101112&#123; &quot;dest_dir&quot; : &quot;/home/wejan/Desktop/images&quot;, &quot;bucket&quot; : &quot;test-bucket&quot;, &quot;prefix&quot; : &quot;&quot;, &quot;suffixes&quot; : &quot;&quot;, &quot;cdn_domain&quot; : &quot;http://opvasdfx.bkt.clouddn.com&quot;, &quot;referer&quot; : &quot;&quot;, &quot;log_file&quot; : &quot;download.log&quot;, &quot;log_level&quot; : &quot;info&quot;, &quot;log_rotate&quot; : 1, &quot;log_stdout&quot; : false&#125; æ¥ä¸‹æ¥å°±æ˜¯ä½¿ç”¨ qshell æ¥ä¸‹è½½æ–‡ä»¶äº†ï¼ˆå¦‚æœæ˜¯ä½¿ç”¨äº†è·¨åŒºåŸŸåŒæ­¥ï¼Œéœ€è¦ç­‰å¾…æ–‡ä»¶å…¨éƒ¨åŒæ­¥å®Œæˆåå†è¿›è¡Œï¼‰ã€‚ 1./qshell download qn.conf ç­‰å¾…å…¨éƒ¨ä¸‹è½½å®Œæ¯•å°±å¥½äº†ã€‚ ä¸‹é¢å°±æ˜¯å» GitHub åˆ›å»ºä¸€ä¸ªä»“åº“ï¼Œå°†ä¸‹è½½çš„æ–‡ä»¶å…¨éƒ¨æ¨é€åˆ°è¿™ä¸ªä»“åº“ä¸­ã€‚ 123456cd /home/wejan/Desktop/images // è¿›å…¥ä¸‹è½½ç›®å½•git initgit add *git commit -m &quot;init&quot;git remote add origin git@github.com:Mosiki/blog-imgs.git // ä¿®æ”¹æˆä½ ç”¨äºå­˜æ”¾å›¾ç‰‡çš„ repo åœ°å€git push origin å›¾åºŠåŠ é€Ÿç”±äºå›½å†…ç½‘ç»œç¯å¢ƒçš„åŸå› ï¼Œå¯èƒ½ GitHub ä¸Šçš„å›¾ç‰‡æ— æ³•åŠ è½½å‡ºæ¥ï¼Œå°±éœ€è¦ç”¨åˆ°åŠ é€ŸæœåŠ¡ï¼Œä¹Ÿæ˜¯å…è´¹çš„ã€‚æ–‡ä»¶å‰ç¼€æ ¼å¼æ”¹æˆå¦‚ä¸‹ï¼šhttps://cdn.jsdelivr.net/gh/GitHub ç”¨æˆ·å/ä»“åº“åç§°/ä¾‹å¦‚ç¬”è€…çš„ï¼šhttps://cdn.jsdelivr.net/gh/Mosiki/blog-imgs æ–‡ä»¶åŸé“¾æ¥(/blog æ˜¯ blog-imgs ä¸‹çš„ä¸€ä¸ªç›®å½•åç§°)ï¼šhttps://raw.githubusercontent.com/Mosiki/blog-imgs/master/blog/avatar.pngåŠ é€Ÿåçš„é“¾æ¥ï¼šhttps://cdn.jsdelivr.net/gh/Mosiki/blog-imgs/blog/avatar.png æ‰¹é‡æŠŠåšå®¢ä¸é…ç½®ä¸­çš„å›¾ç‰‡å‰ç¼€æ›¿æ¢æˆåŠ é€ŸåŸŸå https://cdn.jsdelivr.net/gh/GitHub ç”¨æˆ·å/ä»“åº“åç§°/ åœ¨ç½‘ä¸Šæ‰¾äº†æ‰¹é‡æ›¿æ¢çš„è„šæœ¬å‘ç°éƒ½è¿è¡Œä¸äº†ï¼Œç´¢æ€§ç›´æ¥ç”¨ idea æ‰“å¼€ hexo çš„ç›®å½• command + shift + r è¿›è¡Œå…¨å±€åŸŸåæ›¿æ¢ã€‚ å›¾åºŠä¸Šä¼ é…ç½®å›¾åºŠé…ç½®å¥½äº†ï¼Œä¸ºäº†æ–¹ä¾¿ä¸Šä¼ å›¾ç‰‡åˆ°æ–°å›¾åºŠä¸­ï¼Œç¬”è€…ä½¿ç”¨äº† PicGO è¿™ä¸ªå·¥å…·ã€‚å¯ä»¥ç›´æ¥å°† GitHub å½“æˆå›¾åºŠä½¿ç”¨ï¼Œé…ç½®å¥½è‡ªå®šä¹‰é“¾æ¥ï¼Œä¸Šä¼ å›¾ç‰‡åï¼Œå¯ä»¥ç›´æ¥ç”ŸæˆåŠ é€Ÿåçš„å›¾åºŠé“¾æ¥ã€‚å…·ä½“é…ç½®å‚è§ PicGO çš„æ–‡æ¡£ ä¸ºäº†ç›´æ¥ç”ŸæˆåŠ é€Ÿçš„å›¾åºŠé“¾æ¥ï¼Œè¿˜éœ€è¦ä¸€ç‚¹å°å·¥ä½œã€‚å¯ä»¥å‚è€ƒç¬”è€…çš„é…ç½®ï¼Œä¿®æ”¹ä¸ºä½ çš„ä»“åº“ï¼Œä»¥åå°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨ GitHub å›¾åºŠäº†~ åšå®¢HTTPSåŒ–å•°é‡Œå§å—¦äº†åŠå¤©ï¼Œç»ˆäºæ¥åˆ°æœ¬æ–‡ä¸»é¢˜ï¼Œå¦‚ä½•å®ç°åšå®¢è‡ªå®šä¹‰åŸŸå https åŒ–ï¼Œå…¶å®è¿™ä¸ª GitHub å·²ç»æä¾›äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä¹Ÿæ— éœ€å€ŸåŠ©å…¶ä»–çš„ä»»ä½•ç¬¬ä¸‰æ–¹æœåŠ¡å³å¯å®ç°ã€‚ ç™»å½•ä½ çš„åŸŸåç®¡ç†åå°ï¼Œç¬”è€…æ˜¯åœ¨ DNSpodï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤æ¡ A è®°å½•å’Œä¸€æ¡ CNAME é…ç½® ç¬”è€…åšå®¢çš„ä»“åº“æ˜¯ mosiki.github.io æ‰€ä»¥åœ¨ CNAME è®°å½•ä¸­çš„å€¼å¡«çš„æ˜¯ mosiki.github.io. è¿™é‡Œæ”¹æˆä½ è‡ªå·±çš„åšå®¢ repo åœ°å€å³å¯ã€‚ æ‰“å¼€åšå®¢ repo çš„ setting -&gt; pages é¡µé¢ï¼Œå‹¾é€‰å¼€å¯ https çš„æŒ‰é’®ï¼Œç­‰å¾…è‡ªåŠ¨é…ç½®è¯ä¹¦å³å¯ã€‚ å†è®¿é—®ä½ çš„åšå®¢ï¼Œçœ‹æ˜¯å¦ https å·²ç»ç”Ÿæ•ˆäº†å‘¢~ æœ¬æ–‡å®Œ~","tags":[]},{"title":"å‡½æ•°å¼ç¼–ç¨‹ç‰›åˆ€å°è¯•-æ›´ä¼˜é›…åœ°è¿›è¡Œæ¥å£é‡è¯•è°ƒç”¨","date":"2021-02-05T14:20:47.000Z","path":"retry-method-invoke.html","text":"èƒŒæ™¯æ˜¯é¡¹ç›®å±äºå¾®æœåŠ¡æ¶æ„ï¼Œé¡¹ç›®ä¹‹é—´æ— æ³•é¿å…åœ°éœ€è¦è¿›è¡Œæ¥å£è°ƒç”¨ï¼Œå…¬å¸ä½¿ç”¨çš„æ˜¯å†…éƒ¨å¼€å‘çš„ RPC æ¡†æ¶ï¼Œæ¡†æ¶ä¸æ”¯æŒé‡è¯•æœºåˆ¶ã€‚ åœ¨æ—¥å¸¸çš„ä¸šåŠ¡å¼€å‘å½“ä¸­ï¼Œè‡ªå·±çš„æœåŠ¡ç³»ç»Ÿå¾€å¾€ä¾èµ–å¤šä¸ªå…¶ä»–æœåŠ¡ï¼Œä½†æ˜¯æ— æ³•ä¿è¯ä¾èµ–æœåŠ¡çš„ç¨³å®šæ€§ï¼Œå¦‚æœå‡ºç°ä¾èµ–æœåŠ¡çŸ­æš‚ä¸å¯ç”¨å°±ä¼šå¯¼è‡´è‡ªå·±çš„æœåŠ¡å‡ºç°é—®é¢˜ã€‚ è¿™ç§é—®é¢˜å¾ˆçƒ¦ï¼Œä½†æ˜¯åˆæ— å¯é¿å…ï¼Œåªèƒ½é‡‡å–å…¶ä»–çš„é€”å¾„å°½é‡å‡å°‘è¿™ç§é—®é¢˜çš„å‘ç”Ÿï¼Œè€Œæ¥å£è°ƒç”¨é‡è¯•ä¾¿æ˜¯æœ€ç®€å•çš„æ–¹å¼ã€‚ æœ€è¿‘åœ¨é‡æ„è‡ªå·±ä»¥å‰å†™çš„ä»£ç ï¼Œä¾èµ–æ¥å£è°ƒç”¨çš„é‡è¯•æ˜¯é€šè¿‡é€’å½’æ¥å®ç°çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637public User getUser(Long uid, int retryCount) &#123; User info = new User(); int ret = userClient.getUser(uid, info); if (RetCode.RET_SUCCESS == ret) &#123; return info; &#125; if (retryCount &gt; 0) &#123; sleep3ms(); return getUser(uid, --retryCount); &#125; log.error(&quot;getUser fail. ret: &#123;&#125;, uid: &#123;&#125;&quot;, ret, uid); throw new ApiException(&quot;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥&quot;);&#125;public OrgInfo getOrg(Long orgId, int retryCount) &#123; OrgInfo info = new OrgInfo(); int ret = orgClient.getOrg(orgId, info); if (RetCode.RET_SUCCESS == ret) &#123; return info; &#125; if (retryCount &gt; 0) &#123; sleep3ms(); return getOrg(orgId, --retryCount); &#125; log.error(&quot;getOrg fail. ret: &#123;&#125;, orgId: &#123;&#125;&quot;, ret, orgId); throw new ApiException(&quot;è·å–ä¼ä¸šä¿¡æ¯å¤±è´¥&quot;);&#125;private void sleep3ms() &#123; try &#123; Thread.sleep(3); &#125; catch (InterruptedException ignored) &#123; Thread.currentThread().interrupt(); &#125;&#125; è°ƒç”¨æ–¹æ³•æ–¹å¼ï¼šgetUser(uid, 3) getOrg(orgId, 3) å½“ä¾èµ–æ¥å£çŸ­æš‚å‡ºç°é—®é¢˜ï¼Œå°±è¿›è¡Œé€’å½’é‡è¯•ï¼Œé‡è¯•æˆåŠŸå°±è¿”å›è°ƒç”¨ç»“æœï¼›å½“é‡è¯•æ¬¡æ•°å…¨éƒ¨ç”¨å®Œï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯å¯¹æ–¹æœåŠ¡æŒ‚æ‰äº†ï¼Œå¼ºä¾èµ–çš„åœºæ™¯ä¸‹ï¼Œè‡ªå·±çš„ä¸šåŠ¡ä¹Ÿæ˜¯æ— æ³•è¿›è¡Œçš„ã€‚ è¿™ä¸¤ä¸ªæ–¹æ³•å¾ˆæ˜æ˜¾çš„é—®é¢˜å°±æ˜¯ï¼Œæ–¹æ³•é«˜åº¦ç±»ä¼¼å´åˆä¸åŒã€‚ æ­£å¥½æœ€è¿‘åœ¨çœ‹ CompletableFuture æºç ï¼Œæºç ä¸­å¯¹äº Java8 ä¸­çš„å‡½æ•°å¼æ¥å£ä½¿ç”¨ç»™äºˆäº†æˆ‘å¯å‘ï¼Œè¿™æ®µé‡è¯•çš„ä»£ç å¯ä»¥é€šè¿‡å‡½æ•°å¼ç¼–ç¨‹çš„æ–¹å¼æ¥è¿›è¡Œä¼˜åŒ–ã€‚ é¦–å…ˆéœ€è¦äº†è§£å‡ ä¸ªåŸºç¡€çš„å‡½æ•°å¼æ¥å£ï¼š Function&lt;T, R&gt; ï¼šæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼ Supplier&lt;T&gt;ï¼šä¸æ¥æ”¶å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå€¼ Predicate&lt;T&gt;ï¼šè°“è¯ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªBooleanç»“æœ å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹å°±æ˜¯å°†å‡½æ•°çš„å®ç°æ”¾åˆ°è°ƒç”¨è€…å¤„ï¼Œè€Œä¸æ˜¯å‡½æ•°å†…éƒ¨ï¼Œä¼ é€’è¡Œä¸ºè€Œä¸æ˜¯ä¼ é€’å€¼ï¼Œæä¾›äº†æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ã€‚ å¤§æ¦‚ç†è§£è¿™å‡ ä¸ªå‡½æ•°å¼æ¥å£çš„ä½¿ç”¨åï¼Œäºæ˜¯æç‚¼å‡ºäº†å¦‚ä¸‹å·¥å…·ç±»ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/** * é‡è¯•å·¥å…·ç±» * åº”ç”¨åœºæ™¯ï¼šæ¥å£è°ƒç”¨é‡è¯• * * @author WeJan * @since 2021-02-06 */public class RetryUtil &#123; private static final Logger LOGGER = LoggerFactory.getLogger(RetryUtil.class); /** * æ–¹æ³•é‡è¯•è°ƒç”¨ï¼ˆæœªæ‰§è¡ŒæˆåŠŸæ‰è¿›è¡Œé‡è¯•ï¼‰ * ä¸å¤„ç†æ–¹æ³•è°ƒç”¨å¼‚å¸¸ * * @param invokeMethod æ‰§è¡Œæ–¹æ³• * @param retryCondition é‡è¯•æ¡ä»¶ * @param fixedWaitMilliseconds é‡è¯•é—´éš”æ—¶é—´(æ¯«ç§’) * @param retryCount é‡è¯•æ¬¡æ•° * @param exception è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ŒæŠ›å‡ºæŒ‡å®šå¼‚å¸¸ * @return æ–¹æ³•è¿”å› */ public static &lt;U&gt; U invoke(Supplier&lt;U&gt; invokeMethod, Predicate&lt;U&gt; retryCondition, long fixedWaitMilliseconds, int retryCount, Supplier&lt;? extends RuntimeException&gt; exception) &#123; return RetryUtil.invoke(invokeMethod, retryCondition, fixedWaitMilliseconds, retryCount, null, exception); &#125; /** * æ–¹æ³•é‡è¯•è°ƒç”¨ï¼ˆæœªæ‰§è¡ŒæˆåŠŸæ‰è¿›è¡Œé‡è¯•ï¼‰ * å¯æ‰‹åŠ¨å¤„ç†å¼‚å¸¸ï¼Œè®¾ç½®é»˜è®¤å€¼ * @param invokeMethod æ‰§è¡Œæ–¹æ³• * @param retryCondition é‡è¯•æ¡ä»¶ * @param fixedWaitMilliseconds é‡è¯•é—´éš”æ—¶é—´(æ¯«ç§’) * @param retryCount é‡è¯•æ¬¡æ•° * @param exceptionally æ‰§è¡Œæ–¹æ³•å‘ç”Ÿå¼‚å¸¸å¤„ç†ï¼Œè¿”å›é»˜è®¤å€¼, ä¸º null åˆ™ç›´æ¥ä¸ŠæŠ›å¼‚å¸¸ * @param exception è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ŒæŠ›å‡ºæŒ‡å®šå¼‚å¸¸ * @return æ–¹æ³•è¿”å› */ public static &lt;U&gt; U invoke(Supplier&lt;U&gt; invokeMethod, Predicate&lt;U&gt; retryCondition, long fixedWaitMilliseconds, int retryCount, Function&lt;Exception, U&gt; exceptionally, Supplier&lt;? extends RuntimeException&gt; exception) &#123; if (invokeMethod == null || retryCondition == null || exception == null) &#123; throw new NullPointerException(); &#125; U result = null; try &#123; result = invokeMethod.get(); &#125; catch (Exception e) &#123; LOGGER.error(&quot;&quot;, e); if (exceptionally != null) &#123; return exceptionally.apply(e); &#125; else &#123; throw e; &#125; &#125; if (!retryCondition.test(result)) &#123; return result; &#125; if (retryCount &gt; 0) &#123; try &#123; TimeUnit.MILLISECONDS.sleep(fixedWaitMilliseconds); &#125; catch (InterruptedException ignored) &#123; &#125; LOGGER.error(&quot;retryCount: &#123;&#125;&quot;, retryCount); return invoke(invokeMethod, retryCondition, fixedWaitMilliseconds, --retryCount, exceptionally, exception); &#125; throw exception.get(); &#125;&#125; æœ‰äº†è¿™ä¸ªå·¥å…·ç±»ï¼Œä¸Šé¢ç¤ºä¾‹ä¸­çš„ä»£ç å°±å¯ä»¥ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829public User getUser(Long uid) &#123; return RetryUtil.invoke(() -&gt; &#123; User info = new User(); int ret = userClient.getUser(uid, info); if (RetCode.RET_SUCCESS == ret) &#123; return info; &#125; return null; &#125;, Objects::isNull, // é‡è¯•æ¡ä»¶ä¸ºè°ƒç”¨è¿”å›ç»“æœä¸ºnull 5, // ç­‰å¾…5æ¯«ç§’ 3, // é‡è¯•3æ¬¡ () -&gt; new ApiException(&quot;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥&quot;)); // è¶…å‡ºé‡è¯•æ¬¡æ•°æŠ›å‡ºå¼‚å¸¸&#125;public OrgInfo getOrg(Long orgId) &#123; return RetryUtil.invoke(() -&gt; &#123; OrgInfo info = new OrgInfo(); int ret = orgClient.getOrg(orgId, info); if (RetCode.RET_SUCCESS == ret) &#123; return info; &#125; return null; &#125;, Objects::isNull, 5, 3, () -&gt; new ApiException(&quot;è·å–ä¼ä¸šä¿¡æ¯å¤±è´¥&quot;));&#125; è¿™ä¸ªå·¥å…·ç±»ä¹Ÿç®—æ˜¯è‡ªå·±å¯¹äºå‡½æ•°å¼ç¼–ç¨‹çš„ç¬¬ä¸€æ¬¡å®è·µï¼Œå‘ç°è¿˜æ˜¯è›®æœ‰æ„æ€çš„å“ˆå“ˆ æˆåŠŸæ°´äº†ä¸€ç¯‡~","tags":[]},{"title":"2020å¹´ç»ˆæ€»ç»“","date":"2021-01-27T11:55:37.000Z","path":"2020-year-end-summary.html","text":"å‰è¨€ä¹ æƒ¯äº†æ¯å¹´å¤§æ•°æ®ç»™è‡ªå·±åšæ€»ç»“ï¼Œè‡ªå·±å·¥ä½œå­¦ä¹ ä¸Šçš„è‡ªæˆ‘å¹´ç»ˆæ€»ç»“å´æ˜¯ä¸€æ‹–å†æ‹–ï¼Œæœ¬åº” 2020 å¹´ 12 æœˆä»½å°±è¯¥å®Œæˆçš„æ–‡ç« è¢«æ‹–å»¶åˆ°äº† 2021 å¹´çš„ 2 æœˆä»½ã€‚ä¹Ÿæ˜¯å› ä¸ºè‡ªå·±æ²¡æœ‰æå‰è§„åˆ’å¥½æ—¶é—´ï¼Œåˆ°äº† 12 æœˆåº•æ‰æƒ³èµ·è¿™ä¹ˆä¸€ä»¶äº‹æƒ…ï¼Œæ­£å¥½æœˆåº•è¯¸äº‹é¢‡å¤šï¼Œä¹Ÿæ²¡ä»€ä¹ˆæ—¶é—´æ¥å†™ã€‚æœ¬æ¥æ‹–å»¶æˆä¸æ‰“ç®—å†™å¹´ç»ˆæ€»ç»“äº†ï¼Œçœ‹äº†ä¸€ä¸‹åšå®¢å½’æ¡£æ–‡ç« ï¼Œè¿ç»­å†™äº†å¥½å‡ å¹´çš„å¹´ç»ˆæ€»ç»“ï¼Œä»Šå¹´ä¹Ÿä¸èƒ½ç ´ä¾‹ï¼Œå¿ç€å¤´çš®å†™ä¹Ÿè¦å¼ºè¿«è‡ªå·±å†™å®Œã€‚ å»å¹´ç«‹çš„ Flagå…ˆç…§ä¾‹è¿‡ä¸€ä¸‹æµæ°´è´¦ 2020 å¹´åšå®¢å‘æ–‡ 19 ç¯‡ï¼Œ90ï¼…éƒ½å†™äºä¸ŠåŠå¹´ï¼Œä¸‹åŠå¹´ä¹Ÿåªæ˜¯æ°´äº†ä¸€ç¯‡ï¼Œæ€»æ–‡ç« æ•°é‡å°‘äº 24 ç¯‡ï¼Œæ¯æœˆå¹³å‡åšå®¢æ•°é‡ä¸è¶³ä¸¤ç¯‡ï¼Œflag 1 æœªå®Œæˆã€‚ 2020 å¹´æ—©èµ· 70 å¤©ï¼Œç•ªèŒ„æ•°é‡æœªè¾¾æ ‡ï¼Œflag 2 æœªå®Œæˆ åªè¯»å®Œã€Šé‡æ„ã€‹ï¼Œã€ŠSpring æºç æ·±åº¦åˆ†æã€‹çœ‹äº†äº†å¼€å¤´ï¼Œflag 3 æœªå®Œæˆ åªè¯»å®Œã€Šæå®šã€‹ï¼Œå…¶ä»–æ²¡çœ‹ï¼Œflag 4 æœªå®Œæˆ æ€»ç»“ï¼Œ2020 å¹´ flag ä¸€ä¸ªæ²¡å®Œæˆï¼Œå…¨éƒ¨æ‰“è„¸ã€‚flag ä¹‹å¤–ï¼Œå…»æˆäº†æ¯æ—¥æ€»ç»“ï¼Œæ¯æ—¥ä¿¯å§æ’‘ä¹ æƒ¯ï¼Œè¿˜èƒ½ç¨ç¨è¡¥æ•‘ä¸€ä¸‹ã€‚ è¿›æ­¥2020 è¿™ä¸€å¹´é‡Œï¼Œè‡ªæˆ‘æ„Ÿè§‰å†™ä»£ç çš„æ•ˆç‡æå‡äº†ä¸€å¤§æˆªã€‚ä»¥å‰å¯èƒ½é¢„ä¼° 3 å¤©çš„å·¥ä½œé‡ï¼Œç°åœ¨å¯èƒ½æœ€å¤šä¸€å¤©å°±èƒ½æå®šï¼Œè€Œä¸”ç›¸å¯¹ä»¥å‰æ›´å°‘åœ°å‡ºç° bugï¼Œå¯¹è‡ªå·±çš„ä»£ç è´¨é‡æ›´æœ‰ä¿¡å¿ƒã€‚ æŠ›å¼€å·¥ä½œç»éªŒå¸¦æ¥å·¥ä½œæ•ˆç‡æˆé•¿è¿™æ–¹é¢ä¸è¯´ï¼Œæˆ‘è®¤ä¸ºåŠ©åŠ›è‡ªå·±æ•ˆç‡æå‡ä¸»è¦å¾—ç›Šäºä»Šå¹´å…»æˆçš„ä¸¤ä¸ªä¹ æƒ¯ã€‚ç¬¬ä¸€ä¸ªä¹ æƒ¯æ˜¯å¯¹äº ä»£ç ç¼–è¾‘å™¨ï¼ˆIDEAï¼‰ çš„æ“ä½œä¼˜åŒ–ï¼ŒæŒæ¡äº† vim æ¨¡å¼è¿›è¡Œç¼–ç ï¼ˆIdeaVim æ’ä»¶ï¼‰ã€‚vim æ¨¡å¼é™ä½äº†å‡»é”®æ¬¡æ•°ï¼Œä»£ç é—´è·³è½¬æ›´åŠ è¿…é€Ÿç²¾å‡†ï¼›é…åˆ IDEA å¿«æ·é”®ï¼ŒåŒæ‰‹å¾ˆå°‘ç¦»å¼€é”®ç›˜ï¼Œå¤§å¤§å‡å°‘äº†é¼ æ ‡çš„ä¾èµ–ã€‚è¿™ä¸¤ç‚¹å¯¹æ¯”ä¹‹å‰ï¼Œå¯èƒ½æ­£å¦‚åŒä¸€ä¸ªèµ·ç‚¹ç»ˆç‚¹ï¼Œä¹‹å‰æ˜¯æ­¥è¡Œåˆ°è¾¾ï¼Œè€Œç°åœ¨æ˜¯å¼€è½¦åˆ°è¾¾ï¼Œæ•ˆç‡ä¸Šçš„æå‡ä¸æ˜¯ä¸€ç‚¹ç‚¹ã€‚ ç¬¬äºŒä¸ªä¹ æƒ¯æ˜¯åœ¨å¼€å§‹ä¸€ä¸ªéœ€æ±‚ä¹‹å‰ï¼Œå…ˆä»”ç»†è¿‡å‡ é PRD äº§å“ç¨¿ï¼Œç¡®å®šéœ€æ±‚ä¹‹åï¼Œå…ˆç”¨çº¸ç¬”å†™ä¸‹ç¼–ç è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼ˆä¸»è¦æ˜¯ä¸šåŠ¡ä¸Šçš„ï¼‰ï¼Œåˆ—å‡ºä¸€ä¸ªæ¸…å•åˆ—è¡¨åï¼Œé’ˆå¯¹è¿™äº›é—®é¢˜å»æ€è€ƒæ–¹æ¡ˆï¼ˆæå‰æ€è€ƒå¯ä»¥å‡å°‘ç¼–ç è¿‡ç¨‹ä¸­çš„åœé¡¿ï¼‰ï¼Œæœ‰é—®é¢˜çš„ç‚¹æå‰ä¸äº§å“æ²Ÿé€šç¡®è®¤ï¼Œé™ä½ä»£ç è¿”å·¥é‡åšä¿®æ”¹çš„å¯èƒ½æ€§ã€‚å½“è¿™ä¸€åˆ‡å®Œæˆåï¼Œå…·ä½“ç¼–ç æ—¶å†™å®Œä¸€ä¸ªç‚¹ï¼Œå°±å°†æ¸…å•ä¸­çš„åˆ—è¡¨é¡¹åˆ’æ‰ï¼Œä»è€Œé™ä½å¿ƒç†ä¸Šçš„è®¤çŸ¥å‹åŠ›ï¼Œå†™ä»£ç æ—¶å¿ƒæƒ…ä¼šæ›´åŠ è½»æ¾æ„‰å¿«ã€‚ GTD ä¹‹è·¯å­¦ä¹  GTD ä¸€å¹´å¤šï¼ŒæŠŠ ã€Šæå®šã€‹ä¸€ä¹¦è¯»äº† 2 éï¼Œæ»´ç­”æ¸…å•ä¹Ÿä»˜è´¹æˆå¹´è´¹ä¼šå‘˜ï¼ŒGTD çš„å®è·µä¹‹è·¯å¹¶æ²¡æœ‰æˆ‘æ‰€æƒ³è±¡çš„é‚£èˆ¬å®¹æ˜“ã€‚æ²¡æœ‰å®Œå®Œå…¨å…¨åœ°æŒ‰ç…§æå®šä¸€ä¹¦å»ç†æ¸…ï¼Œå¯¼è‡´æ¸…å•ä¸­çš„ä»»åŠ¡å †ç§¯å¦‚å±±ï¼Œå´æ— æ³•ä»å…¶ä¸­ä»»ä½•ä¸€ä¸ªä»»åŠ¡å¼€å§‹è¡ŒåŠ¨ã€‚æ–°çš„ä¸€å¹´ä¼šæŠ½ç©ºå†æŠŠã€Šæå®šã€‹ç²¾è¯»ä¸€éï¼Œé‡æ„æ¸…å•ï¼Œè¾¾åˆ°éšä¾¿å“ªä¸€ä¸ªç†æ¸…çš„ä»»åŠ¡å¯ä»¥é©¬ä¸Šè¡ŒåŠ¨çš„åœ°æ­¥ã€‚ ä¸æ¸¸æˆçš„æˆ˜å½¹2020 å¹´ï¼Œå› ä¸ºç–«æƒ…çš„åŸå› ï¼Œæ˜¥èŠ‚æ”¾å‡å›æ­å·çš„è·¯ä¸å¤ªé¡ºåˆ©ï¼Œæœºç¥¨æ€»æ˜¯é€€äº†åˆä¹°ï¼Œä¹°äº†åˆé€€ï¼Œå›æ­çš„æ—¥æœŸè¢«ä¸æ–­æ¨è¿Ÿï¼Œé‡è¦çš„äº‹æƒ…ä¹Ÿè¢«è‡ªå·±ä¸æ–­æ‹–å»¶ï¼Œè¿™ä¹Ÿé¢„ç¤ºäº† 2020 å¹´åˆæ˜¯ä¸€ä¸ªæ¯«æ— é•¿è¿›çš„ä¸€å¹´ã€‚å¾…åœ¨å®¶é‡Œè¿™æ®µæ—¶é—´ï¼Œæ²¡å¿ä½åˆç©èµ·ç‹è€…è£è€€ï¼Œå†æ¬¡èµ°åœ¨æ²‰è¿·çš„é“è·¯ä¹‹ä¸Šï¼Œæ”¾å‡å‰çš„å‡æœŸå®‰æ’è‡ªç„¶è€Œç„¶åœ°è¢«æŠ›è¯¸è„‘åï¼Œæ¯å¹´éƒ½è¦è‡ªå·±éƒ½è¦å’Œæ¸¸æˆä½œä¸€ç•ªè‹¦è‹¦æ–—äº‰ï¼Œä¹Ÿæ˜¯ä¸€ä»¶æéš¾ä»¥ç†è§£çš„äº‹æƒ…ã€‚æ¸¸æˆäºæˆ‘è€Œè¨€ï¼Œä¸äºšäºæ´ªæ°´çŒ›å…½ï¼Œéšæ—¶éƒ½å¯èƒ½åå™¬æˆ‘çš„ä¸€åˆ‡ï¼›ä¸ç¢°æ¸¸æˆï¼Œä¾¿æ˜¯æœ€ä¼˜è§£ã€‚ æŠ•èµ„è§è¯äº† BTC çªç ´ 2 ä¸‡ï¼Œ3 ä¸‡ï¼Œ4 ä¸‡åˆ€çš„å¤§å…³ï¼Œæƒ­æ„§çš„æ˜¯åœ¨ 1 ä¸‡åˆ€åªä¹°äº† 2 åƒå—ï¼Œè€Œä¸”è¿˜åœ¨çªç ´ 2 ä¸‡çš„å‰å¤•å…¨éƒ¨å–æ‰äº†ã€‚é«˜ä½æ¥ç›˜ï¼Œæ·±å¥—å¥½å‡ å¹´çš„ EOS å›æœ¬ä»ç„¶é¥é¥æ— æœŸï¼Œåˆ›å§‹äºº BM ç¬¬ä¸‰æ¬¡æŠ›å¼ƒäº†é¡¹ç›®å¼€æºœï¼ŒçœŸæ˜¯ X äº†ç‹—ï¼ç‚’å¸è¿™å‡ å¹´æœ‰ç›ˆåˆ©æœ‰äºæŸï¼Œæ€»ä½“ä¸‹æ¥è¿˜æ˜¯æ²¡å›æœ¬ï¼Œè¿™å‡ å¹´ç‚’å¸å¤§æ¦‚å°±åªæ˜¯ç©äº†ä¸ªå¯‚å¯ã€‚ä¸‹åŠå¹´æ¥è§¦åˆçº¦äº¤æ˜“ï¼Œä¾ç„¶æ˜¯äºæŸå±…å¤šï¼Œå¿ƒæ€å¤ªå·®ï¼Œæ¨¡æ‹Ÿé‡‘éƒ½è¢«äºä¸ªç²¾å…‰ã€‚æ‰“ç®—å¤šå­¦ä¹ ä¸€äº›å¸‚åœºåŸºç¡€çŸ¥è¯†ï¼Œæ—¥åå†çœ‹å§ï¼ åšå®¢2020 å¹´ï¼Œåšå®¢æ–­æ›´ã€‚ä¸å­¦ä¹ ï¼Œè‚šå­é‡Œçš„å¢¨æ°´ä¸ä¼šæ— æ•…å¢åŠ ï¼Œæ²¡æœ‰å¢¨æ°´ï¼Œè‡ªç„¶å†™ä¸å‡ºä»»ä½•æ–‡ç« ã€‚å¼ºå†™ä¹Ÿæ˜¯æ°´æ–‡è€Œå·²ã€‚è¶ç€å¹´åº•çš„é—²ä½™æ—¶é—´ï¼ŒæŠŠç”¨äº† 2 å¹´å¤šçš„åšå®¢ä¸»é¢˜ç»™æ¢äº†ï¼Œé’ˆå¯¹è‡ªå®šä¹‰çš„éƒ¨åˆ†è¿›è¡Œäº†é€‚é…ï¼ŒèŠ±äº†å°åŠå¤©æ—¶é—´ã€‚å¯¹äºæŠ˜è…¾è¿™ç§äº‹æƒ…ï¼Œè‡ªå·±å€’æ˜¯å¾ˆçƒ­è¡·ï¼Œå´ååå¯¹å­¦ä¹ è¿™ä»¶äº‹æƒ…ä¸é‚£ä¹ˆä¸Šå¿ƒï¼Œä¹Ÿå°±å¯¼è‡´äº†è‡ªèº«èƒ½åŠ›å¢é•¿åœæ»ã€‚ è®°å½•ä»å»å¹´ 9 æœˆä»½å¼€å§‹ï¼Œé€æ¸å…»æˆåšæ¯æ—¥æ€»ç»“çš„ä¹ æƒ¯ï¼Œä¸€ç›´æŒç»­åˆ°ç°åœ¨ï¼Œè™½ç„¶æ²¡æœ‰å‘ç°åšæ€»ç»“å¯¹è‡ªå·±æœ‰ä»€ä¹ˆå®è´¨æ€§çš„æå‡ï¼Œä½†æ˜¯è‡³å°‘å¢åŠ äº†è‡ªå·±æ¯å¤©æ€è€ƒçš„æ—¶é—´ã€‚é‚£ç‚¹æ€è€ƒæ—¶é—´è™½å¾®ä¸è¶³é“ï¼Œé‡å˜ä¼šå¼•èµ·è´¨å˜ï¼Œæ€»ä¼šæœ‰å‘æŒ¥ä½œç”¨çš„ä¸€å¤©ã€‚ å¥èº«ç«‹äº†å¾ˆå¤šå…³äºå¥èº«çš„ flagï¼Œç»“æœæ— ä¸€ä¸æ˜¯ç‹ ç‹ æ‰“è„¸ã€‚æœ‰ä¸€å¤©çªå‘å¥‡æƒ³ï¼Œæ—¢ç„¶ç«‹çš„ flag éƒ½åšä¸åˆ°ï¼Œä¸å¦‚å…»æˆä¸€ä¸ªæ¯å¤©åš 10 ä¸ªä¿¯å§æ’‘çš„ä¹ æƒ¯å§ï¼10 ä¸ªä¿¯å§æ’‘å¾ˆç®€å•ï¼Œåªéœ€è¦å‡ åç§’å°±å¯ä»¥å®Œæˆï¼›åœ¨ä¹ æƒ¯å…»æˆçš„è¿‡ç¨‹ä¸­ï¼Œè§‰å¾—å¯ä»¥æé«˜æ•°é‡æ—¶å°±ä¼šå¤šåšä¸€äº›ï¼Œä» 10 ä¸ªï¼Œ20 ä¸ªï¼Œä¸€ç›´åˆ° 60 ä¸ªï¼Œåˆ°äº† 60 ä¸ªæ—¶æ„Ÿè§‰å¾ˆéš¾åšæŒä¸‹å»ï¼Œäºæ˜¯åˆé™ä½æ•°é‡åˆ° 40 ä¸ªï¼Œç°åœ¨æ¯å¤©åªåš 40 ä¸ªä¿¯å§æ’‘ã€‚å¯¹äºæˆ‘è€Œè¨€ï¼Œåšä¿¯å§æ’‘çš„å¥½å¤„è¿˜æ˜¯æœ‰çš„ï¼Œèƒ¸è†›å¼€å§‹å˜å¾—å®½åšï¼Œä¹Ÿæœ‰äº†ä¸€ç‚¹èƒ¸è‚Œï¼Œè¿™éƒ½æ˜¯åœ¨è¿™ä¸€å¹´é‡Œå¯è§æ€§çš„æ”¹å˜ï¼Œå¦å¤–ä¹Ÿå¯ä»¥èˆ’å±•é•¿æœŸæ¡é¼ æ ‡å¸¦æ¥çš„åèƒŒé…¸ç—›ï¼Œä¸å‡ºæ„å¤–ï¼Œè¿™ä¸ªä¿¯å§æ’‘çš„ä¹ æƒ¯è‡ªå·±å°†ä¼šä¸€ç›´æŒç»­ä¸‹å»ã€‚ æ–°ä¸€å¹´ç›®æ ‡ç›®æ ‡å¾ˆç®€å•ï¼Œä¿æŒç°åœ¨å·²ç»ä¿æŒä½çš„ä¹ æƒ¯ï¼Œå®Œæˆ 2020 å¹´çš„ç›®æ ‡ã€‚","tags":[]},{"title":"ç½‘ç«™å…¬å‘Š","date":"2020-12-27T11:12:48.000Z","path":"notice.html","text":"2020å¹´12æœˆ27æ—¥ç³Ÿå¿ƒçš„2020å¹´å³å°†è¿‡å»ï¼Œè¾æ—§è¿æ–°ï¼Œåšå®¢ä¹Ÿåº”è¯¥æœ‰æ‰€å˜åŒ–ï¼ŒèŠ±äº†åŠå¤©åˆ‡æ¢åšå®¢ä¸»é¢˜ä¸º Fluidï¼Œå¾ˆèµçš„ä¸»é¢˜ï¼","tags":[]},{"title":"Poiä¸è§„åˆ™è¡¨æ ¼å¯¼å…¥","date":"2020-08-23T13:42:56.000Z","path":"custom-read-poi.html","text":"åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ easypoi å¯¼å…¥ Excel æœ€ä½³å®è·µ è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ EasyPoi æ¥è¿›è¡Œæ•°æ®çš„å¯¼å…¥ä¸å¤šé‡æ ¡éªŒï¼Œä½†æ˜¯ EasyPoi æ›´æ“…é•¿ä¸æ¯”è¾ƒè§„æ•´çš„è¡¨æ ¼è¾“å…¥å¯¼å…¥ï¼Œå¦‚æœé‡åˆ°ä¸è§„åˆ™çš„è¡¨æ ¼æ—¶ï¼Œå¯èƒ½å°±æ²¡é‚£ä¹ˆè½»æ¾æå®šå¯¼å…¥äº†ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•å®ç°ä¸è§„åˆ™è¡¨æ ¼æ•°æ®å¯¼å…¥ã€‚ æœ¬æ–‡æºç åœ°å€ï¼š é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œä¸è§„åˆ™çš„è¡¨æ ¼é•¿ä»€ä¹ˆæ ·å­ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œè¿™ç§è¡¨æ ¼å¦‚æœç»§ç»­ä½¿ç”¨ EasyPoi å…¶å®æ¯”è¾ƒå›°éš¾åšåˆ°å¾ˆä¾¿æ·çš„å¯¼å…¥ï¼Œä½†æ˜¯è¿™ç§è¡¨æ ¼ä¸€èˆ¬æ ¼å¼ç›¸å¯¹å›ºå®šï¼Œåªæœ‰ä¸ªåˆ«å€¼çš„ä½ç½®ä¸è§„åˆ™ï¼ˆè“è‰²æ¡†å†…ï¼‰ï¼Œè€Œä¸­é—´ä½ç½®çš„æ•°æ®æ ¼å¼æ¯”è¾ƒè§„æ•´ï¼ˆçº¢è‰²æ¡†å†…ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥å–é•¿è¡¥çŸ­ï¼Œä¸è§„åˆ™çš„åœ°æ–¹æ•°æ®ç‰¹æ®Šå¤„ç†è¯»å–ï¼Œè€Œæœ‰è§„åˆ™çš„åœ°æ–¹ä¾ç„¶ä½¿ç”¨ EasyPoi è¿›è¡Œè¯»å–ã€‚ è¯»å–ç¤ºä¾‹çº¢è‰²æ¡†å†…çš„æ•°æ®è¯»å–æœ¬æ–‡å°±ä¸å†å±•ç¤ºäº†ï¼Œå¯ä»¥å‚è€ƒä¸Šæ–‡çš„é“¾æ¥ã€‚æœ¬æ–‡ä¸»è¦è®²è§£å¦‚ä½•æå–è“è‰²æ¡†å†…çš„æ•°æ®ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œç¬”è€…å‚è€ƒäº†ç½‘ä¸Šçš„æ–‡ç« ï¼ŒæŠ½å–äº†ä¸€ä¸ªå·¥å…·ç±»ï¼ŒåŸºäºæ‰€è§å³æ‰€å¾—çš„æ–¹å¼å»è·å–å¯¹åº”å•å…ƒæ ¼çš„å€¼ã€‚ ä½¿ç”¨ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314151617181920public class ExcelReadHelperTest &#123; @Test public void testImport() &#123; InputStream in = getClass().getResourceAsStream(&quot;/excel/ç¤ºä¾‹ Excel3.xlsx&quot;); ExcelReadHelper readHelper = new ExcelReadHelper(in); // è·å– B4 å•å…ƒæ ¼çš„æ•°æ®ï¼Œä»¥ä¸‹åŒç† String b4 = readHelper.getValueAt(&quot;B&quot;, 4); String c23 = readHelper.getValueAt(&quot;C&quot;, 23); String c24 = readHelper.getValueAt(&quot;C&quot;, 24); String m4 = readHelper.getValueAt(&quot;M&quot;, 4); String m5 = readHelper.getValueAt(&quot;M&quot;, 5); Assert.assertEquals(&quot;ä¸€ä¼—ç§‘æŠ€æœ‰é™å…¬å¸&quot;, b4); Assert.assertEquals(&quot;13112345678&quot;, c23); Assert.assertEquals(&quot;370827198801021000&quot;, c24); Assert.assertEquals(&quot;XH-HZHY-20170504&quot;, m4); Assert.assertEquals(&quot;2017.5.4&quot;, m5); readHelper.close(); &#125;&#125; å¦‚å›¾æ‰€ç¤ºï¼Œå¦‚æœè¦è¯»å–è”ç³»äººç”µè¯ï¼Œå…ˆæ‰¾åˆ°æ•°æ®æ‰€åœ¨å•å…ƒæ ¼ï¼ŒC23ï¼Œä»£ç ä¸­ç›´æ¥é€šè¿‡ readHelper.getValueAt(&quot;C&quot;, 23); å³å¯è·å–å¯¹åº”çš„å€¼ã€‚ å·¥å…·ç±»æºç éœ€è¦ä¾èµ– POI ç›¸å…³ä¾èµ–ï¼Œå¦‚æœå¼•å…¥äº† EasyPoi çš„è¯ï¼Œå°±æ— éœ€é‡å¤å¼•å…¥äº†ã€‚ EasyPoi çš„ä¾èµ–ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;cn.afterturn&lt;/groupId&gt; &lt;artifactId&gt;easypoi-web&lt;/artifactId&gt; &lt;version&gt;3.2.0&lt;/version&gt;&lt;/dependency&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215import org.apache.poi.hssf.util.CellReference;import org.apache.poi.ss.usermodel.*;import org.apache.poi.xssf.usermodel.XSSFWorkbook;import java.io.IOException;import java.io.InputStream;import java.text.DecimalFormat;public class ExcelReadHelper &#123; private Workbook workbook; private Sheet sheet; //Sheet æ€»æ•° private int sheetCount; //å½“å‰è¡Œ private Row row; public ExcelReadHelper(InputStream is) &#123; try &#123; // åªæ”¯æŒ xlsxï¼Œå¦‚æœè¦æ”¯æŒ xlsï¼Œè‡ªè¡Œä¿®æ”¹ä¸‹ä¸€è¡Œä»£ç  workbook = new XSSFWorkbook(is); &#125; catch (Exception e) &#123; throw new RuntimeException(e); &#125; sheetCount = workbook.getNumberOfSheets(); setSheetAt(0); &#125; /** * å…³é—­å·¥ä½œç°¿ * * @throws IOException */ public void close() &#123; if (workbook != null) &#123; try &#123; workbook.close(); &#125; catch (IOException e) &#123; throw new RuntimeException(e); &#125; &#125; &#125; /** * è·å–å•å…ƒæ ¼çœŸå®ä½ç½® * * @param row è¡Œç´¢å¼• * @param col åˆ—ç´¢å¼• * @return [è¡Œ, åˆ— ] */ public String getCellLoc(Integer row, Integer col) &#123; return String.format(&quot;[%s,%s]&quot;, row + 1, CellReference.convertNumToColString(col)); &#125; /** * æ ¹æ®æ ‡ç­¾è®¾ç½® Sheet * * @param labels */ public void setSheetByLabel(String... labels) &#123; Sheet sheet = null; for (String label : labels) &#123; sheet = workbook.getSheet(label); if (sheet != null) &#123; break; &#125; &#125; if (sheet == null) &#123; StringBuilder sheetStr = new StringBuilder(); for (String label : labels) &#123; sheetStr.append(label).append(&quot;,&quot;); &#125; sheetStr.deleteCharAt(sheetStr.lastIndexOf(&quot;,&quot;)); throw new RuntimeException(sheetStr.toString() + &quot;Sheet does not exist&quot;); &#125; this.sheet = sheet; &#125; /** * æ ¹æ®ç´¢å¼•è®¾ç½® Sheet * * @param index */ public void setSheetAt(Integer index) &#123; Sheet sheet = workbook.getSheetAt(index); if (sheet == null) &#123; throw new RuntimeException(index + &quot;Sheet does not exist&quot;); &#125; this.sheet = sheet; &#125; /** * è·å–å•å…ƒæ ¼å†…å®¹å¹¶è½¬ä¸º String ç±»å‹ * * @param row è¡Œå·ï¼Œä» 1 å¼€å§‹ * @param colName åˆ—å· * @return */ @SuppressWarnings(&quot;deprecation&quot;) public String getValueAt(String colName, int row) &#123; int colIdx = CellReference.convertColStringToIndex(colName); int rowIdx = row &lt; 0 ? 0 : row - 1; Cell cell = sheet.getRow(rowIdx).getCell(colIdx); String value = null; if (cell != null) &#123; switch (cell.getCellType()) &#123; case Cell.CELL_TYPE_STRING: value = cell.getStringCellValue() + &quot;&quot;; break; case Cell.CELL_TYPE_NUMERIC: if (DateUtil.isCellDateFormatted(cell)) &#123; value = cell.getDateCellValue().getTime() + &quot;&quot;; &#125; else &#123; DecimalFormat df = new DecimalFormat(&quot;0&quot;); return df.format(cell.getNumericCellValue()); &#125; break; case Cell.CELL_TYPE_FORMULA: value = cell.getNumericCellValue() + &quot;&quot;; break; case Cell.CELL_TYPE_BOOLEAN: value = cell.getBooleanCellValue() + &quot;&quot;; break; &#125; &#125; return (value == null || value.isEmpty()) ? null : value.trim(); &#125; /** * è·å–å½“å‰è¡ŒæŒ‡å®šåˆ—å†…å®¹ * * @param col åˆ—å·ï¼Œä» 1 å¼€å§‹ * @return */ public String getValue(Integer col) &#123; return getValueAt(CellReference.convertNumToColString(col + 1), col); &#125; /** * è·å– Sheet åç§° * * @return */ public String getSheetLabel() &#123; String label = null; if (sheet != null) &#123; label = sheet.getSheetName(); &#125; return label; &#125; /** * è¡Œåç§» * * @param offset åç§»é‡ * @return */ public Boolean offsetRow(Integer offset) &#123; boolean state = true; if (row == null) &#123; row = sheet.getRow(offset - 1); &#125; else &#123; row = sheet.getRow(row.getRowNum() + offset); if (row == null) &#123; state = false; &#125; &#125; return state; &#125; /** * è®¾ç½®è¡Œ * * @param index ç´¢å¼• * @return */ public Boolean setRow(Integer index) &#123; row = sheet.getRow(index); return row != null; &#125; /** * åç§»ä¸€è¡Œ * * @return */ public Boolean nextRow() &#123; return offsetRow(1); &#125; /** * åç§»åˆ°ä¸‹ä¸€ä¸ª Sheet * * @return */ public Boolean nextSheet() &#123; boolean state = true; if (sheet == null) &#123; sheet = workbook.getSheetAt(0); &#125; else &#123; int index = workbook.getSheetIndex(sheet) + 1; if (index &gt;= sheetCount) &#123; sheet = null; &#125; else &#123; sheet = workbook.getSheetAt(index); &#125; if (sheet == null) &#123; state = false; &#125; &#125; row = null; return state; &#125;&#125; æºç åœ°å€ https://github.com/Mosiki/learning-modules/tree/master/learning-easypoi å‚è€ƒ https://zkhdev.github.io/2018/10/14/java-dev6/","tags":[{"name":"Poiè¯»å–æŒ‡å®šä½ç½®çš„å•å…ƒæ ¼","slug":"Poiè¯»å–æŒ‡å®šä½ç½®çš„å•å…ƒæ ¼","permalink":"http://nullpointer.pw/tags/Poi%E8%AF%BB%E5%8F%96%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E7%9A%84%E5%8D%95%E5%85%83%E6%A0%BC/"},{"name":"EasyPoiä¸è§„åˆ™æ•°æ®å¯¼å…¥","slug":"EasyPoiä¸è§„åˆ™æ•°æ®å¯¼å…¥","permalink":"http://nullpointer.pw/tags/EasyPoi%E4%B8%8D%E8%A7%84%E5%88%99%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5/"},{"name":"Poiå¤æ‚è¡¨æ ¼æ•°æ®å¯¼å…¥","slug":"Poiå¤æ‚è¡¨æ ¼æ•°æ®å¯¼å…¥","permalink":"http://nullpointer.pw/tags/Poi%E5%A4%8D%E6%9D%82%E8%A1%A8%E6%A0%BC%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5/"}]},{"title":"ã€å®æˆ˜ã€‘Flywayè¿ç§»æŒ‡å—æœ€ä½³å®è·µ","date":"2020-06-20T06:02:22.000Z","path":"flyway-best-practice.html","text":"é¡¹ç›®åœ¨å¤šç¯å¢ƒè¿­ä»£å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ•°æ®åº“çš„è¡¨ç»“æ„ä¸æ–­å˜æ›´ï¼Œåœ¨éƒ¨ç½²æ—¶ï¼Œå¾€å¾€ä¼šå‡ºç°æ•°æ®åº“è¡¨ç»“æ„æœªåŠæ—¶å˜æ›´å¯¼è‡´å‡ºç°é—®é¢˜ï¼Œè€—è´¹åœ¨è¡¨ç»“æ„ä¸Šçš„æ—¶é—´ç›¸å½“å¤šï¼Œä¸Šçº¿è¿‡ç¨‹æŒç»­ç—›è‹¦ï¼Œä»£ç æœ‰ GIT/SVN æ¥æ§åˆ¶ï¼Œæ•°æ®åº“ä¸­çš„è¡¨ç‰ˆæœ¬ä¹Ÿå¯ä»¥åšåˆ°ç‰ˆæœ¬æ§åˆ¶ï¼Œæœ¬æ–‡è®²è§£é€šè¿‡ flyway çš„æ–¹å¼æ¥ç®¡ç†æ•°æ®åº“ç‰ˆæœ¬å˜åŠ¨ã€‚ é¡¹ç›®ç—›ç‚¹ä¸€ä¸ªé¡¹ç›®å•ä¸ªç¯å¢ƒè¿­ä»£å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæ•°æ®åº“è¡¨çš„ä¿®æ”¹ DDLï¼Œå¯ä»¥é€šè¿‡ç‰ˆæœ¬æ§åˆ¶å·¥å…·ä¸€èµ·è¿›è¡Œæ§åˆ¶ã€‚åªéœ€è¦åœ¨é¡¹ç›®ä¸Šçº¿ä¹‹å‰ï¼Œäººå·¥æ‰§è¡Œæ–°å¢çš„ DDL å³å¯ï¼ŒDDL çš„ç‰ˆæœ¬æ˜¯ä¸å½“å‰é¡¹ç›®è¿­ä»£ç‰ˆæœ¬ä¸€è‡´ï¼Œç»†è‡´ç‚¹ä¸è‡³äºå‡ºç°é—®é¢˜ã€‚ å•ä¸ªç¯å¢ƒç‰ˆæœ¬è¿­ä»£ï¼Œæ•°æ®åº“çš„ç‰ˆæœ¬å·å˜æ›´æµç¨‹å¦‚ä¸‹å›¾ï¼š å¯¹äºåä¼ä¸šæœåŠ¡çš„å…¬å¸è€Œè¨€ï¼ŒåŒä¸€ä¸ªé¡¹ç›®ä¼šåŒæ—¶éƒ¨ç½²åˆ°å¤šå¥—ç¯å¢ƒå½“ä¸­ã€‚éšç€é¡¹ç›®è¿­ä»£è¿›è¡Œï¼Œä¸åŒç¯å¢ƒçš„é¡¹ç›®ç‰ˆæœ¬å¯èƒ½å¹¶éæ˜¯åŒæ­¥ä¸€è‡´çš„ï¼Œç”šè‡³å› ä¸ºæœ‰çš„ç¯å¢ƒéœ€è¦å®šåˆ¶åŒ–å¼€å‘ï¼Œå‡ºç°åŒä¸€ä¸ªé¡¹ç›®å¤šä¸ªåˆ†æ”¯ï¼Œä»£ç ä¹Ÿæ„ˆè¡Œæ„ˆè¿œã€‚ å¤šä¸ªç¯å¢ƒç‰ˆæœ¬è¿­ä»£ï¼Œæ•°æ®åº“çš„ç‰ˆæœ¬å·å˜æ›´æµç¨‹å¦‚ä¸‹å›¾ï¼š äºæ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸Šçº¿æœåŠ¡ä¹‹å‰å°±å¾ˆç—›è‹¦ï¼Œè¦æƒ³èµ·ä¸Šçº¿ç¯å¢ƒçš„å½“å‰è¡¨ç‰ˆæœ¬æ˜¯å¤šå°‘ï¼Œæƒ³ä¸èµ·æ¥ï¼Œå°±è¦å¯¹æ¯”çº¿ä¸Šåº“é‡Œçš„è¡¨ï¼Œåˆ¤æ–­æ˜¯å¦æ‰§è¡Œè¿‡äº†å¢é‡çš„ DDLï¼Œæ¯ä¸ªç¯å¢ƒçš„å¢é‡ DDL éƒ½å¯èƒ½æ˜¯ä¸åŒçš„ï¼Œéœ€è¦é’ˆå¯¹æ¯ä¸ªç¯å¢ƒå†™ä¸åŒçš„ DDLï¼Œå‘å¸ƒæ—¶æˆ˜æˆ˜å…¢å…¢åœ°ç”Ÿæ€•æ¼äº†æ‰§è¡Œå“ªä¸ªç‰ˆæœ¬çš„ DDL å¯¼è‡´çº¿ä¸Š Bugã€‚ é‚£å¦‚ä½•è§£å†³è¿™ç§ç³Ÿç³•çš„æƒ…å†µå‘¢ï¼Ÿ ç†æƒ³çŠ¶æ€ï¼šé¡¹ç›®å¯åŠ¨æ—¶è‡ªåŠ¨ç»´æŠ¤æ•°æ®åº“ç‰ˆæœ¬åˆ°æœ€æ–°ï¼Œä¸éœ€è¦äººå·¥å¤„ç† DDLï¼Œé¿å…å‡ºé”™ã€‚ Flyway å°±æä¾›äº†è¾¾åˆ°è¿™ç§ç†æƒ³çŠ¶æ€çš„åŠŸèƒ½ã€‚ å…ˆè¯´ä¸€ä¸‹ Flyway çš„åŸç†ã€‚ å¼€å‘è€…å°†æ¯ä¸ªç‰ˆæœ¬çš„ DDL æ”¾åˆ°é¡¹ç›®ä¸­ï¼Œé¡¹ç›®åœ¨æ–°ç¯å¢ƒå¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€å¼ è¡¨ç”¨äºè®°å½• DDL çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œéšåè‡ªåŠ¨æ‰§è¡Œæœªæ‰§è¡Œè¿‡çš„ DDLï¼ŒåŒæ—¶å°†æ‰§è¡Œè¿‡çš„ DDL ä¿¡æ¯å­˜å…¥å…ƒæ•°æ®è¡¨ä¸­ã€‚ä¸‹æ¬¡å†å¯åŠ¨æ—¶ï¼Œæ£€æµ‹åˆ°æ‰§è¡Œè¿‡äº†ï¼Œå°±ä¸ä¼šé‡å¤æ‰§è¡Œã€‚ æœ¬æ–‡ç¯å¢ƒ SpringBoot 2.1.3.RELEASE Flyway 5.2.1 è¿ç§»æ­¥éª¤ å¼•å…¥ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.flywaydb&lt;/groupId&gt; &lt;artifactId&gt;flyway-core&lt;/artifactId&gt; &lt;version&gt;6.4.4&lt;/version&gt;&lt;/dependency&gt; æ³¨ï¼šå¦‚æœ springboot ç‰ˆæœ¬ä½äº 2.0.0ï¼Œæœ€å¥½ä½¿ç”¨ 5.2.1 ç‰ˆæœ¬çš„ flyway-core æ·»åŠ  flyway é…ç½®æ–‡ä»¶ 123456789101112spring: flyway: # flyway æ•°æ®åº“ DDL ç‰ˆæœ¬æ§åˆ¶ enabled: true # æ­£å¼ç¯å¢ƒæ‰å¼€å¯ clean-disabled: true # ç¦ç”¨æ•°æ®åº“æ¸…ç† encoding: UTF-8 locations: classpath:/db # flyway ä¼šåœ¨åº“ä¸­åˆ›å»ºæ­¤åç§°å…ƒæ•°æ®è¡¨ï¼Œç”¨äºè®°å½•æ‰€æœ‰ç‰ˆæœ¬æ¼”åŒ–å’ŒçŠ¶æ€,åŒä¸€ä¸ªåº“ä¸åŒé¡¹ç›®å¯èƒ½å†²çªï¼Œæ¯ä¸ªé¡¹ç›®ä¸€å¼ è¡¨æ¥è®°å½• table: flyway_schema_history_FlywayExample #TODO å€¼çš„åç¼€æŒ‡å®šä¸ºå½“å‰é¡¹ç›®åç§° baseline-version: 1 # åŸºçº¿ç‰ˆæœ¬é»˜è®¤å¼€å§‹åºå· é»˜è®¤ä¸º 1 baseline-on-migrate: true # é’ˆå¯¹éç©ºæ•°æ®åº“æ˜¯å¦é»˜è®¤è°ƒç”¨åŸºçº¿ç‰ˆæœ¬,ä¸ºç©ºçš„è¯é»˜è®¤ä¼šè°ƒç”¨åŸºçº¿ç‰ˆæœ¬ placeholders: # å®šä¹‰ afterMigrateError.sql è¦æ¸…ç†çš„å…ƒæ•°æ®è¡¨è¡¨å flyway-table: $&#123;spring.flyway.table&#125; flyway åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»ºä¸€å¼ åç§°ä¸º flyway_schema_history çš„å…ƒæ•°æ®è¡¨ï¼Œå¦‚æœå¤šä¸ªé¡¹ç›®è¿æ¥çš„æ˜¯åŒä¸€ä¸ªæ•°æ®åº“ï¼Œä¼šäº§ç”Ÿå†²çªå½±å“ï¼Œæ‰€ä»¥éœ€è¦æ¯ä¸ªé¡¹ç›®éƒ½æœ‰ä¸€å¼ è‡ªå·±çš„å…ƒæ•°æ®è¡¨ï¼ŒæŒ‡å®š spring.flyway.table çš„å€¼å³å¯ï¼Œå¯ä»¥æŒ‡å®šä¸º flyway_schema_history_&#123;é¡¹ç›®åç§°&#125;ï¼Œè¿™æ ·åŸºæœ¬å¯ä»¥åšåˆ°ä¸ä¼šå‘ç”Ÿå†²çªäº†ã€‚ é¡¹ç›® resource ç›®å½•æ·»åŠ æ–‡ä»¶å¤¹. åˆ›å»ºä¸Šä¸€æ­¥ä¸­ spring.flyway.locations ä¸­æŒ‡å®šå€¼çš„ç›®å½•ï¼Œæœ¬æ–‡æ˜¯åˆ›å»º db ç›®å½•. é¡¹ç›® SQL è¿ç§». SQL è¿ç§»è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§æ˜¯å½“å‰é¡¹ç›®åœ¨æ‰€æœ‰ç¯å¢ƒéƒ½æ˜¯åˆæ¬¡éƒ¨ç½²ï¼Œå³æ•°æ®åº“ä¸­å°šæœªæœ‰ä»»ä½•å½“å‰é¡¹ç›®çš„è¡¨ï¼Œè¿™ç§æƒ…å†µå¾ˆå¥½å¤„ç†ï¼Œä¸»è¦è®²ä¸€ä¸‹éåˆæ¬¡éƒ¨ç½²çš„æƒ…å†µ SQL è¿ç§»æ­¥éª¤ã€‚ å…ˆ dump ä¸€ä»½æ‰€æœ‰ç¯å¢ƒä¸­å½“å‰é¡¹ç›®æœ€æ–°ç‰ˆæœ¬çš„è¡¨ç»“æ„ï¼Œåœ¨ resources/dbç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª base_init.sql æ–‡ä»¶ï¼Œå°†æœ€æ–°ç‰ˆæœ¬çš„ DDL ä»¥åŠéœ€è¦åˆå§‹åŒ–çš„æ•°æ®æ”¾åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ª sql æ–‡ä»¶åæœŸå°±ä¸è¦åšä»»ä½•ä¿®æ”¹ã€‚ resources/db ç›®å½•å¢åŠ ä¸€ä¸ªåä¸º V1__init.sqlçš„æ–‡ä»¶ï¼Œå†…å®¹ä¸ºç©ºï¼Œç”¨äºå ä½ å°†æ‰€æœ‰ç¯å¢ƒçš„è¡¨ç»“æ„éƒ½ç»Ÿä¸€åˆ° base_init.sqlè¿™ä¸ªç‰ˆæœ¬ å¦‚æœæœ‰æ–°å¢çš„ DDLï¼Œåˆ™åˆ›å»ºä¸€ä¸ªé«˜ç‰ˆæœ¬çš„ sql æ–‡ä»¶ï¼Œå¦‚V2__add_table.sqlï¼Œé¡¹ç›®å¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨æ‰§è¡Œ sqlï¼Œä½†æ˜¯ä¸ä¼šæ‰§è¡Œ V1 ç‰ˆæœ¬çš„ï¼Œæ‰€ä»¥æ·»åŠ äº† V1 ç‰ˆæœ¬çš„ç”¨äºå ä½ã€‚æ³¨æ„å¦‚æœæ–°å¢çš„ DDL ç‰ˆæœ¬æ²¡æœ‰æ‰§è¡Œå‡ºé”™ï¼Œåˆ‡å‹¿ä¿®æ”¹ï¼ï¼ï¼ sql æ–‡ä»¶çš„å‘½åå…·æœ‰ä¸€å®šè§„åˆ™ï¼Œä»¥Vå¼€å¤´ï¼Œæ¥ç€ä¸¤ä¸ªä¸‹åˆ’çº¿ __ï¼Œæ¥ç€å¯ä»¥å†™æ³¨é‡Šï¼Œç„¶åä»¥ .sql ç»“å°¾ï¼Œå¦‚V3__alter_table.sql ç‰ˆæœ¬å·æ”¯æŒå°ç‰ˆæœ¬x.y.zæ ¼å¼ï¼Œä½†æ˜¯ä¸ºäº†ç®€å•èµ·è§ï¼Œç›´æ¥ç”¨ä¸€ä¸ªæ•°å­—é€’å¢æ›´æ–¹ä¾¿ã€‚ å¦‚æœéœ€è¦éƒ¨ç½²åˆ°æ–°çš„ç¯å¢ƒï¼Œåˆ™åªéœ€è¦æ‰§è¡Œ base_init.sqlä¸­ DDL å³å¯ï¼Œå…¶ä»–ç‰ˆæœ¬çš„ DDL äº¤ç»™ flyway å°±å¯ä»¥äº†ã€‚ Over~ æœ‰æ—¶å€™å¦‚æœæ–°ç‰ˆæœ¬çš„ DDL å†™é”™äº†ï¼Œå¯èƒ½ä¼šå¯¼è‡´ flyway æ‰§è¡Œå¤±è´¥ï¼Œä¼šåœ¨å…ƒæ•°æ®è¡¨ä¸­å¢åŠ ä¸€æ¡æ‰§è¡Œ status ä¸º 0 çš„è®°å½•ï¼Œåªè¦ status æœ‰ä¸º 0 çš„è®°å½•ï¼Œé¡¹ç›®å°±æ— æ³•å¯åŠ¨ï¼Œè¿™æ ·å°±å¾ˆéš¾å—ï¼Œç½‘ä¸Šè§£å†³æ–¹å¼å¤šæ˜¯æ‰‹åŠ¨å»æ•°æ®åº“åˆ é™¤è¿™æ¡è®°å½•ï¼Œè¿™æœªå…å¤ªå±é™©ï¼Œå¯ä»¥åˆ©ç”¨ flyway çš„ callback æ¥å®ç°æ‰§è¡Œå¤±è´¥ï¼Œè‡ªåŠ¨åˆ é™¤å¤±è´¥è®°å½•ã€‚åœ¨ resources/dbç›®å½•ä¸‹æ·»åŠ åä¸º afterMigrateError.sqlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸º 12-- SQL æ‰§è¡Œå¤±è´¥ï¼Œæ¸…ç† flyway å…ƒæ•°æ®è¡¨ä¸­å¤±è´¥çš„æ‰§è¡Œè®°å½•DELETE IGNORE FROM `$&#123;flyway-table&#125;` WHERE success = 0; å…¶ä¸­çš„å˜é‡å°±æ˜¯å½“å‰é¡¹ç›®å…ƒæ•°æ®è¡¨çš„è¡¨åç§°ã€‚ å¦‚æœå½“å‰é¡¹ç›®åœ¨æ‰€æœ‰ç¯å¢ƒéƒ½æ˜¯åˆæ¬¡éƒ¨ç½²ï¼Œé‚£å°±ä¸éœ€è¦ base_init.sqlï¼Œåˆå§‹åŒ–ç›´æ¥æ”¾åˆ° V1__init.sql å½“ä¸­ï¼Œä¸Šçº¿æ—¶ä¸å†éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ SQLï¼Œå…¨éƒ¨äº¤ç”± flyway æ¥æ‰§è¡Œå³å¯ã€‚å¦‚æœæ•°æ®åº“æ¯”å¦‚æµ‹è¯•ç¯å¢ƒå­˜åœ¨ç»å¸¸æ‰‹åŠ¨ä¿®æ”¹è¡¨å¢åŠ è¡¨çš„æƒ…å†µï¼Œéœ€è¦å…³é—­ flywayï¼Œå­˜åœ¨ flyway å› ä¸ºåœ¨æ‰‹åŠ¨æ‰§è¡Œ SQL æ‰§è¡Œä¹‹åå†æ‰§è¡Œå¯¼è‡´æ‰§è¡Œå¤±è´¥çš„æƒ…å†µï¼Œæ‰€ä»¥æŸä¸ªç¯å¢ƒä½¿ç”¨äº† flyway æ§åˆ¶ç‰ˆæœ¬ä¹‹åï¼Œå°±ä¸è¦å†æ‰‹åŠ¨å¢åˆ æ”¹è¡¨ã€‚ Over~~~ å¸¸è§é—®é¢˜ å‡ºç° java.sql.SQLException: sql injection violation, comment not allow : CREATE TABLE xxxxxx.flyway_schema_history_xxxæ£€æŸ¥æ˜¯å¦ä½¿ç”¨çš„æ˜¯ druid ï¼Œé”™è¯¯åŸå› æ˜¯å»ºè¡¨è¯­å¥ä¸­åŒ…å«äº† SQL æ³¨é‡Šï¼Œdruid é»˜è®¤ä¼šæ‹¦æˆªåŒ…å«æ³¨é‡Šçš„ SQL æ‰§è¡Œï¼Œéœ€è¦ä¿®æ”¹ druid é…ç½®ï¼Œå…è®¸æ³¨é‡Šã€‚ï¼ˆä¸çŸ¥é“ flyway ä¸ºä»€ä¹ˆè¦æŠŠæ³¨é‡Šå†™åˆ°å»ºè¡¨è¯­å¥ä¸­ï¼‰ 1234567891011121314spring: datasource: druid: # ...... çœç•¥å…¶ä»– filter: stat: enabled: true slf4j: enabled: true wall: enabled: true config: comment-allow: true# filters: stat,wall,slf4j æ³¨é‡Šæ­¤è¡Œï¼Œfilteræ”¹æˆä¸Šé¢çš„æ ¼å¼ æ€»ç»“é’ˆå¯¹å¤šç¯å¢ƒè¿ç§»æµç¨‹ æ‰€æœ‰ç¯å¢ƒæ•°æ®åº“è¡¨ç‰ˆæœ¬ç»Ÿä¸€åˆ°æœ€æ–°ç‰ˆæœ¬ å°†æœ€æ–°ç‰ˆæœ¬ DDL æ”¾åˆ° base_init.sqlä¸­ åç»­è¿­ä»£åœ¨ resource/db ç›®å½•ä¸‹å¢åŠ æ–°ç‰ˆæœ¬çš„ DDL æ–‡ä»¶ å¦‚æœæ˜¯æ–°ç¯å¢ƒï¼Œå…ˆé€šè¿‡ base_init.sql è¿›è¡Œåˆå§‹åŒ–ï¼Œå†å¯åŠ¨é¡¹ç›®å³å¯ï¼Œéæ–°ç¯å¢ƒï¼Œç›´æ¥å¯åŠ¨é¡¹ç›®å³å¯ ç¤ºä¾‹ä»£ç  https://github.com/Mosiki/learning-modules/tree/master/learning-flyway å‚è€ƒ Flyway å®˜ç½‘åœ°å€ï¼š https://flywaydb.org/ Druid : https://github.com/alibaba/druid/issues/3546 Springboot flyway repair callbacks Springboot flyway repair: https://stackoverflow.com/questions/37462550/flyway-repair-with-spring-boot","tags":[{"name":"Flywayè¿ç§»","slug":"Flywayè¿ç§»","permalink":"http://nullpointer.pw/tags/Flyway%E8%BF%81%E7%A7%BB/"},{"name":"æ•°æ®åº“SQLç‰ˆæœ¬æ§åˆ¶","slug":"æ•°æ®åº“SQLç‰ˆæœ¬æ§åˆ¶","permalink":"http://nullpointer.pw/tags/%E6%95%B0%E6%8D%AE%E5%BA%93SQL%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"}]},{"title":"å®æˆ˜åŸºäºRediså®ç°é˜»å¡é˜Ÿåˆ—","date":"2020-06-14T07:02:17.000Z","path":"redis-block-queue.html","text":"æ—¥å¸¸éœ€æ±‚å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸å…ä¼šé‡åˆ°éœ€è¦é€šè¿‡ä»£ç è¿›è¡Œå¼‚æ­¥å¤„ç†çš„æƒ…å†µï¼Œæ¯”å¦‚æ‰¹é‡å‘é€é‚®ä»¶ï¼Œæ‰¹é‡å‘é€çŸ­ä¿¡ï¼Œæ•°æ®å¯¼å…¥ï¼Œä¸ºäº†å‡å°‘ç”¨æˆ·çš„ç­‰å¾…ï¼Œä¸å¸Œæœ›ä¸€ç›´èŠèŠ±è½¬å•Šè½¬ï¼Œå› æ­¤éœ€è¦è¿›è¡Œå¼‚æ­¥å¤„ç†ï¼Œåšæ³•å°±æ˜¯è®²è¦å¤„ç†çš„æ•°æ®æ·»åŠ åˆ°é˜Ÿåˆ—å½“ä¸­ï¼Œç„¶åæŒ‰ç…§æ’é˜Ÿçš„å…ˆåé¡ºåºè¿›è¡Œå¼‚æ­¥å¤„ç†ã€‚ è¿™ä¸ªé˜Ÿåˆ—ï¼Œå¯ä»¥æ˜¯ä¸“ä¸šçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚ RocketMQ/RabbitMQ ç­‰ï¼Œä¸€èˆ¬é¡¹ç›®ä¸­ï¼Œå¦‚æœåªæ˜¯ä¸ºäº†è¿›è¡Œå¼‚æ­¥ï¼Œæœªå…æœ‰ç‚¹æ€é¸¡ç”¨ç‰›åˆ€çš„æ„å‘³ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨åŸºäº JVM å†…å­˜å®ç°é˜Ÿåˆ—ï¼Œä½†æ˜¯å¦‚æœé¡¹ç›®è¿›è¡Œäº†é‡å¯ï¼Œå°±ä¼šé€ æˆé˜Ÿåˆ—æ•°æ®ä¸¢å¤±ã€‚å¤§éƒ¨åˆ†çš„é¡¹ç›®éƒ½ä¼šç”¨åˆ° Redis ä¸­é—´ä»¶ä½œä¸ºç¼“å­˜ä½¿ç”¨ï¼Œæ­¤æ—¶ä½¿ç”¨ Redis çš„ list ç»“æ„æ¥å®ç°é˜Ÿåˆ—åˆ™æ˜¯éå¸¸åˆé€‚çš„é€‰æ‹©ã€‚ å› æ­¤ï¼Œæœ¬æ–‡ä¸»è¦è®²è§£åŸºäº Redis çš„æ–¹å¼å®ç°å¼‚æ­¥é˜Ÿåˆ—ã€‚ åŸºäº Redis çš„ list å®ç°é˜Ÿåˆ—çš„æ–¹å¼ä¹Ÿæœ‰å¤šç§ï¼Œå…ˆè¯´ç¬¬ä¸€ç§ä¸æ¨èçš„æ–¹å¼ï¼Œå³ä½¿ç”¨LPUSHç”Ÿäº§æ¶ˆæ¯ï¼Œç„¶å while(true) ä¸­é€šè¿‡RPOPæ¶ˆè´¹æ¶ˆæ¯ï¼Œè¿™ç§æ–¹å¼çš„ç¡®å¯ä»¥å®ç°ï¼Œä½†æ˜¯ä¸æ–­ä»£ç ä¸æ–­çš„è½®è¯¢ï¼ŒåŠ¿å¿…ä¼šæ¶ˆè€—ä¸€äº›ç³»ç»Ÿçš„èµ„æºã€‚ ç¬¬äºŒç§æ–¹å¼ä¹Ÿæ˜¯ä¸æ¨èçš„æ–¹å¼ï¼Œä¹Ÿæ˜¯é€šè¿‡ LPUSHç”Ÿäº§æ¶ˆæ¯ï¼Œç„¶åé€šè¿‡ BRPOP è¿›è¡Œé˜»å¡åœ°ç­‰å¾…å¹¶æ¶ˆè´¹æ¶ˆæ¯ï¼Œè¿™ç§æ–¹å¼è¾ƒç¬¬ä¸€ç§æ–¹å¼å‡å°‘äº†æ— ç”¨çš„è½®è¯¢ï¼Œé™ä½ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ï¼Œä½†æ˜¯å¯èƒ½ä¼šå­˜åœ¨é˜Ÿåˆ—æ¶ˆæ¯ä¸¢å¤±çš„æƒ…å†µï¼Œå¦‚æœå–å‡ºäº†æ¶ˆæ¯ç„¶åå¤„ç†å¤±è´¥ï¼Œè¿™ä¸ªè¢«å–å‡ºçš„æ¶ˆæ¯å°±å°†ä¸¢å¤±ã€‚ ç¬¬äºŒç§æ–¹å¼å°±æ˜¯ä¸‹æ–‡è¦ä»‹ç»çš„æ–¹å¼ï¼Œé¦–å…ˆä¹Ÿæ˜¯é€šè¿‡ LPUSH ç”Ÿäº§æ¶ˆæ¯ï¼Œç„¶åé€šè¿‡ BRPOPLPUSHé˜»å¡åœ°ç­‰å¾… list æ–°æ¶ˆæ¯åˆ°æ¥ï¼Œæœ‰äº†æ–°æ¶ˆæ¯æ‰å¼€å§‹æ¶ˆè´¹ï¼ŒåŒæ—¶å°†æ¶ˆæ¯å¤‡ä»½åˆ°å¦å¤–ä¸€ä¸ª list å½“ä¸­ï¼Œè¿™ç§æ–¹å¼å…·å¤‡äº†ç¬¬äºŒç§æ–¹å¼çš„ä¼˜ç‚¹ï¼Œå³å‡å°‘äº†æ— ç”¨çš„è½®è¯¢ï¼ŒåŒæ—¶ä¹Ÿå¯¹æ¶ˆæ¯è¿›è¡Œäº†å¤‡ä»½ä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œå¦‚æœå¤„ç†æˆåŠŸï¼Œå¯ä»¥é€šè¿‡ LREM å¯¹å¤‡ä»½çš„ list ä¸­å½“å‰çš„è¿™æ¡æ¶ˆæ¯è¿›è¡Œåˆ é™¤å¤„ç†ã€‚è¿™ç§æ–¹å¼å®ç°æ–¹å¼å¯ä»¥å‚è€ƒ æ¨¡å¼ï¼š å®‰å…¨çš„é˜Ÿåˆ— . Redis åŸºç¡€12345678# å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ value æ’å…¥åˆ°åˆ—è¡¨ key çš„è¡¨å¤´LPUSH key value [value â€¦]# é˜»å¡å¼ç­‰å¾…ï¼Œå°†åˆ—è¡¨ source ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´  (å°¾å…ƒç´ ) å¼¹å‡ºï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å°† source å¼¹å‡ºçš„å…ƒç´ æ’å…¥åˆ°åˆ—è¡¨ destination ï¼Œä½œä¸º destination åˆ—è¡¨çš„çš„å¤´å…ƒç´ ã€‚è¶…æ—¶å‚æ•° timeout æ¥å—ä¸€ä¸ªä»¥ç§’ä¸ºå•ä½çš„æ•°å­—ä½œä¸ºå€¼ã€‚è¶…æ—¶å‚æ•°è®¾ä¸º 0 è¡¨ç¤ºé˜»å¡æ—¶é—´å¯ä»¥æ— é™æœŸå»¶é•¿ (block indefinitely) ã€‚BRPOPLPUSH source destination timeout# æ ¹æ®å‚æ•° count çš„å€¼ï¼Œç§»é™¤åˆ—è¡¨ä¸­ä¸å‚æ•° value ç›¸ç­‰çš„å…ƒç´ ã€‚LREM key count value ä»£ç å®ç°é˜Ÿåˆ—æ¶ˆæ¯ç”Ÿäº§è€…ç¬”è€…ä½¿ç”¨çš„æ˜¯ Spring ç›¸å…³ API å®ç°å¯¹ Redis æŒ‡ä»¤çš„è°ƒç”¨ã€‚é¦–å…ˆå®ç°æ¶ˆæ¯çš„ç”Ÿäº§ä»£ç ï¼Œå°è£…åˆ°ä¸€ä¸ªå·¥å…·ç±»æ–¹æ³•å½“ä¸­ã€‚è¿™é‡Œå¾ˆç®€å•ï¼Œå°±æ˜¯è°ƒç”¨äº† lpush æ–¹æ³•ï¼Œå°†åºåˆ—åŒ–çš„ key å’Œ value æ·»åŠ åˆ°åˆ—è¡¨å½“ä¸­å»ã€‚ 1234567891011121314@Resourceprivate RedisConnectionFactory connectionFactory;public void lPush(@Nonnull String key, @Nonnull String value) &#123; RedisConnection connection = RedisConnectionUtils.getConnection(connectionFactory); try &#123; byte[] byteKey = RedisSerializer.string().serialize(getKey(key)); byte[] byteValue = RedisSerializer.string().serialize(value); assert byteKey != null; connection.lPush(byteKey, byteValue); &#125; finally &#123; RedisConnectionUtils.releaseConnection(connection, connectionFactory); &#125;&#125; ä»£ç å®ç°é˜Ÿåˆ—æ¶ˆæ¯æ¶ˆè´¹è€… å› ä¸ºå®ç°é˜Ÿåˆ—æ¶ˆè´¹æ¶ˆæ¯çš„ä»£ç æ¯”è¾ƒå¤šï¼Œä¸å¯èƒ½æ¯ä¸ªéœ€è¦é˜»å¡æ¶ˆè´¹çš„åœ°æ–¹ï¼Œå¯¹éœ€è¦å†™è¿™ä¸€å¨ä»£ç ï¼Œå› æ­¤ä½¿ç”¨ Java8 çš„å‡½æ•°å¼æ¥å£å®ç°æ–¹æ³•çš„ä¼ é€’ï¼ŒåŒæ—¶é˜»å¡å¼è·å–æ¶ˆæ¯ä»£ç ä½¿ç”¨æ–°çº¿ç¨‹å»æ‰§è¡Œã€‚ æœ‰äººçœ‹åˆ°ä»¥ä¸‹ä»£ç è¦åæ§½äº†ï¼Œä¸æ˜¯è¯´ä¸ç”¨ while(true) å—ï¼Œæ€ä¹ˆä½ è¿™é‡Œé¢è¿˜æ˜¯æœ‰ï¼Œè¿™é‡Œç¨å¾®è§£é‡Šä¸€ä¸‹ï¼Œå› ä¸º SpringBoot ä¸€èˆ¬ä¼šæŒ‡å®š timeout çš„å…¨å±€è¶…æ—¶æ—¶é—´ï¼Œå³ä½¿ BRPOPLPUSH è®¾ç½®äº† 0ï¼Œå³æ— é™æœŸï¼Œå½“è¶…å‡ºäº† timeout è®¾ç½®çš„å€¼æ—¶ï¼Œå°±ä¼šæŠ›å‡º QueryTimeoutException å¼‚å¸¸å¯¼è‡´çº¿ç¨‹é€€å‡ºï¼Œå› æ­¤æ·»åŠ äº† try/catch å¯¹å¼‚å¸¸è¿›è¡Œæ•è·å¹¶å¿½ç•¥ï¼ŒåŒæ—¶ä½¿ç”¨ while(true) ä¿è¯çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚ä»£ç ä¸­è®°å½•äº†å½“å‰æ¶ˆæ¯å¤„ç†ç»“æœï¼Œå¦‚æœå¤„ç†ç»“æœä¸ºæˆåŠŸï¼Œéœ€è¦å¯¹å¤‡ä»½é˜Ÿåˆ—çš„å½“å‰æ¶ˆæ¯è¿›è¡Œåˆ é™¤ã€‚ 12345678910111213141516171819202122232425262728293031323334public void bRPopLPush(@Nonnull String key, Consumer&lt;String&gt; consumer) &#123; CompletableFuture.runAsync(() -&gt; &#123; RedisConnection connection = RedisConnectionUtils.getConnection(connectionFactory); try &#123; byte[] srcKey = RedisSerializer.string().serialize(getKey(key)); byte[] dstKey = RedisSerializer.string().serialize(getBackupKey(key)); assert srcKey != null; assert dstKey != null; while (true) &#123; byte[] byteValue = new byte[0]; boolean success = false; try &#123; byteValue = connection.bRPopLPush(0, srcKey, dstKey); if (byteValue != null &amp;&amp; byteValue.length != 0) &#123; consumer.accept(new String(byteValue)); success = true; &#125; &#125; catch (Exception ignored) &#123; // é˜²æ­¢è·å– key è¾¾åˆ°è¶…æ—¶æ—¶é—´æŠ›å‡º QueryTimeoutException å¼‚å¸¸é€€å‡º // é˜²æ­¢ Redis è¿æ¥å¤±æ•ˆï¼Œé‡æ–°è·å–è¿æ¥ https://github.com/Mosiki/learning-modules/issues/5 RedisConnectionUtils.releaseConnection(connection, connectionFactory); connection = RedisConnectionUtils.getConnection(connectionFactory); &#125; finally &#123; if (success) &#123; // å¤„ç†æˆåŠŸæ‰åˆ é™¤å¤‡ä»½é˜Ÿåˆ—çš„ key connection.lRem(dstKey, 1, byteValue); &#125; &#125; &#125; &#125; finally &#123; RedisConnectionUtils.releaseConnection(connection, connectionFactory); &#125; &#125;);&#125; æµ‹è¯•ä»£ç 1234567891011121314151617181920212223@Testpublic void testLPush() throws InterruptedException &#123; String queueA = &quot;queueA&quot;; int i = 0; while (true) &#123; String msg = &quot;Hello-&quot; + i++; redisBlockQueue.lPush(queueA, msg); System.out.println(&quot;lPush: &quot; + msg); Thread.sleep(3000); &#125;&#125;@Testpublic void testBRPopLPush() &#123; String queueA = &quot;queueA&quot;; redisBlockQueue.bRPopLPush(queueA, (val) -&gt; &#123; // åœ¨è¿™é‡Œå¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ System.out.println(&quot;val: &quot; + val); &#125;); // é˜²æ­¢ Junit è¿›ç¨‹é€€å‡º LockSupport.park();&#125; è¿è¡Œç»“æœï¼š é¡¹ç›®ä½¿ç”¨æ–¹å¼ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘å°†å…¶æŠ½å–ä¸ºäº†ä¸€ä¸ªå·¥å…·ç±»ï¼Œä½¿ç”¨æ—¶é€šè¿‡ Spring æ³¨å…¥ä½¿ç”¨å³å¯ï¼Œé˜Ÿåˆ—æ¶ˆè´¹å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™å°±è¿›è¡Œé˜»å¡ç›‘å¬é˜Ÿåˆ—ï¼Œç­‰å¾…æ¶ˆè´¹ 123456789@Resourceprivate RedisBlockQueue redisBlockQueue;@PostConstructpublic void init() &#123; redisBlockQueue.bRPopLPush(xx, (value) -&gt; &#123; //... &#125;);&#125; æœ¬æ–‡å®Œæ•´ä»£ç ä¸‹è½½ github åœ°å€","tags":[{"name":"Redisé˜»å¡é˜Ÿåˆ—å®ç°","slug":"Redisé˜»å¡é˜Ÿåˆ—å®ç°","permalink":"http://nullpointer.pw/tags/Redis%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97%E5%AE%9E%E7%8E%B0/"},{"name":"å¼‚æ­¥é˜Ÿåˆ—å¤„ç†","slug":"å¼‚æ­¥é˜Ÿåˆ—å¤„ç†","permalink":"http://nullpointer.pw/tags/%E5%BC%82%E6%AD%A5%E9%98%9F%E5%88%97%E5%A4%84%E7%90%86/"}]},{"title":"æ¥å£é‰´æƒç­¾åå®è·µ","date":"2020-06-01T14:36:34.000Z","path":"interface-authentication.html","text":"å·¥ä½œå½“ä¸­ä¸å…è¦ä¸å…¶ä»–çš„å…¬å¸è¿›è¡Œæ‰“äº¤é“ï¼Œæ¯”å¦‚è°ƒç”¨å¯¹æ–¹çš„æ¥å£å®ŒæˆæŸé¡¹æ“ä½œï¼Œæˆ–è€…æä¾›æ¥å£ç»™å¯¹æ–¹è°ƒç”¨ï¼Œè¿™äº›æ¥å£å¯èƒ½ä½¿ç”¨è€…æœ‰å¾ˆå¤šå…¬å¸ï¼Œä¸ºäº†ä¿è¯æ¥å£çš„å®‰å…¨æ€§ï¼Œéœ€è¦è®¾è®¡ä¸€äº›æ–¹å¼æ¥å¯¹æ¥å£è¿›è¡Œä¿æŠ¤ï¼Œå¸¸è§çš„ä¿æŠ¤æªæ–½æœ‰ IP ç™½åå•ä¸æ¥å£ç­¾åã€‚IP ç™½åå•è¿™ç§æ–¹å¼å°±ä¸å¤šè¯´å¾ˆç®€å•ï¼Œåˆ¤æ–­æ¥å£è°ƒç”¨è€… IP æ˜¯å¦åœ¨è®¾å®šçš„ç™½åå• IP ä¹‹ä¸­å³å¯ã€‚ä½†æ˜¯ IP ç™½åå•è¿™ç§æ–¹å¼æœ‰ä¸ªå¼Šç«¯å°±æ˜¯ç»´æŠ¤ç™½åå• IP åˆ—è¡¨æˆäº†ä½“åŠ›æ´»ï¼Œè°ƒç”¨æ–¹å¢åŠ æœåŠ¡å™¨æˆ–è€…å‡å°‘æœåŠ¡å™¨å°±è¦æ›´æ–°ç™½åå•ï¼Œå¯¹äºæ¥å£æä¾›æ–¹ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæœ€å¥½ä½¿ç”¨ç­¾åçš„æ–¹å¼ä¸€åŠ³æ°¸é€¸ï¼Œå› æ­¤æœ¬æ–‡ä¸»è¦è®²è®²å¸¸ç”¨çš„æ¥å£ç­¾åæ–¹å¼ï¼Œä¸»è¦åº”ç”¨ä¸æœåŠ¡ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´çš„æ¥å£äº¤äº’ã€‚å› ä¸ºç”Ÿæˆç­¾åè¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°äº† appSecretï¼Œå› æ­¤è¿™ç§æ–¹å¼æœ€å¥½ä¸è¦ç”¨äºå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´çš„æ¥å£åŠ å¯†ï¼ŒappSecret å†™æ­»åœ¨ APP ä¸­ï¼Œé€†å‘æŠ€æœ¯è·å–ä¸æ˜¯å¤ªå›°éš¾çš„äº‹æƒ…ï¼Œå½“ç„¶éè¦ä½¿ç”¨ï¼ŒappSecret æœ€å¥½é€šè¿‡ç™»å½•æ—¶åŠ¨æ€ç”Ÿæˆï¼Œå†™æ­»çš„æ–¹å¼ä¸€å‘æ˜¯ä¸æ¨èçš„åšæ³•ã€‚ æ¥å£ç­¾åä½œç”¨æ¥å£ç­¾åè§£å†³äº†å¦‚ä¸‹è¿™äº›é—®é¢˜ï¼š é˜²æ­¢æ¥å£éæ³•è°ƒç”¨ é˜²æ­¢æ¥å£å‚æ•°è¢«ç¯¡æ”¹ é˜²æ­¢æ¥å£è¿‡æœŸå‚æ•°è¯·æ±‚ é˜²æ­¢æ¥å£è¯·æ±‚é‡æ”¾ æ¥å£ç­¾åæ–¹å¼ä¸€èˆ¬æ¥è¯´ï¼Œæ¥å£ç­¾åæ–¹å¼ä¸»è¦æ˜¯è¿™æ ·çš„ï¼Œæ‰€æœ‰çš„æ¥å£éƒ½éœ€è¦ä¼ é€’è¿™å‡ ä¸ªå…¬å…±å‚æ•°appKeyã€ signã€timestampã€nonceï¼Œsign çš„è®¡ç®—è§„åˆ™ä¸º æ‹¼æ¥æ¥å£çš„æ‰€æœ‰å‚æ•°ï¼Œå‚æ•°åæŒ‰ç…§ ASCII ç ä»å°åˆ°å¤§æ’åºï¼ˆå­—å…¸åºï¼‰ï¼Œæ‹¼æ¥çš„æ ¼å¼å¦‚ k1=v1&amp;k2=v2&amp;k3=v3 å¾—åˆ° params Base64(HMAC_SHA1(params, appSecret))ï¼Œå¾—åˆ° sign å€¼ sign åŠ åˆ°å‚æ•°ä¸­ï¼Œå‘é€è¯·æ±‚ç›®æ ‡æ¥å£ä»¥ä¸Šå°±æ˜¯ç”Ÿæˆç­¾åçš„è¿‡ç¨‹ã€‚ éªŒè¯ç­¾åçš„è¿‡ç¨‹ä¸ä¹‹ç›¸åŒï¼Œå°±æ˜¯ä»è¯·æ±‚ä¸­æå–æ‰€æœ‰çš„å‚æ•°ï¼ˆé™¤å» signï¼‰ï¼Œç„¶ååŒæ ·çš„æ–¹å¼ç”Ÿæˆç­¾åï¼Œç„¶åå°†ç­¾åç»“æœä¸è¯·æ±‚ä¸­çš„ sign å‚æ•°è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸€è‡´åˆ™éªŒç­¾æˆåŠŸå¦åˆ™å¤±è´¥ã€‚ä¸ºäº†ä¿è¯æ¥å£å‚æ•°çš„æ—¶æ•ˆæ€§ï¼Œä¸€èˆ¬ä¼šåœ¨éªŒç­¾ä¹‹å‰æ ¡éªŒ timestamp å‚æ•°æ˜¯å¦è¶…æ—¶ï¼Œæ¯”å¦‚ä¸å½“å‰æ—¶é—´ç›¸å·® 10 åˆ†é’Ÿåˆ™ç›´æ¥æç¤ºéªŒç­¾å¤±è´¥ã€‚å¦å¤–ä¸ºäº†é˜²æ­¢è¯·æ±‚é‡æ”¾ï¼Œå³ç›¸åŒå‚æ•°ä¸å¯é‡å¤è¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡å°† nonce å‚æ•°è¿›è¡Œç¼“å­˜ï¼Œæ¯”å¦‚é˜²æ­¢åˆ° Redis å½“ä¸­ï¼Œè®¾ç½® 10 åˆ†é’Ÿçš„æœ‰æ•ˆæœŸï¼Œå¦‚æœ nonce å­˜åœ¨ä¸ç¼“å­˜ä¸­åˆ™æç¤ºéªŒç­¾å¤±è´¥ï¼Œè¿™æ ·ä¾¿é€šè¿‡ nonce é…åˆ timestamp å®ç°äº†è¯·æ±‚é‡æ”¾ã€‚ è¯ä¸å¤šå°‘ï¼Œå¼€å§‹å®è·µä¸€ä¸‹~ ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œå°±å† main æ–¹æ³•ä¸­å®ç°ç­¾åä¸éªŒç­¾çš„é€»è¾‘ã€‚åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¯ä»¥é›†æˆä¸º springboot starterï¼Œé€šè¿‡æ‹¦æˆªå™¨è¿›è¡Œç»Ÿä¸€æ ¡éªŒã€‚å¦‚ä½•è‡ªå®šä¹‰ springboot starterï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ï¼šå®ç”¨ä¸»ä¹‰ä¹‹è‡ªå®šä¹‰ SpringBootStarter ä¾èµ–æ·»åŠ å› ä¸ºåŠ å¯†ç®—æ³•ä½¿ç”¨åˆ°äº†å¼€æºå·¥å…·åŒ… commons-codecï¼Œå…ˆæ·»åŠ è¿™ä¸ªä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;commons-codec&lt;/groupId&gt; &lt;artifactId&gt;commons-codec&lt;/artifactId&gt; &lt;version&gt;1.14&lt;/version&gt;&lt;/dependency&gt; ç”Ÿæˆç­¾åä¸éªŒç­¾12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182import org.apache.commons.codec.binary.Base64;import org.apache.commons.codec.digest.HmacAlgorithms;import org.apache.commons.codec.digest.HmacUtils;import java.time.Duration;import java.time.Instant;import java.time.LocalDateTime;import java.time.ZoneOffset;import java.util.*;import static java.time.temporal.ChronoUnit.SECONDS;/** * @author WeJan * @since 2020-05-31 */public class AuthTest &#123; public static void main(String[] args) &#123; System.out.println(&quot;********************************* ç­¾å *********************************&quot;);// long timestamp = LocalDateTime.now().plusMinutes(-10).toInstant(ZoneOffset.ofHours(8)).toEpochMilli(); long timestamp = System.currentTimeMillis(); String appKey = &quot;testtest&quot;; String appSecret = &quot;123456&quot;; Map&lt;String, String&gt; map = new HashMap&lt;&gt;(); map.put(&quot;appKey&quot;, appKey); map.put(&quot;k1&quot;, &quot;k1&quot;); map.put(&quot;k2&quot;, &quot;k2&quot;); map.put(&quot;timestamp&quot;, String.valueOf(timestamp)); String outSignData = getSignData(map); byte[] hmac = new HmacUtils(HmacAlgorithms.HMAC_SHA_1, appSecret).hmac(outSignData); String sign = new String(Base64.encodeBase64(hmac)); map.put(&quot;sign&quot;, sign); System.out.println(&quot;outSign: &quot; + sign); System.out.println(&quot;outSignData: &quot; + outSignData); String outParams = JSONObject.toJSONString(map); System.out.println(&quot;outParams: &quot; + outParams); System.out.println(&quot;\\n\\n********************************* éªŒç­¾ *********************************&quot;); Map&lt;String, String&gt; inMap = JSONObject.parseObject(outParams, new TypeReference&lt;Map&lt;String, String&gt;&gt;() &#123; &#125;); // æ ¡éªŒè¯·æ±‚æ˜¯å¦è¿‡æœŸ String inTimeStamp = inMap.getOrDefault(&quot;timestamp&quot;, &quot;0&quot;); LocalDateTime inTime = LocalDateTime.ofInstant(Instant.ofEpochMilli(Long.parseLong(inTimeStamp)), ZoneOffset.ofHours(8)); Duration duration = Duration.between(inTime, LocalDateTime.now()); long seconds = duration.get(SECONDS); System.out.println(&quot;seconds: &quot; + seconds); if (seconds &gt; 10 * 60) &#123; System.out.println(&quot;è¯·æ±‚è¶…æ—¶&quot;); return; &#125; String inSignData = getSignData(inMap); System.out.println(&quot;inSignData: &quot; + inSignData); byte[] inHmac = new HmacUtils(HmacAlgorithms.HMAC_SHA_1, appSecret).hmac(inSignData); String sign2 = new String(Base64.encodeBase64(inHmac)); System.out.println(&quot;sign2: &quot; + sign2); System.out.println(&quot;éªŒç­¾ç»“æœ: &quot; + sign.equals(sign2)); &#125; public static String getSignData(Map&lt;String, String&gt; params) &#123; StringBuilder content = new StringBuilder(); // key è‡ªç„¶æ’åº List&lt;String&gt; keys = new ArrayList&lt;&gt;(params.keySet()); Collections.sort(keys); for (int i = 0; i &lt; keys.size(); i++) &#123; String key = keys.get(i); if (&quot;sign&quot;.equals(key)) &#123; continue; &#125; String value = params.get(key); if (value != null) &#123; content.append(i == 0 ? &quot;&quot; : &quot;&amp;&quot;).append(key).append(&quot;=&quot;).append(value); &#125; else &#123; content.append(i == 0 ? &quot;&quot; : &quot;&amp;&quot;).append(key).append(&quot;=&quot;); &#125; &#125; return content.toString(); &#125;&#125; è¿è¡Œç»“æœï¼š 12345678910********************************* ç­¾å *********************************outSign: eADUCnVqcArdexcdMVcHkPJQyXU=outSignData: appKey=testtest&amp;k1=k1&amp;k2=k2&amp;timestamp=1590996917340outParams: &#123;&quot;k1&quot;:&quot;k1&quot;,&quot;k2&quot;:&quot;k2&quot;,&quot;sign&quot;:&quot;eADUCnVqcArdexcdMVcHkPJQyXU=&quot;,&quot;appKey&quot;:&quot;testtest&quot;,&quot;timestamp&quot;:&quot;1590996917340&quot;&#125;********************************* éªŒç­¾ *********************************seconds: 0inSignData: appKey=testtest&amp;k1=k1&amp;k2=k2&amp;timestamp=1590996917340sign2: eADUCnVqcArdexcdMVcHkPJQyXU=éªŒç­¾ç»“æœ: true","tags":[{"name":"æ¥å£é‰´æƒ","slug":"æ¥å£é‰´æƒ","permalink":"http://nullpointer.pw/tags/%E6%8E%A5%E5%8F%A3%E9%89%B4%E6%9D%83/"},{"name":"æ¥å£ç­¾å","slug":"æ¥å£ç­¾å","permalink":"http://nullpointer.pw/tags/%E6%8E%A5%E5%8F%A3%E7%AD%BE%E5%90%8D/"}]},{"title":"å®ç”¨ä¸»ä¹‰ä¹‹è‡ªå®šä¹‰SpringBootStarter","date":"2020-05-16T10:50:32.000Z","path":"custom-springboot-starter.html","text":"ä»Šå¤©ä»¥å®ç”¨è§’åº¦åˆ‡å…¥ï¼Œæ¥ç¤ºèŒƒè‡ªå®šä¹‰ springboot starter åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­çš„å®é™…åº”ç”¨ã€‚ SpringBoot ç›¸å¯¹äº Spring æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯æä¾›äº†ç›¸å½“æ•°é‡çš„ starterï¼Œåªéœ€å¼•å…¥ starter è¿›è¡Œæå°‘é‡çš„é…ç½®å°±å¯ä½¿ç”¨ç›¸åº”çš„åŠŸèƒ½ï¼Œæœ‰æ•ˆå‡å°‘ Spring å†—ä½™å¤æ‚çš„é…ç½®æ–‡ä»¶ã€‚ä½†æ—¥å¸¸å·¥ä½œå½“ä¸­ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿä¼šå°è£…ä¸€äº›æ¯”è¾ƒé€šç”¨çš„ä»£ç  jar åŒ…ï¼Œå¼•å…¥åˆ°æ–°çš„é¡¹ç›®ä¸­å¾ˆéš¾é¿å…æ·»åŠ ç›¸åº”çš„é…ç½®ï¼Œæ¯”å¦‚ Bean çš„å£°æ˜ã€‚å€Ÿé‰´ SpringBoot å®˜æ–¹åšæ³•ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ‰€éœ€è¦çš„ Starterã€‚ ä»Šå¤©ä»¥ç»Ÿä¸€é¡¹ç›®æ—¥æœŸæ ¼å¼åŒ–åŠŸèƒ½ä¸ºä¾‹ï¼Œä»å¤´åˆ°å°¾åœ°ä»‹ç»å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª Starterã€‚ å¼•å…¥ Starter åˆè¡·å¯¹äºä¸€ä¸ªéœ€è¦æä¾› HTTP æ¥å£çš„æœåŠ¡æ¥è¯´ï¼Œæ—¥æœŸçš„æ ¼å¼åŒ–ä¸ºå‹å¥½çš„æ ¼å¼è¿”å›æ˜¯ä¸€ä¸ªæ— æ³•é¿å…çš„é—®é¢˜ã€‚å®ä½“ç±»ç»“æ„å¦‚ä¸‹ï¼š 1234567@Datapublic class Example &#123; private LocalDateTime localDateTime; private LocalDate localDate; private Date date; private LocalTime localTime;&#125; åšæ³•æœ‰å¾ˆå¤šï¼Œç¬¬ä¸€ç§æ˜¯æ¯”å¦‚æ•°æ®åº“å®ä½“ç±»å­—æ®µä½¿ç”¨çš„æ˜¯ Date ç±»å‹ï¼ŒLocalDateTime ç±»å‹ï¼Œè¿”å›ç»™å‰ç«¯çš„ VO ä¸­å­—æ®µåˆ™ä½¿ç”¨ Long ç±»å‹æˆ–è€… String ç±»å‹ï¼Œåœ¨å®ä½“ç±»è¿›è¡Œè½¬æ¢çš„è¿‡ç¨‹ä¸­è½¬æ¢æ—¶é—´ç±»å‹ã€‚ ç¬¬äºŒç§æ–¹å¼æ˜¯å¯ä»¥ä½¿ç”¨@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)æ³¨è§£çš„æ–¹å¼ï¼Œä¸è¿‡è¿™ç§æ–¹å¼å°±éœ€è¦åœ¨æ‰€æœ‰çš„ VO ä¸Šæ·»åŠ è¿™ä¸ªæ³¨è§£ã€‚ ç¬¬ä¸‰ç§æ–¹å¼æ˜¯è¿˜å¯ä»¥åœ¨ application.yml ä¸­é…ç½®å¦‚ä¸‹ 123spring: jackson: date-format: yyyy-MM-dd HH:mm:ss å‰ä¸¤ç§æ–¹å¼éƒ½æ¯”è¾ƒ lowï¼Œæš‚ä¸”ä¸è°ˆï¼Œç¬¬ä¸‰ç§æ–¹å¼å¯ä»¥å®ç°ç»Ÿä¸€å…¨å±€ Date ç±»å‹çš„æ ¼å¼åŒ–ï¼Œä½†æ˜¯éšç€ Java8 çš„å¹¿æ³›åº”ç”¨ï¼ŒJava8 æ–°çš„ Time ç›¸å…³ç±»ä½¿ç”¨æ›´å¤šï¼Œè€Œç¬¬ä¸‰ç§æ–¹å¼æ— æ³•å®ç° LocalDateTime ç­‰æ ¼å¼åŒ–ã€‚ è®¿é—®æ¥å£ http://127.0.0.1:8083/learning-example/test æœªæ·»åŠ é…ç½®å‰è¿”å›ï¼š 123456789&#123; &quot;data&quot;: &#123; &quot;localDateTime&quot;: &quot;2020-05-14T10:15:13.311&quot;, &quot;localDate&quot;: &quot;2020-05-14&quot;, &quot;date&quot;: &quot;2020-05-14T02:15:13.306+0000&quot;, &quot;localTime&quot;: &quot;10:15:13.311&quot; &#125;, &quot;success&quot;: true&#125; æ·»åŠ é…ç½®åè¿”å›ï¼š 123456789&#123; &quot;data&quot;: &#123; &quot;localDateTime&quot;: &quot;2020-05-14T10:17:37.437&quot;, &quot;localDate&quot;: &quot;2020-05-14&quot;, &quot;date&quot;: &quot;2020-05-14 02:17:37&quot;, &quot;localTime&quot;: &quot;10:17:37.437&quot; &#125;, &quot;success&quot;: true&#125; å‘ç°å³ä¾¿æ·»åŠ  spring.jackson.date-format é…ç½®ï¼Œä¹Ÿä»…ä»…å¯¹ Date ç±»å‹çš„ç”Ÿæ•ˆå®Œæˆæ ¼å¼åŒ–ï¼Œè€Œ Java 8 æ–°çš„æ—¶é—´å¯¹è±¡å‡æœªèµ·åˆ°ä½œç”¨ã€‚ ä¸‹é¢é€šè¿‡è§£å†³ä»¥ä¸Šé—®é¢˜è¿‡ç¨‹ï¼Œæ¥ç¤ºèŒƒå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª SpringBoot Starter è‡ªå®šä¹‰ Starteråˆ›å»ºä¸€ä¸ª starter å·¥ç¨‹spring Boot starter çš„å·¥ç¨‹å®˜æ–¹ç»™å‡ºäº†è§„èŒƒï¼Œå¦‚ä¸‹ å®˜æ–¹å‘½åç©ºé—´ å‰ç¼€ï¼šspring-boot-starter- æ¨¡å¼ï¼šspring-boot-starter-æ¨¡å—å ä¸¾ä¾‹ï¼šspring-boot-starter-webã€spring-boot-starter-jdbc è‡ªå®šä¹‰å‘½åç©ºé—´ åç¼€ï¼š-spring-boot-starter æ¨¡å¼ï¼šæ¨¡å—-spring-boot-starter ä¸¾ä¾‹ï¼šmybatis-spring-boot-starter æ–°å»ºå·¥ç¨‹å‘½åä¸º common-spring-boot-starterï¼Œæ·»åŠ ç›¸å…³ä¾èµ– 1234567891011121314151617&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;!--ç”Ÿæˆå±æ€§æç¤º--&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;!--jackson --&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-json&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; å®šä¹‰è‡ªåŠ¨é…ç½®ç±»ä¸ºäº†ä½¿ starter æ›´çµæ´»ï¼Œä¾¿äºè‡ªå®šä¹‰ï¼Œæ¯”å¦‚æ˜¯å¦å¯ç”¨å…¨å±€æ ¼å¼åŒ–ï¼Œæ ¼å¼åŒ–çš„æ ¼å¼ç­‰ï¼Œæä¾› starter é…ç½®å¼€å…³æ¥æ§åˆ¶ã€‚ é€šè¿‡é…åˆä½¿ç”¨ @ConditionalOnProperty æ³¨è§£ï¼Œæ¥è¾¾åˆ°è‡ªå®šä¹‰æ˜¯å¦å¼€å¯å…¨å±€æ ¼å¼åŒ–å¼€å…³çš„ç›®çš„ï¼Œåªæœ‰å½“é…ç½®ä¸­å­˜åœ¨ common.date-format.enabled ï¼Œä¸”å€¼ä¸º true æ—¶ï¼Œæ‰å¯ç”¨ã€‚ é€šè¿‡ @EnableConfigurationProperties æ³¨è§£åŠ è½½é…ç½®ï¼Œå¯ä»¥è‡ªè¡Œå®šä¹‰æ ¼å¼åŒ–çš„æ ¼å¼ï¼Œæ¯”å¦‚ LocalDate é»˜è®¤æ ¼å¼ä¸º yyyy-MM-ddï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ä¸º yyyy/MM/ddï¼Œå¯ä»¥åšåˆ°ç›¸å½“çµæ´»ã€‚ 1234567891011121314151617181920212223242526272829303132333435@Configuration@EnableConfigurationProperties(DateFormatProperties.class)@ConditionalOnProperty(prefix = &quot;common.date-format&quot;, name = &quot;enabled&quot;, matchIfMissing = false, havingValue = &quot;true&quot;)public class DateFormatAutoConfiguration &#123; private DateFormatProperties dateFormatProperties; public DateFormatAutoConfiguration(DateFormatProperties dateFormatProperties) &#123; this.dateFormatProperties = dateFormatProperties; &#125; @Bean public Jackson2ObjectMapperBuilderCustomizer customizer() &#123; return builder -&gt; &#123; builder.locale(Locale.CHINA); builder.timeZone(TimeZone.getTimeZone(ZoneId.systemDefault())); builder.simpleDateFormat(dateFormatProperties.getDatePattern()); builder.modules(new JavaTimeModule()); &#125;; &#125; class JavaTimeModule extends SimpleModule &#123; JavaTimeModule() &#123; super(PackageVersion.VERSION); DateTimeFormatter localDateTimeFormatter = DateTimeFormatter.ofPattern(dateFormatProperties.getLocalDateTimePattern()); DateTimeFormatter localDateFormatter = DateTimeFormatter.ofPattern(dateFormatProperties.getLocalDatePattern()); DateTimeFormatter localTimeFormatter = DateTimeFormatter.ofPattern(dateFormatProperties.getLocalTimePattern()); this.addSerializer(LocalDateTime.class, new LocalDateTimeSerializer(localDateTimeFormatter)); this.addSerializer(LocalDate.class, new LocalDateSerializer(localDateFormatter)); this.addSerializer(LocalTime.class, new LocalTimeSerializer(localTimeFormatter)); this.addDeserializer(LocalDateTime.class, new LocalDateTimeDeserializer(localDateTimeFormatter)); this.addDeserializer(LocalDate.class, new LocalDateDeserializer(localDateFormatter)); this.addDeserializer(LocalTime.class, new LocalTimeDeserializer(localTimeFormatter)); &#125; &#125;&#125; 1234567891011121314151617181920212223242526272829/** * @author WeJan * @since 2020-05-14 */@ConfigurationProperties(&quot;common.date-format&quot;)public class DateFormatProperties &#123; /** * Date Format Pattern */ private String datePattern = &quot;yyyy-MM-dd HH:mm:ss&quot;; /** * LocalDateTime Format Pattern */ private String localDateTimePattern = &quot;yyyy-MM-dd HH:mm:ss&quot;; /** * LocalDate Format Pattern */ private String localDatePattern = &quot;yyyy-MM-dd&quot;; /** * LocalTime Format Pattern */ private String localTimePattern = &quot;HH:mm:ss&quot;; // TODO ç¯‡å¹…é™åˆ¶ï¼Œæ­¤å¤„çœç•¥ getter/setter æ–¹æ³•&#125; è®©é…ç½®ç±»ç”Ÿæ•ˆä¸Šæ–‡ä»…å®šä¹‰äº†è‡ªåŠ¨é…ç½®ç±»ï¼Œä½†æ˜¯æƒ³è¦è®© Spring åŠ è½½è¿™ä¸ªé…ç½®ç±»ï¼Œè¿˜éœ€è¦åœ¨ starter å·¥ç¨‹ä¸­æ·»åŠ  spring.factories åœ¨ resources ç›®å½•ä¸‹å»ºç«‹ META-INF æ–‡ä»¶å¤¹ï¼Œå†åˆ›å»º spring.factories æ–‡ä»¶ï¼Œå†æŒ‡å®šè‡ªåŠ¨é…ç½®ç±»çš„å…¨é™å®šç±»åã€‚ 12org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\pw.nullpointer.boot.autoconfigure.date.DateFormatAutoConfiguration Install æœ¬åœ° maven ä»“åº“æ‰§è¡Œ mvn installï¼Œå®‰è£…åˆ°æœ¬åœ° maven ä»“åº“ æµ‹è¯• starterå¼•å…¥è‡ªå®šä¹‰çš„ starteråˆ›å»º example å·¥ç¨‹ï¼Œå¼•å…¥åˆšæ‰ install åˆ° maven ä»“åº“çš„ starter 12345&lt;dependency&gt; &lt;groupId&gt;pw.nullpointer.tp&lt;/groupId&gt; &lt;artifactId&gt;common-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt;&lt;/dependency&gt; å¼€å¯ starter æ—¶é—´æ ¼å¼åŒ–åŠŸèƒ½ä¸Šæ–‡ä¸­è‡ªå®šä¹‰çš„ starter é»˜è®¤è®¾ç½®çš„æ˜¯ä¸å¯ç”¨ï¼Œå› æ­¤éœ€è¦åœ¨é…ç½®æ–‡ä»¶application.ymlä¸­å¯ç”¨ä¸€ä¸‹æ ¼å¼åŒ–åŠŸèƒ½ã€‚ 123common: date-format: enabled: true # å¼€å¯æ—¶é—´æ ¼å¼åŒ–åŠŸèƒ½ å¯åŠ¨é¡¹ç›®æµ‹è¯•è®¿é—®æ¥å£ï¼šhttp://127.0.0.1:8083/learning-example/testï¼Œè¿”å›å¦‚ä¸‹ï¼š 123456789&#123; &quot;data&quot;: &#123; &quot;localDateTime&quot;: &quot;2020-05-14 11:22:29&quot;, &quot;localDate&quot;: &quot;2020-05-14&quot;, &quot;date&quot;: &quot;2020-05-14 11:22:29&quot;, &quot;localTime&quot;: &quot;11:22:29&quot; &#125;, &quot;success&quot;: true&#125; å¯ä»¥çœ‹åˆ°æ ¼å¼åŒ–å·²ç»ç”Ÿæ•ˆäº†ï¼Œé¡ºä¾¿æµ‹è¯•ä¸€ä¸‹è‡ªå®šä¹‰æ ¼å¼åŒ–ï¼Œä¿®æ”¹ application.yml æ–‡ä»¶ 1234common: date-format: enabled: true local-date-pattern: yyyy/MM/dd å†æ¬¡æµ‹è¯•ï¼Œæ¥å£è¿”å›ï¼š 123456789&#123; &quot;data&quot;: &#123; &quot;localDateTime&quot;: &quot;2020-05-14 11:27:16&quot;, &quot;localDate&quot;: &quot;2020/05/14&quot;, &quot;date&quot;: &quot;2020-05-14 11:27:16&quot;, &quot;localTime&quot;: &quot;11:27:16&quot; &#125;, &quot;success&quot;: true&#125; ä¼˜åŒ– starter å±æ€§æç¤ºåœ¨ä½¿ç”¨ springboot å®˜æ–¹ starter è¿‡ç¨‹ä¸­ï¼Œåœ¨ç¼–å†™ application.yml çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰å“ªäº›å±æ€§ï¼ŒIDEA ä¼šè‡ªåŠ¨æç¤ºå‡ºæ¥ï¼Œä¸ºäº†è¾¾åˆ°è¿™ç§æ•ˆæœï¼Œéœ€è¦å¼•å…¥ä¾èµ– spring-boot-configuration-processorï¼Œå¼•å…¥åï¼Œstarter åœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ spring-configuration-metadata.json æ–‡ä»¶ï¼Œä½¿ç”¨ starter è¿‡ç¨‹ä¸­ä¾¿æœ‰ç›¸åº”çš„æç¤ºäº†ã€‚å‰æ–‡åˆå§‹åŒ– starter çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å¼•å…¥è¿‡è¿™ä¸ªä¾èµ–äº†ï¼Œæ‰€ä»¥å°±ä¸ç”¨å†é‡å¤å¼•å…¥äº†ã€‚ 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt;&lt;/dependency&gt; ä½†åªæ ¹æ®è¿™ä¸ªä¾èµ–ç”Ÿæˆçš„spring-configuration-metadata.json æ–‡ä»¶ï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­å¯ä»¥å‘ç° common.date-format.enabled è¿™ä¸ªå±æ€§å¼€å…³æ˜¯æ²¡æœ‰æç¤ºå‡ºæ¥çš„ï¼Œå¯ä»¥çŒœæµ‹åˆ° spring-boot-configuration-processoræ˜¯æ ¹æ®å±æ€§ç”Ÿæˆçš„ï¼Œä½†æ˜¯ enabled è¿™ä¸ªéå±æ€§ï¼Œæ‰€ä»¥æ— æ³•ç”Ÿæˆã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ starter çš„äººï¼Œæˆ‘ä»¬å¯ä»¥è¿½åŠ ä¸€ä¸ª additional-spring-configuration-metadata.json æ–‡ä»¶ï¼Œæ‰‹åŠ¨æ·»åŠ ç›¸åº”çš„æç¤ºï¼Œæ–‡ä»¶å†…å®¹ï¼š 12345678910&#123; &quot;properties&quot;: [ &#123; &quot;name&quot;: &quot;common.date-format.enabled&quot;, &quot;type&quot;: &quot;java.lang.Boolean&quot;, &quot;description&quot;: &quot;æ˜¯å¦å¼€å¯æ—¶é—´æ ¼å¼åŒ–&quot;, &quot;defaultValue&quot;: false &#125; ]&#125; ä½¿ç”¨æ•ˆæœï¼š æµ‹è¯•å®Œæ¯•ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå¯ä»¥å°†è‡ªå®šä¹‰çš„ starter å‘å¸ƒåˆ°å…¬å¸çš„ç§æœã€‚mvn deploy æ€»ç»“æœ¬æ–‡é€šè¿‡è®²è§£å®ç°ä¸€ä¸ªé¡¹ç›®æ—¶é—´å…¨å±€æ ¼å¼åŒ–åŠŸèƒ½ï¼Œå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª springboot starterï¼Œå½“ç„¶ starter åŠŸèƒ½ä¸ä»…é™å¦‚æ­¤ï¼Œå¯ä»¥è‡ªè¡Œè§¦ç±»æ—é€šæ‰©å±•ï¼Œæ¯”å¦‚é¡¹ç›®çš„ç™»å½•æ‹¦æˆªå™¨ã€é€šç”¨æ—¥å¿—ã€å…¨å±€å¼‚å¸¸å¤„ç†ç­‰å·¥ç¨‹éƒ½å¯ä»¥ä½œä¸º starter çš„ä¸€éƒ¨åˆ†æ¥å®ç°ï¼Œè¯»è€…è‹¥çœ‹å®Œæœ‰å¸®åŠ©å¹¶å®è·µåº”ç”¨ï¼Œå¯ä»¥è¯„è®ºç•™è¨€åº”ç”¨çš„åœºæ™¯ã€‚ ä»£ç ä¸‹è½½ https://github.com/Mosiki/learning-modules/tree/master/learning-springboot","tags":[{"name":"è‡ªå®šä¹‰SpringBootStarter","slug":"è‡ªå®šä¹‰SpringBootStarter","permalink":"http://nullpointer.pw/tags/%E8%87%AA%E5%AE%9A%E4%B9%89SpringBootStarter/"},{"name":"LocalDateTimeæ ¼å¼åŒ–","slug":"LocalDateTimeæ ¼å¼åŒ–","permalink":"http://nullpointer.pw/tags/LocalDateTime%E6%A0%BC%E5%BC%8F%E5%8C%96/"},{"name":"SpringBootStarterå®é™…åº”ç”¨","slug":"SpringBootStarterå®é™…åº”ç”¨","permalink":"http://nullpointer.pw/tags/SpringBootStarter%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8/"}]},{"title":"åˆ©ç”¨Springçš„@ConditionXXXæ³¨è§£å®ç°ç­–ç•¥æ¨¡å¼","date":"2020-04-29T12:55:11.000Z","path":"spring-condition-annotation.html","text":"åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰è¿™æ ·çš„ä¸€ç§å¸¸è§çš„åœºæ™¯ï¼Œæ¯”å¦‚æ ¹æ®ç¯å¢ƒçš„ä¸åŒï¼Œå‘çŸ­ä¿¡çš„æœåŠ¡ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯ä¾èµ–çŸ­ä¿¡æœåŠ¡çš„ç³»ç»Ÿè°ƒç”¨çš„éƒ½æ˜¯ç›¸åŒçš„æ¥å£ï¼Œè¿™æ ·å°±éœ€è¦é’ˆå¯¹ç¯å¢ƒæ¥åšåŒºåˆ†ï¼Œè°ƒç”¨ä¸åŒçš„çŸ­ä¿¡é€šé“æ¥å£ã€‚ä¸¾ä¾‹çš„è¿™ç§æƒ…å†µï¼Œä½ å¯èƒ½ä¼šæƒ³åˆ°ä½¿ç”¨ç­–ç•¥æ¨¡å¼çš„æ–¹å¼æ¥å®ç°ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ ä½†æ˜¯åªæœ‰ä¸¤ç§ç­–ç•¥è€Œä¸”åœ¨ä¸€ä¸ªç¯å¢ƒå½“ä¸­ï¼Œåªä¼šæœ‰ä¸€ç§å›ºå®šç­–ç•¥å¯ä»¥ç”Ÿæ•ˆçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç­–ç•¥æ¨¡å¼æœªå…è¿‡äºéº»çƒ¦ï¼Œæœ¬æ–‡å°¤å…¶é€‚åˆç§æœ‰åŒ–é¡¹ç›®éƒ¨ç½²ï¼Œä¼šæ ¹æ®ç§æœ‰åŒ–ç¯å¢ƒæ‰§è¡Œä¸åŒç­–ç•¥çš„æƒ…å†µã€‚ æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢ï¼šhttp://nullpointer.pw/spring-condition-annotation.html åº”ç”¨åœºæ™¯æœ¬æ–‡è®²è§£å¦‚ä½•ä½¿ç”¨@ConditionXXX ç³»åˆ—æ³¨è§£æ¥æ›´æ–¹ä¾¿åœ°å®ç°è¿™ç§ç­–ç•¥é€‰æ‹©çš„åœºæ™¯ã€‚ @ConditionXXX ç³»åˆ—æ³¨è§£æ˜¯ Spring æä¾›çš„ä¸€ç»„æ³¨è§£ï¼Œä¸‹é¢è¡¨æ ¼åˆ—å‡ºæ‰€æœ‰çš„æ³¨è§£ä»¥åŠå¯¹åº”çš„ä½œç”¨ï¼Œå¸¸ç”¨çš„æ³¨è§£é€šè¿‡â˜†æ ‡æ³¨ ä¸Šæ–‡ä¸­çš„ä¾‹å­ä¸­ï¼Œå¤šä¸ªç­–ç•¥åŒä¸€ä¸ªç¯å¢ƒå…¶å®åªéœ€è¦åŠ è½½ä¸€ä¸ªé€‚åˆçš„ç­–ç•¥å³å¯ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦åŠ è½½ç”¨ä¸ä¸Šçš„å…¶ä»–ç­–ç•¥ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œåªå–æ‰€éœ€çš„ç­–ç•¥å°±è¶³çŸ£ï¼Œå®ç°èµ·æ¥ç›¸è¾ƒäºç­–ç•¥æ¨¡å¼æ–¹ä¾¿ä¸æ˜¯ä¸€ç‚¹ç‚¹ã€‚ å¸¸ç”¨æ³¨è§£ æ³¨è§£ ä½œç”¨ å¸¸ç”¨ @ConditionalOnProperty å½“æŒ‡å®šçš„å±æ€§æœ‰æŒ‡å®šçš„å€¼æ—¶è¿›è¡Œå®ä¾‹åŒ– â˜† @ConditionalOnMissingBean å½“å®¹å™¨é‡Œæ²¡æœ‰æŒ‡å®š Bean çš„æ¡ä»¶ä¸‹è¿›è¡Œå®ä¾‹åŒ–ã€‚ â˜† @ConditionalOnExpression åŸºäº SpEL è¡¨è¾¾å¼çš„æ¡ä»¶åˆ¤æ–­ï¼Œå¤šæ¡ä»¶ â˜† @ConditionalOnBean ä»…ä»…åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨æŸä¸ªå¯¹è±¡æ—¶ï¼Œæ‰ä¼šå®ä¾‹åŒ–ä¸€ä¸ª Beanã€‚ ä»¥ä¸åŒç¯å¢ƒå‘é€çŸ­ä¿¡ä¸ºä¾‹ï¼Œè¿›è¡Œä»£ç å®ç° (å½“ç„¶è¿™ä¸ªä¾‹å­æœ‰ç‚¹å¼ºä¸Šçš„å¼‚å‘³ï¼Œä¸è¿‡ç”¨äºæ¥è§£é‡Šè¿™å‡ ä¸ªä¸»é”®çš„åŠŸç”¨å´æ˜¯å¾ˆåˆé€‚ï¼Œå…·ä½“åº”ç”¨åœºæ™¯è¯·è§¦ç±»æ—é€š)ã€‚ ç¤ºä¾‹å®ç°é¦–å…ˆä¼šå®šä¹‰ä¸€ä¸ªç”¨äºå‘é€çŸ­ä¿¡çš„æ¥å£ï¼Œå› ä¸ºä¼šæœ‰å¤šç§ç¯å¢ƒï¼Œå¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒï¼Œæ‰€ä»¥ä¼šæœ‰ç›¸åº”ç¯å¢ƒçš„å®ç°ç±»ã€‚ 123public interface SmsService &#123; Boolean send(String mobile, String content);&#125; å®šä¹‰å¤šç¯å¢ƒé…ç½®ç±» 1234- application.yml- application-dev.yml- application-prod.yml- application-test.yml åœ¨ application-xxx.yml ä¸­åˆ†åˆ«æŒ‡å®šé…ç½®ï¼Œå¦‚ application-dev.yml 12custom: env: dev å®ç°æ¯ä¸ªç¯å¢ƒçš„å…·ä½“çŸ­ä¿¡å‘é€å®ç°ç±»ï¼Œä½¿ç”¨åˆ°äº† @ConditionalOnProperty(name = &#123;&quot;custom.env&quot;&#125;, havingValue = &quot;test&quot;) ï¼Œå«ä¹‰å°±æ˜¯è¯»å–é…ç½®æ–‡ä»¶ä¸­ key ä¸º custom.env çš„é…ç½®ï¼Œå¦‚æœå€¼ä¸º havingValue å±æ€§æ‰€æŒ‡å®šçš„å€¼ testï¼Œåˆ™ä¼šå®ä¾‹åŒ–è¿™ä¸ª Beanï¼Œå¦åˆ™ä¸è¿›è¡Œå®ä¾‹åŒ–ã€‚ ä»¥ä¸‹å…¶ä»–ç¯å¢ƒçš„åŒç†ï¼Œä¸å†èµ˜è¿°ã€‚ 123456789101112131415/** * æµ‹è¯•ç¯å¢ƒçŸ­ä¿¡é€šé“ * * @author WeJan * @since 2020-04-28 */@Service@ConditionalOnProperty(name = &#123;&quot;custom.env&quot;&#125;, havingValue = &quot;test&quot;)public class TestSmsServiceImpl implements SmsService &#123; @Override public Boolean send(String mobile, String content) &#123; System.out.println(&quot;çŸ­ä¿¡å‘é€æˆåŠŸ, by TestSmsServiceImpl&quot;); return true; &#125;&#125; 12345678910111213141516/** * å¼€å‘ç¯å¢ƒçŸ­ä¿¡é€šé“ * * @author WeJan * @since 2020-04-28 */@Service@ConditionalOnProperty(name = &#123;&quot;custom.env&quot;&#125;, havingValue = &quot;dev&quot;)public class DevSmsServiceImpl implements SmsService &#123; @Override public Boolean send(String mobile, String content) &#123; System.out.println(&quot;çŸ­ä¿¡å‘é€æˆåŠŸ, by DevSmsServiceImpl&quot;); return true; &#125;&#125; 12345678910111213141516/** * ç”Ÿäº§ç¯å¢ƒçŸ­ä¿¡é€šé“ * * @author WeJan * @since 2020-04-28 */@Service@ConditionalOnProperty(name = &#123;&quot;custom.env&quot;&#125;, havingValue = &quot;prod&quot;)public class ProdSmsServiceImpl implements SmsService &#123; @Override public Boolean send(String mobile, String content) &#123; System.out.println(&quot;çŸ­ä¿¡å‘é€æˆåŠŸ, by ProdSmsServiceImpl&quot;); return true; &#125;&#125; æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½¿ç”¨ @ConditionalOnProperty ä¾¿è¶³ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çš„éœ€æ±‚ï¼Œä½†è¿˜æ˜¯æœ‰ä¾‹å¤–æƒ…å†µï¼Œéœ€è¦è®¾ç½®å…œåº•ç­–ç•¥ï¼Œå¯ä»¥é€šè¿‡ @ConditionalOnMissingBean æ¥å®ç°ï¼Œè¯¥æ³¨è§£ value å±æ€§ä¸­å¯¹åº”çš„ç±»è‹¥éƒ½æœªæ›¾å®ä¾‹åŒ–ï¼Œåˆ™å®ä¾‹åŒ–å½“å‰çš„ Beanã€‚ 12345678910111213141516** * é»˜è®¤çŸ­ä¿¡é€šé“ * * @author WeJan * @since 2020-04-28 */@Service@ConditionalOnMissingBean(value = &#123;DevSmsServiceImpl.class, TestSmsServiceImpl.class, ProdSmsServiceImpl.class&#125;)public class DefaultSmsServiceImpl implements SmsService &#123; @Override public Boolean send(String mobile, String content) &#123; System.out.println(&quot;çŸ­ä¿¡å‘é€æˆåŠŸ, by DefaultSmsServiceImpl&quot;); return true; &#125;&#125; æµ‹è¯•ä¸€ç•ªä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œä½¿ç”¨ @ActiveProfiles æ³¨è§£æŒ‡å®šå½“å‰æµ‹è¯•ä½¿ç”¨çš„é…ç½®ç¯å¢ƒï¼Œ 12345678910111213@RunWith(SpringRunner.class)//@ActiveProfiles(value = &quot;prod&quot;)//@ActiveProfiles(value = &quot;dev&quot;)@ActiveProfiles(value = &quot;test&quot;)@SpringBootTest(classes = SpringApp.class)public class SmsServiceTest &#123; @Resource private SmsService smsService; @Test public void testSend() &#123; smsService.send(&quot;13333333333&quot;, &quot;Test&quot;); &#125;&#125; æµ‹è¯•å½“æ¿€æ´»ç¯å¢ƒä¸º dev æ—¶ï¼Œæ§åˆ¶å°è¾“å‡ºï¼Œå…¶ä»–ç¯å¢ƒä¸å†æ¼”ç¤ºï¼Œè¯»è€…å¯è‡ªè¡Œå°è¯•ã€‚ 1çŸ­ä¿¡å‘é€æˆåŠŸ, by DevSmsServiceImpl","tags":[{"name":"ConditionalOnPropertyæ³¨è§£çš„åº”ç”¨","slug":"ConditionalOnPropertyæ³¨è§£çš„åº”ç”¨","permalink":"http://nullpointer.pw/tags/ConditionalOnProperty%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%BA%94%E7%94%A8/"},{"name":"ConditionalOnMissingBeanæ³¨è§£çš„åº”ç”¨","slug":"ConditionalOnMissingBeanæ³¨è§£çš„åº”ç”¨","permalink":"http://nullpointer.pw/tags/ConditionalOnMissingBean%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%BA%94%E7%94%A8/"},{"name":"ConditionalOnExpressionæ³¨è§£çš„åº”ç”¨","slug":"ConditionalOnExpressionæ³¨è§£çš„åº”ç”¨","permalink":"http://nullpointer.pw/tags/ConditionalOnExpression%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%BA%94%E7%94%A8/"}]},{"title":"é¡¹ç›®äºŒè¿›åˆ¶æ ‡ä½å®æˆ˜åº”ç”¨","date":"2020-04-23T12:37:10.000Z","path":"binary-tag.html","text":"å››æœˆå·²è¿‡å¤§åŠï¼Œç´§æ€¥è¡¥ä¸Šä¸€ç¯‡åšå®¢ï¼Œæœ¬æ–‡å°†è®²è§£äºŒè¿›åˆ¶çŠ¶æ€ä½åœ¨é¡¹ç›®ä¸­çš„å®æˆ˜åº”ç”¨ï¼ŒæŠ€æœ¯åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨äºŒçº§åˆ¶ä¸ä½è¿ç®—å®ç°ã€‚è¿™ç§æ–¹å¼çš„åº”ç”¨åœºæ™¯è¿˜æ˜¯æ¯”è¾ƒå¹¿æ³›ï¼Œå¸Œæœ›å¯¹ä½ æœ‰ç”¨~ æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢ï¼šhttp://nullpointer.pw/binary-tag.html æ›´æ–°æ—¥å¿—ï¼š2020-11-22 11:00:43: å¢åŠ æ•°æ®åº“æŸ¥è¯¢è¿‡æ»¤ç¤ºä¾‹ å‰è¨€ä¸¾ä¸ªæ —å­ï¼Œéœ€è¦ä¿å­˜è¿™äº›çŠ¶æ€ä½ ä¼šæ€ä¹ˆè®¾è®¡è¡¨å‘¢ï¼Ÿ ä½ å¯èƒ½ä¼šæƒ³ï¼Œè¿™å¾ˆç®€å•å•Šï¼Œé’ˆå¯¹ä¸€ä¸ªå¼€å…³åŠ ä¸€ä¸ªçŠ¶æ€å­—æ®µå˜›~ å‘µå‘µçœŸæ˜¯å¤ªå¹´è½»ï¼Œè¿™æ ·å¼€å‘ä¸Šçº¿åï¼Œäº§å“åˆè¦å¢åŠ æ–°çš„æé†’æ–¹å¼ï¼Œå¦‚å›¾ éš¾ä¸æˆï¼Œå†åŠ çŠ¶æ€å­—æ®µï¼Ÿ å¯ä»¥å‘ç°ï¼Œä»¥ä¸Šè¿™ç§åšæ³•ï¼Œåœ¨éœ€æ±‚æ”¹åŠ¨æ—¶å°±ä¼šå¾ˆè›‹ç–¼ï¼Œè€Œä¸”è¿™åªæ˜¯æé†’çš„å¼€å…³è®¾ç½®ï¼Œè‹¥æœ‰å…¶ä»–ç±»å‹çš„å¼€å…³è®¾ç½®å°±æ›´åŠ éº»çƒ¦ã€‚ æ‰€ä»¥è¿™é‡Œå¼•å…¥ä»Šå¤©çš„ä¸»é¢˜ï¼ŒäºŒè¿›åˆ¶çŠ¶æ€ä½ã€‚ äºŒè¿›åˆ¶ä¸ä½è¿ç®—è¿™æ ·æ•°æ®åº“åªéœ€è¦æ·»åŠ ä¸€ä¸ªæ•´æ•°å­—æ®µä¿å­˜å³å¯ã€‚ä½¿ç”¨2çš„æ¬¡å¹‚å€¼ä»£è¡¨ä¸€ç§çŠ¶æ€ï¼Œæ¯”å¦‚ä½¿ç”¨ 1(2Âº) ä»£è¡¨å¼€å¯ç«™å†…æé†’ï¼Œ2(2Â¹) ä»£è¡¨ å¼€å¯é‚®ä»¶æé†’ï¼Œ4(2Â²) ä»£è¡¨å¼€å¯çŸ­ä¿¡æé†’ç­‰ç­‰ï¼Œè¿™æ ·è¿™ä¸ªçŠ¶æ€ä½å­—æ®µåªéœ€è¦å­˜å‚¨ 7å³å¯è¡¨ç¤ºå·²å¼€å¯è¿™å‡ é¡¹æé†’ã€‚å› ä¸º 7 ä¸è¿™å‡ ä¸ªçŠ¶æ€å€¼è¿›è¡Œä¸è¿ç®—æ—¶éƒ½ç­‰äºçŠ¶æ€å€¼æœ¬èº«ï¼Œå¦‚æœä¸ç­‰äºåˆ™ä¸ºå¼€å¯ã€‚ é¦–å…ˆå›é¡¾ä¸€ä¸‹äºŒè¿›åˆ¶ä¸ä½è¿ç®—çš„åŸºç¡€çŸ¥è¯† åè¿›åˆ¶ äºŒè¿›åˆ¶ 0 0000 0000 1 0000 0001 2 0000 0010 3 0000 0011 4 0000 0100 5 0000 0101 6 0000 0110 7 0000 0111 æˆ–è¿ç®—ï¼šbitä½ä¸Šæœ‰1ä¸º1ã€‚ä¾‹å¦‚ï¼š2 | 1 == 0000 0010 | 0000 0001 == 3ä¸è¿ç®—ï¼šbitä½éƒ½ä¸º1æ‰ä¸º1ã€‚ ä¾‹å¦‚ 5 &amp; 2 == 0000 0101 &amp; 0000 0010 == 0 å®é™…åº”ç”¨ä»¥ä¸Šæ–‡æé†’å¼€å…³ä¸ºä¾‹ï¼šç°åœ¨æ‰“å¼€ ç«™å†…æé†’ï¼Œä¸æ‰“å¼€é‚®ä»¶æé†’ï¼Œæ‰“å¼€çŸ­ä¿¡æé†’ï¼Œæœ€ç»ˆçš„å€¼çš„è®¡ç®—æ–¹æ³•ä¸ºï¼š1 | 4 = 5 1234567891011/** * è®¡ç®—çŠ¶æ€ä½ * tags: å·²æœ‰çŠ¶æ€ä½ * value: éœ€è¦æ·»åŠ çš„çŠ¶æ€å€¼ */public static int addTag(int tags, int... values) &#123; for (int value : values) &#123; tags |= value; &#125; return tags;&#125; ç°åœ¨åˆ¤æ–­æ˜¯å¦æ‰“å¼€äº†ç«™å†…æé†’ 5 &amp; 1 == 0000 0101 &amp; 0000 0001 == 1 12345678/** * æ˜¯å¦åŒ…å«çŠ¶æ€ä½ * tags: å·²æœ‰çŠ¶æ€ä½ * value: éœ€è¦åˆ¤æ–­çš„çŠ¶æ€å€¼ */public static boolean hasTag(int tags, int value) &#123; return (tags &amp; value) == value;&#125; ç°åœ¨è¦å…³é—­ç«™å†…æé†’ 5 ^ 1 == 0000 0101 ^ 0000 0001 == 4 123456789/** * ç§»é™¤çŠ¶æ€ä½ * tags: å·²æœ‰çŠ¶æ€ä½ * value: éœ€è¦ç§»é™¤çš„çŠ¶æ€å€¼ */public static int delTag(int tags, int value) &#123; if ((tags &amp; value) != value) return tags; return tags ^ value;&#125; æµ‹è¯•ï¼š 12345678910public static void main(String[] args) &#123; int tag = addTag(0, 1, 4); System.out.println(tag); // 5 System.out.println(hasTag(tag, 1)); // true System.out.println(hasTag(tag, 2)); // false System.out.println(hasTag(tag, 4)); // true tag = delTag(tag, 4); System.out.println(tag); // 1 System.out.println(hasTag(tag, 4)); // false&#125; ä½¿ç”¨ä¼˜åŒ–åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œè¿™äº›çŠ¶æ€å¯ä»¥é€šè¿‡æšä¸¾å€¼è¿›è¡Œå°è£…èµ·æ¥ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031@Getterpublic enum NotifyTypeEnum &#123; IN_MAIL(1, &quot;ç«™å†…ä¿¡æé†’&quot;, 1), EMAIL(2, &quot;é‚®ä»¶æé†’&quot;, 2), SMS(3, &quot;çŸ­ä¿¡æé†’&quot;, 4), ; // æšä¸¾å€¼ private Integer code; // æšä¸¾æè¿° private String desc; // çŠ¶æ€ä½ private Integer tag; NotifyTypeEnum(Integer code, String desc, Integer tag) &#123; this.code = code; this.desc = desc; this.tag = tag; &#125; public boolean hasTag(int tags) &#123; return (tags &amp; this.tag) == tag; &#125; public static void main(String[] args) &#123; int tags = 5; System.out.println(NotifyTypeEnum.IN_MAIL.hasTag(tags)); // true System.out.println(NotifyTypeEnum.EMAIL.hasTag(tags)); // false System.out.println(NotifyTypeEnum.SMS.hasTag(tags)); // true &#125;&#125; æ•°æ®åº“çŠ¶æ€ç­›é€‰è¯„è®ºä¸­æœ‰åŒå­¦æåˆ° å¦‚æœç°åœ¨æœ‰éœ€æ±‚ éœ€è¦è¿‡æ»¤å…¶ä¸­ä¸€ä¸ªçŠ¶æ€å€¼ æ€ä¹ˆæ“ä½œ å¯¹äºè¿™ä¸ªé—®é¢˜å…¶å®ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ï¼Œå› ä¸º SQL ä¹Ÿæ˜¯æ”¯æŒä½è¿ç®—çš„ã€‚æ¯”å¦‚æœ‰ä¸ªè¡¨å­—æ®µåç§°ä¸º notice_flagsï¼Œç°åœ¨è¦ç­›é€‰æ‰€æœ‰å¼€å¯äº† EMAIL æé†’æ–¹å¼çš„æ‰€æœ‰è®°å½•ï¼ŒSQL ä¸­å¯ä»¥è¿™ä¹ˆå†™(#{flag} ä¸º EMAIL çš„ flag å€¼) 1select * from table_name where (notice_flags &amp; #&#123;flag&#125; != 0) è¿™æ¡ SQL ä¼šè¿›è¡Œä¸è¿ç®—ï¼ŒæŸ¥è¯¢å‡ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è®°å½•ã€‚ å‚è€ƒ java ç¼–ç¨‹ä½¿ç”¨äºŒè¿›åˆ¶è¿›è¡ŒçŠ¶æ€æ§åˆ¶ æ•°æ®åº“è®¾è®¡â€”â€”å¦‚ä½•åˆ©ç”¨ä¸€ä¸ªæ•´æ•°å‹å­—æ®µä¸ºç”¨æˆ·æ‰“ä¸Š 63 ä¸ªæ ‡","tags":[{"name":"äºŒè¿›åˆ¶æ ‡ä½ä½¿ç”¨","slug":"äºŒè¿›åˆ¶æ ‡ä½ä½¿ç”¨","permalink":"http://nullpointer.pw/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%A0%87%E4%BD%8D%E4%BD%BF%E7%94%A8/"},{"name":"äºŒè¿›åˆ¶çŠ¶æ€ä½ä½¿ç”¨","slug":"äºŒè¿›åˆ¶çŠ¶æ€ä½ä½¿ç”¨","permalink":"http://nullpointer.pw/tags/%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%8A%B6%E6%80%81%E4%BD%8D%E4%BD%BF%E7%94%A8/"}]},{"title":"ã€å¯¹ä½ æ— ç”¨è¯·ææˆ‘ç³»åˆ—ã€‘å¿…ä¼š Linux æŠ€å·§","date":"2020-03-28T10:46:37.000Z","path":"linux-command.html","text":"å‰è¨€æœ¬æ–‡éå•çº¯ç½‘ä¸Šä»‹ç» Linux å‘½ä»¤åŠå‚æ•°çš„é›·åŒæ–‡ç« ï¼Œè€Œæ˜¯çœŸæ­£åœ¨å®é™…å·¥ä½œä¸­èƒ½æ´¾ä¸Šç”¨åœºçš„ Linux å®ç”¨æŠ€å·§ã€‚ä¸»è¦ä»‹ç»æ—¥å¿—æ’æŸ¥ç›¸å…³çš„æŠ€å·§ï¼Œæå¸¦å¸¸è§çš„å…¶ä»– Linux æ“ä½œä»¥åŠ vim æŠ€å·§ã€‚ æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢ï¼šhttp://nullpointer.pw/linux-command.html æ—¥å¿—ç›¸å…³ï¼šåœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œç»å¸¸éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šé€šè¿‡æŸ¥çœ‹æ—¥å¿—çš„æ–¹å¼æ¥å®šä½ bug é—®é¢˜ï¼ŒæŒæ¡ä¸€å®šçš„æ—¥å¿—æ’æŸ¥æŠ€å·§åˆ™æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚æ˜æ˜æœ‰äº›å¯ä»¥é€šè¿‡å¾ˆåŸºç¡€çš„å‘½ä»¤å°±å¯ä»¥å®ç°ï¼Œä½†ç½‘ä¸Šæœ‰äº›äººååå–œæ¬¢ç‚«æŠ€ï¼Œæ•…ä½œé«˜æ·±å¼„å‡ºä¸€äº›ç‰¹åˆ«å¤æ‚çš„ç”¨æ³•æ¥å®Œæˆï¼Œå…¶å®çœŸçš„æ²¡æœ‰é‚£ç§å¿…è¦ã€‚æœ¬æ–‡åªè®²æœ€å¸¸ç”¨å®ç”¨çš„ç”¨æ³•ã€‚ ç¬”è€…æˆªå–äº†ä¸€äº›æ—¥å¿—ä½œä¸ºç¤ºä¾‹ï¼Œä»¥ä¾›è¯»è€…ç»ƒä¹ ã€‚ Tips: å‘½ä»¤ä¸­åŒ…å«äºåŒå¼•å· â€œ â€œ ä¸­çš„éƒ½æ˜¯å…³é”®å­— ç¤ºä¾‹æ—¥å¿—ç‚¹æˆ‘ä¸‹è½½ é™æ€æ—¥å¿—æŸ¥æ‰¾ æ ¹æ®å…³é”®å­—æŸ¥æ‰¾æ—¥å¿—1grep &quot;1584345069121&quot; info.log æ ¹æ®å…³é”®å­—æŸ¥æ‰¾æ—¥å¿—ï¼Œå¹¶æ˜¾ç¤ºæŸ¥æ‰¾ç»“æœé™„è¿‘ 5 è¡Œ(å‰5è¡Œä¸å5è¡Œ)æ—¥å¿—1grep &quot;1584345069121&quot; info.log -C5 æ ¹æ®å…³é”®å­—æŸ¥æ‰¾æ—¥å¿—ï¼Œå¹¶æ˜¾ç¤ºæŸ¥æ‰¾ç»“æœå (After)5 è¡Œæ—¥å¿— 1grep &quot;1584345069121&quot; info.log -A5 æ ¹æ®å…³é”®å­—æŸ¥æ‰¾æ—¥å¿—ï¼Œå¹¶æ˜¾ç¤ºæŸ¥æ‰¾ç»“æœå‰ (Before)5 è¡Œæ—¥å¿— 1grep &quot;1584345069121&quot; info.log -B5 æ ¹æ®å¤šä¸ªå…³é”®å­—æŸ¥æ‰¾æ—¥å¿—ï¼Œå¤šä¸ªå…³é”®å­—ä¸ºæˆ–å…³ç³»ï¼Œæ»¡è¶³å…¶ä¸­ä¸€ä¸ªæ¡ä»¶åˆ™åŒ¹é…ï¼Œå…³é”®å­—ä¹‹é—´ç”¨\\|åˆ†éš”ï¼Œè¡¨ç¤ºæˆ–1grep &quot;1584345069121\\|1584345066236&quot; info.log æ ¹æ®å¤šä¸ªå…³é”®å­—æŸ¥æ‰¾æ—¥å¿—ï¼Œéœ€è¦æ»¡è¶³å…¶ä¸­å…¨éƒ¨æ¡ä»¶æ‰åŒ¹é…1grep &quot;76953334&quot; info.log | grep &quot;1584349673402&quot; æŸ¥æ‰¾ä¸åŒ…å«å…³é”®å­—çš„æ—¥å¿—ï¼Œæ”¯æŒå¤šä¸ªå…³é”®å­—ï¼Œå…³é”®å­—ä¹‹é—´ç”¨\\|åˆ†éš”ï¼Œè¡¨ç¤ºæˆ– 1grep -v &quot;handle&quot; info.log æ ¹æ®å…³é”®å­— A æŸ¥æ‰¾ï¼Œå¹¶ä¸”è¿‡æ»¤åŒ…å«å…³é”®å­— B çš„æ—¥å¿—1grep &quot;76953334&quot; info.log | grep -v &quot;handle&quot; æ»šåŠ¨æ—¥å¿—æŸ¥æ‰¾ é™¤äº†ä»¥ä¸Šåœ¨é™æ€æ—¥å¿—ä¸­æŸ¥æ‰¾ä¹‹å¤–ï¼Œæœ‰æ—¶å€™è°ƒè¯•éœ€è¦çœ‹æŒ‡å®šæ—¥å¿—ï¼Œè€Œæ—¥å¿—åˆå­˜åœ¨æ»šåŠ¨åˆ·æ–°è¾ƒå¿«çš„æƒ…å†µï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡ grep ç›¸å…³æŠ€å·§å¯¹åˆ·æ–°çš„æ»šåŠ¨æ—¥å¿—è¿›è¡Œè¿‡æ»¤ç­›é€‰ï¼Œæ¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ã€‚ æ»šåŠ¨æ—¥å¿—ä¸­æ ¹æ®å…³é”®å­—æœç´¢æ—¥å¿—1tail -300f info.log | grep &quot;76953334&quot; æ»šåŠ¨æ—¥å¿—ä¸­æ ¹æ®ã€å…³é”®å­— Aã€‘æœç´¢æ—¥å¿—ï¼Œä¸”è¿‡æ»¤æ‰åŒ…å«ã€å…³é”®å­— Bã€‘çš„æ—¥å¿—1tail -300f info.log | grep &quot;76953334&quot; | grep -v &quot;2450&quot; è§£å‹ç¼©å‹ç¼©è§£å‹ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ä¸€äº›æ“ä½œï¼Œå¸¸è§çš„å‹ç¼©åŒ…å°±æ˜¯tar.gzä¸zipä¸¤ç§ï¼Œä¸‹æ–‡åˆ†åˆ«ä»‹ç»è¿™ä¸¤ç§æ ¼å¼çš„å‹ç¼©ä¸è§£å‹æ–¹å¼ã€‚ gzip å‹ç¼©æ–‡ä»¶æˆ–ç›®å½•ï¼Œå…·ä½“å‚æ•°å«ä¹‰è§å‚è€ƒé“¾æ¥1tar zcvf tempdir/ fileName.tar.gz è§£å‹ tar.gz æ ¼å¼ (gzip) å‹ç¼©åŒ… (ä¸å‹ç¼©å‘½ä»¤æ¯”è¾ƒåªæ˜¯å‚æ•° c æ”¹æˆäº† x)1tar zxvf fileName.tar.gz zip å‹ç¼©æ–‡ä»¶æˆ–ç›®å½•ï¼ˆ-r è¡¨ç¤ºåŒ…å«å­ç›®å½•ï¼‰1zip -r fileName.zip tempdir/ zip è§£å‹åˆ°æŒ‡å®šç›®å½•ï¼ˆ-o è¡¨ç¤ºé‡åæ–‡ä»¶è¦†ç›–æ—¶ä¸æç¤ºï¼Œå¯é€‰å‚æ•°ï¼‰1unzip -o fileName.zip -d tempdir2/ è¿›ç¨‹ç›¸å…³ å·¥ä½œä¸­å¶å°”ä¼šéœ€è¦çœ‹ä¸€ä¸‹åº”ç”¨è¿›ç¨‹çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä»€ä¹ˆæ—¶å€™å¯åŠ¨çš„ï¼Œå¯åŠ¨äº†å¤šä¹…è¿™äº›ä¿¡æ¯ï¼Œä»¥ä¸‹å‘½ä»¤å¯ä»¥å‘Šè¯‰ä½ ç­”æ¡ˆã€‚ æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨1netstat -l | grep 8080 æŸ¥çœ‹è¿›ç¨‹å¯åŠ¨æ—¶é—´1ps -p 8080 -o lstart æŸ¥çœ‹è¿›ç¨‹è¿è¡Œå¤šé•¿æ—¶é—´1ps -p 8080 -o etime VIM å°æŠ€å·§ åˆ—ä¸¾äº†å‡ ä¸ª VIM å°æŠ€å·§ï¼Œæ‰¹é‡æ³¨é‡Šè¡Œã€æ›¿æ¢æ“ä½œ æ‰¹é‡æ³¨é‡Šè¡Œ control + v è¿›å…¥åˆ—æ¨¡å¼ é€‰æ‹©è¦æ³¨é‡Šçš„åˆ— shift + i è¿›å…¥ INSERT æ¨¡å¼ è¾“å…¥# æˆ–å…¶ä»–ä½ æƒ³è¦æ’å…¥çš„æ–‡å­— è¿ç»­æŒ‰ä¸¤æ¬¡ ESC æ‰¹é‡å–æ¶ˆæ³¨é‡Šè¡Œ control + v è¿›å…¥åˆ—æ¨¡å¼ é€‰ä¸­è¦åˆ é™¤çš„æ–‡å­— d é”®è¿›è¡Œåˆ é™¤ æœç´¢å¹¶æ›¿æ¢å…³é”®å­— (INFO æ›¿æ¢ä¸º ERROR)å…¨æ–‡æ›¿æ¢ï¼š vim æ­£å¸¸æ¨¡å¼ä¸‹ :%s/INFO/ERROR å›è½¦ç¡®å®šå½“å‰è¡Œæ›¿æ¢ï¼švim æ­£å¸¸æ¨¡å¼ä¸‹ :s/INFO/ERROR å›è½¦ç¡®å®š æ‹·è´ä¸æ¸…ç©ºå…¨æ–‡å†…å®¹æ‹·è´å…¨æ–‡å†…å®¹ï¼švim æ­£å¸¸æ¨¡å¼ä¸‹ :%yæ¸…ç©ºå…¨æ–‡å†…å®¹ï¼švim æ­£å¸¸æ¨¡å¼ä¸‹ :%d ç³»ç»Ÿç›¸å…³ ä»è·¯å¾„ /home ä¸‹å¼€å§‹å‘ä¸‹éå†æŸ¥æ‰¾åç§°åŒ…å« nginx.conf çš„æ–‡ä»¶1find /home -name nginx.conf æŸ¥çœ‹ç£ç›˜å ç”¨1df -h æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ–‡ä»¶æˆ–ç›®å½•å ç”¨ç©ºé—´1du -h --max-depth=1 å…¶ä»–æ–‡ç«  ç¬”è€…å†™çš„ä¸€äº›åœ¨ Spring å®¹å™¨ä¸­å…³äºè®¾è®¡æ¨¡å¼çš„å®è·µæ–‡ç«  è®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼å®æˆ˜ è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼å®æˆ˜ è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼å®æˆ˜ è®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼å®æˆ˜ å‚è€ƒ æ¯å¤©ä¸€ä¸ª linux å‘½ä»¤ï¼ˆ28ï¼‰ï¼štar å‘½ä»¤ Linux zip å‘½ä»¤ åœ¨ Vim ä¸­ä¼˜é›…åœ°æŸ¥æ‰¾å’Œæ›¿æ¢ é‚£äº›é²œä¸ºäººçŸ¥çš„ Vim å°æŠ€å·§","tags":[]},{"title":"è®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼å®æˆ˜","date":"2020-03-05T14:18:10.000Z","path":"design-patterns-observer.html","text":"æœ¬æ–‡ä»‹ç»è§‚å¯Ÿè€…æ¨¡å¼åœ¨é¡¹ç›®ä¸­çš„å®é™…åº”ç”¨ã€‚ ç±»å‹ï¼šè¡Œä¸ºå‹æ¨¡å¼ æ„å›¾ï¼šä¸€å¯¹å¤šå…³ç³»ä¾èµ–çš„å¤šä¸ªå¯¹è±¡ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰ä¾èµ–çš„å¯¹è±¡éƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–° ä¸»è¦è§£å†³ï¼šé™ä½å¯¹è±¡é—´çš„å…³è”ä¾èµ–æ€§ è§‚å¯Ÿè€…æ¨¡å¼ä¹Ÿç§°ä¸ºå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œç›‘å¬å™¨æ¨¡å¼ã€‚ è®¾è®¡æ¨¡å¼ç³»åˆ—æ–‡ç« ç›®å½• è§’è‰² æŠ½è±¡ä¸»é¢˜ï¼ˆSubjectï¼‰è§’è‰²ï¼šæŠ½è±¡ä¸»é¢˜è§’è‰²æä¾›ç»´æŠ¤ä¸€ä¸ªè§‚å¯Ÿè€…å¯¹è±¡èšé›†çš„æ“ä½œæ–¹æ³•ï¼Œå¯¹èšé›†çš„å¢åŠ ã€åˆ é™¤ç­‰ã€‚å…·ä½“ä¸»é¢˜ï¼ˆConcreteSubjectï¼‰è§’è‰²ï¼šå°†æœ‰å…³çŠ¶æ€å­˜å…¥å…·ä½“çš„è§‚å¯Ÿè€…å¯¹è±¡ï¼›åœ¨å…·ä½“ä¸»é¢˜çš„å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œç»™æ‰€æœ‰ç™»è®°è¿‡çš„è§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ã€‚å…·ä½“ä¸»é¢˜è§’è‰²è´Ÿè´£å®ç°æŠ½è±¡ä¸»é¢˜ä¸­èšé›†çš„ç®¡ç†æ–¹æ³•ã€‚æŠ½è±¡è§‚å¯Ÿè€…ï¼ˆObserverï¼‰è§’è‰²ï¼šä¸ºå…·ä½“è§‚å¯Ÿè€…æä¾›ä¸€ä¸ªæ›´æ–°æ¥å£ã€‚å…·ä½“è§‚å¯Ÿè€…ï¼ˆConcreteObserverï¼‰è§’è‰²ï¼šå­˜å‚¨ä¸ä¸»é¢˜ç›¸å…³çš„è‡ªæ´½çŠ¶æ€ï¼Œå®ç°æŠ½è±¡è§‚å¯Ÿè€…æä¾›çš„æ›´æ–°æ¥å£ã€‚ UML Java æä¾›è§‚å¯Ÿè€…æ¨¡å¼çš„æ”¯æŒä¸€èˆ¬åœ¨çœŸå®é¡¹ç›®ä¹‹ä¸­ï¼Œä¸ä¼šå®Œå…¨æ‰‹åŠ¨å®ç°ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼ï¼Œå› ä¸ºåœ¨ JAVA è¯­è¨€çš„ java.util åº“é‡Œé¢ï¼Œå·²ç»æä¾›äº†ä¸€ä¸ª Observable ç±»ä»¥åŠä¸€ä¸ª Observer æ¥å£ï¼Œæ„æˆ JAVA è¯­è¨€å¯¹è§‚å¯Ÿè€…æ¨¡å¼çš„æ”¯æŒã€‚ç›´æ¥ä½¿ç”¨æä¾›çš„ util å³å¯ã€‚ 1234567891011121314151617181920212223public class ConcreteObserver implements Observer &#123; @Override public void update(Observable o, Object arg) &#123; System.out.println(&quot;æ¥æ”¶åˆ°æ›´æ–°&quot;); &#125;&#125;public class ConcreteSubject extends Observable &#123; public void change() &#123; setChanged(); this.notifyObservers(); &#125;&#125;public class Test &#123; public static void main(String[] args) &#123; ConcreteObserver concreteObserver = new ConcreteObserver(); ConcreteSubject subject = new ConcreteSubject(); subject.addObserver(concreteObserver); subject.change(); &#125;&#125; å®æˆ˜é™¤äº† Java è‡ªèº« æä¾›çš„è§‚å¯Ÿè€…æ¨¡å¼æ”¯æŒå¤–ï¼ŒGuava ä¹ŸåŸºäºè§‚å¯Ÿè€…æ¨¡å¼å®ç°çš„ ç”Ÿäº§/æ¶ˆè´¹æ¨¡å‹ï¼Œåœ¨ä½¿ç”¨ä¸Šï¼Œæ¯” Observable ç›¸å¯¹ç®€å•ï¼Œå¦‚æœéœ€è¦è®¢é˜…æ¶ˆæ¯åªéœ€è¦åœ¨æ–¹æ³•ä¸Šæ·»åŠ  @Subscribe æ³¨è§£å³å¯ã€‚ä½¿ç”¨ EventBus çš„ post æ–¹æ³•åˆ†å‘äº‹ä»¶ç»™æ¶ˆè´¹è€…ã€‚ æœ¬æ–‡ä»¥ç”¨æˆ·æ³¨å†Œä¸ºä¾‹ï¼Œå½“ç”¨æˆ·æ³¨å†Œå®Œæˆåï¼Œä¹‹åå¯èƒ½ä¼šæœ‰ä¸€ç³»åˆ—çš„è€—æ—¶æ“ä½œï¼Œæ¯”å¦‚å‘é€æ¶ˆæ¯é€šçŸ¥ï¼ŒåŒæ­¥æ•°æ®åˆ°ç¼“å­˜ç­‰æ“ä½œã€‚ä¸ºäº†ç»™ç”¨æˆ·æä¾›å¥½çš„ä½“éªŒï¼Œè¿™é‡Œä½¿ç”¨ EventBus æ¥è¿›è¡Œå¼‚æ­¥åŒ–ã€‚ å®šä¹‰æŠ½è±¡ä¸»é¢˜123456789public abstract class AbstractProducer&lt;T&gt; &#123; public static final AsyncEventBus eventBus = new AsyncEventBus(&quot;_event_async_&quot;, Executors.newFixedThreadPool(4)); public void registerAsyncEvent(EventConsumer consumer) &#123; eventBus.register(consumer); &#125; public abstract void post(T event);&#125; å®šä¹‰æŠ½è±¡è§‚å¯Ÿè€…123public interface EventConsumer&lt;T&gt; &#123; void consume(T event);&#125; å°è£… Event äº‹ä»¶å¯¹è±¡Event äº‹ä»¶å¯¹è±¡ç”¨äºäº‹ä»¶å®£å‘æ—¶å‚æ•°ä¼ é€’ä½¿ç”¨ã€‚ 12345678910111213@Datapublic class UserRegisterEvent &#123; private UserDto userDto;&#125;@Data@ToString@AllArgsConstructorpublic class UserDto &#123; private Long id; private String name; private LocalDateTime registerTime;&#125; å®šä¹‰å…·ä½“çš„ä¸»é¢˜ä¸è§‚å¯Ÿè€…å¯¹è±¡1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253// ä¸»é¢˜å¯¹è±¡ï¼Œæä¾›æ³¨å†Œä¸»é¢˜æ–¹æ³•@Componentpublic class UserRegisterProducer extends AbstractProducer&lt;UserRegisterEvent&gt; &#123; @Override public void post(UserRegisterEvent event) &#123; eventBus.post(event); &#125;&#125;// è§‚å¯Ÿè€…å¯¹è±¡ï¼Œç›‘å¬ä¸»é¢˜äº‹ä»¶@Componentpublic class UserRegisterNotifyConsumer implements EventConsumer&lt;UserRegisterEvent&gt;, InitializingBean &#123; @Resource private UserRegisterProducer userRegisterProducer; @Override @Subscribe // ç›‘å¬äº‹ä»¶ public void consume(UserRegisterEvent event) &#123; System.out.println(&quot;æ¥æ”¶åˆ°ç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼Œå¼€å§‹æ¨é€é€šçŸ¥&quot;); System.out.println(event); System.out.println(&quot;æ¥æ”¶åˆ°ç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼Œé€šçŸ¥æ¨é€å®Œæ¯•&quot;); &#125; @Override public void afterPropertiesSet() &#123; userRegisterProducer.registerAsyncEvent(this); &#125;&#125;// è§‚å¯Ÿè€…å¯¹è±¡ï¼Œç›‘å¬ä¸»é¢˜äº‹ä»¶@Componentpublic class UserRegisterSyncCacheConsumer implements EventConsumer&lt;UserRegisterEvent&gt;, InitializingBean &#123; @Resource private UserRegisterProducer userRegisterProducer; @Override public void afterPropertiesSet() &#123; userRegisterProducer.registerAsyncEvent(this); &#125; @Override @Subscribe // ç›‘å¬äº‹ä»¶ public void consume(UserRegisterEvent event) &#123; System.out.println(&quot;æ¥æ”¶åˆ°ç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼Œå¼€å§‹åŒæ­¥ Cache&quot;); System.out.println(event.getUserDto()); System.out.println(&quot;æ¥æ”¶åˆ°ç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼ŒåŒæ­¥ Cache å®Œæ¯•&quot;); &#125;&#125; æ³¨æ„ï¼Œè§‚å¯Ÿè€…å¯¹è±¡éœ€è¦åœ¨ç±»è¿›è¡Œå®ä¾‹åŒ–çš„æ—¶å€™ï¼Œè¿›è¡Œæ³¨å†Œäº‹ä»¶ï¼Œæ‰€ä»¥å®ç°äº† InitializingBean æ¥å£ï¼Œç›‘å¬äº‹ä»¶æ¶ˆæ¯ï¼Œéœ€è¦åœ¨ç›‘å¬æ–¹æ³•ä¸Šæ·»åŠ  @Subscribe æ³¨è§£ã€‚ æµ‹è¯•12345678910111213@RunWith(SpringRunner.class)@SpringBootTestpublic class UserRegisterProducerTest &#123; @Resource private UserRegisterProducer userRegisterProducer; @Test public void post() &#123; UserRegisterEvent event = new UserRegisterEvent(); event.setUserDto(new UserDto(1L, &quot;å¼ ä¸‰&quot;, LocalDateTime.now())); userRegisterProducer.post(event); &#125;&#125; ç»“æœè¾“å‡ºï¼š 123456æ¥æ”¶åˆ°ç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼Œå¼€å§‹æ¨é€é€šçŸ¥æ¥æ”¶åˆ°ç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼Œå¼€å§‹åŒæ­¥ CacheUserDto(id=1, name=å¼ ä¸‰, registerTime=2020-03-05T22:12:26.386)æ¥æ”¶åˆ°ç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼ŒåŒæ­¥ Cache å®Œæ¯•UserRegisterEvent(userDto=UserDto(id=1, name=å¼ ä¸‰, registerTime=2020-03-05T22:12:26.386))æ¥æ”¶åˆ°ç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼Œé€šçŸ¥æ¨é€å®Œæ¯• å› ä¸ºè§‚å¯Ÿè€…æ¨¡å¼æ˜¯æ— æ³•æ§åˆ¶æ¶ˆè´¹é¡ºåºçš„ï¼Œå¯èƒ½æ¯æ¬¡çš„è¾“å‡ºç»“æœéƒ½æ˜¯ä¸ä¸€è‡´çš„ã€‚ ç¤ºä¾‹ä»£ç  https://github.com/Mosiki/learning-modules/tree/master/learning-designpatterns å‚è€ƒ https://juejin.im/post/5bcf53f351882577e5120b99 https://www.cnblogs.com/java-my-life/archive/2012/05/16/2502279.html","tags":[]},{"title":"è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼å®æˆ˜","date":"2020-03-03T23:29:43.000Z","path":"design-patterns-chain-responsibility.html","text":"æœ¬æ–‡ä»¥ç”µå•†ç³»ç»Ÿè®¢å•é‡‘é¢è®¡ç®—ä¸ºä¾‹ï¼Œç”µå•†è®¢å•æœ€ç»ˆçš„é‡‘é¢å¯èƒ½æ˜¯è¿™æ ·çš„ åº”æ”¯ä»˜é‡‘é¢=è®¢å•é‡‘é¢-ä¼˜æƒ åˆ¸ä¼˜æƒ é‡‘é¢-ä¿ƒé”€æ´»åŠ¨ä¼˜æƒ é‡‘é¢-ä¼šå‘˜æƒç›Šä¼˜æƒ é‡‘é¢ å½“ç„¶ä¹Ÿæœ‰å¯èƒ½è¿˜ä¼šå¢åŠ å…¶ä»–çš„è®¡ç®—æ­¥éª¤ï¼Œä½¿ç”¨è´£ä»»é“¾æ¨¡å¼æ¥å®ç°è®¢å•é‡‘é¢è®¡ç®—ï¼Œè‹¥å¢åŠ äº†å…¶ä»–è®¡ç®—æ­¥éª¤ï¼Œç›´æ¥å°†æ­¥éª¤åŠ å…¥åˆ°é“¾ä¸­å³å¯ï¼Œè€Œæ— éœ€æ”¹åŠ¨ä»¥å‰çš„ä»£ç ï¼Œæœ€å¤§ç¨‹åº¦å‡å°å‡ºé”™çš„å¯èƒ½æ€§ã€‚è´£ä»»é“¾åˆ†ä¸ºçº¯è´£ä»»é“¾ä¸ä¸çº¯è´£ä»»é“¾ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¾ˆå°‘æœ‰çº¯çš„è´£ä»»é“¾ï¼Œæ‰€è°“çº¯çš„è´£ä»»é“¾ï¼Œå°±æ˜¯å•ä¸ªé“¾ä¸Šå¤„ç†å™¨è¦ä¹ˆç‹¬ç«‹å¤„ç†ï¼Œè¦ä¹ˆå¤„ç†ä¸äº†äº¤ç»™ä¸‹ä¸€ä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç†ã€‚ è®¾è®¡æ¨¡å¼ç³»åˆ—æ–‡ç« ç›®å½• ç±»å‹ï¼šè¡Œä¸ºå‹æ¨¡å¼ æ„å›¾ï¼šä¸ºè¯·æ±‚åˆ›å»ºäº†ä¸€ä¸ªæ¥æ”¶æ­¤æ¬¡è¯·æ±‚å¯¹è±¡çš„é“¾ï¼Œè®©è¯·æ±‚æ²¿ç€é“¾ä¼ é€’è¯·æ±‚ã€‚ ä½¿ç”¨åœºæ™¯ï¼š éœ€è¦å¤šä¸ªå¯¹è±¡å¤„ç†ä¸€ä¸ªè¯·æ±‚ è§’è‰²ï¼š AbstractHandler: æŠ½è±¡å¤„ç†è€… ConcreteHandlerï¼šå…·ä½“å¤„ç†è€… UML å®æˆ˜å¼€å‘æœ¬æ–‡å‚ç…§ Tomcat æºç ä¸­çš„ Filter Chain å®ç°è´£ä»»é“¾ï¼Œä½¿ç”¨å¤šä¸ªè®¢å•å¤„ç†å™¨å¯¹è®¢å•è¿›è¡Œå¤„ç†ã€‚ æœ¬æ–‡ç¤ºä¾‹ UML å›¾ å®ç°æŠ½è±¡å¤„ç†è€…ä¸ºäº†ç®€åŒ–ç¤ºä¾‹ï¼Œä»£ç ä¸­å…³äºä¼˜æƒ é‡‘é¢çš„è®¡ç®—éƒ½é‡‡å–å†™æ­»çš„æ–¹å¼ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/** * @author WeJan * @since 2020-02-11 */public abstract class AbstractHandler &#123; protected abstract void doHandle(OrderHandleContext context, OrderHandlerChain chain); /** * è®¢å•å¤„ç†å™¨çš„æƒé‡ */ protected abstract int weight();&#125;/** * å°è£…å¤„ç†å™¨é“¾å¤„ç†å…ƒç´ ä¸Šä¸‹æ–‡ * * @author WeJan * @since 2020-02-11 */@Data@Accessors(chain = true)public class OrderHandleContext &#123; /** * å½“å‰å¤„ç†å™¨ä½äºå¤„ç†å™¨ chain ä¸Šçš„ä½ç½® */ private int pos; // è®¢å•å· private String orderNo; // è®¢å•é‡‘é¢ private Double amount; // VIP ç­‰çº§ private Integer vipLevel; // ä¼˜æƒ åˆ¸ private String couponNo;&#125;/** * å°è£…å¤„ç†å™¨æƒé‡ * @author WeJan * @since 2020-03-04 */@Getter@AllArgsConstructorpublic enum OrderHandlerWeightEnum &#123; COUPON(1, &quot;ä¼˜æƒ åˆ¸&quot;), SALES(2, &quot;ä¿ƒé”€æ´»åŠ¨&quot;), VIP(3, &quot;VIP&quot;), ; private Integer code; private String desc;&#125; åˆå§‹åŒ–è®¢å•å¤„ç†å™¨é“¾12345678910111213141516171819202122232425/** * @author WeJan * @since 2020-03-03 */@Componentpublic class OrderHandlerChain implements ApplicationContextAware &#123; private List&lt;AbstractHandler&gt; chain = new ArrayList&lt;&gt;(10); public void handle(OrderHandleContext context) &#123; if (context.getPos() &lt; chain.size()) &#123; AbstractHandler handler = chain.get(context.getPos()); // ç§»åŠ¨ä½äºå¤„ç†å™¨é“¾ä¸­çš„ä½ç½® context.setPos(context.getPos() + 1); handler.doHandle(context, this); &#125; &#125; @Override public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123; Map&lt;String, AbstractHandler&gt; beans = applicationContext.getBeansOfType(AbstractHandler.class); chain.addAll(beans.values()); // æ ¹æ®å¤„ç†å™¨çš„æƒé‡ï¼Œå¯¹å¤„ç†å™¨é“¾ä¸­å…ƒç´ è¿›è¡Œæ’åº chain.sort(Comparator.comparingInt(AbstractHandler::weight)); &#125;&#125; å®ç°å…·ä½“å¤„ç†è€…12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152@Componentpublic class CouponOrderHandler extends AbstractHandler &#123; @Override protected void doHandle(OrderHandleContext context, OrderHandlerChain chain) &#123; if (context.getCouponNo() != null) &#123; context.setAmount(context.getAmount() - 10); &#125; // è°ƒç”¨ä¸‹ä¸€ä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç† chain.handle(context); &#125; @Override protected int weight() &#123; return OrderHandlerWeightEnum.COUPON.getCode(); &#125;&#125;@Componentpublic class SalesOrderHandler extends AbstractHandler &#123; @Override protected void doHandle(OrderHandleContext context, OrderHandlerChain chain) &#123; Double amount = context.getAmount(); if (amount &gt; 80) &#123; context.setAmount(amount * 0.9); &#125; // è°ƒç”¨ä¸‹ä¸€ä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç† chain.handle(context); &#125; @Override protected int weight() &#123; return OrderHandlerWeightEnum.SALES.getCode(); &#125;&#125;@Componentpublic class VipOrderHandler extends AbstractHandler &#123; @Override protected void doHandle(OrderHandleContext context, OrderHandlerChain chain) &#123; if (context.getVipLevel() &gt; 2) &#123; context.setAmount(context.getAmount() - 5); &#125; // è°ƒç”¨ä¸‹ä¸€ä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç† chain.handle(context); &#125; @Override protected int weight() &#123; return OrderHandlerWeightEnum.VIP.getCode(); &#125;&#125; æµ‹è¯•123456789101112131415161718@RunWith(SpringRunner.class)@SpringBootTest(classes = App.class)public class ChainTest &#123; @Resource private OrderHandlerChain chain; @Test public void name() &#123; OrderHandleContext order = new OrderHandleContext() .setOrderNo(&quot;123&quot;) .setAmount(100d) .setVipLevel(3) .setCouponNo(&quot;111&quot;); chain.handle(order); System.out.println(&quot;è®¢å•æœ€ç»ˆé‡‘é¢ä¸ºï¼š &quot; + order.getAmount()); &#125;&#125; è¾“å‡ºç»“æœä¸ºï¼š 176.0 å¤„ç†å™¨é“¾è°ƒç”¨ handle æ–¹æ³•ï¼Œé€ä¸ªè°ƒç”¨å¤„ç†å™¨é“¾ä¸­çš„å¤„ç†å™¨çš„ doHanle æ–¹æ³•ï¼Œå¯¹è®¢å•è¿›è¡Œå¤„ç†ï¼Œå½“å‰å¤„ç†å™¨å¤„ç†å®Œæ¯•åï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦ç»§ç»­äº¤ç”±ä¸‹ä¸€ä¸ªå¤„ç†å™¨è¿›è¡Œå¤„ç†ï¼Œå³è®¾ç½® chain.handle(context);ï¼Œå¦‚æœä¸éœ€è¦ç»§ç»­å¾€ä¸‹å¤„ç†ï¼Œä¸è°ƒç”¨æ­¤ä»£ç å³å¯ã€‚ ç½‘ä¸Šæµä¼ çš„ä»£ç éƒ½æ˜¯ç›´æ¥åœ¨æŠ½è±¡å¤„ç†å™¨ä¸­åŒ…å«ä¸‹ä¸€ä¸ªå¤„ç†å™¨çš„å¼•ç”¨ï¼Œè¿™æ ·å¯¼è‡´åœ¨å®¢æˆ·ç«¯ä½¿ç”¨çš„æ—¶å€™ï¼Œå°±éœ€è¦æ‰‹åŠ¨å»é€ä¸ª set ä¸‹çº§å¤„ç†å™¨ï¼Œæ‰‹è¯¯å¾ˆå®¹æ˜“é€ æˆå¤„ç†å™¨æ­»å¾ªç¯çš„æƒ…å†µï¼Œä¹Ÿå¯èƒ½å‡ºç°ç¼ºå¤±æŸä¸ªå¤„ç†å™¨çš„æƒ…å†µï¼Œå› è€Œæœ¬æ–‡å‚ç…§ Tomcat æºç ä¸­ Filter çš„ä½œæ³•ï¼Œå¼•å…¥äº† Chain ç±»ï¼Œç»Ÿä¸€å¯¹å¤„ç†å™¨å°è£…ä¸ºé“¾ï¼Œå‡å°‘å®¢æˆ·ç«¯ä½¿ç”¨æ—¶å‡ºé”™çš„å¯èƒ½ã€‚ æ€»ç»“é“¾å¼å¤„ç†çš„å¥½å¤„åœ¨äºå¢åŠ å‡å°‘æ–°çš„å¤„ç†å™¨ä¸ä¼šå½±å“å…¶ä»–å¤„ç†å™¨çš„é€»è¾‘ï¼Œå„ä¸ªå¤„ç†å™¨ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå¯ä»¥å‡å°è€¦åˆå¸¦æ¥çš„å½±å“ã€‚ æºç ä¸‹è½½ https://github.com/Mosiki/learning-modules/tree/master/learning-designpatterns å‚è€ƒé“¾æ¥ è®¾è®¡æ¨¡å¼ | è´£ä»»é“¾æ¨¡å¼åŠå…¸å‹åº”ç”¨ https://www.kancloud.cn/sstd521/design/193560","tags":[{"name":"ç»“åˆSpringå®è·µè´£ä»»é“¾æ¨¡å¼","slug":"ç»“åˆSpringå®è·µè´£ä»»é“¾æ¨¡å¼","permalink":"http://nullpointer.pw/tags/%E7%BB%93%E5%90%88Spring%E5%AE%9E%E8%B7%B5%E8%B4%A3%E4%BB%BB%E9%93%BE%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¾è®¡æ¨¡å¼ä¹‹é—¨é¢æ¨¡å¼å®æˆ˜","date":"2020-03-02T22:35:41.000Z","path":"design-patterns-facade.html","text":"ç±»å‹ï¼šç»“æ„å‹æ¨¡å¼ æ„å›¾ï¼šå®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„ç³»ç»Ÿæ¥å£ï¼Œéšè—å¤šä¸ªå­ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚ ä¸»è¦è§£å†³ï¼šé™ä½è®¿é—®ç³»ç»Ÿå®¢æˆ·ç«¯å†…éƒ¨å­ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚ ä½¿ç”¨åœºæ™¯ï¼šè§£è€¦åˆå®¢æˆ·ç«¯ä¸å…·ä½“å­ç³»ç»Ÿï¼Œå­ç³»ç»Ÿä¸å®¢æˆ·ç«¯æ— éœ€æ„ŸçŸ¥å¯¹æ–¹ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦äº²è‡ªè°ƒç”¨å­ç³»ç»Ÿçš„æ¥å£ï¼ŒæŠŠåŸæœ¬éœ€è¦ä¸å¤šä¸ªå­ç³»ç»Ÿçš„äº¤äº’å…¨éƒ¨å°è£…åˆ°é—¨é¢ç±»ä¸­ï¼Œå®¢æˆ·ç«¯åªéœ€è¦å’Œ Facade ç±»äº¤äº’å³å¯ã€‚ è®¾è®¡æ¨¡å¼ç³»åˆ—æ–‡ç« ç›®å½• è§’è‰² Facadeï¼š é—¨é¢è§’è‰²ï¼Œå§”æ‰˜å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ°å…·ä½“çš„å®¢æˆ·ç«¯ SubSystemï¼šå­ç³»ç»Ÿè§’è‰² UMLä½¿ç”¨é—¨é¢æ¨¡å¼å°è£…ä¹‹å‰ UMLï¼š ä½¿ç”¨é—¨é¢æ¨¡å¼å°è£…ä¹‹å UMLï¼š å¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯ç”±ä¾èµ–ä¸‰ä¸ªå¯¹è±¡å˜æˆä¾èµ–ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡é—¨é¢å¯¹è±¡å°è£…å­ç³»ç»Ÿï¼Œå¯¹äºå®¢æˆ·ç«¯ï¼Œå±è”½å­ç³»ç»Ÿå†…éƒ¨çš„å¤æ‚æ€§ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé—¨é¢ç±»ä¸è¦å‚ä¸ä»»ä½•å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚ å®æˆ˜åœ¨å¤§é‡ä½¿ç”¨ Dubbo è¿›è¡Œæ¥å£è°ƒç”¨çš„é¡¹ç›®ç³»ç»Ÿä¸­ï¼Œæœ‰å¾ˆå¤š Dubbo æ–¹æ³•æ˜¯å±äºå…¬ç”¨çš„æ–¹æ³•ï¼Œè™½ç„¶å®¢æˆ·ç«¯ç±»å¯ä»¥æ³¨å…¥ä¸åŒçš„ Dubbo æœåŠ¡ç±»è¿›è¡Œæ¥å£è°ƒç”¨ï¼Œä½†æ˜¯æ˜æ˜¾å®¢æˆ·ç«¯ä¸å…¶ä»–å­ç³»ç»Ÿçš„ä¾èµ–è¿‡äºç´§å¯†ã€‚ å½“ä¸€ä¸ªå­ç³»ç»Ÿéœ€è¦è¿›è¡Œä¿®æ”¹æ—¶ï¼Œéœ€è¦ä¿®æ”¹æ‰€æœ‰è°ƒç”¨æ­¤ç³»ç»Ÿçš„æ¥å£ï¼Œæ­¤æ—¶æœ€é€‚åˆä½¿ç”¨é—¨é¢æ¨¡å¼æ¥å°è£…è¿™äº›å­ç³»ç»Ÿçš„æ¥å£ï¼Œç„¶åç»Ÿä¸€å¯¹å®¢æˆ·ç«¯æä¾›æ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼Œå¤§å¤§é™ä½å®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿé—´çš„è€¦åˆæ€§ã€‚ æœ¬æ–‡ä¸ºäº†ç®€åŒ–ç¤ºä¾‹ï¼Œå°±ä¸æœªå¼•å…¥ Dubboï¼Œè€Œæ˜¯ç›´æ¥ Mock äº†ä¸¤ä¸ªè¿œç¨‹æœåŠ¡ç±»ã€‚ç¤ºä¾‹æä¾›ä¸€ä¸ªé’ˆå¯¹è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯çš„é—¨é¢ç±»ã€‚ ç¤ºä¾‹ä»£ç å®šä¹‰ä¸¤ä¸ª Mock çš„è¿œç¨‹æœåŠ¡ç±»123456789101112131415161718192021@Servicepublic class MockUserRemoteService &#123; public boolean isNewUser(Long userId) &#123; // TODO è°ƒç”¨è¿œç¨‹æ¥å£ return true; &#125; public UserInfo getUserInfo(Long userId) &#123; // TODO è°ƒç”¨è¿œç¨‹æ¥å£ return new UserInfo(); &#125;&#125;@Servicepublic class MockDeptRemoteService &#123; public DeptInfo getDeptInfo(Long userId) &#123; // TODO è°ƒç”¨è¿œç¨‹æ¥å£ return new DeptInfo(); &#125;&#125; å®šä¹‰ç”¨æˆ·é—¨é¢ç±»1234567891011121314151617181920212223242526272829@Componentpublic class UserFacade &#123; @Resource private MockUserRemoteService userRemoteService; @Resource private MockDeptRemoteService deptRemoteService; /** * åˆ¤æ–­æ˜¯å¦æ˜¯æ–°ç”¨æˆ· */ public boolean isNewUser(Long userId) &#123; return userRemoteService.isNewUser(userId); &#125; /** * è·å–ç”¨æˆ·ä¿¡æ¯ */ public UserInfo getUserInfo(Long userId) &#123; return userRemoteService.getUserInfo(userId); &#125; /** * è·å–ç”¨æˆ·éƒ¨é—¨ä¿¡æ¯ */ public DeptInfo getDeptInfo(Long userId) &#123; return deptRemoteService.getDeptInfo(userId); &#125;&#125; æµ‹è¯•å®¢æˆ·ç«¯è°ƒç”¨12345678910111213@RunWith(SpringRunner.class)@SpringBootTest(classes = App.class)public class FacadeTest &#123; @Resource protected UserFacade userFacade; @Test public void test1() &#123; long userId = 11L; UserInfo userInfo = userFacade.getUserInfo(userId); DeptInfo deptInfo = userFacade.getDeptInfo(userId); &#125;&#125; æ€»ç»“é—¨é¢æ¨¡å¼è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œå°è£…äº†å­ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œé€šè¿‡é—¨é¢å¯¹è±¡åªæš´éœ²å®¢æˆ·ç«¯éœ€è¦çš„æ¥å£ï¼Œä¸€äº›å†…éƒ¨çš„æ¥å£å¯ä»¥åšåˆ°å¯¹å®¢æˆ·ç«¯éšè—ã€‚ é—¨é¢æ¨¡å¼çš„ä¼˜ç‚¹ é—¨é¢æ¨¡å¼çš„ä¼˜ç‚¹ï¼š â— æ¾æ•£è€¦åˆ é—¨é¢æ¨¡å¼æ¾æ•£äº†å®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿçš„è€¦åˆå…³ç³»ï¼Œè®©å­ç³»ç»Ÿå†…éƒ¨çš„æ¨¡å—èƒ½æ›´å®¹æ˜“æ‰©å±•å’Œç»´æŠ¤ã€‚ â— ç®€å•æ˜“ç”¨ é—¨é¢æ¨¡å¼è®©å­ç³»ç»Ÿæ›´åŠ æ˜“ç”¨ï¼Œå®¢æˆ·ç«¯ä¸å†éœ€è¦äº†è§£å­ç³»ç»Ÿå†…éƒ¨çš„å®ç°ï¼Œä¹Ÿä¸éœ€è¦è·Ÿä¼—å¤šå­ç³»ç»Ÿå†…éƒ¨çš„æ¨¡å—è¿›è¡Œäº¤äº’ï¼Œåªéœ€è¦è·Ÿé—¨é¢ç±»äº¤äº’å°±å¯ä»¥äº†ã€‚ â— æ›´å¥½çš„åˆ’åˆ†è®¿é—®å±‚æ¬¡ é€šè¿‡åˆç†ä½¿ç”¨ Facadeï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°åˆ’åˆ†è®¿é—®çš„å±‚æ¬¡ã€‚æœ‰äº›æ–¹æ³•æ˜¯å¯¹ç³»ç»Ÿå¤–çš„ï¼Œæœ‰äº›æ–¹æ³•æ˜¯ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨çš„ã€‚æŠŠéœ€è¦æš´éœ²ç»™å¤–éƒ¨çš„åŠŸèƒ½é›†ä¸­åˆ°é—¨é¢ä¸­ï¼Œè¿™æ ·æ—¢æ–¹ä¾¿å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¹Ÿå¾ˆå¥½åœ°éšè—äº†å†…éƒ¨çš„ç»†èŠ‚ã€‚ æºç ä¸‹è½½ https://github.com/Mosiki/learning-modules/tree/master/learning-designpatterns å‚è€ƒ é—¨é¢æ¨¡å¼çš„æ³¨æ„äº‹é¡¹ ã€ŠJAVA ä¸æ¨¡å¼ã€‹ä¹‹é—¨é¢æ¨¡å¼","tags":[]},{"title":"è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼å®æˆ˜","date":"2020-02-29T06:06:32.000Z","path":"design-patterns-state.html","text":"æœ¬æ–‡ä»¥è¿è¥æ´»åŠ¨çŠ¶æ€è½¬æ¢ä¸ºä¾‹ï¼Œç»“åˆ Spring æ¼”ç¤ºçŠ¶æ€æ¨¡å¼çš„å®è·µåº”ç”¨ã€‚ æ›´æ–° 2021 å¹´ 02 æœˆ 09 æ—¥ è¯„è®ºä¸­åŒ¿åè¯„è®ºæåˆ°å¯èƒ½å‡ºç°å¹¶å‘é—®é¢˜ï¼Œå®¡è§†ä»£ç å‘ç° ActivityState ç±»æŒæœ‰äº†å…¨å±€å˜é‡ ActivityContextï¼Œåœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œä¼šé€ æˆæ•°æ®å…±äº«å¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè§£å†³åŠæ³•å¾ˆç®€å•ï¼Œä½¿ç”¨ ThreadLocal å¯¹è±¡åŒ…è£… ActivityContext å³å¯ï¼Œéœ€è¦æ³¨æ„ç”¨å®Œéœ€è¦è¿›è¡Œé‡Šæ”¾ï¼Œæš‚æ—¶æ²¡æƒ³åˆ°å…¶ä»–æ›´å¥½çš„æ–¹æ³•è§£å†³ã€‚ æ„Ÿè°¢è¯„è®ºä¸­å“¥ä»¬æå‡ºçš„é—®é¢˜ï¼Œæœ‰ç©ºåŠ  QQ ç¾¤ 967808880 ä¸€å—äº¤æµäº¤æµã€‚ ç±»å‹ï¼šè¡Œä¸ºå‹æ¨¡å¼ æ„å›¾ï¼šå…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å®ƒçš„ç±»ã€‚ ä¸»è¦è§£å†³ï¼šä¸€ä¸ªå¯¹è±¡å­˜åœ¨å¤šä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€è¡Œä¸ºä¸åŒï¼ŒçŠ¶æ€å¯ä»¥ç›¸äº’è½¬æ¢ã€‚ ä½¿ç”¨åœºæ™¯ï¼š1ã€è¡Œä¸ºéšçŠ¶æ€æ”¹å˜è€Œæ”¹å˜çš„åœºæ™¯ã€‚ 2ã€å‡å°‘ switch..case ä»¥åŠ ifâ€¦else è®¾è®¡æ¨¡å¼ç³»åˆ—æ–‡ç« ç›®å½• è§’è‰² Stateï¼šæŠ½è±¡çŠ¶æ€è§’è‰²ï¼Œè´Ÿè´£å¯¹è±¡çŠ¶æ€å®šä¹‰ï¼Œå¹¶ä¸”å°è£…ç¯å¢ƒè§’è‰²ä»¥å®ç°çŠ¶æ€åˆ‡æ¢ã€‚ Contextï¼šç¯å¢ƒè§’è‰²ï¼Œå®šä¹‰å®¢æˆ·ç«¯éœ€è¦çš„æ¥å£ï¼Œå¹¶ä¸”è´Ÿè´£å…·ä½“çŠ¶æ€çš„åˆ‡æ¢ã€‚ ConcreteStateï¼šå…·ä½“çŠ¶æ€è§’è‰²ï¼Œå½“å‰çŠ¶æ€è¦åšçš„äº‹æƒ…ï¼Œä»¥åŠå½“å‰çŠ¶æ€å¦‚ä½•è½¬æ¢å…¶ä»–çŠ¶æ€ã€‚ UML å®æˆ˜æœ¬æ–‡ä»¥è¿è¥æ´»åŠ¨çŠ¶æ€ä¸ºä¾‹ï¼Œç»“åˆ Spring æ¼”ç¤ºçŠ¶æ€æ¨¡å¼çš„å®è·µåº”ç”¨ã€‚ è¿è¥æ´»åŠ¨åˆ›å»ºåˆå§‹çŠ¶æ€ä¸ºè‰ç¨¿çŠ¶æ€ï¼Œç¼–è¾‘å¥½æ´»åŠ¨ä¹‹åï¼Œè¿è¥ä¼šåå°å¯ç”¨æ´»åŠ¨ï¼Œæ­¤æ—¶æ´»åŠ¨çŠ¶æ€ä¸ºå·²å¯ç”¨ï¼›å½“è¾¾åˆ°æ´»åŠ¨å¼€å§‹æ—¶é—´æ—¶ï¼Œå®šæ—¶ä»»åŠ¡ä¼šå°†æ´»åŠ¨çŠ¶æ€ç½®ä¸ºè¿›è¡Œä¸­ï¼›å½“è¾¾åˆ°æ´»åŠ¨ç»“æŸæ—¶é—´æ—¶ï¼Œå®šæ—¶ä»»åŠ¡ä¼šå°†æ´»åŠ¨çŠ¶æ€ç½®ä¸ºå·²ç»“æŸã€‚è¿›è¡Œä¸­çš„æ´»åŠ¨ä¹Ÿå¯èƒ½ä¼šå› ä¸ºæŸäº›åŸå› éœ€è¦æ‰‹åŠ¨åœç”¨ï¼Œæ­¤æ—¶æ´»åŠ¨çŠ¶æ€ç½®ä¸ºå·²åœç”¨ã€‚ çŠ¶æ€ä¹‹é—´æœ‰ç€ä¸¥æ ¼çš„å‰ç½®æ ¡éªŒï¼Œæ¯”å¦‚è‰ç¨¿çŠ¶æ€å¯ä»¥ç»§ç»­ä¿å­˜ä¸ºè‰ç¨¿ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œå¯åŠ¨ï¼Œä½†ä¸èƒ½ç›´æ¥åˆ‡æ¢ä¸ºè¿›è¡Œä¸­ï¼Œå¯ä»¥ç›´æ¥ç¼–è¾‘åˆ‡æ¢å›è‰ç¨¿ç®±çŠ¶æ€ï¼›æ¯”å¦‚å·²åœç”¨çš„çŠ¶æ€åªæœ‰åœ¨å¯ç”¨ä¹‹åæ‰èƒ½è¢«ç½®ä¸ºè¿›è¡Œä¸­ã€‚ æ´»åŠ¨çŠ¶æ€çš„åˆ‡æ¢çº¦æŸå¦‚ä¸‹å›¾ï¼š æ–°çŠ¶æ€â†’ å½“å‰çŠ¶æ€â†“ è‰ç¨¿ç®± å·²å¯ç”¨ è¿›è¡Œä¸­ å·²åœç”¨ å·²ç»“æŸ è‰ç¨¿ç®± âœ… âœ… âŒ âŒ âŒ å·²å¯ç”¨ âœ… âŒ âœ… âœ… âŒ è¿›è¡Œä¸­ âŒ âŒ âŒ âœ… âœ… å·²åœç”¨ âŒ âœ… âŒ âŒ âŒ å·²ç»“æŸ âŒ âŒ âŒ âŒ âŒ å¦‚æœä¸é‡‡å–çŠ¶æ€æ¨¡å¼ï¼Œå¯èƒ½å†™å‡ºçš„ä»£ç å°±æ˜¯ä¸æ–­ä½¿ç”¨ if åˆ¤æ–­å‰ç½®çŠ¶æ€æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼Œå½“å¢åŠ äº†æ–°çš„çŠ¶æ€ï¼Œéœ€è¦æ”¹åŠ¨åˆ¤æ–­çš„åœ°æ–¹ï¼Œä»è€Œå¯èƒ½å¼•å…¥äº† Bugã€‚ æœ¬æ–‡ç¤ºä¾‹ UML å›¾ ç¤ºä¾‹ä»£ç å®šä¹‰æŠ½è±¡çŠ¶æ€è§’è‰²1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public abstract class ActivityState &#123; // æŠ½è±¡çŠ¶æ€è§’è‰²éœ€è¦æŒæœ‰ç¯å¢ƒä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œé˜²æ­¢å¹¶å‘å‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä½¿ç”¨ ThreadLocal è¿›è¡ŒåŒ…è£… protected ThreadLocal&lt;ActivityContext&gt; activityContext = new ThreadLocal&lt;&gt;(); public void setActivityContext(ActivityContext activityContext) &#123; this.activityContext.set(activityContext); &#125; public abstract Integer type(); /** * åˆ¤æ–­æ˜¯å¦æ˜¯å½“å‰çŠ¶æ€ */ protected boolean isSameStatus(Activity activity) &#123; return type().equals(activity.getStatus()); &#125; /** * ä¿å­˜è‰ç¨¿ */ public abstract boolean saveDraft(Activity activity); /** * å¯ç”¨ */ public abstract boolean enable(Activity activity); /** * å¼€å§‹ */ public abstract boolean start(Activity activity); /** * åœç”¨ */ public abstract boolean disable(Activity activity); /** * åœæ­¢ */ public abstract boolean finish(Activity activity); // æ¸…ç†èµ„æº public void clear() &#123; activityContext.remove(); &#125;&#125; å®šä¹‰ç¯å¢ƒè§’è‰²12345678910111213141516171819202122232425262728293031public class ActivityContext &#123; // æŒæœ‰æŠ½è±¡çŠ¶æ€è§’è‰²å¼•ç”¨ private ActivityState activityState; public void setActivityState(ActivityState activityState) &#123; this.activityState = activityState; this.activityState.setActivityContext(this); &#125; public boolean saveDraft(Activity activity) &#123; // å§”æ‰˜å…·ä½“çš„çŠ¶æ€è§’è‰² return this.activityState.saveDraft(activity); &#125; public boolean enable(Activity activity) &#123; return this.activityState.enable(activity); &#125; public boolean start(Activity activity) &#123; return this.activityState.start(activity); &#125; public boolean disable(Activity activity) &#123; return this.activityState.disable(activity); &#125; public boolean finish(Activity activity) &#123; return this.activityState.finish(activity); &#125;&#125; å®šä¹‰å…·ä½“çŠ¶æ€è§’è‰²å› ä¸ºæœ¬æ–‡ç¤ºä¾‹å…·ä½“çŠ¶æ€è§’è‰²æœ‰å¾ˆå¤šï¼Œå› æ­¤åªåˆ—ä¸¾ä¸€ä¸ªå¼€å¯çŠ¶æ€è§’è‰²ä¸¾ä¾‹å‚è€ƒï¼Œæ›´å¤šä»£ç å¯ä»¥å‚è€ƒæœ¬æ–‡å¯¹åº”çš„ GitHub ç¤ºä¾‹ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253@Componentpublic class ActivityEnableState extends ActivityState &#123; @Resource private ActivityDraftState activityDraftState; @Resource private ActivityStartState activityStartState; @Resource private ActivityDisableState activityDisableState; @Override public Integer type() &#123; return ActivityStateEnum.ENABLE.getCode(); &#125; @Override public boolean saveDraft(Activity activity) &#123; ActivityContext activityContext = this.activityContext.get(); activityContext.setActivityState(activityDraftState); return activityContext.saveDraft(activity); &#125; @Override public boolean enable(Activity activity) &#123; // å¦‚æœå½“å‰çŠ¶æ€å·²ç»æ˜¯ enable äº†ï¼Œåˆ™æ— æ³•å†æ¬¡ enable if (isSameStatus(activity)) &#123; return false; &#125; activity.setStatus(type()); //TODO æ›´æ–°æ•°æ®åº“ return true; &#125; @Override public boolean start(Activity activity) &#123; ActivityContext activityContext = this.activityContext.get(); activityContext.setActivityState(activityDraftState); return activityContext.start(activity); &#125; @Override public boolean disable(Activity activity) &#123; ActivityContext activityContext = this.activityContext.get(); activityContext.setActivityState(activityDraftState); return activityContext.disable(activity); &#125; @Override public boolean finish(Activity activity) &#123; // éè¿›è¡Œä¸­çš„æ´»åŠ¨çŠ¶æ€ï¼Œä¸å…è®¸ç›´æ¥è¿›è¡Œ finish return false; &#125;&#125; å°è£…å…·ä½“çŠ¶æ€å®ä¾‹å·¥å‚çŠ¶æ€è§’è‰²åº”è¯¥æ˜¯å•ä¾‹çš„ï¼Œç»“åˆ Spring ä¸å·¥å‚æ¨¡å¼å¯¹å®ä¾‹è¿›è¡Œå°è£…ï¼Œæ–¹ä¾¿æ ¹æ®æ•°æ®åº“çš„ status å€¼è·å–å¯¹åº”çš„çŠ¶æ€è§’è‰²å®ä¾‹ã€‚ 12345678910@Componentpublic class ActivityStateFactory implements ApplicationContextAware &#123; public static final Map&lt;Integer, ActivityState&gt; STATE_MAP = new HashMap&lt;&gt;(ActivityStateEnum.values().length); @Override public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123; Map&lt;String, ActivityState&gt; beans = applicationContext.getBeansOfType(ActivityState.class); beans.values().forEach(item -&gt; STATE_MAP.put(item.type(), item)); &#125;&#125; æµ‹è¯•12345678910111213141516171819202122232425262728293031@RunWith(SpringRunner.class)@SpringBootTest(classes = App.class)public class BaseTest &#123; @Test public void test1() &#123; // ä¸€èˆ¬æ´»åŠ¨éƒ½æ˜¯ä»æ•°æ®åº“æŸ¥è¯¢å‡ºæ¥äº†ï¼Œæ­¤å¤„ä¸ºæ–¹ä¾¿æµ‹è¯•ç›´æ¥ new Activity activity = new Activity() .setId(1L) .setName(&quot;æµ‹è¯•æ´»åŠ¨&quot;) .setStatus(ActivityStateEnum.DRAFT.getCode()) .setCreateTime(LocalDateTime.now()); ActivityState activityState = ActivityStateFactory.STATE_MAP.get(activity.getStatus()); ActivityContext context = new ActivityContext(); context.setActivityState(activityState); System.out.println(&quot;ä¿å­˜è‰ç¨¿: &quot; + (context.saveDraft(activity) ? &quot;æˆåŠŸ&quot; : &quot;å¤±è´¥&quot;)); System.out.println(&quot;æ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºå·²å¯ç”¨: &quot; + (context.enable(activity) ? &quot;æˆåŠŸ&quot; : &quot;å¤±è´¥&quot;)); System.out.println(&quot;æ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºè¿›è¡Œä¸­: &quot; + (context.start(activity) ? &quot;æˆåŠŸ&quot; : &quot;å¤±è´¥&quot;)); System.out.println(&quot;æ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºå·²åœç”¨: &quot; + (context.disable(activity) ? &quot;æˆåŠŸ&quot; : &quot;å¤±è´¥&quot;)); System.out.println(&quot;æ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºå·²å¯ç”¨: &quot; + (context.enable(activity) ? &quot;æˆåŠŸ&quot; : &quot;å¤±è´¥&quot;)); System.out.println(&quot;æ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºè¿›è¡Œä¸­: &quot; + (context.start(activity) ? &quot;æˆåŠŸ&quot; : &quot;å¤±è´¥&quot;)); System.out.println(&quot;æ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºå·²ç»“æŸ: &quot; + (context.finish(activity) ? &quot;æˆåŠŸ&quot; : &quot;å¤±è´¥&quot;)); System.out.println(&quot;æ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºè¿›è¡Œä¸­: &quot; + (context.start(activity) ? &quot;æˆåŠŸ&quot; : &quot;å¤±è´¥&quot;)); // æ¸…ç†èµ„æº activityState.clear(); &#125;&#125; ç»“æœè¾“å‡ºï¼š 12345678ä¿å­˜è‰ç¨¿: æˆåŠŸæ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºå·²å¯ç”¨: æˆåŠŸæ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºè¿›è¡Œä¸­: æˆåŠŸæ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºå·²åœç”¨: æˆåŠŸæ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºå·²å¯ç”¨: æˆåŠŸæ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºè¿›è¡Œä¸­: æˆåŠŸæ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºå·²ç»“æŸ: æˆåŠŸæ›´æ–°æ´»åŠ¨çŠ¶æ€ä¸ºè¿›è¡Œä¸­: å¤±è´¥ å¯ä»¥çœ‹åˆ°çŠ¶æ€åˆ‡æ¢è·¯å¾„ï¼šè‰ç¨¿-&gt; è‰ç¨¿-&gt; å·²å¯ç”¨-&gt; è¿›è¡Œä¸­-&gt; å·²åœç”¨-&gt; å·²å¯ç”¨-&gt; è¿›è¡Œä¸­-&gt; å·²ç»“æŸ-&gt; è¿›è¡Œä¸­ï¼Œå‰é¢éƒ½æ˜¯æ­£ç¡®åˆ‡æ¢ï¼Œä½†æ˜¯å·²ç»“æŸæ— æ³•åˆ‡æ¢ä¸ºè¿›è¡Œä¸­çŠ¶æ€ï¼Œä»è€ŒéªŒè¯äº†çŠ¶æ€æ¨¡å¼çš„åº”ç”¨ã€‚ æ€»ç»“çœ‹ä¸Šä¸€ç¯‡ç­–ç•¥æ¨¡å¼çš„æ–‡ç« ä¸­çš„ UMLï¼Œå’Œæœ¬æ–‡çš„ UML æ˜¯ç›¸åŒçš„ã€‚é‚£ä¹ˆä»–ä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç­–ç•¥æ¨¡å¼æ˜¯æä¾›äº†å¯ç›¸äº’æ›¿æ¢çš„ç®—æ³•ï¼Œæ ¹æ®å®¢æˆ·ç«¯é€‰æ‹©ä¸€ç§ç®—æ³•æŒ‡å®šä¸€ç§è¡Œä¸ºï¼›çŠ¶æ€æ¨¡å¼åˆ™åŒ…å«äº†å¯¹è±¡çŠ¶æ€ï¼Œæ ¹æ®å¯¹è±¡çŠ¶æ€ä¸åŒï¼Œè¡Œä¸ºä¹Ÿä¸ä¸€æ ·ï¼Œå³çŠ¶æ€å†³å®šè¡Œä¸ºï¼Œå°†è¡Œä¸ºå¯¹åº”çš„é€»è¾‘å°è£…åˆ°å…·ä½“çŠ¶æ€ç±»ä¸­ï¼Œåœ¨ç¯å¢ƒç±»ä¸­æ¶ˆé™¤é€»è¾‘åˆ¤æ–­ï¼Œä¸”å…·ä½“å®ç°ä¸å¯ç›¸äº’æ›¿æ¢ã€‚ çŠ¶æ€æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯è§’è‰²ä¸çŠ¶æ€å¯¹è±¡ä¸éœ€è¦è¿›è¡Œäº¤äº’ï¼Œæ‰€æœ‰çš„äº¤äº’éƒ½å§”æ‰˜ç»™ç¯å¢ƒè§’è‰²è¿›è¡Œã€‚ æºç ä¸‹è½½ https://github.com/Mosiki/learning-modules/tree/master/learning-designpatterns å‚è€ƒ https://www.runoob.com/design-pattern/state-pattern.html https://www.cnblogs.com/kubixuesheng/p/5180509.html https://www.kancloud.cn/sstd521/design/193606","tags":[{"name":"Spring çŠ¶æ€æ¨¡å¼å®æˆ˜","slug":"Spring-çŠ¶æ€æ¨¡å¼å®æˆ˜","permalink":"http://nullpointer.pw/tags/Spring-%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F%E5%AE%9E%E6%88%98/"}]},{"title":"è®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼å®æˆ˜","date":"2020-02-19T12:38:23.000Z","path":"design-patterns-strategy.html","text":"ç±»å‹ï¼šè¡Œä¸ºå‹æ¨¡å¼ æ„å›¾ï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œä¸åŒç®—æ³•ç­–ç•¥å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œå¹¶ä¸”äº’ä¸å½±å“ã€‚ ä¸»è¦è§£å†³ï¼šåœ¨æœ‰å¤šç§ç®—æ³•ç›¸ä¼¼çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ ifâ€¦else æ‰€å¸¦æ¥çš„å¤æ‚å’Œéš¾ä»¥ç»´æŠ¤ã€‚ ä½¿ç”¨åœºæ™¯ï¼šä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ã€‚ è®¾è®¡æ¨¡å¼ç³»åˆ—æ–‡ç« ç›®å½• è§’è‰² ç­–ç•¥ä¸Šä¸‹æ–‡è§’è‰²ï¼šæŒæœ‰æŠ½è±¡ç­–ç•¥è§’è‰²çš„å¼•ç”¨ï¼Œè®¿é—®ç­–ç•¥çš„å…¥å£ æŠ½è±¡ç­–ç•¥è§’è‰² å…·ä½“ç­–ç•¥è§’è‰² UML å®æˆ˜ä»¥æŠ½å¥–æ´»åŠ¨å‘å¥–ä¸ºä¾‹ï¼Œå¥–å“å¤šç§å¤šæ ·ï¼Œå¯èƒ½æ˜¯ç°é‡‘å¥–ï¼Œè¯è´¹å¥–å“ï¼Œå®ç‰©å¥–ç­‰ç­‰ï¼Œæ¯ç§å¥–å“çš„å‘æ”¾æ–¹å¼éƒ½ä¸ä¸€æ ·ï¼Œæ¯”å¦‚ç°é‡‘æ˜¯ç›´æ¥è½¬è´¦ï¼Œè¯è´¹å¥–å“æ˜¯è°ƒç”¨è¿è¥å•†æä¾›æ¥å£å‘æ”¾ï¼Œå®ç‰©å¥–éœ€è¦äººå·¥å¿«é€’å¯„é€ã€‚åœ¨æœªé‡‡ç”¨ç­–ç•¥æ¨¡å¼ä¹‹å‰ï¼Œå°‘ä¸äº†ä½¿ç”¨ ifâ€¦elseâ€¦æ¥åˆ¤æ–­å‘æ”¾ï¼Œå½“å¢åŠ ä¸€ç§å¥–å“ç±»å‹æ—¶ï¼Œå°±éœ€è¦å¢åŠ  if åˆ¤æ–­ã€‚è€Œé‡‡å–ç­–ç•¥æ¨¡å¼ä¹‹åï¼Œåªéœ€å®ç°ä¸€ä¸ªç­–ç•¥ç±»å³å¯ï¼Œå¯¹åŸæ¥çš„é€»è¾‘æ— éœ€åšä»»ä½•æ”¹åŠ¨ï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–ç­–ç•¥çš„æ­£å¸¸é€»è¾‘ã€‚ æœ¬æ–‡ç¤ºä¾‹UMLå›¾ å®šä¹‰æŠ½è±¡ç­–ç•¥æ¥å£1234567891011121314/** * @author WeJan * @since 2020-02-06 */public interface PrizeSendStrategy &#123; String DEFAULT = &quot;default&quot;; String MONEY = &quot;money&quot;; String IN_KIND = &quot;in_kind&quot;; String CALL_CHARGE = &quot;call_charge&quot;; String type(); void doSend();&#125; å®ç°å…·ä½“çš„ç­–ç•¥123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051@Componentpublic class CallChargePrizeSendStrategy implements PrizeSendStrategy &#123; @Override public String type() &#123; return CALL_CHARGE; &#125; @Override public void doSend() &#123; System.out.println(&quot;å‘æ”¾è¯è´¹å¥–å“&quot;); &#125;&#125;@Componentpublic class MoneyPrizeSendStrategy implements PrizeSendStrategy &#123; @Override public String type() &#123; return MONEY; &#125; @Override public void doSend() &#123; System.out.println(&quot;å‘æ”¾ç°é‡‘å¥–å“&quot;); &#125;&#125;@Componentpublic class InKindPrizeSendStrategy implements PrizeSendStrategy &#123; @Override public String type() &#123; return IN_KIND; &#125; @Override public void doSend() &#123; System.out.println(&quot;å‘æ”¾å®ç‰©å¥–å“&quot;); &#125;&#125;@Componentpublic class EmptyPrizeSendStrategy implements PrizeSendStrategy &#123; @Override public String type() &#123; return DEFAULT; &#125; @Override public void doSend() &#123; System.out.println(&quot;ä¸å‘å¥–&quot;); &#125;&#125; å®ç°å¯¹æŠ½è±¡ç­–ç•¥å°è£…çš„ä¸Šä¸‹æ–‡å¯¹è±¡1234567891011121314151617/** * @author WeJan * @since 2020-02-06 */public class PrizeSendContext &#123; private PrizeSendStrategy prizeSendStrategy; public PrizeSendContext() &#123; &#125; public void setPrizeSendStrategy(PrizeSendStrategy prizeSendStrategy) &#123; this.prizeSendStrategy = prizeSendStrategy; &#125; public void executePrizeSendStrategy() &#123; prizeSendStrategy.doSend(); &#125;&#125; æŠ½å–ç­–ç•¥å·¥å‚å®¢æˆ·ç«¯éœ€è¦åˆ¤æ–­è¦ä½¿ç”¨å“ªä¸€ä¸ªå…·ä½“çš„ç­–ç•¥ç±»ï¼Œè‹¥è¿˜æ˜¯æŒ‰ç…§ä¼ ç»Ÿçš„æ–¹æ³• ifâ€¦elseâ€¦æ¥åˆ¤æ–­ç­–ç•¥æ¨¡å¼å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œå› æ­¤ç­–ç•¥æ¨¡å¼ä¸€èˆ¬éƒ½æ˜¯ç»“åˆå…¶ä»–æ¨¡å¼å…±åŒä½¿ç”¨ã€‚æœ¬æ–‡ä¸­ç­–ç•¥ç±»ä½¿ç”¨ String æ¥æ ‡è¯†ï¼Œä¹Ÿå¯ä»¥åœ¨ç­–ç•¥ç±»ä¸­å¢åŠ æŠ½è±¡æ–¹æ³•ï¼Œè¿”å›å€¼ä¸ºæšä¸¾ç±»å‹ã€‚ 1234567891011121314@Componentpublic class PrizeSendStrategyFactory implements ApplicationContextAware &#123; private static final Map&lt;String, PrizeSendStrategy&gt; PRIZE_SEND_STRATEGY_MAP = new HashMap&lt;&gt;(); public static PrizeSendStrategy getPrizeSendStrategy(String strategyKey) &#123; return PRIZE_SEND_STRATEGY_MAP.getOrDefault(strategyKey, PRIZE_SEND_STRATEGY_MAP.get(DEFAULT)); &#125; @Override public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123; Map&lt;String, PrizeSendStrategy&gt; beans = applicationContext.getBeansOfType(PrizeSendStrategy.class); beans.values().forEach(bean -&gt; PRIZE_SEND_STRATEGY_MAP.put(bean.type(), bean)); &#125;&#125; æµ‹è¯•12345678910111213141516/** * @author WeJan * @since 2020-02-06 */@RunWith(SpringRunner.class)@SpringBootTest(classes = App.class)public class StrategyTest &#123; @Test public void test() &#123; PrizeSendContext sendContext = new PrizeSendContext(); sendContext.setPrizeSendStrategy(PrizeSendStrategyFactory.getPrizeSendStrategy(&quot;money&quot;)); sendContext.executePrizeSendStrategy(); &#125;&#125; è¾“å‡ºç»“æœä¸ºï¼š 1å‘æ”¾ç°é‡‘å¥–å“ ç¤ºä¾‹ä»£ç  https://github.com/Mosiki/learning-modules/tree/master/learning-designpatterns å‚è€ƒ https://www.runoob.com/design-pattern/strategy-pattern.html https://juejin.im/post/5c25b8bcf265da61117a5ea1","tags":[]},{"title":"è®¾è®¡æ¨¡å¼å®æˆ˜ç›®å½•","date":"2020-02-19T12:30:22.000Z","path":"design-patterns.html","text":"é‡æ–°å­¦ä¹ ä¸€ä¸‹è®¾è®¡æ¨¡å¼ï¼ŒæŒæ¡å¥½è®¾è®¡æ¨¡å¼å¯¹ä»£ç è´¨é‡çš„æé«˜è¿˜æ˜¯å¾ˆæœ‰æ•ˆæœçš„ã€‚ æœ‰æ—¶é—´å°±ä¼šæ›´æ–°ã€‚æœ‰äº›æ¨¡å¼ä¸å¤ªå¥½æƒ³ç¤ºä¾‹ï¼Œæ‰€ä»¥ç›®å‰çš„ç¤ºä¾‹å¯èƒ½åœ¨æƒ³åˆ°æ›´å¥½çš„ç¤ºä¾‹ä¹‹åï¼Œä¼šè¢«åæœŸæ›¿æ¢æ‰ã€‚ ç›®å½• è®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼å®æˆ˜ è®¾è®¡æ¨¡å¼ä¹‹çŠ¶æ€æ¨¡å¼å®æˆ˜ è®¾è®¡æ¨¡å¼ä¹‹é—¨é¢æ¨¡å¼å®æˆ˜ è®¾è®¡æ¨¡å¼ä¹‹è´£ä»»é“¾æ¨¡å¼å®æˆ˜ è®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼å®æˆ˜ è®¾è®¡æ¨¡å¼ä¹‹å‘½ä»¤æ¨¡å¼å®æˆ˜ è®¾è®¡æ¨¡å¼ä¹‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®æˆ˜ æºç  https://github.com/Mosiki/learning-modules/tree/master/learning-designpatterns","tags":[]},{"title":"Hibernate Validator æ ¡éªŒæœ€ä½³å®è·µ","date":"2020-02-04T09:13:39.000Z","path":"hibernate-validator-best-practice.html","text":"å‡ å¹´å‰åˆšå­¦ä¹  SpringBoot çš„æ—¶å€™ï¼Œå°±æ¥è§¦å¹¶å¼€å§‹ä½¿ç”¨ HibernateValidator æ ¡éªŒæ¡†æ¶ï¼Œæ³¨è§£æ ¡éªŒç»“åˆç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼Œå¯¹ä»£ç çš„æ•´æ´æ€§æé«˜ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚ä½†æ˜¯ç›®å‰å‘ç°å…¬å¸é‡Œæ¯”è¾ƒæ–°çš„é¡¹ç›®ä¸­å¯¹å‚æ•°è¿›è¡Œæ ¡éªŒè¿˜æ˜¯ä½¿ç”¨ä»¥å‰ä¼ ç»Ÿçš„æ–¹å¼ï¼Œéœ€è¦é€ä¸€å¯¹è¯·æ±‚å¯¹è±¡ä¸­çš„å±æ€§ä½¿ç”¨ if æ¥åˆ¤æ–­åˆæ³•æ€§ï¼Œå½“éœ€è¦æ ¡éªŒçš„å±æ€§å¾ˆå¤šæ—¶ï¼Œä¸€å¤§å¨çš„ if åˆ¤æ–­æ ¡éªŒä»£ç å°±ä¸å¯é¿å…ã€‚æœ¬æ–‡ä»‹ç» HibernateValidator æ ¡éªŒæ¡†æ¶çš„æ—¥å¸¸ä½¿ç”¨ï¼Œä¸æ¶‰åŠè‡ªå®šä¹‰çº¦æŸæ³¨è§£ã€‚ æ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰ä¼¤å®³é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ä½¿ç”¨æ ¡éªŒæ¡†æ¶å‰åçš„ä»£ç å¯¹æ¯” ä½¿ç”¨æ ¡éªŒæ¡†æ¶åï¼Œä»£ç ç®€æ´å¾ˆå¤šæœ‰æœ¨æœ‰~ ç¯å¢ƒé…ç½®é¦–å…ˆéœ€è¦å¼•å…¥ä¾èµ–ï¼Œéœ€è¦æ³¨æ„æ˜¯å¦ä¾èµ–æœ‰å†²çªï¼Œå¦‚æœæœ‰ä¸€å®šè¦è§£å†³æ‰å†²çª 12345&lt;dependency&gt; &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt; &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt; &lt;version&gt;6.1.0.Final&lt;/version&gt;&lt;/dependency&gt; ä¾èµ–å¼•å…¥åï¼ŒSpring ç¯å¢ƒéœ€è¦é…ç½®ä¸€ä¸‹æ ¡éªŒå™¨ã€‚ 12345678910111213@Configurationpublic class ValidatorConfig &#123; @Bean public Validator validator() &#123; ValidatorFactory validatorFactory = Validation.byProvider(HibernateValidator.class) .configure() // å¿«é€Ÿå¤±è´¥ .failFast(true) .buildValidatorFactory(); return validatorFactory.getValidator(); &#125;&#125; è¿™é‡Œè®¾ç½® failFast ä¸º trueï¼Œä»£è¡¨ç€å¦‚æœæœ‰å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œåªè¦æ ¡éªŒå‡ºä¸€ä¸ªå‚æ•°æœ‰è¯¯å°±è¿”å›é”™è¯¯è€Œä¸å†ç»§ç»­æ ¡éªŒã€‚ ä¸ºå¯¹è±¡æ·»åŠ æ ¡éªŒæ³¨è§£123456789101112131415@Datapublic class StudentVo &#123; @NotNull(message = &quot;å­¦å·ä¸èƒ½ä¸ºç©º&quot;) private Integer id; @NotNull(message = &quot;å§“åä¸èƒ½ä¸ºç©º&quot;) private String name; @NotNull(message = &quot;é‚®ç®±åœ°å€ä¸èƒ½ä¸ºç©º&quot;) @Email(message = &quot;é‚®ç®±åœ°å€ä¸æ­£ç¡®&quot;) private String email; private Integer age;&#125; Hibernate Validator æ˜¯å¯¹ JSR 349 éªŒè¯è§„èŒƒçš„å…·ä½“å®ç°ï¼Œç›¸å…³çš„å¸¸ç”¨æ³¨è§£ æˆ‘è´´åœ¨æ–‡æœ«ä»¥ä¾›å‚è€ƒã€‚ è¯·æ±‚æ¥å£å¤„ç†1234567891011@PostMapping(&quot;/create&quot;)public Result&lt;StudentVo&gt; create(@Validated StudentVo student) &#123; System.out.println(student.toString()); return Result.success(student);&#125;@PostMapping(&quot;/update&quot;)public Result&lt;StudentVo&gt; update(@Validated StudentVo student) &#123; System.out.println(student.toString()); return Result.success(student);&#125; æ³¨æ„ @Validated æ˜¯ org.springframework.validation.annotation.Validatedï¼Œä¸è¦å¼•å…¥é”™äº†ã€‚åŠ äº†è¿™ä¸ªæ³¨è§£ä¹‹åï¼Œå°±ä¼šè‡ªåŠ¨ä¼šå‚æ•°è¿›è¡Œæ ¡éªŒã€‚å¦‚æœæ ¡éªŒä¸é€šè¿‡ï¼Œä¼šæŠ›å‡º BindException æˆ–è€… MethodArgumentNotValidExceptionè¿™ä¸¤ä¸ªå¼‚å¸¸ä¸­çš„ä¸€ä¸ªå¼‚å¸¸ï¼Œä¸€èˆ¬é¡¹ç›®ä¸­ä¸ºäº†è§„èŒƒæ¥å£è¿”å›å€¼ï¼Œéƒ½ä¼šè¿›è¡Œç»Ÿä¸€å¼‚å¸¸å¤„ç†ã€‚ æ ¡éªŒå¼‚å¸¸ç»Ÿä¸€å¼‚å¸¸å¤„ç†1234567891011121314151617181920212223@RestControllerAdvicepublic class GlobalExceptionHandler &#123; @ExceptionHandler(BindException.class) @ResponseBody public Result validateErrorHandler(BindException e) &#123; ObjectError error = e.getAllErrors().get(0); return Result.fail(error.getDefaultMessage()); &#125; @ExceptionHandler(MethodArgumentNotValidException.class) @ResponseBody public Result&lt;?&gt; validateErrorHandler(MethodArgumentNotValidException e) &#123; ObjectError error = e.getBindingResult().getAllErrors().get(0); return Result.fail(error.getDefaultMessage()); &#125; @ExceptionHandler(Throwable.class) @ResponseBody public Result&lt;?&gt; handleException(HttpServletRequest request, Throwable ex) &#123; return Result.fail(ex.getMessage()); &#125;&#125; å› ä¸ºé…ç½®æ ¡éªŒä¸º failFastï¼Œå› æ­¤é”™è¯¯ä¿¡æ¯ä¸­åªä¼šæœ‰ä¸€æ¡è®°å½•ã€‚ ç¬¬ä¸€æ¬¡æµ‹è¯•1curl -i -X POST -d &quot;name=å¼ ä¸‰&quot; &#x27;http://localhost:8082/learning-validator/create&#x27; åªå¡«å†™äº† name å‚æ•°ï¼Œè€Œ id ä¸ email æœªå¡«å†™çš„æƒ…å†µä¸‹è¿›è¡Œè¯·æ±‚ï¼Œè¿”å›ç»“æœ 1&#123;&quot;success&quot;:false,&quot;msg&quot;:&quot;å­¦å·ä¸èƒ½ä¸ºç©º&quot;&#125; æŒ‰ç…§ä¸€èˆ¬å¼€å‘é€»è¾‘è€Œè¨€ï¼Œcreate æ¥å£æ˜¯ä¸éœ€è¦ä¼ é€’ id å‚æ•°çš„ï¼Œä½†æ˜¯ update æ¥å£ä¸€èˆ¬å¿…é¡»è¦ä¼  id å‚æ•°ï¼Œéš¾ä¸æˆç”¨è¿™ä¸ªè¿™ä¸ªæ ¡éªŒæ¡†æ¶åéœ€è¦å†™ä¸¤ä¸ªå¯¹è±¡ä¹ˆï¼Ÿå…¶å®ä¸æ˜¯çš„ã€‚è¿™å°±å¼•å‡ºäº† æ ¡éªŒåˆ†ç»„ çš„æ¦‚å¿µï¼Œå³å¯ä»¥é€‰æ‹©æ ¡éªŒæŸäº›ç»„çš„å±æ€§è¿›è¡Œæ ¡éªŒã€‚ æ ¡éªŒåˆ†ç»„é¦–å…ˆéœ€è¦åˆ›å»ºä¸¤ä¸ªåˆ†ç»„ï¼ŒCreateGroup ä¸ UpdateGroupï¼Œåˆ†åˆ«ä»£è¡¨ç€æ–°å¢æ—¶éœ€è¦æ ¡éªŒä¸æ›´æ–°æ—¶éœ€è¦æ ¡éªŒã€‚ä¸¤ä¸ªç»„éƒ½æ˜¯ç©ºçš„æ¥å£ï¼Œåªæ˜¯ä½œä¸ºä¸€ä¸ªæ ‡è®°ç±»ä½¿ç”¨ã€‚ 1234public interface CreateGroup &#123;&#125;public interface UpdateGroup &#123;&#125; æ¥ç€ä¿®æ”¹è¯·æ±‚å¯¹è±¡ï¼Œåˆ†åˆ«æŒ‡å®šå“ªäº›å¯¹è±¡æ˜¯å“ªäº›ç»„éœ€è¦æ ¡éªŒçš„ï¼Œå¦‚æœä¸æŒ‡å®šç»„ï¼Œé»˜è®¤éƒ½ä¼šè¿›è¡Œæ ¡éªŒã€‚ 1234567891011121314@Datapublic class StudentVo &#123; @NotNull(groups = UpdateGroup.class, message = &quot;å­¦å·ä¸èƒ½ä¸ºç©º&quot;) private Integer id; @NotNull(message = &quot;å§“åä¸èƒ½ä¸ºç©º&quot;) private String name; @NotNull(groups = CreateGroup.class, message = &quot;é‚®ç®±åœ°å€ä¸èƒ½ä¸ºç©º&quot;) @Email(groups = CreateGroup.class, message = &quot;é‚®ç®±åœ°å€ä¸æ­£ç¡®&quot;) private String email; private Integer age;&#125; æœ¬æ–‡ç¤ºä¾‹ä¸­è¯·æ±‚å¯¹è±¡ï¼Œid å±æ€§åªåœ¨æ›´æ–°æ—¶æ ¡éªŒï¼›name å±æ€§æ— è®ºæ˜¯æ–°å¢è¿˜æ˜¯æ›´æ–°éƒ½è¦æ ¡éªŒï¼›email å±æ€§åªåœ¨æ–°å¢æ—¶è¿›è¡Œæ ¡éªŒï¼Œè€Œ age å±æ€§å› ä¸ºæœªæŒ‡å®šæ ¡éªŒæ³¨è§£ï¼Œå› æ­¤ä¸è¿›è¡Œæ ¡éªŒï¼Œè¿™é‡Œçš„ groups å¯ä»¥æ˜¯å¤šä¸ªåˆ†ç»„ã€‚ æŒ‡å®šå±æ€§çš„åˆ†ç»„ä¹‹åï¼Œæ§åˆ¶å™¨æ¥å£ä¹Ÿéœ€è¦æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªç»„æ¥è¿›è¡Œæ ¡éªŒã€‚ 1234567891011@PostMapping(&quot;/create&quot;)public Result&lt;StudentVo&gt; create(@Validated(CreateGroup.class) StudentVo student) &#123; System.out.println(student.toString()); return Result.success(student);&#125;@PostMapping(&quot;/update&quot;)public Result&lt;StudentVo&gt; update(@Validated(UpdateGroup.class) StudentVo student) &#123; System.out.println(student.toString()); return Result.success(student);&#125; ç¬¬äºŒæ¬¡æµ‹è¯•1curl -i -X POST -d &quot;name=å¼ ä¸‰&quot; &#x27;http://localhost:8082/learning-validator/create&#x27; åªå¡«å†™äº† name å‚æ•°ï¼Œè€Œ id ä¸ email æœªå¡«å†™çš„æƒ…å†µä¸‹è¿›è¡Œè¯·æ±‚ï¼Œè¿”å›ç»“æœï¼š 1&#123;&quot;success&quot;:false,&quot;msg&quot;:&quot;é‚®ç®±åœ°å€ä¸èƒ½ä¸ºç©º&quot;&#125; å¡«å†™ name å‚æ•°ä»¥åŠ email å‚æ•°è¿›è¡Œè¯·æ±‚ 1234curl -i -X POST \\ -d &quot;name=å¼ ä¸‰&quot; \\ -d &quot;email=vcmq@foxmail.com&quot; \\ &#x27;http://localhost:8082/learning-validator/create&#x27; è¿”å›ç»“æœï¼š 1&#123;&quot;data&quot;:&#123;&quot;name&quot;:&quot;å¼ ä¸‰&quot;,&quot;email&quot;:&quot;vcmq@foxmail.com&quot;&#125;,&quot;success&quot;:true,&quot;msg&quot;:&quot;success&quot;&#125; å¯ä»¥çœ‹åˆ° id è¿™ä¸ªå­—æ®µåœ¨ create çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œæ ¡éªŒã€‚ä¿®æ”¹ä¸º update æ¥å£è¿›è¡Œæµ‹è¯•ã€‚ 1234curl -i -X POST \\ -d &quot;name=å¼ ä¸‰&quot; \\ -d &quot;email=vcmq@foxmail.com&quot; \\ &#x27;http://localhost:8082/learning-validator/update&#x27; è¿”å›ç»“æœï¼š 1&#123;&quot;success&quot;:false,&quot;msg&quot;:&quot;å­¦å·ä¸èƒ½ä¸ºç©º&quot;&#125; æ‰‹åŠ¨æ ¡éªŒé™¤äº†ä½¿ç”¨@Validated æ³¨è§£æ–¹å¼æ ¡éªŒï¼Œä¹Ÿå¯ä»¥è¿›è¡Œæ‰‹åŠ¨æ ¡éªŒï¼Œæ‰‹åŠ¨æ ¡éªŒåŒæ ·ä¹Ÿæ”¯æŒåˆ†ç»„æ ¡éªŒã€‚ 123456@PostMapping(&quot;/create2&quot;)public Result&lt;StudentVo&gt; create2(StudentVo student) &#123; ValidatorUtils.validateEntity(student, CreateGroup.class); System.out.println(student.toString()); return Result.success(student);&#125; æ ¡éªŒå·¥å…·ç±»ï¼š 123456789101112131415161718192021222324252627282930public class ValidatorUtils &#123; private static Validator validator; static &#123; validator = Validation.byProvider(HibernateValidator.class) .configure() // å¿«é€Ÿå¤±è´¥ .failFast(true) .buildValidatorFactory().getValidator(); &#125; /** * æ ¡éªŒå¯¹è±¡ * * @param object å¾…æ ¡éªŒå¯¹è±¡ * @param groups å¾…æ ¡éªŒçš„ç»„ * @throws ApiException æ ¡éªŒä¸é€šè¿‡ï¼Œåˆ™æŠ¥ ApiException å¼‚å¸¸ */ public static void validateEntity(Object object, Class&lt;?&gt;... groups) throws ApiException &#123; Set&lt;ConstraintViolation&lt;Object&gt;&gt; constraintViolations = validator.validate(object, groups); if (!constraintViolations.isEmpty()) &#123; constraintViolations.stream().findFirst() .map(ConstraintViolation::getMessage) .ifPresent(v1 -&gt; &#123; throw new ApiException(v1); &#125;); &#125; &#125; å¸¸ç”¨æ³¨è§£ç©ºä¸éç©ºæ£€æŸ¥ æ³¨è§£ æ”¯æŒ Java ç±»å‹ è¯´æ˜ @Null Object ä¸º null @NotNull Object ä¸ä¸º null @NotBlank CharSequence ä¸ä¸º nullï¼Œä¸”å¿…é¡»æœ‰ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦ @NotEmpty CharSequenceã€Collectionã€Mapã€Array ä¸ä¸º nullï¼Œä¸”ä¸ä¸ºç©ºï¼ˆlength/size&gt;0ï¼‰ Boolean å€¼æ£€æŸ¥ æ³¨è§£ æ”¯æŒ Java ç±»å‹ è¯´æ˜ å¤‡æ³¨ @AssertTrue booleanã€Boolean ä¸º true ä¸º null æœ‰æ•ˆ @AssertFalse booleanã€Boolean ä¸º false ä¸º null æœ‰æ•ˆ æ—¥æœŸæ£€æŸ¥ æ³¨è§£ æ”¯æŒ Java ç±»å‹ è¯´æ˜ å¤‡æ³¨ @Future Dateã€Calendarã€Instantã€LocalDateã€LocalDateTimeã€LocalTimeã€MonthDayã€OffsetDateTimeã€OffsetTimeã€Yearã€YearMonthã€ZonedDateTimeã€HijrahDateã€JapaneseDateã€MinguoDateã€ThaiBuddhistDate éªŒè¯æ—¥æœŸä¸ºå½“å‰æ—¶é—´ä¹‹å ä¸º null æœ‰æ•ˆ @FutureOrPresent Dateã€Calendarã€Instantã€LocalDateã€LocalDateTimeã€LocalTimeã€MonthDayã€OffsetDateTimeã€OffsetTimeã€Yearã€YearMonthã€ZonedDateTimeã€HijrahDateã€JapaneseDateã€MinguoDateã€ThaiBuddhistDate éªŒè¯æ—¥æœŸä¸ºå½“å‰æ—¶é—´æˆ–ä¹‹å ä¸º null æœ‰æ•ˆ @Past Dateã€Calendarã€Instantã€LocalDateã€LocalDateTimeã€LocalTimeã€MonthDayã€OffsetDateTimeã€OffsetTimeã€Yearã€YearMonthã€ZonedDateTimeã€HijrahDateã€JapaneseDateã€MinguoDateã€ThaiBuddhistDate éªŒè¯æ—¥æœŸä¸ºå½“å‰æ—¶é—´ä¹‹å‰ ä¸º null æœ‰æ•ˆ @PastOrPresent Dateã€Calendarã€Instantã€LocalDateã€LocalDateTimeã€LocalTimeã€MonthDayã€OffsetDateTimeã€OffsetTimeã€Yearã€YearMonthã€ZonedDateTimeã€HijrahDateã€JapaneseDateã€MinguoDateã€ThaiBuddhistDate éªŒè¯æ—¥æœŸä¸ºå½“å‰æ—¶é—´æˆ–ä¹‹å‰ ä¸º null æœ‰æ•ˆ æ•°å€¼æ£€æŸ¥ æ³¨è§£ æ”¯æŒ Java ç±»å‹ è¯´æ˜ å¤‡æ³¨ @Max BigDecimalã€BigIntegerï¼Œbyteã€shortã€intã€long ä»¥åŠåŒ…è£…ç±» å°äºæˆ–ç­‰äº ä¸º null æœ‰æ•ˆ @Min BigDecimalã€BigIntegerï¼Œbyteã€shortã€intã€long ä»¥åŠåŒ…è£…ç±» å¤§äºæˆ–ç­‰äº ä¸º null æœ‰æ•ˆ @DecimalMax BigDecimalã€BigIntegerã€CharSequenceï¼Œbyteã€shortã€intã€long ä»¥åŠåŒ…è£…ç±» å°äºæˆ–ç­‰äº ä¸º null æœ‰æ•ˆ @DecimalMin BigDecimalã€BigIntegerã€CharSequenceï¼Œbyteã€shortã€intã€long ä»¥åŠåŒ…è£…ç±» å¤§äºæˆ–ç­‰äº ä¸º null æœ‰æ•ˆ @Negative BigDecimalã€BigIntegerï¼Œbyteã€shortã€intã€longã€floatã€double ä»¥åŠåŒ…è£…ç±» è´Ÿæ•° ä¸º null æœ‰æ•ˆï¼Œ0 æ— æ•ˆ @NegativeOrZero BigDecimalã€BigIntegerï¼Œbyteã€shortã€intã€longã€floatã€double ä»¥åŠåŒ…è£…ç±» è´Ÿæ•°æˆ–é›¶ ä¸º null æœ‰æ•ˆ @Positive BigDecimalã€BigIntegerï¼Œbyteã€shortã€intã€longã€floatã€double ä»¥åŠåŒ…è£…ç±» æ­£æ•° ä¸º null æœ‰æ•ˆï¼Œ0 æ— æ•ˆ @PositiveOrZero BigDecimalã€BigIntegerï¼Œbyteã€shortã€intã€longã€floatã€double ä»¥åŠåŒ…è£…ç±» æ­£æ•°æˆ–é›¶ ä¸º null æœ‰æ•ˆ @Digits(integer = 3, fraction = 2) BigDecimalã€BigIntegerã€CharSequenceï¼Œbyteã€shortã€intã€long ä»¥åŠåŒ…è£…ç±» æ•´æ•°ä½æ•°å’Œå°æ•°ä½æ•°ä¸Šé™ ä¸º null æœ‰æ•ˆ å…¶ä»– æ³¨è§£ æ”¯æŒ Java ç±»å‹ è¯´æ˜ å¤‡æ³¨ @Pattern CharSequence åŒ¹é…æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ ä¸º null æœ‰æ•ˆ @Email CharSequence é‚®ç®±åœ°å€ ä¸º null æœ‰æ•ˆï¼Œé»˜è®¤æ­£åˆ™ &#39;.*&#39; @Size CharSequenceã€Collectionã€Mapã€Array å¤§å°èŒƒå›´ï¼ˆlength/size&gt;0ï¼‰ ä¸º null æœ‰æ•ˆ hibernate-validator æ‰©å±•çº¦æŸï¼ˆéƒ¨åˆ†ï¼‰ æ³¨è§£ æ”¯æŒ Java ç±»å‹ è¯´æ˜ @Length String å­—ç¬¦ä¸²é•¿åº¦èŒƒå›´ @Range æ•°å€¼ç±»å‹å’Œ String æŒ‡å®šèŒƒå›´ @URL URL åœ°å€éªŒè¯ ç¤ºä¾‹ä»£ç  Hibernate Validator æ ¡éªŒæœ€ä½³å®è·µç¤ºä¾‹ä»£ç  å‚è€ƒ å¦‚ä½•ä¼˜é›…çš„åšæ•°æ®æ ¡éªŒ-Hibernate Validator è¯¦ç»†ä½¿ç”¨è¯´æ˜","tags":[{"name":"Hibernate Validator æ ¡éªŒ","slug":"Hibernate-Validator-æ ¡éªŒ","permalink":"http://nullpointer.pw/tags/Hibernate-Validator-%E6%A0%A1%E9%AA%8C/"},{"name":"æ ¡éªŒç»Ÿä¸€å¼‚å¸¸å¤„ç†","slug":"æ ¡éªŒç»Ÿä¸€å¼‚å¸¸å¤„ç†","permalink":"http://nullpointer.pw/tags/%E6%A0%A1%E9%AA%8C%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/"}]},{"title":"hexo è‡ªå®šä¹‰æ–‡ç«  url åœ°å€","date":"2020-01-26T08:32:17.000Z","path":"hexo-custom-article-url.html","text":"ç¬”è€…åˆæ¬¡é€šè¿‡ hexo æ­å»ºåšå®¢æ—¶ï¼Œå¯¹ hexo ä¸å¤ªäº†è§£ï¼Œåæ¥å‘ç°ä¸­æ–‡æ ‡é¢˜çš„æ–‡ç«  URL ä¼šè½¬ä¹‰æˆhttp://nullpointer.pw/2018/09/17/%E5%92%8C%E6%88%91%E4%B8%80%E8%B5%B7%E6%89%93%E9%80%A0%E4%B8%AA%E7%AE%80%E5%8D%95%E6%90%9C%E7%B4%A2%E4%B9%8BSpringDataElasticSearch%E5%85%B3%E9%94%AE%E8%AF%8D%E9%AB%98%E4%BA%AE.html ç±»ä¼¼æ¨¡æ ·ï¼Œï¼Œï¼Œå½“æ ‡é¢˜æ¯”è¾ƒé•¿æ—¶ï¼ŒURL å°±ä¼šå¾ˆé•¿ï¼Œhexo é»˜è®¤çš„ URL æ˜¯:year/:month/:titleï¼Œä¸ºäº†å‡å° URL é•¿åº¦ï¼Œäºæ˜¯ç¬”è€…åšäº†ä¸€ä»¶æ¯”è¾ƒå‚»ç¼ºçš„äº‹æƒ…ï¼Œå°† URL ä¿®æ”¹æˆäº†åªæœ‰æ ‡é¢˜ï¼Œè¿™ä¹Ÿé€ æˆå¦‚ä»Š repo åˆ—è¡¨æ–‡ä»¶è¿‡å¤šï¼ŒåŒæ—¶ä¹Ÿå¹¶æœªè§£å†³ä¸­æ–‡æ ‡é¢˜è½¬ä¹‰çš„é—®é¢˜ï¼Œå› æ­¤éœ€è¦è‡ªå®šä¹‰æ–‡ç«  URLã€‚ è‡ªå®šä¹‰æ–‡ç«  URLå…ˆè¯´è¯´ä¸­æ–‡è½¬ä¹‰ URL çš„æ–¹å¼ï¼Œé¦–å…ˆéœ€è¦ä¿®æ”¹ hexo æ ¹ç›®å½•ä¸‹çš„_config.yml æ–‡ä»¶ï¼Œ 1234#permalink: :year/:month/:title/permalink: :year/:month/:urlname.htmlpermalink_defaults: urlname: index å°†åŸæ°¸ä¹…é“¾æ¥ permalink ä¸­çš„*:title* æ›¿æ¢ä¸ºä¸º urlname.html ï¼ŒåŒæ—¶åœ¨ permalink_defaults å¢åŠ  urlname å±æ€§ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡åœ¨æ–‡ç« å†…å®¹çš„ Formatter é…ç½®æ–‡ç« çš„ URL é“¾æ¥åœ°å€ï¼Œç¬”è€…ä¹‹å‰ä¿®æ”¹è¿‡ä¸€æ¬¡æ°¸ä¹…é“¾æ¥æ ¼å¼ï¼Œåªä¿ç•™äº†æ ‡é¢˜å³ï¼špermalink: :title.htmlï¼Œç°åœ¨ä¿®æ”¹ä¸ºäº† permalink: :urlname.html ,æœ¬æ–‡æ–‡ç« é…ç½®å¦‚ä¸‹å›¾ï¼Œ æœ¬æ–‡æœ€ç»ˆçš„ URL åœ°å€å°±æ˜¯ï¼šhttp://nullpointer.pw/hexo-custom-article-url.html ä¿®æ”¹æ–‡ç« æ¨¡æ¿ä¿®æ”¹ post.md 123456789---title: &#123;&#123; title &#125;&#125;date: &#123;&#123; date &#125;&#125;urlname: tags:- 1categories:- 2--- è¿™æ ·é€šè¿‡å‘½ä»¤ hexo new xxxxxxå‘½ä»¤æ–°å»ºçš„åšå®¢æ–‡ç« ä¸­å°±è‡ªåŠ¨å¸¦æœ‰è¿™ä¸ªå±æ€§ã€‚ å…¼å®¹æ—§æ–‡ç«  URLå› ä¸ºæ—§çš„æ–‡ç« å¯èƒ½å·²ç»è¢«æœç´¢å¼•æ“æ”¶å½•ï¼Œå¦‚æœç›´æ¥ç²—æš´ä¿®æ”¹å°±ä¼šé€ æˆæ”¶å½•çš„ç»“æœå‡ºç° 404 çš„æƒ…å†µï¼Œè¿˜æœ‰é˜…è¯»æ•°ç»Ÿè®¡ä¸€èˆ¬ä¹Ÿæ˜¯æ ¹æ®æ–‡ç«  URL æ¥åšçš„ï¼Œç¬”è€…ä¹‹å‰ä¹Ÿæœ‰è¿‡å› ä¸ºä¿®æ”¹æ–‡ç«  URL é€ æˆæ‰€æœ‰æ–‡ç« é˜…è¯»æ•°å½’é›¶çš„é­é‡ã€‚ æ€»ä¹‹ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çœ‹åˆ°çš„æƒ…å†µï¼› æ‰€ä»¥ä¸ºäº†ä¿æŒæ—§çš„æ–‡ç«  URL ä¸å˜ï¼Œéœ€è¦å¯¹æ‰€æœ‰æ—§æ–‡ç« åŒæ ·å¢åŠ è¿™ä¸ª urlname å±æ€§ï¼Œå±æ€§çš„å€¼è®¾ç½®ä¸ºå½“å‰æ–‡ç« çš„æ–‡ä»¶åå³å¯ã€‚æ¯”å¦‚ http://nullpointer.pw/å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ SpringDataElasticSearch å…³é”®è¯é«˜äº®.htmlè¿™ç¯‡æ–‡ç« ä¸ºäº†ä¸æ”¹å˜åŸ URL åœ°å€ï¼Œåœ¨ md æ–‡ä»¶ä¸­ä¿®æ”¹ä¸ºï¼š 1234567891011---title: å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ SpringDataElasticSearch å…³é”®è¯é«˜äº®tags: - SpringDataElasticSearch é«˜äº® - SpringDataElasticSearch å…³é”®è¯é«˜äº® - ElasticsearchTemplate ä½¿ç”¨ categories: - ElasticSearchdate: 2018-09-17 21:27:03urlname: å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ SpringDataElasticSearch å…³é”®è¯é«˜äº®--- ç¬”è€…æ”¹äº†å¥½ä¸€ä¼šå„¿æ‰æ”¹å®Œæ‰€æœ‰æ–‡ç« ï¼Œè¿˜å¥½æ–‡ç« ä¸æ˜¯å¾ˆå¤šã€‚æ–‡ç« ç‰¹åˆ«å¤šçš„åšä¸»ï¼Œææ€•åªèƒ½å†™ä¸ªè„šæœ¬æ‰¹é‡ä¿®æ”¹äº†ã€‚ åè®°å¯ä»¥è‡ªå®šä¹‰æ–‡ç«  URL çš„å¥½å¤„å¤šå¤šï¼Œç¬¬ä¸€ä¸ªæ˜¯å‡å° URL é•¿åº¦ï¼Œä¾¿äºæœç´¢å¼•æ“æ”¶å½•ï¼Œä¹Ÿæ–¹ä¾¿è‡ªå·±åœ¨å…¶ä»–åœ°æ–¹ç›´æ¥å¼•ç”¨ï¼Œä¸ä¼šå‡ºç°ç±»ä¼¼ä¸€ä¸²ä¹±ç  URL çš„å°´å°¬æƒ…å†µï¼› å¦å¤–ç”±äºæ–‡ç«  URL ä¸æ–‡ç« æ ‡é¢˜å…³ç³»ä¸æ˜¯ç‰¹åˆ«ç´§å¯†ï¼Œä¸ä¼šé€ æˆä¿®æ”¹æ ‡é¢˜å¯¼è‡´ URL æ”¹å˜çš„çª˜å†µï¼Œå¯ä»¥åæœŸä¿®æ”¹ä¸é€‚å½“çš„æ ‡é¢˜ã€‚ å¥½å¤„å¤šå¤šï¼Œå¸Œæœ›å¯¹ä½ æœ‰ç”¨~ å‚è€ƒ https://printempw.github.io/hexo-posts-in-subfolder/ https://blog.csdn.net/jingbin_/article/details/80617210","tags":[{"name":"hexo-ä¿®æ”¹æ°¸ä¹…é“¾æ¥","slug":"hexo-ä¿®æ”¹æ°¸ä¹…é“¾æ¥","permalink":"http://nullpointer.pw/tags/hexo-%E4%BF%AE%E6%94%B9%E6%B0%B8%E4%B9%85%E9%93%BE%E6%8E%A5/"}]},{"title":"å¿…çŸ¥å¿…ä¼šä¹‹æµç¨‹å›¾","date":"2020-01-22T14:18:46.000Z","path":"flow-chart-draw.html","text":"æµç¨‹å›¾åœ¨å„è¡Œå„ä¸šéƒ½æœ‰æ‰€åº”ç”¨ï¼Œå°¤å…¶å¹¿æ³›åº”ç”¨ä¸æŠ€æœ¯è®¾è®¡ï¼Œäº§å“è®¾è®¡ã€‚ç”»å¥½æµç¨‹å›¾ï¼Œå¯ä»¥è®©åˆ«äººèƒ½å¤Ÿå¾ˆè½»æ¾åœ°ç†è§£ä¸šåŠ¡ï¼Œç‰¹åˆ«æ˜¯é‡åˆ°æ¯”è¾ƒå¤æ‚çš„ä¸šåŠ¡æ—¶ï¼Œç”¨è¨€è¯­è§£é‡Šå¯èƒ½éœ€è¦èŠ±è´¹ä¸€ä¸Šåˆç”šè‡³ä¸€å¤©ï¼Œä½†æ˜¯ç”¨å›¾å»è¡¨ç¤ºå¯èƒ½åªéœ€è¦ 1 ä¸ªå°æ—¶ã€‚ä¸å¤šè¯´ï¼Œç›´å¥”ä¸»é¢˜ã€‚ é¢„å¤‡çŸ¥è¯†çœ‹äº†ç½‘ä¸Šçš„ä¸€äº›å…³äºæµç¨‹å›¾ç»˜åˆ¶çš„èµ„æ–™ï¼Œç»„ä»¶å¤ªå¤šï¼Œç»„ä»¶å«ä¹‰çš„è§£é‡Šå¦‚åŒæœºç¿»ï¼Œæ²¡æœ‰å…·ä½“å®ä¾‹ï¼Œè®©äººæ— ä»ä¸‹æ‰‹ï¼Œçœ‹å¾—ä»¤äººå¤´å¤§ã€‚å…¶å®å¤§å¯ä¸å¿…å­¦ä¹ æ‰€æœ‰ç»„ä»¶ï¼Œå› ä¸ºå¸¸ç”¨çš„å°±åªæœ‰é‚£å‡ ä¸ªç»„ä»¶ï¼ŒæŒæ¡åŸºæœ¬çš„ç»„ä»¶ä½¿ç”¨ï¼Œä»¥åå¯ä»¥çœ‹æƒ…å†µé€æ¸æ‰©å±•ã€‚ é¦–å…ˆçœ¼ç†Ÿä¸€ä¸‹å‡ ä¸ªå¸¸ç”¨çš„æµç¨‹å›¾åŸºæœ¬ç»„ä»¶ï¼š å†çœ‹ä¸€ä¸‹æµç¨‹å›¾çš„ç»“æ„æ„æˆï¼š å¸¸ç”¨çš„æµç¨‹å›¾å°±æ˜¯é¡ºåºç»“æ„ä¸é€‰æ‹©ç»“æ„äºŒè€…ç»“åˆçš„ç»“æ„ã€‚åœ¨ç»˜åˆ¶æµç¨‹å›¾çš„è¿‡ç¨‹ä¸­è¿˜éœ€è¦æ³¨æ„å¦‚ä¸‹å‡ ç‚¹ï¼Œæ­¤å¤„å¼•ç”¨å‚è€ƒå†…å®¹ï¼š ï¼ˆ1ï¼‰ç»˜åˆ¶æµç¨‹å›¾æ—¶ï¼Œä¸ºäº†æé«˜æµç¨‹å›¾çš„é€»è¾‘æ€§ï¼Œåº”éµå¾ªä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ’åˆ—ã€‚ ï¼ˆ2ï¼‰ç»˜åˆ¶æµç¨‹å›¾æ—¶ï¼Œä¸ºäº†æé«˜æµç¨‹å›¾çš„é€»è¾‘æ€§ï¼Œåº”éµå¾ªä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ’åˆ—ã€‚ä¸€ä¸ªæµç¨‹ä»å¼€å§‹ç¬¦å¼€å§‹ï¼Œä»¥ç»“æŸç¬¦ç»“æŸã€‚å¼€å§‹ç¬¦å·åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œè€Œç»“æŸç¬¦å·å¯å‡ºç°å¤šæ¬¡ã€‚è‹¥æµç¨‹è¶³å¤Ÿæ¸…æ™°ï¼Œå¯çœç•¥å¼€å§‹ã€ç»“æŸç¬¦å·ã€‚ ï¼ˆ3ï¼‰è±å½¢ä¸ºåˆ¤æ–­ç¬¦å·ï¼Œå¿…é¡»è¦æœ‰â€œæ˜¯å’Œå¦ï¼ˆæˆ–Yå’ŒNï¼‰â€ä¸¤ç§å¤„ç†ç»“æœï¼Œæ„æ€æ˜¯è¯´ï¼Œè±å½¢åˆ¤æ–­æ¡†ä¸€å®šéœ€è¦æœ‰ä¸¤æ¡ç®­å¤´æµå‡ºï¼›ä¸”åˆ¤æ–­ç¬¦å·çš„ä¸Šä¸‹ç«¯æµå…¥æµå‡ºä¸€èˆ¬ç”¨â€œæ˜¯ï¼ˆæˆ–Yï¼‰â€ï¼Œå·¦å³ç«¯æµå…¥æµå‡ºç”¨â€œå¦ï¼ˆæˆ–Yï¼‰â€ã€‚ ï¼ˆ4ï¼‰åŒä¸€æµç¨‹å›¾å†…ï¼Œç¬¦å·å¤§å°éœ€è¦ä¿æŒä¸€è‡´ï¼ŒåŒæ—¶è¿æ¥çº¿ä¸èƒ½äº¤å‰ï¼Œè¿æ¥çº¿ä¸èƒ½æ— æ•…å¼¯æ›²ã€‚ ï¼ˆ5ï¼‰æµç¨‹å¤„ç†å…³ç³»ä¸ºå¹¶è¡Œå…³ç³»çš„ï¼Œéœ€è¦å°†æµç¨‹æ”¾åœ¨åŒä¸€é«˜åº¦ã€‚ ï¼ˆ6ï¼‰å¿…è¦æ—¶åº”é‡‡ç”¨æ ‡æ³¨ï¼Œä»¥æ­¤æ¥æ¸…æ™°åœ°è¯´æ˜æµç¨‹ï¼Œæ ‡æ³¨è¦ç”¨ä¸“é—¨çš„æ ‡æ³¨ç¬¦å·ã€‚ ï¼ˆ7ï¼‰å¤„ç†æµç¨‹é¡»ä»¥å•ä¸€å…¥å£å’Œå•ä¸€å‡ºå£ç»˜åˆ¶ï¼ŒåŒä¸€è·¯å¾„çš„æŒ‡ç¤ºç®­å¤´åº”åªæœ‰ä¸€ä¸ªã€‚ ï¼ˆ8ï¼‰åŒä¸€è·¯å¾„çš„æŒ‡ç¤ºç®­å¤´åº”åªæœ‰ä¸€ä¸ªã€‚ ï¼ˆ9ï¼‰æµç¨‹å›¾ä¸­ï¼Œå¦‚æœæœ‰å‚è€ƒå…¶ä»–å·²ç»å®šä¹‰çš„æµç¨‹ï¼Œä¸éœ€é‡å¤ç»˜åˆ¶ï¼Œç›´æ¥ç”¨å·²å®šä¹‰æµç¨‹ç¬¦å·å³å¯ã€‚ ä»¥ä¸Šä¸ºéœ€è¦å‚¨å¤‡çš„åŸºç¡€æµç¨‹å›¾çŸ¥è¯†ï¼Œå‚è€ƒåœ°å€ï¼šç”»äº†å¤šå¹´çš„æµç¨‹å›¾ï¼Œä½ çœŸçš„ç”»è§„èŒƒäº†å—ï¼Ÿ å·¥å…·å‡†å¤‡æ‰€è°“å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œç»˜åˆ¶æµç¨‹å›¾éœ€è¦è¶æ‰‹çš„å…µå™¨ï¼Œæˆ‘æ¨èä¸¤ä¸ªåœ¨çº¿ç»˜åˆ¶çš„ç½‘ç«™ã€‚ ProcessOn Draw.io draw.io æä¾›äº†æ¡Œé¢ç‰ˆï¼Œç›®å‰æˆ‘ä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªï¼Œ processOn å…è´¹ç‰ˆæœ‰æ•°é‡é™åˆ¶ï¼Œä¸è¿‡ä¸€èˆ¬ä¹Ÿå¤Ÿç”¨äº†ã€‚ ä¸šåŠ¡è¯´æ˜ä»¥ä¸‹ç¬”è€…å°±ä»¥æœ¬äººå‰æ®µæ—¶é—´å¼€å‘çš„æŠ½å¥–ç³»ç»Ÿå®è·µç»˜åˆ¶æŠ€æœ¯æµç¨‹å›¾ï¼Œä»¥ä¾›å‚è€ƒã€‚ éœ€æ±‚å°±æ˜¯å¼€å‘ä¸€ä¸ªæ˜¥èŠ‚ç”¨çš„æŠ½å¥–ç³»ç»Ÿï¼Œä»£ç å®ç°ä¸Šè¿˜æ˜¯ä¸éš¾ï¼Œä½†æ˜¯æ­¥éª¤è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œç”»æµç¨‹å›¾ä¸€ä¸ªåŸå› æ˜¯å¸®åŠ©è‡ªå·±ç†æ¸…ä¸šåŠ¡è®¾è®¡ä¸šåŠ¡ï¼Œå¦ä¸€ä¸ªåŸå› å°±æ˜¯å¯ä»¥ç›´æ¥å°†æµç¨‹å›¾æä¾›ç»™å¯¹åº”çš„æµ‹è¯•ï¼Œä»è€Œè¾¾åˆ°é’ˆå¯¹æ¯ä¸ªæ­¥éª¤è¿›è¡Œæµ‹è¯•çš„ç›®çš„ã€‚ æµç¨‹å›¾å®è·µç»˜åˆ¶æµç¨‹å›¾çš„ç»˜åˆ¶è§„åˆ™å¦‚ä¸Šæ–‡å‚è€ƒä¸­çš„è§„åˆ™è¿›è¡Œï¼Œå¤„ç†ç»„ä»¶åªæœ‰ä¸€ä¸ªè¾“å…¥ä¸€ä¸ªè¾“å‡ºï¼Œè±å½¢åˆ¤å®šå¿…å®šæœ‰ä¸¤ä¸ªè¾“å‡ºï¼Œå·¦å³ç«¯æµå‡ºä»£è¡¨å¦å®šï¼Œä¸åŒæµç¨‹ä½¿ç”¨å­æµç¨‹ç»„ä»¶è¿›è¡Œå¼•ç”¨ï¼Œè¿æ¥çº¿æ— äº¤å‰ç­‰ã€‚ ç¬”è€…ä½¿ç”¨Draw.ioç»˜åˆ¶æœ¬å›¾ï¼Œä½†æ˜¯å¸¸ç”¨çš„ç»„ä»¶åˆ†æ•£äºä¸åŒçš„åˆ†ç±»ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œç¬”è€…å°†å¸¸ç”¨çš„å‡ ä¸ªåŸºæœ¬ç»„ä»¶æ”¾åˆ°ä¾¿ç¬ºæœ¬åˆ†ç±»ã€‚è¿™ä¸ªåˆ†ç±»å¯ä»¥è¿›è¡Œå¯¼å…¥å¯¼å‡ºï¼Œè¿™é‡Œåˆ†äº«æˆ‘çš„å¯¼å‡ºå†…å®¹ï¼Œå¯ä»¥ç›´æ¥æ‹·è´å‡ºæ¥ç²˜è´´ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨ä¾¿ç¬ºæœ¬ä¸­å¯¼å…¥å³å¯ã€‚ 1&lt;mxlibrary&gt;[&#123;&quot;xml&quot;:&quot;jVFBDsIgEHwN14bCxbOtevIRRNZCAkJgtfT3QkEbD008kOzM7IQZIHyw6RKEV1cnwRB+InwIzmGdbBrAGMKoloSPhDGaD2HnHbVfVepFgAf+Y2DV8BLmCZWpRMTFNEKhzbHGnvCjFFFBcdIMZqURohe3sjfnBpmLSvgCbZpKpU7eZRdRBGzXQEBIu1FXquW8gLOAYckrs5ao6sahtqEK9KSaizdOxIqnr3PrnYdW/QO3J161nx94Aw==&quot;,&quot;w&quot;:80,&quot;h&quot;:30,&quot;aspect&quot;:&quot;fixed&quot;,&quot;title&quot;:&quot;å¼€å§‹/ç»“æŸ&quot;&#125;,&#123;&quot;xml&quot;:&quot;jVBLDsIgED3N7CnEC9hqVx6CyKSQgDQw2vb2TgvauGjigmTmfch7A6oNc5/0aG/RoAd1AdWmGKlMYW7Re5DCGVAdSCn4gbwesM3GilEnfNA/BlkML+2fWJACZFp8BSwFjtU1oM5GZ4urU/AyWUeYR31fdRM3YKz+holwPky0QTVOjzEgpYUlkzNkq0KU1MKiG2y1nSqmc9mHr3Xvx0Ot+Fn3U27cz6Xf&quot;,&quot;w&quot;:100,&quot;h&quot;:50,&quot;aspect&quot;:&quot;fixed&quot;,&quot;title&quot;:&quot;å¤„ç†&quot;&#125;,&#123;&quot;xml&quot;:&quot;jZA9DsIwDIVP4z1NFmZa6MTECQK16kgJqVL37/aEJlB1qMQQ6fl7dvRsUKWb66A7uvkGLagLqDJ4z0m5uURrQQrTgKpAShEfyOuBW6yu6HTAF/8zINPAqO2AiSTQ82IzCOTdY+hBnScyjPdOPz/OFDNHRuxi6KqIMn+FgXE+jLOinKVG75DDElsm0zCljlNKLAhNS7xnuk91+5vcdosir/cttzOu3u7Kbw==&quot;,&quot;w&quot;:80,&quot;h&quot;:80,&quot;aspect&quot;:&quot;fixed&quot;,&quot;title&quot;:&quot;åˆ¤å®š&quot;&#125;,&#123;&quot;xml&quot;:&quot;jZJRbsMgDIZPwzsF7QKla/cy7aEnoIkXUJ0QgdMkO/0coKs2qdIiRbK/3z8xdoQ2/XKKdnTvoQUU+lVoE0OgEvWLAUShpG+FPgilJL9CHZ+ou6zK0UYY6D8GVQw3ixMUUkCiFStIzo5bOMbQQEpC72fnCc6jbTY8c+/MHPXc/GHH4cU21y6GaWg/JkI/QOWtTQ6270pOPsNAR9t7XBm8Ad6AfGOrcPZf2aRqbgKGmLvRMj/MLfpuYNbwTYHFfaIYrvCn1JjtCI9450PY+tnXa0MkWJ6OLqM6txOEHiiuXDL7llytkGW80oHvXLW9VGZTybsf62MRHNRd3NPHzrP265f4Bg==&quot;,&quot;w&quot;:100,&quot;h&quot;:50,&quot;aspect&quot;:&quot;fixed&quot;,&quot;title&quot;:&quot;å­æµç¨‹&quot;&#125;,&#123;&quot;xml&quot;:&quot;jVJRasMwDD2N/12bHWDLln4NdgUzi9jMiYqstsntp0VJm7AVZjBIT3pPkmXjm348Ujild4xQjH8zviFEVqsfGyjFOJuj8a/GOSvXuPZB9DBH7SkQDPwfglPCJZQzKKJA5aksAAzxmQiv4g04CPgSQ03wI3AQJ3FfFrMy4Rc0WJBmqm9bK0ciKgqxg4d9ztDS5BGwB6ZJUq45ctKMJx3FJshd4j1GUALny14+VHW7m9ytwgdmKezstJdZGRXP9AlL0vb5Vt74N48DdcC/eGJshrpD8zJW9750Td/+iW8=&quot;,&quot;w&quot;:50,&quot;h&quot;:50,&quot;aspect&quot;:&quot;fixed&quot;,&quot;title&quot;:&quot;è™šçº¿&quot;&#125;]&lt;/mxlibrary&gt; æµç¨‹å›¾å¯¼å‡ºæœ¬å›¾é€šè¿‡æ¡Œé¢ç‰ˆå®¢æˆ·ç«¯ Draw.io ç»˜åˆ¶ï¼Œç»˜åˆ¶é€šè¿‡å¯¼å‡ºåŠŸèƒ½å¯¼å‡ºï¼Œå¯¼å‡ºæ–¹æ³•ï¼šå…ˆ ctrl + a é€‰ä¸­æ‰€æœ‰ç»„ä»¶ï¼Œé€‰æ‹©æ–‡ä»¶-å¯¼å‡ºä¸ºæ–‡ä»¶-pngï¼Œè®¾ç½®è¾¹æ¡†å®½åº¦ï¼Œå‹¾é€‰ ä»…æ‰€é€‰å†…å®¹ï¼Œå³å¯å¯¼å‡ºPNGå›¾ç‰‡ã€‚ å‚è€ƒæ–‡ç«  ç”»äº†å¤šå¹´çš„æµç¨‹å›¾ï¼Œä½ çœŸçš„ç”»è§„èŒƒäº†å—ï¼Ÿ æ·±å…¥æµ…å‡ºä¸ºä½ è§£è¯»å››ç±»ã€Œæµç¨‹å›¾ã€ï¼Œé™„æ‘©æ‹œ/ofoæ¡ˆä¾‹åˆ†æ","tags":[{"name":"æµç¨‹å›¾ç»˜åˆ¶","slug":"æµç¨‹å›¾ç»˜åˆ¶","permalink":"http://nullpointer.pw/tags/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%BB%98%E5%88%B6/"}]},{"title":"Java8 æ—¶é—´ API å…¨é›†åˆ","date":"2020-01-21T22:56:38.000Z","path":"Java8æ—¶é—´APIå…¨é›†åˆ.html","text":"å‰è¨€Java 8 å·²ç»é¢ä¸–å¾ˆé•¿æ—¶é—´ï¼Œç›®å‰è¿ Java 13ã€Java 14 éƒ½å·²ç»å‡ºæ¥äº†ï¼Œä½†è‡ªå·±å¯¹äº Java8 ä¸­çš„ä¸€äº› API ç”¨æ³•è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œä»Šå¹´æ‰ç®—å…¨é¢åˆ‡æ¢åˆ° Java8ã€‚åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸å¯é¿å…åœ°ä¼šä½¿ç”¨åˆ° Java 8 çš„æ–°æ—¶é—´ APIï¼Œæ¯”å¦‚ LocalDateTimeã€LocalDate ç­‰ï¼Œæ”¾å¼ƒä½¿ç”¨éš¾ç”¨çš„ Dateï¼›ä½†æ˜¯æ¯æ¬¡éœ€è¦è¿›è¡Œè½¬æ¢æ“ä½œæ—¶ï¼Œæ€»æ˜¯éœ€è¦é‡å¤å» Google æœç´¢ï¼Œç´¢æ€§ä¸€æ¬¡æ€§è¿‡ä¸€éæ‰€æœ‰çš„æ—¶é—´ APIï¼Œæ€»ç»“ä¸€äº›å¸¸ç”¨çš„è½¬æ¢æ–¹æ³•ï¼Œæ¯”å¦‚æ—¶é—´æˆ³ä¸ LocalDateTime äº’è½¬ï¼ŒDate ä¸ LocalDateTime äº’è½¬ã€‚ Code123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166public class Test1 &#123; public static final DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;); public static final DateTimeFormatter TIME_FORMATTER = DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;); public static final DateTimeFormatter MONTH_DAY_FORMATTER = DateTimeFormatter.ofPattern(&quot;MM-dd&quot;); public static final DateTimeFormatter YEAR_FORMATTER = DateTimeFormatter.ofPattern(&quot;yyyy&quot;); public static final DateTimeFormatter YEAR_MONTH_FORMATTER = DateTimeFormatter.ofPattern(&quot;yyyy-MM&quot;); public static void main(String[] args) &#123; // é€šç”¨æ–¹æ³• // plus/plusXXX å½“å‰æ—¥æœŸæˆ–æ—¶é—´åŠ ä¸Šä¸€æ®µ (å¹´/æœˆ/å‘¨/æ—¥/å°æ—¶/åˆ†é’Ÿ) æ—¥æœŸæˆ–æ—¶é—´ // minus/minusXXX å½“å‰æ—¥æœŸæˆ–æ—¶é—´å‡å»ä¸€æ®µ (å¹´/æœˆ/å‘¨/æ—¥/å°æ—¶/åˆ†é’Ÿ) æ—¥æœŸæˆ–æ—¶é—´ // isBefore è¦æ¯”è¾ƒçš„æ—¥æœŸæˆ–æ—¶é—´æ˜¯å¦åœ¨å½“å‰å¯¹è±¡ä¹‹å‰ // isAfter è¦æ¯”è¾ƒçš„æ—¥æœŸæˆ–æ—¶é—´æ˜¯å¦åœ¨å½“å‰å¯¹è±¡ä¹‹å // parse é€šè¿‡å­—ç¬¦ä¸²åˆ›å»ºæ—¥æœŸæˆ–æ—¶é—´ // format å°†æ—¥æœŸæˆ–æ—¶é—´æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸² System.out.println(&quot;--------LocalDate---------&quot;); // æ—¥æœŸ LocalDate today = LocalDate.now(); System.out.println(&quot;å½“å‰æ—¥æœŸï¼š&quot; + today); System.out.println(&quot;å½“å‰æ—¥æœŸåŠ ä¸Š 3 å¤©ï¼š&quot; + today.plusDays(3)); System.out.println(&quot;å½“å‰æ—¥æœŸå‡å» 3 å¤©ï¼š&quot; + today.minusDays(3)); System.out.println(&quot;å¹´ï¼š&quot; + today.getYear()); System.out.println(&quot;æœˆ (EN)ï¼š&quot; + today.getMonth()); System.out.println(&quot;æœˆ (1-12)ï¼š&quot; + today.getMonthValue()); System.out.println(&quot;å½“å‘¨ç¬¬å‡ å¤©ï¼š&quot; + today.getDayOfWeek()); System.out.println(&quot;å½“æœˆç¬¬å‡ å¤©ï¼š&quot; + today.getDayOfMonth()); System.out.println(&quot;å½“å¹´ç¬¬å‡ å¤©ï¼š&quot; + today.getDayOfYear()); System.out.println(&quot;æ˜¯å¦é—°å¹´ï¼š&quot; + today.isLeapYear()); System.out.println(&quot;å½“æœˆå…±å¤šå°‘å¤©ï¼š&quot; + today.lengthOfMonth()); System.out.println(&quot;å½“å¹´å…±å¤šå°‘å¤©ï¼š&quot; + today.lengthOfYear()); LocalDate nextDay = today.plusDays(1); Period until = today.until(nextDay); // 2022-08-12 æ›´æ–°ï¼šæ­¤å¤„æœ‰è¯¯ï¼Œuntil.getDays æ›´æ­£ä¸º ChronoUnit.DAYS.between() //é”™è¯¯ï¼šSystem.out.println(&quot;today-nextDay é—´éš”å¤©æ•°: &quot; + until.getDays()); long days = ChronoUnit.DAYS.between(today, nextDay); System.out.println(&quot;isBeforeï¼š&quot; + today.isBefore(nextDay)); System.out.println(&quot;isAfterï¼š &quot; + today.isAfter(nextDay)); LocalDate parseDate = LocalDate.parse(&quot;2020-01-24&quot;); System.out.println(&quot;parseDateï¼š&quot; + parseDate); System.out.println(&quot;--------LocalDateTime---------&quot;); // æ—¥æœŸæ—¶é—´ LocalDateTime nowLocalDateTime = LocalDateTime.now(); System.out.println(&quot;å½“å‰æ—¶é—´ï¼š&quot; + nowLocalDateTime.format(DATE_TIME_FORMATTER)); System.out.println(&quot;å½“å‰æ—¶é—´åŠ ä¸Š 3 å°æ—¶ï¼š&quot; + nowLocalDateTime.plusHours(3)); System.out.println(&quot;å½“å‰æ—¶é—´å‡å» 3 å°æ—¶ï¼š&quot; + nowLocalDateTime.minusHours(3)); System.out.println(&quot;å¹´ï¼š&quot; + nowLocalDateTime.getYear()); System.out.println(&quot;æœˆ (EN)ï¼š&quot; + nowLocalDateTime.getMonth()); System.out.println(&quot;æœˆ (1-12)ï¼š&quot; + nowLocalDateTime.getMonthValue()); System.out.println(&quot;æœˆ (1-12)ï¼š&quot; + nowLocalDateTime.getMonthValue()); LocalDateTime nextDayNow = nowLocalDateTime.plusDays(1); System.out.println(&quot;isBeforeï¼š&quot; + nowLocalDateTime.isBefore(nextDayNow)); System.out.println(&quot;isAfterï¼š&quot; + nowLocalDateTime.isAfter(nextDayNow)); LocalDateTime parseDateTime = LocalDateTime.parse(&quot;2020-01-21 18:05:35&quot;, DATE_TIME_FORMATTER); System.out.println(&quot;parseDateTimeï¼š&quot; + parseDateTime); System.out.println(&quot;--------LocalTime---------&quot;); // æ—¶é—´ LocalTime localTime = LocalTime.now(Clock.systemDefaultZone()); System.out.println(&quot;å½“å‰æ—¶é—´ï¼š&quot; + localTime.format(TIME_FORMATTER)); System.out.println(&quot;--------MonthDay---------&quot;); // æœˆå¤© MonthDay monthDay = MonthDay.now(); System.out.println(&quot;å½“å‰æœˆå¤©ï¼š&quot; + monthDay.format(MONTH_DAY_FORMATTER)); System.out.println(&quot;--------Year---------&quot;); // å¹´ Year year = Year.now(); System.out.println(&quot;å½“å‰å¹´ï¼š&quot; + year.format(YEAR_FORMATTER)); System.out.println(&quot;--------YearMonth---------&quot;); // å¹´æœˆ YearMonth yearMonth = YearMonth.now(); System.out.println(&quot;å½“å‰å¹´æœˆï¼š&quot; + yearMonth.format(YEAR_MONTH_FORMATTER)); System.out.println(&quot;--------DayOfWeek---------&quot;); // æ˜ŸæœŸ DayOfWeek dayOfWeek = DayOfWeek.from(LocalDateTime.now()); System.out.println(&quot;å½“å‰æ˜ŸæœŸç¬¬å‡ å¤©ï¼š&quot; + dayOfWeek.getValue()); System.out.println(&quot;--------Month---------&quot;); // æœˆä»½ Month month = Month.from(LocalDate.now()); System.out.println(&quot;å½“å¹´ç¬¬å‡ æœˆ&quot; + month.getValue()); System.out.println(&quot;å½“æœˆå¤©æ•°ï¼š&quot; + month.length(Year.now().isLeap())); System.out.println(&quot;--------clock---------&quot;); // æ—¶é’Ÿå¯¹è±¡ Clock clock = Clock.systemDefaultZone(); System.out.println(&quot;å½“å‰æ—¶é—´æ—¶é—´æˆ³ï¼š&quot; + clock.millis()); System.out.println(&quot;--------duration---------&quot;); // åŸºäºæ—¶é—´çš„æ—¶é—´åŒºé—´ï¼ˆå•ä½ï¼šå°æ—¶ã€åˆ†é’Ÿã€æ¯«ç§’ã€ç§’ã€çº³ç§’ç­‰ï¼‰ Duration duration = Duration.between(nowLocalDateTime, nowLocalDateTime.plusHours(2)); System.out.println(&quot;ç§’ï¼š&quot; + duration.getSeconds()); System.out.println(&quot;æ¯«ç§’ï¼š&quot; + duration.toMillis()); System.out.println(&quot;åˆ†é’Ÿï¼š&quot; + duration.toMinutes()); System.out.println(&quot;å°æ—¶ï¼š&quot; + duration.toHours()); System.out.println(&quot;å¤©ï¼š&quot; + duration.toDays()); System.out.println(&quot;--------period---------&quot;); // åŸºäºæ—¥æœŸçš„æ—¶é—´åŒºé—´ï¼ˆå•ä½ï¼šå¹´ã€æœˆã€æ—¥ï¼‰ Period period = Period.between(LocalDate.now(), LocalDate.now() .plusYears(1) .plusMonths(2) .plusDays(3)); System.out.println(&quot;å¤©ï¼š&quot; + period.getDays()); System.out.println(&quot;æœˆï¼š&quot; + period.getMonths()); System.out.println(&quot;å¹´ï¼š&quot; + period.getYears()); System.out.println(&quot;æ€»æœˆæ•°ï¼š&quot; + period.toTotalMonths()); System.out.println(&quot;--------Instant---------&quot;); // åœ¨æ—¶é—´çº¿ä¸Šçš„ç¬é—´ç‚¹ Instant instant = Instant.now(); System.out.println(&quot;æ¯«ç§’ï¼š&quot; + instant.toEpochMilli()); System.out.println(&quot;--------å®ç”¨æ–¹æ³•---------&quot;); // æŒ‡å®šæ—¥æœŸçš„å‡Œæ™¨ 00:00:00 LocalDateTime todayStartTime = today.atStartOfDay(); System.out.println(&quot;æŒ‡å®šæ—¥æœŸçš„å¼€å§‹æ—¶é—´ï¼š&quot; + todayStartTime.format(DATE_TIME_FORMATTER)); // æˆ–è€… LocalDateTime todayStart = LocalDateTime.of(today, LocalTime.MIN); System.out.println(&quot;æŒ‡å®šæ—¥æœŸçš„å¼€å§‹æ—¶é—´: &quot; + todayStart.format(DATE_TIME_FORMATTER)); // æŒ‡å®šæ—¥æœŸçš„å‡Œæ™¨ 23:59:59 LocalDateTime todayEnd = LocalDateTime.of(today, LocalTime.MAX); System.out.println(&quot;æŒ‡å®šæ—¥æœŸçš„ç»“æŸæ—¶é—´ï¼š&quot; + todayEnd.format(DATE_TIME_FORMATTER)); // æ¯«ç§’æ—¶é—´æˆ³è½¬ LocalDateTime System.out.println(&quot;æ¯«ç§’æ—¶é—´æˆ³è½¬ LocalDateTimeï¼š&quot; + LocalDateTime.ofInstant(Instant.ofEpochMilli(1579646281991L), ZoneOffset.ofHours(8)).toString()); // LocalDateTime è½¬æ—¶é—´æˆ³ System.out.println(&quot;LocalDateTime è½¬æ—¶é—´æˆ³ï¼š&quot; + nowLocalDateTime.toInstant(ZoneOffset.ofHours(8)).toEpochMilli()); // LocalDateTime è½¬ yyyy-MM-dd HH:mm:ss æ ¼å¼ String System.out.println(&quot;LocalDateTime è½¬ yyyy-MM-dd HH:mm:ss æ ¼å¼ Stringï¼š&quot; + LocalDateTime.now().format(DATE_TIME_FORMATTER)); // yyyy-MM-dd HH:mm:ss æ ¼å¼ String è½¬ LocalDateTime LocalDateTime parseLocalDateTime = LocalDateTime.parse(&quot;2020-01-22 23:59:59&quot;, DATE_TIME_FORMATTER); System.out.println(&quot;yyyy-MM-dd HH:mm:ss æ ¼å¼ String è½¬ LocalDateTimeï¼š&quot; + parseLocalDateTime); // Date è½¬ LocalDateTime Date nowDate = new Date(); LocalDateTime date2LocalTime = LocalDateTime.ofInstant(nowDate.toInstant(), ZoneOffset.ofHours(8)); System.out.println(&quot;Date è½¬ LocalDateTimeï¼š&quot; + date2LocalTime); // LocalDateTime è½¬ Date Date localDateTime2Date = Date.from(nowLocalDateTime.toInstant(ZoneOffset.ofHours(8))); System.out.println(&quot;LocalDateTime è½¬ Dateï¼š&quot; + localDateTime2Date); // LocalDateè½¬LocalDateTime LocalDateTime localDate2LocalDateTime = LocalDateTime.of(today, LocalTime.parse(&quot;00:00:00&quot;)); // LocalDateTimeè½¬LocalDate LocalDate localDateTime2LocalDate = nowLocalDateTime.toLocalDate(); &#125;&#125; è¾“å‡ºç»“æœï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566--------LocalDate---------å½“å‰æ—¥æœŸï¼š2020-01-22å½“å‰æ—¥æœŸåŠ ä¸Š 3 å¤©ï¼š2020-01-25å½“å‰æ—¥æœŸå‡å» 3 å¤©ï¼š2020-01-19å¹´ï¼š2020æœˆ (EN)ï¼šJANUARYæœˆ (1-12)ï¼š1å½“å‘¨ç¬¬å‡ å¤©ï¼šWEDNESDAYå½“æœˆç¬¬å‡ å¤©ï¼š22å½“å¹´ç¬¬å‡ å¤©ï¼š22æ˜¯å¦é—°å¹´ï¼štrueå½“æœˆå…±å¤šå°‘å¤©ï¼š31å½“å¹´å…±å¤šå°‘å¤©ï¼š366today-nextDay é—´éš”å¤©æ•°: 1isBeforeï¼štrueisAfterï¼š falseparseDateï¼š2020-01-24--------LocalDateTime---------å½“å‰æ—¶é—´ï¼š2020-01-22 07:06:13å½“å‰æ—¶é—´åŠ ä¸Š 3 å°æ—¶ï¼š2020-01-22T10:06:13.979å½“å‰æ—¶é—´å‡å» 3 å°æ—¶ï¼š2020-01-22T04:06:13.979å¹´ï¼š2020æœˆ (EN)ï¼šJANUARYæœˆ (1-12)ï¼š1æœˆ (1-12)ï¼š1isBeforeï¼štrueisAfterï¼šfalseparseDateTimeï¼š2020-01-21T18:05:35--------LocalTime---------å½“å‰æ—¶é—´ï¼š07:06:13--------MonthDay---------å½“å‰æœˆå¤©ï¼š01-22--------Year---------å½“å‰å¹´ï¼š2020--------YearMonth---------å½“å‰å¹´æœˆï¼š2020-01--------DayOfWeek---------å½“å‰æ˜ŸæœŸç¬¬å‡ å¤©ï¼š3--------Month---------å½“å¹´ç¬¬å‡ æœˆ 1å½“æœˆå¤©æ•°ï¼š31--------clock---------å½“å‰æ—¶é—´æ—¶é—´æˆ³ï¼š1579647973982--------duration---------ç§’ï¼š7200æ¯«ç§’ï¼š7200000åˆ†é’Ÿï¼š120å°æ—¶ï¼š2å¤©ï¼š0--------period---------å¤©ï¼š3æœˆï¼š2å¹´ï¼š1æ€»æœˆæ•°ï¼š14--------Instant---------æ¯«ç§’ï¼š1579647973983--------å®ç”¨æ–¹æ³•---------æŒ‡å®šæ—¥æœŸçš„å¼€å§‹æ—¶é—´ï¼š2020-01-22 00:00:00æŒ‡å®šæ—¥æœŸçš„å¼€å§‹æ—¶é—´: 2020-01-22 00:00:00æŒ‡å®šæ—¥æœŸçš„ç»“æŸæ—¶é—´ï¼š2020-01-22 23:59:59æ¯«ç§’æ—¶é—´æˆ³è½¬ LocalDateTimeï¼š2020-01-22T06:38:01.991LocalDateTime è½¬æ—¶é—´æˆ³ï¼š1579647973979LocalDateTime è½¬ yyyy-MM-dd HH:mm:ss æ ¼å¼ Stringï¼š2020-01-22 07:06:13yyyy-MM-dd HH:mm:ss æ ¼å¼ String è½¬ LocalDateTimeï¼š2020-01-22T23:59:59Date è½¬ LocalDateTimeï¼š2020-01-22T07:06:13.984LocalDateTime è½¬ Dateï¼šWed Jan 22 07:06:13 CST 2020 å‚è€ƒ åœ¨çº¿ JDK8 ä¸­æ–‡æ–‡æ¡£","tags":[{"name":"LocalDateTimeè½¬æ—¶é—´æˆ³","slug":"LocalDateTimeè½¬æ—¶é—´æˆ³","permalink":"http://nullpointer.pw/tags/LocalDateTime%E8%BD%AC%E6%97%B6%E9%97%B4%E6%88%B3/"},{"name":"æ—¶é—´æˆ³è½¬LocalDateTime","slug":"æ—¶é—´æˆ³è½¬LocalDateTime","permalink":"http://nullpointer.pw/tags/%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%ACLocalDateTime/"},{"name":"Dateè½¬LocalDateTime","slug":"Dateè½¬LocalDateTime","permalink":"http://nullpointer.pw/tags/Date%E8%BD%ACLocalDateTime/"},{"name":"LocalDateTimeè½¬Date","slug":"LocalDateTimeè½¬Date","permalink":"http://nullpointer.pw/tags/LocalDateTime%E8%BD%ACDate/"},{"name":"LocalDateTimeè½¬LocalDate","slug":"LocalDateTimeè½¬LocalDate","permalink":"http://nullpointer.pw/tags/LocalDateTime%E8%BD%ACLocalDate/"},{"name":"LocalDateè½¬LocalDateTime","slug":"LocalDateè½¬LocalDateTime","permalink":"http://nullpointer.pw/tags/LocalDate%E8%BD%ACLocalDateTime/"},{"name":"LocalDateTimeè½¬String","slug":"LocalDateTimeè½¬String","permalink":"http://nullpointer.pw/tags/LocalDateTime%E8%BD%ACString/"},{"name":"Stringè½¬LocalDateTime","slug":"Stringè½¬LocalDateTime","permalink":"http://nullpointer.pw/tags/String%E8%BD%ACLocalDateTime/"},{"name":"Java8è·å–å‡Œæ™¨æ—¶é—´","slug":"Java8è·å–å‡Œæ™¨æ—¶é—´","permalink":"http://nullpointer.pw/tags/Java8%E8%8E%B7%E5%8F%96%E5%87%8C%E6%99%A8%E6%97%B6%E9%97%B4/"}]},{"title":"mapstructæœ€ä½³å®è·µ","date":"2020-01-17T14:21:58.000Z","path":"mapstructæœ€ä½³å®è·µ.html","text":"å‰è¨€æŒ‰ç…§æ—¥å¸¸å¼€å‘ä¹ æƒ¯ï¼Œå¯¹äºä¸åŒé¢†åŸŸå±‚ä½¿ç”¨ä¸åŒJavaBeanå¯¹è±¡ä¼ è¾“æ•°æ®ï¼Œé¿å…ç›¸äº’å½±å“ï¼Œå› æ­¤åŸºäºæ•°æ®åº“å®ä½“å¯¹è±¡Userè¡ç”Ÿå‡ºæ¯”å¦‚UserDtoã€UserVoç­‰å¯¹è±¡ï¼Œäºæ˜¯åœ¨ä¸åŒå±‚ä¹‹é—´è¿›è¡Œæ•°æ®ä¼ è¾“æ—¶ï¼Œä¸å¯é¿å…åœ°éœ€è¦å°†è¿™äº›å¯¹è±¡è¿›è¡Œäº’ç›¸è½¬æ¢æ“ä½œã€‚ å¸¸è§çš„è½¬æ¢æ–¹å¼æœ‰ï¼š è°ƒç”¨getter/setteræ–¹æ³•è¿›è¡Œå±æ€§èµ‹å€¼ è°ƒç”¨BeanUtil.copyPropertieè¿›è¡Œåå°„å±æ€§èµ‹å€¼ ç¬¬ä¸€ç§æ–¹å¼ä¸å¿…è¯´ï¼Œå±æ€§å¤šäº†å°±éœ€è¦å†™ä¸€å¤§å¨getter/setterä»£ç ã€‚ç¬¬äºŒç§æ–¹å¼æ¯”ç¬¬ä¸€ç§æ–¹å¼è¦ç®€ä¾¿å¾ˆå¤šï¼Œä½†æ˜¯å‘å·¨å¤šï¼Œæ¯”å¦‚sourcesä¸targetå†™åï¼Œéš¾ä»¥å®šä½æŸä¸ªå­—æ®µåœ¨å“ªé‡Œè¿›è¡Œçš„èµ‹å€¼ï¼ŒåŒæ—¶å› ä¸ºç”¨åˆ°åå°„ï¼Œå¯¼è‡´æ€§èƒ½ä¹Ÿä¸ä½³ã€‚ é‰´äºæ­¤ï¼Œä»Šå¤©å†™ä¸€å†™ç¬¬ä¸‰ç§å¯¹è±¡è½¬æ¢æ–¹å¼ï¼Œæœ¬æ–‡ä½¿ç”¨çš„æ˜¯ MapStruct å·¥å…·è¿›è¡Œè½¬æ¢ï¼ŒMapStruct åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨ä»£ç ç¼–è¯‘é˜¶æ®µç”Ÿæˆå¯¹åº”çš„èµ‹å€¼ä»£ç ï¼Œåº•å±‚åŸç†è¿˜æ˜¯è°ƒç”¨getter/setteræ–¹æ³•ï¼Œä½†æ˜¯è¿™æ˜¯ç”±å·¥å…·æ›¿æˆ‘ä»¬å®Œæˆï¼ŒMapStructåœ¨ä¸å½±å“æ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œè§£å†³äº†å‰é¢ä¸¤ç§æ–¹å¼å¼Šç«¯ï¼Œå¾ˆèµ~ å‡†å¤‡å·¥ä½œä¸ºäº†è®²è§£ MapStruct å·¥å…·çš„ä½¿ç”¨ï¼Œæœ¬æ–‡ä½¿ç”¨å¸¸è§çš„ User ç±»ä»¥åŠå¯¹åº” UserDto å¯¹è±¡æ¥æ¼”ç¤ºã€‚ 123456789101112131415161718192021222324252627282930@Data@Accessors(chain = true)public class User &#123; private Long id; private String username; private String password; // å¯†ç  private Integer sex; // æ€§åˆ« private LocalDate birthday; // ç”Ÿæ—¥ private LocalDateTime createTime; // åˆ›å»ºæ—¶é—´ private String config; // å…¶ä»–æ‰©å±•ä¿¡æ¯ï¼Œä»¥JSONæ ¼å¼å­˜å‚¨ private String test; // æµ‹è¯•å­—æ®µ&#125;@Data@Accessors(chain = true)public class UserVo &#123; private Long id; private String username; private String password; private Integer gender; private LocalDate birthday; private String createTime; private List&lt;UserConfig&gt; config; private String test; // æµ‹è¯•å­—æ®µ @Data public static class UserConfig &#123; private String field1; private Integer field2; &#125;&#125; æ³¨æ„è§‚å¯Ÿè¿™ä¸¤ä¸ªç±»çš„åŒºåˆ«ã€‚ ä¸€ã€MapStruct é…ç½®ä»¥åŠåŸºç¡€ä½¿ç”¨é¡¹ç›®ä¸­å¼•å…¥ MapStruct çš„ä¾èµ– 12345678910&lt;dependency&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct&lt;/artifactId&gt; &lt;version&gt;1.3.1.Final&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt; &lt;version&gt;1.3.1.Final&lt;/version&gt;&lt;/dependency&gt; å› ä¸ºé¡¹ç›®ä¸­çš„å¯¹è±¡è½¬æ¢æ“ä½œåŸºæœ¬éƒ½ä¸€æ ·ï¼Œå› æ­¤æŠ½å–é™¤äº†ä¸€ä¸ªè½¬æ¢åŸºç±»ï¼Œä¸åŒå¯¹è±¡å¦‚æœåªæ˜¯ç®€å•è½¬æ¢å¯ä»¥ç›´æ¥ç»§æ‰¿è¯¥åŸºç±»ï¼Œè€Œæ— éœ€è¦†å†™åŸºç±»ä»»ä½•æ–¹æ³•ï¼Œå³åªéœ€è¦ä¸€ä¸ªç©ºç±»å³å¯ã€‚å¦‚æœå­ç±»è¦†å†™äº†åŸºç±»çš„æ–¹æ³•ï¼Œåˆ™åŸºç±»ä¸Šçš„ @Mapping ä¼šå¤±æ•ˆã€‚ 12345678910111213141516171819202122232425262728293031323334353637@MapperConfigpublic interface BaseMapping&lt;SOURCE, TARGET&gt; &#123; /** * æ˜ å°„åŒåå±æ€§ */ @Mapping(target = &quot;createTime&quot;, dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;) TARGET sourceToTarget(SOURCE var1); /** * åå‘ï¼Œæ˜ å°„åŒåå±æ€§ */ @InheritInverseConfiguration(name = &quot;sourceToTarget&quot;) SOURCE targetToSource(TARGET var1); /** * æ˜ å°„åŒåå±æ€§ï¼Œé›†åˆå½¢å¼ */ @InheritConfiguration(name = &quot;sourceToTarget&quot;) List&lt;TARGET&gt; sourceToTarget(List&lt;SOURCE&gt; var1); /** * åå‘ï¼Œæ˜ å°„åŒåå±æ€§ï¼Œé›†åˆå½¢å¼ */ @InheritConfiguration(name = &quot;targetToSource&quot;) List&lt;SOURCE&gt; targetToSource(List&lt;TARGET&gt; var1); /** * æ˜ å°„åŒåå±æ€§ï¼Œé›†åˆæµå½¢å¼ */ List&lt;TARGET&gt; sourceToTarget(Stream&lt;SOURCE&gt; stream); /** * åå‘ï¼Œæ˜ å°„åŒåå±æ€§ï¼Œé›†åˆæµå½¢å¼ */ List&lt;SOURCE&gt; targetToSource(Stream&lt;TARGET&gt; stream);&#125; å®ç° User ä¸ UserVo å¯¹è±¡çš„è½¬æ¢å™¨ 12345678910111213141516171819202122232425import org.mapstruct.Mapper;import org.mapstruct.Mapping;@Mapper(componentModel = &quot;spring&quot;)public interface UserMapping extends BaseMapping&lt;User, UserVo&gt; &#123; @Mapping(target = &quot;gender&quot;, source = &quot;sex&quot;) @Mapping(target = &quot;createTime&quot;, dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;) @Override UserVo sourceToTarget(User var1); @Mapping(target = &quot;sex&quot;, source = &quot;gender&quot;) @Mapping(target = &quot;password&quot;, ignore = true) @Mapping(target = &quot;createTime&quot;, dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;) @Override User targetToSource(UserVo var1); default List&lt;UserConfig&gt; strConfigToListUserConfig(String config) &#123; return JSON.parseArray(config, UserConfig.class); &#125; default String listUserConfigToStrConfig(List&lt;UserConfig&gt; list) &#123; return JSON.toJSONString(list); &#125;&#125; æœ¬æ–‡ç¤ºä¾‹ä½¿ç”¨çš„æ˜¯ Spring çš„æ–¹å¼ï¼Œ@Mapper æ³¨è§£çš„ componentModel å±æ€§å€¼ä¸º springï¼Œä¸è¿‡åº”è¯¥å¤§å¤šæ•°éƒ½ç”¨çš„æ­¤æ¨¡å¼è¿›è¡Œå¼€å‘ã€‚ @Mappingç”¨äºé…ç½®å¯¹è±¡çš„æ˜ å°„å…³ç³»ï¼Œç¤ºä¾‹ä¸­ User å¯¹è±¡æ€§åˆ«å±æ€§åä¸º sexï¼Œè€ŒUserVoå¯¹è±¡æ€§åˆ«å±æ€§åä¸ºgenderï¼Œå› æ­¤éœ€è¦é…ç½® target ä¸ source å±æ€§ã€‚ password å­—æ®µä¸åº”è¯¥è¿”å›åˆ°å‰å°ï¼Œå¯ä»¥é‡‡å–ä¸¤ç§æ–¹å¼ä¸è¿›è¡Œè½¬æ¢ï¼Œç¬¬ä¸€ç§å°±æ˜¯åœ¨voå¯¹è±¡ä¸­ä¸å‡ºç°passwordå­—æ®µï¼Œç¬¬äºŒç§å°±æ˜¯åœ¨@Mappingä¸­è®¾ç½®è¯¥å­—æ®µ ignore = trueã€‚ MapStruct æä¾›äº†æ—¶é—´æ ¼å¼åŒ–çš„å±æ€§ dataFormatï¼Œæ”¯æŒDateã€LocalDateã€LocalDateTimeç­‰æ—¶é—´ç±»å‹ä¸Stringçš„è½¬æ¢ã€‚ç¤ºä¾‹ä¸­birthday å±æ€§ä¸º LocalDate ç±»å‹ï¼Œå¯ä»¥æ— éœ€æŒ‡å®šdataFormatè‡ªåŠ¨å®Œæˆè½¬æ¢ï¼Œè€ŒLocalDateTimeç±»å‹é»˜è®¤ä½¿ç”¨çš„æ˜¯ISOæ ¼å¼æ—¶é—´ï¼Œåœ¨å›½å†…å¾€å¾€ä¸ç¬¦åˆéœ€æ±‚ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨æŒ‡å®šä¸€ä¸‹ dataFormatã€‚ äºŒã€è‡ªå®šä¹‰å±æ€§ç±»å‹è½¬æ¢æ–¹æ³•ä¸€èˆ¬å¸¸ç”¨çš„ç±»å‹å­—æ®µè½¬æ¢ MapStructéƒ½èƒ½æ›¿æˆ‘ä»¬å®Œæˆï¼Œä½†æ˜¯æœ‰ä¸€äº›æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„å¯¹è±¡ç±»å‹ï¼ŒMapStructå°±ä¸èƒ½è¿›è¡Œå­—æ®µè½¬æ¢ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬ç¼–å†™å¯¹åº”çš„ç±»å‹è½¬æ¢æ–¹æ³•ï¼Œç¬”è€…ä½¿ç”¨çš„æ˜¯JDK8ï¼Œæ”¯æŒæ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥åœ¨è½¬æ¢å™¨ä¸­æ·»åŠ è‡ªå®šä¹‰ç±»å‹è½¬æ¢æ–¹æ³•ã€‚ ç¤ºä¾‹ä¸­Userå¯¹è±¡çš„configå±æ€§æ˜¯ä¸€ä¸ªJSONå­—ç¬¦ä¸²ï¼ŒUserVoå¯¹è±¡ä¸­æ˜¯Listç±»å‹çš„ï¼Œè¿™éœ€è¦å®ç°JSONå­—ç¬¦ä¸²ä¸å¯¹è±¡çš„äº’è½¬ã€‚ 1234567default List&lt;UserConfig&gt; strConfigToListUserConfig(String config) &#123; return JSON.parseArray(config, UserConfig.class);&#125;default String listUserConfigToStrConfig(List&lt;UserConfig&gt; list) &#123; return JSON.toJSONString(list);&#125; å¦‚æœæ˜¯ JDK8ä»¥ä¸‹çš„ï¼Œä¸æ”¯æŒé»˜è®¤æ–¹æ³•ï¼Œå¯ä»¥å¦å¤–å®šä¹‰ä¸€ä¸ª è½¬æ¢å™¨ï¼Œç„¶åå†å½“å‰è½¬æ¢å™¨çš„ @Mapper ä¸­é€šè¿‡ uses = XXX.class è¿›è¡Œå¼•ç”¨ã€‚ å®šä¹‰å¥½æ–¹æ³•ä¹‹åï¼ŒMapStructå½“åŒ¹é…åˆ°åˆé€‚ç±»å‹çš„å­—æ®µæ—¶ï¼Œä¼šè°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„è½¬æ¢æ–¹æ³•è¿›è¡Œè½¬æ¢ã€‚ ä¸‰ã€å•å…ƒæµ‹è¯•1234567891011121314151617181920212223242526272829303132333435363738394041424344@Slf4j@RunWith(SpringRunner.class)@SpringBootTestpublic class MapStructTest &#123; @Resource private UserMapping userMapping; @Test public void tetDomain2DTO() &#123; User user = new User() .setId(1L) .setUsername(&quot;zhangsan&quot;) .setSex(1) .setPassword(&quot;abc123&quot;) .setCreateTime(LocalDateTime.now()) .setBirthday(LocalDate.of(1999, 9, 27)) .setConfig(&quot;[&#123;\\&quot;field1\\&quot;:\\&quot;Test Field1\\&quot;,\\&quot;field2\\&quot;:500&#125;]&quot;); UserVo userVo = userMapping.sourceToTarget(user); log.info(&quot;User: &#123;&#125;&quot;, user); // User: User(id=1, username=zhangsan, password=abc123, sex=1, birthday=1999-09-27, createTime=2020-01-17T17:46:20.316, config=[&#123;&quot;field1&quot;:&quot;Test Field1&quot;,&quot;field2&quot;:500&#125;]) log.info(&quot;UserVo: &#123;&#125;&quot;, userVo); // UserVo: UserVo(id=1, username=zhangsan, gender=1, birthday=1999-09-27, createTime=2020-01-17 17:46:20, config=[UserVo.UserConfig(field1=Test Field1, field2=500)]) &#125; @Test public void testDTO2Domain() &#123; UserConfig userConfig = new UserConfig(); userConfig.setField1(&quot;Test Field1&quot;); userConfig.setField2(500); UserVo userVo = new UserVo() .setId(1L) .setUsername(&quot;zhangsan&quot;) .setGender(2) .setCreateTime(&quot;2020-01-18 15:32:54&quot;) .setBirthday(LocalDate.of(1999, 9, 27)) .setConfig(Collections.singletonList(userConfig)); User user = userMapping.targetToSource(userVo); log.info(&quot;UserVo: &#123;&#125;&quot;, userVo); // UserVo: UserVo(id=1, username=zhangsan, gender=2, birthday=1999-09-27, createTime=2020-01-18 15:32:54, config=[UserVo.UserConfig(field1=Test Field1, field2=500)]) log.info(&quot;User: &#123;&#125;&quot;, user); // User: User(id=1, username=zhangsan, password=null, sex=2, birthday=1999-09-27, createTime=2020-01-18T15:32:54, config=[&#123;&quot;field1&quot;:&quot;Test Field1&quot;,&quot;field2&quot;:500&#125;]) &#125; å››ã€å¸¸è§é—®é¢˜ å½“ä¸¤ä¸ªå¯¹è±¡å±æ€§ä¸ä¸€è‡´æ—¶ï¼Œæ¯”å¦‚Userå¯¹è±¡ä¸­æŸä¸ªå­—æ®µä¸å­˜åœ¨ä¸UserVoå½“ä¸­æ—¶ï¼Œåœ¨ç¼–è¯‘æ—¶ä¼šæœ‰è­¦å‘Šæç¤ºï¼Œå¯ä»¥åœ¨@Mappingä¸­é…ç½® ignore = trueï¼Œå½“å­—æ®µè¾ƒå¤šæ—¶ï¼Œå¯ä»¥ç›´æ¥åœ¨@Mapperä¸­è®¾ç½®unmappedTargetPolicyå±æ€§æˆ–è€…unmappedSourcePolicyå±æ€§ä¸º ReportingPolicy.IGNOREå³å¯ã€‚ å¦‚æœé¡¹ç›®ä¸­ä¹ŸåŒæ—¶ä½¿ç”¨åˆ°äº† Lombokï¼Œä¸€å®šè¦æ³¨æ„ Lombokçš„ç‰ˆæœ¬è¦ç­‰äºæˆ–è€…é«˜äº1.18.10ï¼Œå¦åˆ™ä¼šæœ‰ç¼–è¯‘ä¸é€šè¿‡çš„æƒ…å†µå‘ç”Ÿï¼Œç¬”è€…æ‰è¿›è¿™ä¸ªå‘å¾ˆä¹…æ‰çˆ¬äº†å‡ºæ¥ï¼Œå¸Œæœ›å„ä½ä¸è¦é‡å¤è¸©å‘ã€‚ ä»£ç ä¸‹è½½æœ¬æ–‡æ¶‰åŠä»£ç å·²ä¸Šä¼ åˆ° Githubï¼Œä»¥ä¾›å‚è€ƒã€‚ mapstructæœ€ä½³å®è·µç¤ºä¾‹ä»£ç  å‚è€ƒ å®˜æ–¹æ–‡æ¡£ï¼šhttps://mapstruct.org/documentation/stable/reference/html/ å®˜æ–¹FAQï¼šhttps://mapstruct.org/faq/ å®˜æ–¹Exampleï¼šhttps://github.com/mapstruct/mapstruct-examples æœºç¿»ä¸­æ–‡ç‰ˆæ–‡æ¡£ï¼šhttp://www.kailing.pub/MapStruct1.3/index.html 5ç§å¸¸è§Beanæ˜ å°„å·¥å…·çš„æ€§èƒ½æ¯”å¯¹ï¼šhttps://www.cnblogs.com/javaguide/p/11861749.html","tags":[{"name":"mapstructè‡ªå®šä¹‰ç±»å‹è½¬æ¢","slug":"mapstructè‡ªå®šä¹‰ç±»å‹è½¬æ¢","permalink":"http://nullpointer.pw/tags/mapstruct%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"}]},{"title":"æ•°æ®åº“ä¸åº”ç”¨æœåŠ¡å™¨æ—¶é—´ä¸åŒæ­¥è¸©å‘è®°","date":"2020-01-12T06:53:47.000Z","path":"æ•°æ®åº“ä¸åº”ç”¨æœåŠ¡å™¨æ—¶é—´ä¸åŒæ­¥è¸©å‘è®°.html","text":"ä¸šåŠ¡è¯´æ˜è¿™æ ·ä¸€ä¸ªä¸šåŠ¡åœºæ™¯ï¼Œæœ‰ä¸€ä¸ªæŠ½å¥–æ´»åŠ¨ï¼ŒæŠ½å¥–æ´»åŠ¨ä¸­å¦‚æœå®Œæˆä¸€æ¬¡åˆ†äº«çš„ä»»åŠ¡ï¼Œå°±ä¼šå¢åŠ ä¸€æ¬¡æŠ½å¥–æœºä¼šã€‚å‰ç«¯åˆ¤æ–­ç”¨æˆ·åˆ†äº«æˆåŠŸåï¼Œä¼šè°ƒç”¨ä¸€æ¬¡ä¿å­˜åˆ†äº«è®°å½•çš„æ¥å£ï¼Œå°†åˆ†äº«è®°å½•å…¥åº“ã€‚å®Œæˆåï¼Œå‰ç«¯ä¼šè°ƒç”¨è·å–è°ƒç”¨æŸ¥è¯¢ã€æ´»åŠ¨ä»»åŠ¡å¯å®Œæˆæ¬¡æ•°ã€‘æ¥å£ï¼Œå¦‚æœä»»åŠ¡å¯å®Œæˆæ¬¡æ•°ä¸º0ï¼Œåˆ™ç½®ç°åˆ†äº«æŒ‰é’®ã€‚ æœ¬æ–‡åŸæ–‡é“¾æ¥åœ°å€: http://nullpointer.pw/æ•°æ®åº“ä¸åº”ç”¨æœåŠ¡å™¨æ—¶é—´ä¸åŒæ­¥è¸©å‘è®°.html å¦‚å›¾æ‰€ç¤ºï¼š å®šä½é—®é¢˜æµ‹è¯•ç»™æˆ‘æäº†ä¸€ä¸ª BUGï¼Œåœ¨æµ‹è¯•ç¯å¢ƒï¼Œå®Œæˆåˆ†äº«ä»»åŠ¡åï¼Œé‡æ–°è°ƒç”¨ã€æ´»åŠ¨ä»»åŠ¡å¯å®Œæˆæ¬¡æ•°ã€‘åï¼Œå‘ç°æ¥å£è¿”å›å¯å®Œæˆæ¬¡æ•°ä»ç„¶æ˜¯ 1ï¼Œä½†æ˜¯è¿‡äº†å¥½å‡ åˆ†é’Ÿåï¼Œé‡æ–°è¿›å…¥æ´»åŠ¨é¡µï¼Œæ¥å£è¿”å›äº†å¯å®Œæˆæ¬¡æ•°ä¸º 0ï¼Œåˆ†äº«æŒ‰é’®ä¹Ÿå·²ç»ç½®ç°ä¸å¯ç‚¹å‡»ã€‚ è¿™å°±å¾ˆå¥‡æ€ªäº†ï¼Œä¸€å¼€å§‹æ€€ç–‘æ˜¯ç¼“å­˜çš„é—®é¢˜ï¼Œç»“æœå¹¶ä¸æ˜¯ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒè¿œç¨‹ Debug åå‘ç°ï¼Œæ¯æ¬¡åˆ†äº«æˆåŠŸåï¼ŒæŸ¥è¯¢æ•°æ®åº“åˆ†äº«ä»»åŠ¡çš„å®Œæˆæ¬¡æ•°ç«Ÿç„¶æ²¡æœ‰æŸ¥è¯¢åˆ°æ•°æ®ï¼Œè€Œæ•°æ®ä¸­ç¡®å®å­˜åœ¨äº†åˆ†äº«çš„è®°å½•ï¼Œå°†æŸ¥è¯¢ SQL å’ŒæŸ¥è¯¢å‚æ•°å–å‡ºæ¥æ”¾åˆ° Navicat ä¸­ä¸€æŸ¥ï¼Œç»“æœæ˜¯å› ä¸ºæ—¶é—´åŒºé—´ç­›é€‰æ‰äº†åˆ†äº«çš„é‚£æ¡è®°å½•ã€‚SQL å¦‚ä¸‹ï¼š 12SELECT * from t_share_record where uid = &quot;1234567&quot; and activity_id = 38867247 and create_time between &#x27;2020-01-08 00:00:00&#x27; and &#x27;2020-01-08 19:18:29&#x27; è€Œæ•°æ®åº“ä¸­çš„é‚£æ¡åˆ†äº«è®°å½•çš„create_time æ˜¯ 2020-01-08 19:19:21ï¼Œ è¿™æ¡è®°å½•ä¸åœ¨ç­›é€‰çš„æ—¶é—´åŒºé—´å†…ï¼Œå› è€Œè¢«è¿‡æ»¤æ‰äº†ã€‚ é—®é¢˜åŸå› æ—¶åºå›¾å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œåˆ†äº«ä¿å­˜è®°å½•ä¸ºç¬¬ 8 æ­¥ï¼Œä½†æ˜¯é‡æ–°æŸ¥è¯¢ä»»åŠ¡å¯å®Œæˆæ¥å£æ˜¯ç¬¬ 10 æ­¥ï¼Œä½†ç›®å‰çš„æƒ…å†µåˆ™æ˜¯ï¼Œç¬¬10æ­¥ä¸­æŸ¥è¯¢æ—¶çš„æ—¶é—´ç«Ÿç„¶è¦æ—©äºç¬¬ 8 æ­¥æ•°æ®å…¥åº“çš„æ—¶é—´ã€‚éš¾é“æ’å…¥æ•°æ®ç«Ÿç„¶è¦è¿™ä¹ˆä¹…ï¼Ÿä¹Ÿä¸è‡³äºè€—è´¹è¿‘ä¸€åˆ†é’Ÿå§ï¼ äºæ˜¯æ€€ç–‘æ˜¯æ•°æ®åº“æ—¶é—´é—®é¢˜ï¼Œåœ¨MySQLæ‰§è¡ŒæŸ¥è¯¢å‘½ä»¤ 1select now(); ç„¶åï¼Œåœ¨éƒ¨ç½²åº”ç”¨çš„æœåŠ¡å™¨ä¸Šæ‰§è¡Œå‘½ä»¤ 1date æŸ¥çœ‹ç»“æœï¼Œæœç„¶äºŒè€…æ—¶é—´ç›¸å·®äº†è¿‘ä¸€åˆ†é’Ÿã€‚æœ€ç»ˆçš„åŸå› å°±æ˜¯ï¼šå› ä¸ºæ•°æ®åº“å’Œåº”ç”¨æœåŠ¡å™¨ä¸åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œè€Œå…¶ä»–æµ‹è¯•äººå‘˜ä¿®æ”¹äº†åº”ç”¨æœåŠ¡å™¨çš„æ—¶é—´ï¼Œå¯¼è‡´ä¸¤ä¸ªæœåŠ¡å™¨æ—¶é—´ä¸ä¸€è‡´ä»è€Œå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚æƒ³åˆ°è¿™é‡Œï¼Œé©¬ä¸Šå‘è¿ç»´ç¡®è®¤çº¿ä¸ŠæœåŠ¡å™¨æ—¶é—´ä¸æ•°æ®åº“æ—¶é—´æ˜¯å¦åŒæ­¥ï¼Œè¿˜å¥½ï¼Œå›ç­”æˆ‘çš„æ˜¯åŒæ­¥çš„ï¼Œå¿ƒé‡Œçš„çŸ³å¤´ç®—æ”¾ä¸‹äº†ã€‚ è§£å†³é—®é¢˜æŸ¥çœ‹æ’å…¥åˆ†äº«è®°å½•çš„ Mybatis ä¸­XMLå¦‚ä¸‹ 1insert into t_share_record(uid, activity_id, create_time) values(#&#123;uid&#125;, #&#123;activityId&#125;, now()) è¿™æ ·å†™æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æ ¹æ®æ—¶é—´æ®µç­›é€‰æ•°æ®æ—¶ï¼Œæ—¶é—´åŒºé—´å´åˆæ˜¯ä»åº”ç”¨æœåŠ¡å™¨ç”Ÿæˆä¼ é€’å‚æ•°ä¼ å…¥SQLçš„ï¼ŒMybatis ä¸­XMLå¦‚ä¸‹ï¼š 12SELECT * from t_share_record where uid = #&#123;uid&#125; and activity_id = #&#123;activityId&#125; and create_time between #&#123;beginTime&#125; and #&#123;endTime&#125; ä¸ºäº†é¿å…ä»¥ä¸Šè¿™ç§å› ä¸ºåº”ç”¨æœåŠ¡å™¨ä¸æ•°æ®åº“æ—¶é—´ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜ï¼Œè¿™é‡Œçš„SQLç­›é€‰æ—¶é—´çš„ç»“æŸæ—¶é—´ä¹Ÿé€šè¿‡æ•°æ®åº“æœåŠ¡å™¨è·å–ã€‚ 12SELECT * from t_share_record where uid = #&#123;uid&#125; and activity_id = #&#123;activityId&#125; and create_time between #&#123;beginTime&#125; and now() å½“ç„¶ï¼Œä¸ºäº†é˜²æ­¢å‡ºç°æ›´å¤šç±»ä¼¼çš„é—®é¢˜ï¼Œåº”ç”¨æœåŠ¡å™¨ä¸æ•°æ®åº“æœåŠ¡å™¨çš„æ—¶é—´ä¸€å®šè¦é€šè¿‡æ—¶é—´åŒæ­¥è®¾ç½®ä¿æŒå®Œå…¨ä¸€è‡´æ‰æ˜¯æœ€åˆç†çš„ã€‚ å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼","tags":[{"name":"è§£å†³æ•°æ®åº“ä¸åº”ç”¨æœåŠ¡å™¨æ—¶é—´ä¸åŒæ­¥å¯¼è‡´çš„é—®é¢˜","slug":"è§£å†³æ•°æ®åº“ä¸åº”ç”¨æœåŠ¡å™¨æ—¶é—´ä¸åŒæ­¥å¯¼è‡´çš„é—®é¢˜","permalink":"http://nullpointer.pw/tags/%E8%A7%A3%E5%86%B3%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%97%B6%E9%97%B4%E4%B8%8D%E5%90%8C%E6%AD%A5%E5%AF%BC%E8%87%B4%E7%9A%84%E9%97%AE%E9%A2%98/"}]},{"title":"2019å¹´ç»ˆæ€»ç»“","date":"2020-01-04T01:39:31.000Z","path":"2019å¹´ç»ˆæ€»ç»“.html","text":"æ¥æ­å·ä¸è¶³ä¸€å¹´ï¼Œæˆ‘å°±æ‹¥æœ‰äº† M å‹å‘å‹ï¼Œä¸çŸ¥é“è¯¥å–œè¿˜æ˜¯å¿§ï¼Œä»Šå¤©ä¸ºè¿™è‹¦é€¼çš„ä¸€å¹´ç”»ä¸Šå¥å·ï¼Œå¸Œæœ› 2020 å¹´èƒ½ä¸å¦‚æ­¤è‹¦é€¼å§ï¼æœ¬æ¥è®¡åˆ’ç€ 2019 å¹´ 12 æœˆ 29 æ—¥å†™å®Œçš„å¹´ç»ˆæ€»ç»“ï¼Œè‡ªå·±æ‹–æ‹–æ‹‰æ‹‰æåˆ°ä»Šå¤©æ‰ç®—å†™å®Œã€‚ ä¸‰æœˆä»½ä»åŒ—äº¬ç¦»å¼€ï¼Œæœ¬æ„æ˜¯è·³å‡ºè‡ªå·±çš„èˆ’é€‚åŒºï¼Œæ­å·ä»Šå¹´å´è¿˜æ²¡æœ‰ä¸‹è¿‡é›ªï¼Œå€’æ˜¯æœ€è¿‘æ€»æ˜¯æ·…æ·…æ²¥æ²¥åœ°ä¸‹å°é›¨ï¼Œç»™äººæ¹¿å†·æ¹¿å†·çš„æ„Ÿè§‰ï¼Œæ¥åˆ°æ­å·å‘ç°è¿™è¾¹çš„ç¯å¢ƒæœç„¶è®©æˆ‘å¾ˆä¸èˆ’é€‚ã€‚ ä¸ä»…ä»…æ˜¯æ°”å€™ç¯å¢ƒã€‚ã€‚ã€‚ ä¸è¿‡ï¼Œæ¥äº†æ­å·ç¡®å®è®©è‡ªå·±èº«ä¸Šçš„ç¼ºç‚¹æš´éœ²å‡ºæ¥ï¼Œåœ¨æ–°çš„å…¬å¸å·¥ä½œæ—¶ï¼Œä¹Ÿå‘ç°äº†è‡ªå·±æŸäº›èƒ½åŠ›çš„æ¬ ç¼ºï¼Œæœç„¶æœ€è®©è‡ªå·±å®³æ€•çš„å°±æ˜¯è‡ªå·±æœ€è–„å¼±çš„åœ°æ–¹ï¼Œæ‰¾åˆ°è‡ªå·±çš„ä¸è¶³å¹¶å»åŠªåŠ›æå‡æ”¹è¿›ï¼Œæˆ–è®¸æ˜¯æˆ‘æ¥åšå‡ºæ¥æ­å·è¿™ä¸ªé€‰æ‹©ï¼Œå”¯ä¸€å€¼å¾—æ¬¢å–œä¹‹å¤„å§ï¼ æŠ€æœ¯å°±æˆ‘ä¸ªäººæœ¬èº«è€Œè¨€ï¼Œå­¦ä¹ æ–°çš„ä¸œè¥¿èƒ½å­¦ä¸‹å»çš„åŸºæœ¬ä¸Šæ˜¯æˆ‘ä¸å¾—ä¸å­¦çš„ï¼Œè¿˜æœ‰å°±æ˜¯æˆ‘çœŸçš„ç‰¹åˆ«æ„Ÿå…´è¶£çš„ã€‚è¿™çœ‹ç€å¥½åƒé—®é¢˜ä¸å¤§ï¼Ÿä¸å¾—ä¸å­¦çš„å¤§éƒ¨åˆ†éƒ½æ˜¯å·¥ä½œä¸­éœ€è¦ç”¨åˆ°çš„ï¼Œè¿˜æœ‰éœ€è¦æ•™å¯¼åˆ«äººçš„ï¼Œå­¦äº†å°±èƒ½æ´¾ä¸Šç”¨åœºï¼Œæ•ˆæœæœ€å¥½ã€‚ä½†æ˜¯äº‹å®æ˜¯ï¼Œèƒ½é©¬ä¸Šå­¦ä¼šå¹¶ä¸”èƒ½åº”ç”¨çš„æŠ€æœ¯ï¼Œå¤ªè¿‡äºæµ®äºè¡¨é¢ï¼Œè€Œè¿™äº›æŠ€æœ¯æ›´æ·±å±‚é¢çš„ä¸œè¥¿æ‰æ˜¯ç²¾é«“æ‰€åœ¨ï¼Œè€Œè‡ªå·±å´å¾€å¾€æ€»æ˜¯å¿½ç•¥äº†è¿™ä¸€ç‚¹ï¼Œ åœ¨æŸäº›æ—¶åˆ»ï¼Œè™šå¼±çš„å†…åŠŸè®©æˆ‘ä¸å ªä¸€å‡»ã€‚ æ¥å¹´éœ€æ²‰ä¸‹å¿ƒæ¥ï¼Œå­¦ä¹ æ›´æ·±å±‚æ¬¡ï¼Œç›¸ä¿¡åˆ»æ„ç»ƒä¹ ï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯å­¦ä¸ä¼šçš„ã€‚ æ—¶é—´ç®¡ç†ä»ä»Šå¹´ 9 æœˆä»½å¼€å§‹ï¼Œå½¢æˆäº†æ¯æ—¥æ€»ç»“çš„ä¹ æƒ¯ï¼Œä»ä¸€å¼€å§‹çš„æµæ°´è´¦åˆ°é€æ¸æ·»åŠ è‡ªå·±çš„æ€è€ƒï¼Œç›®å‰ä¹Ÿè¿ç»­äº†ä¸€ç™¾å¤šå¤©ã€‚åœ¨åšæ€»ç»“çš„è¿‡ç¨‹ä¸­å‘ç°è‡ªå·±åœ¨å¾ˆå¤šæ—¶å€™ï¼Œæ— æ³•æƒ³èµ·ä»Šå¤©ç©¶ç«Ÿåšäº†å“ªäº›å·¥ä½œã€ä»Šå¤©å‘ç”Ÿäº†å“ªäº›æœ‰è¶£çš„äº‹æƒ…ï¼Œä»Šå¤©å­¦åˆ°äº†å“ªäº›çŸ¥è¯†ï¼Œåªèƒ½ä¸ºè‡ªå·±åˆä¸€å¤©çš„ç¢Œç¢Œæ— ä¸ºåœ°è’åºŸè€Œè‡ªè´£ æ— æ—¶æ— åˆ»ï¼Œä¸°å¯Œçš„äº’è”ç½‘æ€»æ˜¯åœ¨æ¶ˆè´¹ç€æ³¨æ„åŠ›ï¼Œä¸€ä¸å°å¿ƒåŠä¸ªå°æ—¶ï¼Œä¸€ä¸ªå°æ—¶å°±è¿‡å»äº†ï¼Œè€Œæ‰‹å¤´å¾ˆæ€¥çš„äº‹æƒ…å´ä¸æ¯«æ²¡æœ‰è¿›å±•ï¼Œè¿™ä¹Ÿæ˜¯é€ æˆè‡ªå·±æ¯æ—¥è’åºŸçš„ç½ªé­ç¥¸é¦–ã€‚ äºæ˜¯ï¼Œè‡ªå·±ä¾¿å¼€å§‹å°è¯•ä¸Šç­æˆ–è€…å­¦ä¹ å¼€å¯ç•ªèŒ„é—¹é’Ÿï¼Œè¢«åŠ¨æ‰“æ–­æ€»æ˜¯ä¸å¯é¿å…ï¼Œä½†ç¡®å®æœ‰æ•ˆåœ°æ§åˆ¶äº†è‡ªå·±çš„æ³¨æ„åŠ›ï¼Œèƒ½è®©è‡ªå·±ä¸“æ³¨åšäº‹ï¼› ä»¥å‰ä¸Šç­è‡ªå·±æ€»æ˜¯æˆ´ç€è€³æœºå¬éšæœºç®—æ³•æ¨èçš„æ­Œæ›²ï¼Œå°è¯•ç•ªèŒ„é—¹é’Ÿä¹‹åï¼Œå‘ç°æ­Œæ›²ä¹Ÿä¼šè®©è‡ªå·±çš„æ³¨æ„åŠ›æ¼‚ç§»ï¼Œäºæ˜¯ä¾¿ä¸å†å¬æ­Œæ›²ï¼Œè€Œæ˜¯æ”¹å¬å¤§è‡ªç„¶ç™½å™ªå£°ï¼ŒåŠ ä¸Šå¥³æœ‹å‹é€çš„ SONY é™å™ªè€³æœºä¸»åŠ¨é™å™ªæ•ˆæœï¼Œå¯¹å¤–ç•ŒæŠ—å¹²æ‰°èƒ½åŠ›ä¹Ÿå˜å¼ºå¾ˆå¤šã€‚ é€šè¿‡ç•ªèŒ„é—¹é’Ÿï¼Œæ‰¾åˆ°äº†è‡ªå·±æœ€é«˜æ•ˆçš„æ—¶é—´æ®µï¼Œä¹Ÿæ˜¯æ„å¤–çš„æ”¶è·ã€‚ æ³¨æ„åŠ›å¾—åˆ°äº†ä¸€å®šçš„æ§åˆ¶ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸å¤Ÿï¼Œå› ä¸ºè¿˜æ˜¯ä¼šæœ‰å¤§æŠŠçš„ç©ºé—²æ—¶é—´è¢«ç™½ç™½æµªè´¹æ‰ã€‚æ²¡æœ‰äº§å‡ºï¼Œæ˜¯ä¸€ä»¶è®©æˆ‘æ„Ÿè§‰å¾ˆç—›è‹¦çš„äº‹æƒ…ï¼Œç‰¹åˆ«æ˜¯æ¯å‘¨å†™å‘¨æŠ¥çš„æ—¶å€™ï¼Œç—›æ„Ÿå°¤ç”šã€‚ äºæ˜¯ï¼Œæˆ‘è¸ä¸Šäº†å­¦ä¹  GTD çš„é“è·¯ï¼Œå®‰æ’å¥½ä¸‹ä¸€æ—¥çš„ä»»åŠ¡ï¼Œå°½é‡åˆ©ç”¨å¥½æ¯ä¸€å—æ—¶é—´ï¼Œä¸è¿‡è¿˜æ²¡å®è·µå¤ªä¹…ï¼Œç°åœ¨ä¾¿ä¸å¤šè¨€ã€‚ ä¹ æƒ¯åšæŒä¸¤å¹´å¤šå†™åšå®¢çš„ä¹ æƒ¯ï¼Œå¯èƒ½å› ä¸ºä»åŒ—äº¬ç¦»å¼€ï¼Œä¹ æƒ¯ä¹Ÿè¢«é—è½åœ¨äº†åŒ—äº¬å§ï¼ä»Šå¹´åªæ›´æ–°äº† 6 ç¯‡åšå®¢ï¼Œè¿˜æ°´äº†å‡ ç¯‡éæŠ€æœ¯ç±»æ–‡ç« ï¼Œå’Œå»å¹´ 20 å‡ ç¯‡çœŸçš„å·®è¿œäº†ã€‚å…¶å®è‡ªå·±åšå®¢é€‰é¢˜çš„ list å·²ç»è¢«æ‹‰å¾—å¾ˆé•¿äº†ï¼Œè‡ªå·±å´æ€»æ˜¯æ‰¾æ¥å£æ²¡æ—¶é—´æ‡’ç™Œå‘ä½œæ‹–å»¶ç—‡å‘ä½œä¸å»å†™ï¼Œæ¥å¹´ GTD è¦å®è·µèµ·æ¥ï¼Œå¥½ä¹ æƒ¯åº”è¯¥ä¸€ç›´ä¿æŒä¸‹å»ã€‚ æ”¶è·æ¥æ­å·ä¸æ»¡ä¸€å¹´ï¼Œå‘é™…çº¿åç§»äº†ä¸€å…¬åˆ†ï¼ŒçœŸçš„å¥½æ‚²ä¼¤ï¼Œç”šè‡³æœ‰ç‚¹ä¸å¤ªæ•¢ç…§é•œå­ï¼æ±‚æ¨èæŠ¤å‘å…»å‘æ´—å‘éœ²~ å…¶ä»–æŠ¢ç¥¨çœŸçš„æŒºéš¾çš„ï¼Œæˆ‘ç°åœ¨æ‰æ„Ÿè§‰åˆ°ã€‚ç¦»å®¶å¤ªè¿œæœºç¥¨åˆè´µï¼Œå®³æ€•æœ€åä¸€å¤©ä¸èƒ½èµ¶å›æ¥ä¸Šç­ï¼Œæå‰æŠ¢ç¥¨ä¹Ÿæ˜¯ç§’æ²¡ï¼Œè¿™æ˜¯åœ¨åœ¨åŒ—äº¬ä»æœªæœ‰è¿‡çš„çƒ¦æ¼ã€‚ ç«‹ FlagFlag è¿˜æ˜¯ä¸€å®šè¦ç«‹çš„ï¼Œä¸‡ä¸€éƒ½å®ç°äº†å‘¢ï¼ğŸ˜à½² æ¢å¤æ¯æœˆå†™ 2 ç¯‡åšå®¢çš„ä¹ æƒ¯ æ—©ç¡æ—©èµ· 240 å¤©ï¼Œç•ªèŒ„æ•°é‡ 25 ä¸ª/å‘¨ è¯»å®Œã€Šé‡æ„ã€‹ã€ŠJava8 å®æˆ˜ã€‹ã€ŠSpring å®æˆ˜ã€‹ã€ŠSpring æºç æ·±åº¦è§£æã€‹ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹ è¯»å®Œã€Šæå®šã€‹ã€Šæ€è€ƒï¼Œå¿«ä¸æ…¢ã€‹ã€Šç¨€ç¼ºã€‹ã€Šä¸‡å†åäº”å¹´ã€‹ã€ŠåŸåˆ™ã€‹","tags":[{"name":"å¹´ç»ˆæ€»ç»“","slug":"å¹´ç»ˆæ€»ç»“","permalink":"http://nullpointer.pw/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"}]},{"title":"easypoiå¯¼å…¥Excelæœ€ä½³å®è·µ","date":"2019-12-28T07:50:55.000Z","path":"easypoiå¯¼å…¥Excelæœ€ä½³å®è·µ.html","text":"å‰è¨€ä¸€ç›´ä»¥æ¥ï¼Œä½¿ç”¨EasyPOIåšäº†ä¸å°‘å¯¼å…¥å¯¼å‡ºçš„éœ€æ±‚ï¼Œä½†æ˜¯æ¯æ¬¡åšå®Œéƒ½æ˜¯ä¸´æ—¶å»çœ‹å®˜æ–¹æ–‡æ¡£ç°å­¦ç°ç”¨ï¼Œæ­£å·§æœ€è¿‘æœ‹å‹é‡åˆ°è¿™ä¹ˆä¸ªéœ€æ±‚ï¼Œç”¨åˆ°äº†EasyPOIæ¥å®Œæˆå¯¼å…¥ï¼Œæˆ‘ä¹Ÿæ­£å¥½æ•´ç†æ•´ç†EasyPOIçš„å¯¼å…¥ç”¨æ³•ã€‚ æ›´æ–°æ—¥å¿— 2020-12-10æ›´æ–°ï¼šè¯„è®ºä¸­æœ‰äººè¯´ï¼šå“¥ï¼Œä¸ºæ¯›æˆ‘çš„æ•°æ®æ ¡éªŒæ²¡ç”Ÿæ•ˆï¼Œå®Œå…¨å’Œä½ çš„ä¸€æ¯›ä¸€æ ·å•Šï¼Œè¿™ç§æƒ…å†µå¯ä»¥è€ƒè™‘æ‰‹åŠ¨å¼•å…¥ä¸€ä¸‹ hibernate-validator ä¾èµ–ï¼Œæœ€æ–°ç‰ˆçš„springbootä¸­è²Œä¼¼ç§»é™¤æ‰äº†ã€‚ç¬¬äºŒä¸ªå¯ä»¥è€ƒè™‘æ˜¯å¦æ˜¯åœ¨ VerifyHandler å®ç°ç±»ä¸­åšäº†éæ ¡éªŒç±»çš„æ“ä½œï¼Œæ¯”å¦‚å…¥åº“æ“ä½œï¼Œeasypoi ä¼šé¦–å…ˆé€šè¿‡æ³¨è§£æ ¡éªŒï¼Œå†è°ƒç”¨ VerifyHandler çš„æ ¡éªŒæ–¹æ³•ï¼Œå³ä½¿æ³¨è§£æ ¡éªŒä¸é€šè¿‡ï¼ŒVerifyHandler ç±»çš„æ–¹æ³•è¿˜æ˜¯ä¼šæ‰§è¡Œçš„ï¼Œéæ ¡éªŒç±»çš„æ“ä½œæ”¾åˆ°ExcelImportUtil æ–¹æ³•è°ƒç”¨å¤„ï¼Œå› ä¸ºå¯¼å…¥ç»“æœgetList()æ‰æ˜¯å…¨éƒ¨é€šè¿‡æ ¡éªŒçš„æ•°æ®ã€‚ éœ€æ±‚æ˜¯è¿™æ ·çš„ï¼šç°åœ¨è¦åœ¨åå°å¯¼å…¥ç”¨æˆ·çš„ç®€å†ï¼Œç®€å†çš„æ ¼å¼æ˜¯è¿™æ ·å­çš„ï¼š ä¸€ä¸ªäººæœ‰å¤šä¸ªå±æ€§ï¼ŒæŸäº›å±æ€§å¦‚ç”³è¯·èŒä½ã€è–ªèµ„æ˜¯å•ä¸€å±æ€§ï¼Œå³åªä¼šæœ‰ä¸€ä¸ªå€¼ï¼›æŸäº›å±æ€§å¦‚å·¥ä½œç»å†ã€æ•™è‚²ç»å†ã€è·å¥–æƒ…å†µæ˜¯ä¸€ç»„å±æ€§ï¼Œå¯èƒ½ä¼šæœ‰å¤šç»„å€¼ã€‚ç°åœ¨è¦å°†è¿™æ‰¹ç®€å†æ•°æ®å¯¼å…¥åˆ°åº“ä¸­ã€‚ é›¶ã€æ–‡ä»¶å‡†å¤‡ï¼š ç¤ºä¾‹Excelä»¥åŠç¤ºä¾‹Excel2 åŠ å…¥ EasyPOI çš„ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;cn.afterturn&lt;/groupId&gt; &lt;artifactId&gt;easypoi-web&lt;/artifactId&gt; &lt;version&gt;3.2.0&lt;/version&gt;&lt;/dependency&gt; ä¸€ã€å®šä¹‰EasyPOIå¯¼å…¥å®ä½“ç±» é¦–å…ˆå®šä¹‰ä¸€ä¸ª EasyPOI å®ä½“ç±»ï¼Œå•ä¸ªå±æ€§ä½¿ç”¨ @Excelæ³¨è§£å£°æ˜ï¼Œname å±æ€§éœ€è¦ä¸Excelä¸­çš„è¡¨å¤´ä¿æŒä¸€è‡´ï¼Œæ¯”å¦‚ å§“å*ä¸­çš„ * å·å°±ä¸èƒ½çœç•¥æ‰ï¼ˆ2021å¹´04æœˆ15æ—¥æ›´æ–°ï¼šè¿™é‡Œå¯èƒ½ä¼šè¯¯å¯¼ï¼Œè¡¨ç¤ºçš„æ„æ€æ˜¯éœ€è¦ä¿è¯ name å±æ€§ä¸ Excel ä¸­çš„åˆ—åä¿æŒä¸€æ ·ï¼Œçœ‹åˆ—åæœ‰æ²¡æœ‰ * ï¼Œæ²¡æœ‰çš„è¯å°±ä¸è¦åŠ ã€‚ã€‚ã€‚ï¼‰ã€‚ä¸€å¯¹å¤šå…³ç³»ä½¿ç”¨ @Collection æ³¨è§£å£°æ˜ï¼Œname æ˜¯æœ€ä¸Šæ–¹çš„è¡¨å¤´ï¼Œå¯¹åº”çš„é›†åˆå…ƒç´ ç±»å‹éœ€è¦å¦å¤–å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œå› ä¸ºç¯‡å¹…é—®é¢˜ï¼Œåªå±•ç¤ºä¸€ä¸ªå·¥ä½œç»å†ä»¥åŠæ•™è‚²ç»å†å¯¹åº”çš„é›†åˆå¯¹è±¡ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495@Datapublic class TalentUserInputEntity&#123; @Excel(name = &quot;å§“å*&quot;) private String name; @Excel(name = &quot;æ€§åˆ«*&quot;) private Integer gender; @Excel(name = &quot;æ‰‹æœºå·*&quot;) private String phone; @Excel(name = &quot;å¼€å§‹å·¥ä½œæ—¶é—´*&quot;) private Date workTime; @Excel(name = &quot;æ°‘æ—*&quot;) private String national; @Excel(name = &quot;è¯­è¨€æ°´å¹³*&quot;) private String languageProficiency; @Excel(name = &quot;å‡ºç”Ÿæ—¥æœŸ*&quot;) private Date birth; @Excel(name = &quot;èŒä½*&quot;) private String jobsName; @Excel(name = &quot;èŒä½ç±»å‹*&quot;) private String categoryName; @Excel(name = &quot;è–ªèµ„*&quot;) private Integer salary; @Excel(name = &quot;å·¥ä½œåœ°ç‚¹*&quot;) private String workArea; @ExcelCollection(name = &quot;å·¥ä½œç»å†*&quot;) private List&lt;ExperienceInputEntity&gt; experienceList; @ExcelCollection(name = &quot;æ•™è‚²ç»å†*&quot;) private List&lt;EducationInputEntity&gt; educationList; @ExcelCollection(name = &quot;è·å¥–æƒ…å†µ&quot;) private List&lt;AwardsInputEntity&gt; awardList; @ExcelCollection(name = &quot;æŠ€èƒ½è¯ä¹¦&quot;) private List&lt;PunishmentInputEntity&gt; punishmentList; @Excel(name = &quot;ç‰¹é•¿&quot;) private String specialty;&#125;// å·¥ä½œç»å†å¯¹è±¡@Datapublic class ExperienceInputEntity &#123; @Excel(name = &quot;å…¬å¸åç§°*&quot;) private String companyName; @Excel(name = &quot;æ‰€åœ¨è¡Œä¸š*&quot;) private String industry; @Excel(name = &quot;å¼€å§‹æ—¶é—´*&quot;) private Date beginTime; @Excel(name = &quot;ç»“æŸæ—¶é—´*&quot;) private Date finishTime; @Excel(name = &quot;èŒä½åç§°*&quot;) private String jobTitle; @Excel(name = &quot;æ‰€å±éƒ¨é—¨*&quot;) private String department; @Excel(name = &quot;å·¥ä½œå†…å®¹*&quot;) private String description;&#125;// æ•™è‚²ç»å†å¯¹è±¡@Datapublic class EducationInputEntity &#123; @Excel(name = &quot;å­¦æ ¡*&quot;) private String schoolName; @Excel(name = &quot;å­¦å†*&quot;) private Integer record; @Excel(name = &quot;å¼€å§‹å¹´ä»½*&quot;) private Date beginTime; @Excel(name = &quot;æ¯•ä¸šå¹´ä»½*&quot;) private Date finishTime; @Excel(name = &quot;ä¸“ä¸š*&quot;) private String profession;&#125;// çœç•¥å…¶ä»– äºŒã€EasyPOIåŸºç¡€å¯¼å…¥è¿™é‡Œä¸ºæ–¹ä¾¿æ¼”ç¤ºï¼Œç›´æ¥å°†å¯¼å…¥ç»“æœè½¬æˆJSONæ‰“å°è¾“å‡ºã€‚ 12345678910@PostMapping(&quot;/upload&quot;)public Boolean upload(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws Exception &#123; ImportParams params = new ImportParams(); params.setHeadRows(2); // params.setTitleRows(0); List&lt;TalentUserInputEntity&gt; result = ExcelImportUtil.importExcel(multipartFile.getInputStream(), TalentUserInputEntity.class, params); System.out.println(JSONUtil.toJsonStr(result)); return true;&#125; è¿™é‡Œéœ€è¦æ³¨æ„è¡¨å¤´çš„è¡Œæ•°è®¾ç½®ä¸€å®šè¦æ­£ç¡®ï¼å¦åˆ™é›†åˆæ•°æ®å°†æ— æ³•è¯»å–ï¼Œå¯ä»¥é€šè¿‡WPSæˆ–è€…officeæŸ¥çœ‹å®é™…è¡¨å¤´æ‰€å ç”¨çš„è¡Œæ•°ï¼Œä¸€å®šè¦åŒºåˆ†è¡¨å¤´ä¸æ ‡é¢˜çš„åŒºåˆ«ï¼Œè¡¨å¤´æ˜¯åˆ—åç§°ï¼Œæ ‡é¢˜æ˜¯è¡¨å¤´ä¸Šé¢çš„æ–‡å­—ï¼Œæœ¬æ–‡ç¤ºä¾‹æ–‡ä»¶ä¸­æ²¡æœ‰æ ‡é¢˜ï¼Œæ‰€ä»¥setTitleRowsä¸º0 ä¸‰ã€å€¼æ›¿æ¢ä½¿ç”¨ postman æˆ–è€… Talend API Tester ç­‰å·¥å…·è¿›è¡Œä¸Šä¼  ç¤ºä¾‹æ–‡ä»¶.xlsxï¼Œç»“æœæ§åˆ¶å°è¾“å‡ºäº†å¼‚å¸¸ï¼Œå¼‚å¸¸å¦‚ä¸‹ï¼š 123java.lang.NumberFormatException: For input string: &quot;ç”·&quot;...cn.afterturn.easypoi.exception.excel.ExcelImportException: Excel å€¼è·å–å¤±è´¥ åŸå› æ˜¯å› ä¸ºæ•°æ®åº“ä¸­æ€§åˆ«å­—æ®µç±»å‹ä¸º Integer ç±»å‹çš„ï¼Œæ‰€ä»¥å¯¼å…¥å¯¹è±¡ä¹Ÿè®¾ç½®æˆäº† Integerï¼Œè€Œ Excel ä¸­å¡«å†™çš„æ˜¯ç”·/å¥³æ±‰å­—ï¼Œè‡ªç„¶å°±å‡ºé”™äº†ï¼Œè¿™é‡Œå°±éœ€è¦ä½¿ç”¨ easypoi çš„ replace æ–¹å¼æ¥æ›¿æ¢æœ€ç»ˆå€¼ï¼Œä¿®æ”¹ gender å­—æ®µä¸Šçš„æ³¨è§£ä¸ºï¼š 123// replaceæ ¼å¼ä¸º &quot;æ›¿æ¢å‰çš„å€¼_æ›¿æ¢åçš„å€¼&quot;@Excel(name = &quot;æ€§åˆ«*&quot;, replace = &#123;&quot;ç”·_0&quot;, &quot;å¥³_1&quot;&#125;)private Integer gender; åŒç†ï¼Œè–ªèµ„ç±»å‹å’Œæ•™è‚²ç»å†ä¸­çš„å­¦å†éœ€è¦æ›¿æ¢éœ€è¦çš„å€¼ 12345@Excel(name = &quot;è–ªèµ„*&quot;, replace = &#123;&quot;3Kä»¥ä¸‹_1&quot;, &quot;3K-5K_2&quot;, &quot;5K-10K_3&quot;, &quot;10K-20K_4&quot;, &quot;20K-50K_5&quot;, &quot;50Kä»¥ä¸Š_6&quot;&#125;)private Integer salary;@Excel(name = &quot;å­¦å†*&quot;, replace =&#123;&quot;åˆä¸­åŠä»¥ä¸‹_1&quot;,&quot;ä¸­ä¸“_2&quot;,&quot;é«˜ä¸­_3&quot;,&quot;å¤§ä¸“_4&quot;,&quot;æœ¬ç§‘_5&quot;,&quot;ç¡•å£«_6&quot;,&quot;åšå£«_7&quot;&#125;)private Integer record; å†é‡æ–°å°è¯•å¯¼å…¥ï¼Œæ§åˆ¶å°è¾“å‡ºäº†å¯¼å…¥çš„JSONå†…å®¹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111[ &#123; &quot;experienceList&quot;: [ &#123; &quot;finishTime&quot;: 1571673600000, &quot;companyName&quot;: &quot;ç§‘æŠ€å…¬å¸1&quot;, &quot;jobTitle&quot;: &quot;è¿è¥&quot;, &quot;description&quot;: &quot;è¿è¥æ–¹æ¡ˆå¤„ç†&quot;, &quot;industry&quot;: &quot;äº’è”ç½‘&quot;, &quot;beginTime&quot;: 1546358400000, &quot;department&quot;: &quot;è¿è¥éƒ¨&quot; &#125;, &#123; &quot;finishTime&quot;: 1571673600000, &quot;companyName&quot;: &quot;è´¢åŠ¡å…¬å¸&quot;, &quot;jobTitle&quot;: &quot;ä¼šè®¡&quot;, &quot;description&quot;: &quot;å®¡è®¡&quot;, &quot;industry&quot;: &quot;è´¢åŠ¡&quot;, &quot;beginTime&quot;: 1574179200000, &quot;department&quot;: &quot;ä¼šè®¡éƒ¨&quot; &#125; ], &quot;gender&quot;: 0, &quot;languageProficiency&quot;: &quot;è‹±è¯­å››çº§&quot;, &quot;jobsName&quot;: &quot;é”€å”®&quot;, &quot;educationList&quot;: [ &#123; &quot;profession&quot;: &quot;è®¡ç®—æœº&quot;, &quot;finishTime&quot;: 1530374400000, &quot;record&quot;: 5, &quot;beginTime&quot;: 1409500800000, &quot;schoolName&quot;: &quot;å±±ä¸œå¤§å­¦&quot; &#125;, &#123; &quot;profession&quot;: &quot;è®¡ç®—æœº&quot;, &quot;finishTime&quot;: 1593532800000, &quot;record&quot;: 6, &quot;beginTime&quot;: 1409500800000, &quot;schoolName&quot;: &quot;å±±ä¸œå¤§å­¦&quot; &#125; ], &quot;birth&quot;: 851097600000, &quot;salary&quot;: 4, &quot;workTime&quot;: 1549900800000, &quot;categoryName&quot;: &quot;é”€å”®&quot;, &quot;phone&quot;: &quot;13122223333&quot;, &quot;workArea&quot;: &quot;æµ™æ±Ÿçœé‡‘åå¸‚ä¹‰ä¹Œå¸‚&quot;, &quot;name&quot;: &quot;å¼ æ— å¿Œ&quot;, &quot;national&quot;: &quot;æ±‰æ—&quot;, &quot;punishmentList&quot;: [ &#123;&#125;, &#123;&#125; ], &quot;awardList&quot;: [ &#123; &quot;date&quot;: 1530374400000, &quot;name&quot;: &quot;å›½å®¶å¥–å­¦é‡‘&quot;, &quot;description&quot;: &quot;å›½å®¶ä¸€çº§å¥–å­¦é‡‘&quot; &#125;, &#123;&#125; ] &#125;, &#123; &quot;specialty&quot;: &quot;ç‰¹é•¿å°±æ˜¯å¤ªå¤šç‰¹é•¿&quot;, &quot;experienceList&quot;: [ &#123; &quot;finishTime&quot;: 1571673600000, &quot;companyName&quot;: &quot;ç§‘æŠ€å…¬å¸1&quot;, &quot;jobTitle&quot;: &quot;javaå¼€å‘&quot;, &quot;description&quot;: &quot;code&quot;, &quot;industry&quot;: &quot;äº’è”ç½‘&quot;, &quot;beginTime&quot;: 1546358400000, &quot;department&quot;: &quot;å¼€å‘éƒ¨é—¨&quot; &#125; ], &quot;gender&quot;: 0, &quot;languageProficiency&quot;: &quot;è‹±è¯­å…«çº§&quot;, &quot;jobsName&quot;: &quot;java&quot;, &quot;educationList&quot;: [ &#123; &quot;profession&quot;: &quot;è®¡ç®—æœº&quot;, &quot;finishTime&quot;: 1530374400000, &quot;record&quot;: 5, &quot;beginTime&quot;: 1409500800000, &quot;schoolName&quot;: &quot;å®‰å¾½å¤§å­¦&quot; &#125; ], &quot;birth&quot;: 851097600000, &quot;salary&quot;: 4, &quot;workTime&quot;: 1549900800000, &quot;categoryName&quot;: &quot;å¼€å‘&quot;, &quot;phone&quot;: &quot;18311111111&quot;, &quot;workArea&quot;: &quot;æµ™æ±Ÿçœé‡‘åå¸‚ä¹‰ä¹Œå¸‚&quot;, &quot;name&quot;: &quot;å¼ å°å‡¡&quot;, &quot;national&quot;: &quot;æ±‰æ—&quot;, &quot;punishmentList&quot;: [ &#123; &quot;date&quot;: 1530374400000, &quot;description&quot;: &quot;æŠ€èƒ½æ²¡æœ‰&quot; &#125; ], &quot;awardList&quot;: [ &#123; &quot;date&quot;: 1530374400000, &quot;name&quot;: &quot;å›½å®¶å¥–å­¦é‡‘&quot;, &quot;description&quot;: &quot;å›½å®¶ä¸€çº§å¥–å­¦é‡‘&quot; &#125; ] &#125;, // çœç•¥å…¶ä»–...] å››ã€å¯¼å…¥ä¹‹åŸºç¡€æ ¡éªŒç°åœ¨äº§å“éœ€è¦å¯¹å¯¼å…¥çš„Excelè¿›è¡Œæ ¡éªŒï¼Œä¸åˆæ³•çš„Excelä¸å…è®¸å…¥åº“ï¼Œéœ€è¦è¿”å›å…·ä½“çš„é”™è¯¯ä¿¡æ¯ç»™å‰ç«¯ï¼Œæç¤ºç»™ç”¨æˆ·ï¼Œé”™è¯¯ä¿¡æ¯ä¸­éœ€è¦åŒ…å«è¡Œå·ä»¥åŠå¯¹åº”çš„é”™è¯¯ã€‚ å› ä¸º EasyPOI æ”¯æŒ Hibernate Validator ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ï¼Œå› ä¸ºè¦å°†é”™è¯¯ä¿¡æ¯ä»¥åŠé”™è¯¯è¡Œå·è¿”å›ï¼Œæ‰€ä»¥éœ€è¦ç”¨åˆ° EasyPOI çš„é«˜çº§ç”¨æ³•ï¼Œå®ç° IExcelDataModelä¸ IExcelModelæ¥å£ï¼ŒIExcelDataModelè´Ÿè´£è®¾ç½®è¡Œå·ï¼ŒIExcelModel è´Ÿè´£è®¾ç½®é”™è¯¯ä¿¡æ¯ã€‚ ä¿®æ”¹å¯¼å…¥å®ä½“ç±»ï¼Œå¢åŠ å­—æ®µ rowNum ä¸ errorMsgä»¥åŠå¢åŠ æ ¡éªŒæ³¨è§£ã€‚ å¦‚æœä½¿ç”¨åˆ°äº† @Pattern æ³¨è§£ï¼Œåˆ™å­—æ®µç±»å‹å¿…é¡»æ˜¯ String ç±»å‹ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæœ¬æ–‡ä¸­çš„åŸ Integer ç±»å‹çš„ gender ä¿®æ”¹æˆä¸º String ç±»å‹çš„ genderStrï¼Œrecord å­—æ®µä¹Ÿä¿®æ”¹ä¸ºäº† String ç±»å‹çš„ recordStrç­‰ç­‰ã€‚åŒç†å¦‚æœæ ¡éªŒ Date ç±»å‹å­—æ®µï¼Œå…ˆå°†ç±»å‹æ”¹æˆStringï¼Œæ­£åˆ™è¡¨è¾¾å¼å‚è€ƒä¸‹æ–‡å†™æ³•ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœ@Excelæ³¨è§£ä¸­è®¾ç½®äº† replace å±æ€§ï¼Œåˆ™Hibernate Validator æ ¡éªŒçš„æ˜¯æ›¿æ¢åçš„å€¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124@Datapublic class TalentUserInputEntity implements IExcelDataModel, IExcelModel &#123; // æ—¶é—´æ ¼å¼æ ¡éªŒæ­£åˆ™ public static final String DATE_REGEXP = &quot;(Mon|Tue|Wed|Thu|Fri|Sat|Sun)( )(Dec|Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov)( )\\\\d&#123;2&#125;( )(00:00:00)( )(CST)( )\\\\d&#123;4&#125;&quot;; /** * è¡Œå· */ private int rowNum; /** * é”™è¯¯æ¶ˆæ¯ */ private String errorMsg; @Excel(name = &quot;å§“å*&quot;) @NotBlank(message = &quot;[å§“å]ä¸èƒ½ä¸ºç©º&quot;) private String name; @Excel(name = &quot;æ€§åˆ«*&quot;, replace = &#123;&quot;ç”·_0&quot;, &quot;å¥³_1&quot;&#125;) @Pattern(regexp = &quot;[01]&quot;, message = &quot;æ€§åˆ«é”™è¯¯&quot;) private String genderStr; @Excel(name = &quot;æ‰‹æœºå·*&quot;) private String phone; @Excel(name = &quot;å¼€å§‹å·¥ä½œæ—¶é—´*&quot;) @Pattern(regexp = DATE_REGEXP, message = &quot;[å¼€å§‹å·¥ä½œæ—¶é—´]æ—¶é—´æ ¼å¼é”™è¯¯&quot;) private String workTimeStr; @Excel(name = &quot;æ°‘æ—*&quot;) @NotBlank(message = &quot;[æ°‘æ—]ä¸èƒ½ä¸ºç©º&quot;) private String national; @Excel(name = &quot;è¯­è¨€æ°´å¹³*&quot;) @NotBlank(message = &quot;[è¯­è¨€æ°´å¹³]ä¸èƒ½ä¸ºç©º&quot;) private String languageProficiency; @Excel(name = &quot;å‡ºç”Ÿæ—¥æœŸ*&quot;) @Pattern(regexp = DATE_REGEXP, message = &quot;[å‡ºç”Ÿæ—¥æœŸ]æ—¶é—´æ ¼å¼é”™è¯¯&quot;) private String birthStr; @Excel(name = &quot;èŒä½*&quot;) @NotBlank(message = &quot;[èŒä½]ä¸èƒ½ä¸ºç©º&quot;) private String jobsName; @Excel(name = &quot;èŒä½ç±»å‹*&quot;) @NotBlank(message = &quot;[èŒä½ç±»å‹]ä¸èƒ½ä¸ºç©º&quot;) private String categoryName; @Excel(name = &quot;è–ªèµ„*&quot;, replace = &#123;&quot;3Kä»¥ä¸‹_1&quot;, &quot;3K-5K_2&quot;, &quot;5K-10K_3&quot;, &quot;10K-20K_4&quot;, &quot;20K-50K_5&quot;, &quot;50Kä»¥ä¸Š_6&quot;&#125;) @Pattern(regexp = &quot;[123456]&quot;, message = &quot;è–ªèµ„ä¿¡æ¯é”™è¯¯&quot;) private String salaryStr; @Excel(name = &quot;å·¥ä½œåœ°ç‚¹*&quot;) @NotBlank(message = &quot;[å·¥ä½œåœ°ç‚¹]ä¸èƒ½ä¸ºç©º&quot;) private String workArea; @ExcelCollection(name = &quot;å·¥ä½œç»å†*&quot;) private List&lt;ExperienceInputEntity&gt; experienceList; @ExcelCollection(name = &quot;æ•™è‚²ç»å†*&quot;) private List&lt;EducationInputEntity&gt; educationList; @ExcelCollection(name = &quot;è·å¥–æƒ…å†µ&quot;) private List&lt;AwardsInputEntity&gt; awardList; @ExcelCollection(name = &quot;æŠ€èƒ½è¯ä¹¦&quot;) private List&lt;PunishmentInputEntity&gt; punishmentList; @Excel(name = &quot;ç‰¹é•¿&quot;) private String specialty;&#125;// å·¥ä½œç»å†@Datapublic class ExperienceInputEntity &#123; @Excel(name = &quot;å…¬å¸åç§°*&quot;) private String companyName; @Excel(name = &quot;æ‰€åœ¨è¡Œä¸š*&quot;) private String industry; @Excel(name = &quot;å¼€å§‹æ—¶é—´*&quot;) @Pattern(regexp = DATE_REGEXP, message = &quot;[å·¥ä½œç»å†][å¼€å§‹æ—¶é—´]æ—¶é—´æ ¼å¼é”™è¯¯&quot;) private String beginTimeStr; @Excel(name = &quot;ç»“æŸæ—¶é—´*&quot;) @Pattern(regexp = DATE_REGEXP, message = &quot;[å·¥ä½œç»å†][ç»“æŸæ—¶é—´]æ—¶é—´æ ¼å¼é”™è¯¯&quot;) private String finishTimeStr; @Excel(name = &quot;èŒä½åç§°*&quot;) private String jobTitle; @Excel(name = &quot;æ‰€å±éƒ¨é—¨*&quot;) private String department; @Excel(name = &quot;å·¥ä½œå†…å®¹*&quot;) private String description;&#125;// æ•™è‚²ç»å†@Datapublic class EducationInputEntity &#123; @Excel(name = &quot;å­¦æ ¡*&quot;) private String schoolName; @Excel(name = &quot;å­¦å†*&quot;, replace = &#123;&quot;åˆä¸­åŠä»¥ä¸‹_1&quot;, &quot;ä¸­ä¸“_2&quot;, &quot;é«˜ä¸­_3&quot;, &quot;å¤§ä¸“_4&quot;, &quot;æœ¬ç§‘_5&quot;, &quot;ç¡•å£«_6&quot;, &quot;åšå£«_7&quot;&#125;) @Pattern(regexp = &quot;[1234567]&quot;, message = &quot;å­¦å†ä¿¡æ¯é”™è¯¯&quot;) private String recordStr; @Excel(name = &quot;å¼€å§‹å¹´ä»½*&quot;) @Pattern(regexp = DATE_REGEXP, message = &quot;[æ•™è‚²ç»å†][å¼€å§‹å¹´ä»½]æ—¶é—´æ ¼å¼é”™è¯¯&quot;) private String beginTimeStr; @Excel(name = &quot;æ¯•ä¸šå¹´ä»½*&quot;) @Pattern(regexp = DATE_REGEXP, message = &quot;[æ•™è‚²ç»å†][æ¯•ä¸šå¹´ä»½]æ—¶é—´æ ¼å¼é”™è¯¯&quot;) private String finishTimeStr; @Excel(name = &quot;ä¸“ä¸š*&quot;) private String profession;&#125;// å…¶ä»–çœç•¥... ä¿®æ”¹å®Œå®ä½“ç±»åï¼Œä¿®æ”¹å¯¼å…¥å¤„çš„ä»£ç  1234567891011121314151617181920@PostMapping(&quot;/upload&quot;)public Boolean upload(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws Exception &#123; ImportParams params = new ImportParams(); // è¡¨å¤´è®¾ç½®ä¸º2è¡Œ params.setHeadRows(2); // æ ‡é¢˜è¡Œè®¾ç½®ä¸º0è¡Œï¼Œé»˜è®¤æ˜¯0ï¼Œå¯ä»¥ä¸è®¾ç½® params.setTitleRows(0); // å¼€å¯Excelæ ¡éªŒ params.setNeedVerfiy(true); ExcelImportResult&lt;TalentUserInputEntity&gt; result = ExcelImportUtil.importExcelMore(multipartFile.getInputStream(), TalentUserInputEntity.class, params); System.out.println(&quot;æ˜¯å¦æ ¡éªŒå¤±è´¥: &quot; + result.isVerfiyFail()); System.out.println(&quot;æ ¡éªŒå¤±è´¥çš„é›†åˆ:&quot; + JSONObject.toJSONString(result.getFailList())); System.out.println(&quot;æ ¡éªŒé€šè¿‡çš„é›†åˆ:&quot; + JSONObject.toJSONString(result.getList())); for (TalentUserInputEntity entity : result.getFailList()) &#123; String msg = &quot;ç¬¬&quot; + entity.getRowNum() + &quot;è¡Œçš„é”™è¯¯æ˜¯ï¼š&quot; + entity.getErrorMsg(); System.out.println(msg); &#125; return true;&#125; ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œæˆ‘åŸºäºæ­£ç¡®çš„Excelå¦å­˜ä¸€ä»½ä¸ªåˆ«å­—æ®µæœ‰è¯¯çš„ ç¤ºä¾‹Excel2 å¹¶ä¸Šä¼ ï¼Œè§£æç»“æœä¸ºï¼š è¿™é‡Œè´´å‡ºéƒ¨åˆ†æ ¡éªŒå¤±è´¥é›†åˆæ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬50è¡Œå’Œ61è¡Œæ˜¯åŸExcelä¸­é”™è¯¯çš„æ•°æ®ï¼Œä¹Ÿå·²ç»æ‰“å°äº†å‡ºæ¥ï¼Œä½†æ˜¯æ•™è‚²ç»å†ä¸­çš„æ•™è‚²æ°´å¹³ä¹Ÿæ˜¯é”™è¯¯çš„ï¼Œå´æ²¡è¢«æ‰“å°å‡ºæ¥ï¼ŒæŸ¥çœ‹æºç å‘ç°ï¼ŒEasyPOI å¯¹ Collection ä¸­çš„å¯¹è±¡å¹¶æ²¡æœ‰è¿›è¡Œæ ¡éªŒï¼Œæˆ‘ä»¬åœ¨ä¸‹æ–‡ä¸­è§£å†³ã€‚ äº”ã€å¯¼å…¥å€¼è‡ªå®šä¹‰æ ¡éªŒä¹‹é‡å¤å€¼æ ¡éªŒä¸Šæ–‡æ‰€ä½œçš„æ ¡éªŒåªæ˜¯ä¸€äº›åŸºæœ¬çš„æ ¡éªŒï¼Œå¯èƒ½ä¼šæœ‰è¯¸å¦‚Excelä¸­é‡å¤è¡Œæ ¡éªŒï¼ŒExcelä¸­æ•°æ®ä¸æ•°æ®åº“é‡å¤æ ¡éªŒç­‰ç­‰ã€‚è¿™ç§æ ¡éªŒå°±æ— æ³•é€šè¿‡ Hibernate Validator æ¥å®Œæˆï¼Œåªèƒ½å†™ä»£ç æ¥å®ç°æ ¡éªŒé€»è¾‘äº†ã€‚ é¦–å…ˆä»ç®€å•çš„Excelæ•°æ®ä¸æ•°æ®åº“å€¼é‡å¤æ ¡éªŒå¼€å§‹ã€‚ä¸ºäº†ä¾¿äºæ¼”ç¤ºï¼Œå°±ä¸å¼•å…¥æ•°æ®åº“äº†ï¼Œç›´æ¥Mockä¸€äº›æ•°æ®ç”¨æ¥åˆ¤æ–­æ˜¯å¦é‡å¤ã€‚ 1234567891011121314151617181920@Servicepublic class MockTalentDataService &#123; private static List&lt;TalentUser&gt; talentUsers = new ArrayList&lt;&gt;(); static &#123; TalentUser u1 = new TalentUser(1L, &quot;å‡Œé£&quot;, &quot;18311342567&quot;); TalentUser u2 = new TalentUser(2L, &quot;å¼ ä¸‰&quot;, &quot;18512343567&quot;); TalentUser u3 = new TalentUser(3L, &quot;æå››&quot;, &quot;18902343267&quot;); talentUsers.add(u1); talentUsers.add(u2); talentUsers.add(u3); &#125; /** * æ ¡éªŒæ˜¯å¦é‡å¤ */ public boolean checkForDuplicates(String name, String phone) &#123; // å§“åä¸æ‰‹æœºå·ç›¸ç­‰ä¸ªæ•°ä¸ç­‰äº0åˆ™ä¸ºé‡å¤ return talentUsers.stream().anyMatch(e -&gt; e.getName().equals(name) &amp;&amp; e.getPhone().equals(phone)); &#125;&#125; å…¶ä¸­Mockæ•°æ®ä¸­ ID ä¸º 1 çš„æ•°æ®ä¸ç¤ºä¾‹Excel2 ä¸­çš„æ•°æ®æ˜¯é‡å¤çš„ã€‚EasyPOI æä¾›äº†æ ¡éªŒçš„æ¥å£ï¼Œè¿™éœ€è¦æˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªç”¨äºæ ¡éªŒçš„ç±»ã€‚åœ¨è¿™ä¸ªç±»ä¸­ï¼Œå¯ä»¥å¯¹å¯¼å…¥æ—¶çš„æ¯ä¸€è¡Œæ•°æ®è¿›è¡Œæ ¡éªŒï¼Œæ¡†æ¶é€šè¿‡ ExcelVerifyHandlerResult å¯¹è±¡æ¥åˆ¤æ–­æ˜¯å¦æ ¡éªŒé€šè¿‡ï¼Œæ ¡éªŒä¸é€šè¿‡éœ€è¦ä¼ é€’ ErrorMsgã€‚ 1234567891011121314151617181920212223@Componentpublic class TalentImportVerifyHandler implements IExcelVerifyHandler&lt;TalentUserInputEntity&gt; &#123; @Resource private MockTalentDataService mockTalentDataService; @Override public ExcelVerifyHandlerResult verifyHandler(TalentUserInputEntity inputEntity) &#123; StringJoiner joiner = new StringJoiner(&quot;,&quot;); // æ ¹æ®å§“åä¸æ‰‹æœºå·åˆ¤æ–­æ•°æ®æ˜¯å¦é‡å¤ String name = inputEntity.getName(); String phone = inputEntity.getPhone(); // mock æ•°æ®åº“ boolean duplicates = mockTalentDataService.checkForDuplicates(name, phone); if (duplicates) &#123; joiner.add(&quot;æ•°æ®ä¸æ•°æ®åº“æ•°æ®é‡å¤&quot;); &#125; if (joiner.length() != 0) &#123; return new ExcelVerifyHandlerResult(false, joiner.toString()); &#125; return new ExcelVerifyHandlerResult(true); &#125;&#125; ä¿®æ”¹æ ¡éªŒå¤„ä»£ç ï¼Œè®¾ç½®æ ¡éªŒç±»å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425@Resourceprivate TalentImportVerifyHandler talentImportVerifyHandler;@PostMapping(&quot;/upload&quot;)public Boolean upload(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws Exception &#123; ImportParams params = new ImportParams(); // è¡¨å¤´è®¾ç½®ä¸º2è¡Œ params.setHeadRows(2); // æ ‡é¢˜è¡Œè®¾ç½®ä¸º0è¡Œï¼Œé»˜è®¤æ˜¯0ï¼Œå¯ä»¥ä¸è®¾ç½® params.setTitleRows(0); // å¼€å¯Excelæ ¡éªŒ params.setNeedVerfiy(true); params.setVerifyHandler(talentImportVerifyHandler); ExcelImportResult&lt;TalentUserInputEntity&gt; result = ExcelImportUtil.importExcelMore(multipartFile.getInputStream(), TalentUserInputEntity.class, params); System.out.println(&quot;æ˜¯å¦æ ¡éªŒå¤±è´¥: &quot; + result.isVerfiyFail()); System.out.println(&quot;æ ¡éªŒå¤±è´¥çš„é›†åˆ:&quot; + JSONObject.toJSONString(result.getFailList())); System.out.println(&quot;æ ¡éªŒé€šè¿‡çš„é›†åˆ:&quot; + JSONObject.toJSONString(result.getList())); for (TalentUserInputEntity entity : result.getFailList()) &#123; int line = entity.getRowNum() + 1; String msg = &quot;ç¬¬&quot; + line + &quot;è¡Œçš„é”™è¯¯æ˜¯ï¼š&quot; + entity.getErrorMsg(); System.out.println(msg); &#125; return true;&#125; ä¸Šä¼  ç¤ºä¾‹Excel2 æ–‡ä»¶æµ‹è¯•ï¼Œç»“æœè¾“å‡ºï¼š è€Œç¬¬ä¸ƒè¡Œçš„æ•°æ®æ­£æ˜¯ä¸Mockä¸­çš„æ•°æ®ç›¸é‡å¤çš„ã€‚ å…­ã€å¯¼å…¥å€¼è‡ªå®šä¹‰æ ¡éªŒä¹‹Collectionå¯¹è±¡æ ¡éªŒä¸Šæ–‡ä¸­è¿˜æœ‰ä¸€ä¸ªå¾…è§£å†³çš„é—®é¢˜ï¼Œå°±æ˜¯Collectionä¸­çš„å¯¹è±¡æ·»åŠ äº†Hibernate Validator æ³¨è§£æ ¡éªŒä½†æ˜¯å¹¶æœªç”Ÿæ•ˆçš„é—®é¢˜ï¼Œç°åœ¨å°±æ¥è§£å†³ä¸€ä¸‹ã€‚ä¸Šä¸€æ­¥ä¸­å®ç°äº†å¯¼å…¥å¯¹è±¡çš„æ ¡éªŒç±»ï¼Œæ ¡éªŒç±»ä¼šæ ¡éªŒExcelä¸­çš„æ¯ä¸€æ¡æ•°æ®ï¼Œ é‚£æˆ‘æ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥åœ¨æ ¡éªŒç±»ä¸­æ ¡éªŒCollectionä¸­å¯¹è±¡äº†å‘¢ï¼Ÿå®è·µè¯æ˜è¡Œä¸é€šï¼Œå› ä¸ºè¿™ä¸ªæ ¡éªŒç±»çš„verifyHandleræ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥Collectionä¸­åªæœ‰ä¸€æ¡è®°å½•ã€‚æ—¢ç„¶è¿™é‡Œè¡Œä¸é€šçš„è¯ï¼Œå°±åªèƒ½å¯¹å¯¼å…¥ç»“æœå†è¿›è¡Œæ ¡éªŒäº†ã€‚ å› ä¸ºCollectionä¸­çš„æ•°æ®EasyPOIæ ¡éªŒä¸åˆ°ï¼Œæ‰€ä»¥æœ‰é—®é¢˜çš„æ•°æ®ä¹Ÿå¯èƒ½ä¼šè¢«æ¡†æ¶æ”¾åˆ°result.getList()ä¸­è€Œä¸æ˜¯result.getFailList() ä¸­ï¼Œä¸ºäº†æ ¡éªŒéœ€è¦å°†ä¸¤ä¸ªé›†åˆåˆå¹¶ä¸ºä¸€ä¸ªé›†åˆï¼Œä½¿ç”¨ EasyPOI è‡ªå¸¦çš„å·¥å…·ç±» PoiValidationUtil è¿›è¡Œæ ¡éªŒ Collection ä¸­çš„å¯¹è±¡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748@Resourceprivate TalentImportVerifyHandler talentImportVerifyHandler;@PostMapping(&quot;/upload&quot;)public Boolean upload(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws Exception &#123; ImportParams params = new ImportParams(); // è¡¨å¤´è®¾ç½®ä¸º2è¡Œ params.setHeadRows(2); // æ ‡é¢˜è¡Œè®¾ç½®ä¸º0è¡Œï¼Œé»˜è®¤æ˜¯0ï¼Œå¯ä»¥ä¸è®¾ç½® params.setTitleRows(0); // å¼€å¯Excelæ ¡éªŒ params.setNeedVerfiy(true); params.setVerifyHandler(talentImportVerifyHandler); ExcelImportResult&lt;TalentUserInputEntity&gt; result = ExcelImportUtil.importExcelMore(multipartFile.getInputStream(), TalentUserInputEntity.class, params); System.out.println(&quot;æ˜¯å¦æ ¡éªŒå¤±è´¥: &quot; + result.isVerfiyFail()); System.out.println(&quot;æ ¡éªŒå¤±è´¥çš„é›†åˆ:&quot; + JSONObject.toJSONString(result.getFailList())); System.out.println(&quot;æ ¡éªŒé€šè¿‡çš„é›†åˆ:&quot; + JSONObject.toJSONString(result.getList())); // åˆå¹¶ç»“æœé›† List&lt;TalentUserInputEntity&gt; resultList = new ArrayList&lt;&gt;(); resultList.addAll(result.getFailList()); resultList.addAll(result.getList()); for (TalentUserInputEntity inputEntity : resultList) &#123; StringJoiner joiner = new StringJoiner(&quot;,&quot;); joiner.add(inputEntity.getErrorMsg()); // æ ¡éªŒCollectionçš„å…ƒç´  inputEntity.getExperienceList().forEach(e -&gt; verify(joiner, e)); inputEntity.getEducationList().forEach(e -&gt; verify(joiner, e)); inputEntity.getAwardList().forEach(e -&gt; verify(joiner, e)); inputEntity.getPunishmentList().forEach(e -&gt; verify(joiner, e)); inputEntity.setErrorMsg(joiner.toString()); &#125; for (TalentUserInputEntity entity : result.getFailList()) &#123; int line = entity.getRowNum() + 1; String msg = &quot;ç¬¬&quot; + line + &quot;è¡Œçš„é”™è¯¯æ˜¯ï¼š&quot; + entity.getErrorMsg(); System.out.println(msg); &#125; return true;&#125;private void verify(StringJoiner joiner, Object object) &#123; String validationMsg = PoiValidationUtil.validation(object, null); if (StringUtils.isNotEmpty(validationMsg)) &#123; joiner.add(validationMsg); &#125;&#125; ä¸Šä¼  ç¤ºä¾‹Excel2 ï¼Œç»“æœå¦‚ä¸‹ï¼š ä¸ƒã€å¯¼å…¥å€¼è‡ªå®šä¹‰æ ¡éªŒä¹‹Excelé‡å¤è¡Œæ ¡éªŒä¸Šæ–‡ä¸­å¯¹Excelä¸­æ•°æ®ä¸æ•°æ®åº“æ•°æ®è¿›è¡Œé‡å¤æ ¡éªŒï¼Œå¯æœ‰äº›éœ€æ±‚æ˜¯è¦æ±‚æ•°æ®åº“åœ¨å…¥åº“å‰éœ€è¦å¯¹Excelçš„çš„é‡å¤è¡Œè¿›è¡Œæ ¡éªŒã€‚è¿™éœ€è¦åœ¨æ ¡éªŒç±»ä¸­å®Œæˆï¼Œä½†æ ¡éªŒç±»ä¸­å¹¶æ²¡æœ‰å…¨éƒ¨è¡Œçš„æ•°æ®ï¼Œè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿåšä¸»çš„åšæ³•æ˜¯å°†å¯¼å…¥çš„æ•°æ®æ”¾åˆ° ThreadLocal ä¸­è¿›è¡Œæš‚å­˜ï¼Œä»è€Œè¾¾åˆ°åœ¨æ ¡éªŒç±»ä¸­æ ¡éªŒExcelé‡å¤è¡Œçš„ç›®çš„ã€‚ThreadLocalä½¿ç”¨æ³¨æ„å®Œä¹‹åä¸€å®šè¦åŠæ—¶æ¸…ç†ï¼ é¦–å…ˆå®šä¹‰ä»€ä¹ˆå«é‡å¤è¡Œï¼Œå®Œå…¨ç›¸åŒçš„ä¸¤è¡Œæ˜¯é‡å¤è¡Œï¼Œæœ¬æ–‡ä¸­è®¾å®šname ä¸ phone ç›¸åŒçš„è¡Œä¸ºé‡å¤è¡Œï¼Œç”±äºåªéœ€è¦æ¯”è¾ƒè¿™ä¸¤ä¸ªå­—æ®µï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡å†™å¯¼å…¥å¯¹è±¡çš„equalsä¸hashCodeæ–¹æ³•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788@Datapublic class TalentUserInputEntity implements IExcelDataModel, IExcelModel &#123; // æ—¶é—´æ ¼å¼æ ¡éªŒæ­£åˆ™ public static final String DATE_REGEXP = &quot;(Mon|Tue|Wed|Thu|Fri|Sat|Sun)( )(Dec|Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov)( )\\\\d&#123;2&#125;( )(00:00:00)( )(CST)( )\\\\d&#123;4&#125;&quot;; /** * è¡Œå· */ private int rowNum; /** * é”™è¯¯æ¶ˆæ¯ */ private String errorMsg; @Excel(name = &quot;å§“å*&quot;) @NotBlank(message = &quot;[å§“å]ä¸èƒ½ä¸ºç©º&quot;) private String name; @Excel(name = &quot;æ€§åˆ«*&quot;, replace = &#123;&quot;ç”·_0&quot;, &quot;å¥³_1&quot;&#125;) @Pattern(regexp = &quot;[01]&quot;, message = &quot;æ€§åˆ«é”™è¯¯&quot;) private String genderStr; @Excel(name = &quot;æ‰‹æœºå·*&quot;) @Pattern(regexp = &quot;[0-9]&#123;11&#125;&quot;, message = &quot;æ‰‹æœºå·ä¸æ­£ç¡®&quot;) private String phone; @Excel(name = &quot;å¼€å§‹å·¥ä½œæ—¶é—´*&quot;) @Pattern(regexp = DATE_REGEXP, message = &quot;[å¼€å§‹å·¥ä½œæ—¶é—´]æ—¶é—´æ ¼å¼é”™è¯¯&quot;) private String workTimeStr; @Excel(name = &quot;æ°‘æ—*&quot;) @NotBlank(message = &quot;[æ°‘æ—]ä¸èƒ½ä¸ºç©º&quot;) private String national; @Excel(name = &quot;è¯­è¨€æ°´å¹³*&quot;) @NotBlank(message = &quot;[è¯­è¨€æ°´å¹³]ä¸èƒ½ä¸ºç©º&quot;) private String languageProficiency; @Excel(name = &quot;å‡ºç”Ÿæ—¥æœŸ*&quot;) @Pattern(regexp = DATE_REGEXP, message = &quot;[å‡ºç”Ÿæ—¥æœŸ]æ—¶é—´æ ¼å¼é”™è¯¯&quot;) private String birthStr; @Excel(name = &quot;èŒä½*&quot;) @NotBlank(message = &quot;[èŒä½]ä¸èƒ½ä¸ºç©º&quot;) private String jobsName; @Excel(name = &quot;èŒä½ç±»å‹*&quot;) @NotBlank(message = &quot;[èŒä½ç±»å‹]ä¸èƒ½ä¸ºç©º&quot;) private String categoryName; @Excel(name = &quot;è–ªèµ„*&quot;, replace = &#123;&quot;3Kä»¥ä¸‹_1&quot;, &quot;3K-5K_2&quot;, &quot;5K-10K_3&quot;, &quot;10K-20K_4&quot;, &quot;20K-50K_5&quot;, &quot;50Kä»¥ä¸Š_6&quot;&#125;) @Pattern(regexp = &quot;[123456]&quot;, message = &quot;è–ªèµ„ä¿¡æ¯é”™è¯¯&quot;) private String salaryStr; @Excel(name = &quot;å·¥ä½œåœ°ç‚¹*&quot;) @NotBlank(message = &quot;[å·¥ä½œåœ°ç‚¹]ä¸èƒ½ä¸ºç©º&quot;) private String workArea; @ExcelCollection(name = &quot;å·¥ä½œç»å†*&quot;) private List&lt;ExperienceInputEntity&gt; experienceList; @ExcelCollection(name = &quot;æ•™è‚²ç»å†*&quot;) private List&lt;EducationInputEntity&gt; educationList; @ExcelCollection(name = &quot;è·å¥–æƒ…å†µ&quot;) private List&lt;AwardsInputEntity&gt; awardList; @ExcelCollection(name = &quot;æŠ€èƒ½è¯ä¹¦&quot;) private List&lt;PunishmentInputEntity&gt; punishmentList; @Excel(name = &quot;ç‰¹é•¿&quot;) private String specialty; @Override public boolean equals(Object o) &#123; if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; TalentUserInputEntity that = (TalentUserInputEntity) o; return Objects.equals(name, that.name) &amp;&amp; Objects.equals(phone, that.phone); &#125; @Override public int hashCode() &#123; return Objects.hash(name, phone); &#125;&#125; ä¿®æ”¹æ ¡éªŒç±»ä»£ç ï¼Œå®ç°é‡å¤è¡Œçš„æ ¡éªŒé€»è¾‘ 1234567891011121314151617181920212223242526272829303132333435363738394041424344@Componentpublic class TalentImportVerifyHandler implements IExcelVerifyHandler&lt;TalentUserInputEntity&gt; &#123; private final ThreadLocal&lt;List&lt;TalentUserInputEntity&gt;&gt; threadLocal = new ThreadLocal&lt;&gt;(); @Resource private MockTalentDataService mockTalentDataService; @Override public ExcelVerifyHandlerResult verifyHandler(TalentUserInputEntity inputEntity) &#123; StringJoiner joiner = new StringJoiner(&quot;,&quot;); // æ ¹æ®å§“åä¸æ‰‹æœºå·åˆ¤æ–­æ•°æ®æ˜¯å¦é‡å¤ String name = inputEntity.getName(); String phone = inputEntity.getPhone(); // mock æ•°æ®åº“ boolean duplicates = mockTalentDataService.checkForDuplicates(name, phone); if (duplicates) &#123; joiner.add(&quot;æ•°æ®ä¸æ•°æ®åº“æ•°æ®é‡å¤&quot;); &#125; List&lt;TalentUserInputEntity&gt; threadLocalVal = threadLocal.get(); if (threadLocalVal == null) &#123; threadLocalVal = new ArrayList&lt;&gt;(); &#125; threadLocalVal.forEach(e -&gt; &#123; if (e.equals(inputEntity)) &#123; int lineNumber = e.getRowNum() + 1; joiner.add(&quot;æ•°æ®ä¸ç¬¬&quot; + lineNumber + &quot;è¡Œé‡å¤&quot;); &#125; &#125;); // æ·»åŠ æœ¬è¡Œæ•°æ®å¯¹è±¡åˆ°ThreadLocalä¸­ threadLocalVal.add(inputEntity); threadLocal.set(threadLocalVal); if (joiner.length() != 0) &#123; return new ExcelVerifyHandlerResult(false, joiner.toString()); &#125; return new ExcelVerifyHandlerResult(true); &#125; public ThreadLocal&lt;List&lt;TalentUserInputEntity&gt;&gt; getThreadLocal() &#123; return threadLocal; &#125;&#125; ç”±äºæ ¡éªŒç±»ä¸­ä½¿ç”¨äº†ThreadLocalï¼Œå› æ­¤éœ€è¦åŠæ—¶é‡Šæ”¾ï¼Œä¿®æ”¹å¯¼å…¥å¤„çš„ä»£ç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657@Resourceprivate TalentImportVerifyHandler talentImportVerifyHandler;@PostMapping(&quot;/upload&quot;)public Boolean upload(@RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws Exception &#123; ExcelImportResult&lt;TalentUserInputEntity&gt; result; try &#123; ImportParams params = new ImportParams(); // è¡¨å¤´è®¾ç½®ä¸º2è¡Œ params.setHeadRows(2); // æ ‡é¢˜è¡Œè®¾ç½®ä¸º0è¡Œï¼Œé»˜è®¤æ˜¯0ï¼Œå¯ä»¥ä¸è®¾ç½® params.setTitleRows(0); // å¼€å¯Excelæ ¡éªŒ params.setNeedVerfiy(true); params.setVerifyHandler(talentImportVerifyHandler); result = ExcelImportUtil.importExcelMore(multipartFile.getInputStream(), TalentUserInputEntity.class, params); &#125; finally &#123; // æ¸…é™¤threadLocal é˜²æ­¢å†…å­˜æ³„æ¼ ThreadLocal&lt;List&lt;TalentUserInputEntity&gt;&gt; threadLocal = talentImportVerifyHandler.getThreadLocal(); if (threadLocal != null) &#123; threadLocal.remove(); &#125; &#125; System.out.println(&quot;æ˜¯å¦æ ¡éªŒå¤±è´¥: &quot; + result.isVerfiyFail()); System.out.println(&quot;æ ¡éªŒå¤±è´¥çš„é›†åˆ:&quot; + JSONObject.toJSONString(result.getFailList())); System.out.println(&quot;æ ¡éªŒé€šè¿‡çš„é›†åˆ:&quot; + JSONObject.toJSONString(result.getList())); // åˆå¹¶ç»“æœé›† List&lt;TalentUserInputEntity&gt; resultList = new ArrayList&lt;&gt;(); resultList.addAll(result.getFailList()); resultList.addAll(result.getList()); for (TalentUserInputEntity inputEntity : resultList) &#123; StringJoiner joiner = new StringJoiner(&quot;,&quot;); joiner.add(inputEntity.getErrorMsg()); // æ ¡éªŒCollectionçš„å…ƒç´  inputEntity.getExperienceList().forEach(e -&gt; verify(joiner, e)); inputEntity.getEducationList().forEach(e -&gt; verify(joiner, e)); inputEntity.getAwardList().forEach(e -&gt; verify(joiner, e)); inputEntity.getPunishmentList().forEach(e -&gt; verify(joiner, e)); inputEntity.setErrorMsg(joiner.toString()); &#125; for (TalentUserInputEntity entity : result.getFailList()) &#123; int line = entity.getRowNum() + 1; String msg = &quot;ç¬¬&quot; + line + &quot;è¡Œçš„é”™è¯¯æ˜¯ï¼š&quot; + entity.getErrorMsg(); System.out.println(msg); &#125; return true;&#125;private void verify(StringJoiner joiner, Object object) &#123; String validationMsg = PoiValidationUtil.validation(object, null); if (StringUtils.isNotEmpty(validationMsg)) &#123; joiner.add(validationMsg); &#125;&#125; å¯¼å…¥ç¤ºä¾‹Excel2ï¼Œç»“æœå¦‚ä¸‹ï¼š è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†å¯¼å…¥çš„å¤§éƒ¨åˆ†éœ€æ±‚ã€‚ ç»“è¯­ ç¤ºä¾‹ä»£ç  è¿™ç¯‡åšå®¢èŠ±è´¹äº†æˆ‘ä¸å°‘æ—¶é—´æ¥å†™ï¼Œæ–‡ä¸­çš„ä»£ç ä¹Ÿä¸Šä¼ åˆ°äº†GitHubä¸Šï¼Œå¹¶ä¸”åœ¨å†™æ–‡ç« çš„åŒæ—¶ï¼Œå­¦ä¹ äº†ä¸€ä¸‹Git tag çš„ä½¿ç”¨ï¼Œè¯»è€…å¯ä»¥åœ¨ GitHub çš„åˆ†æ”¯åˆ‡æ¢å¯ä»¥åˆ‡æ¢åˆ°ä¸åŒtagçœ‹ä»£ç ã€‚","tags":[{"name":"easypoiå¯¼å…¥Excel","slug":"easypoiå¯¼å…¥Excel","permalink":"http://nullpointer.pw/tags/easypoi%E5%AF%BC%E5%85%A5Excel/"},{"name":"easypoiå¯¼å…¥Excelæ—¶é—´æ ¼å¼æ ¡éªŒ","slug":"easypoiå¯¼å…¥Excelæ—¶é—´æ ¼å¼æ ¡éªŒ","permalink":"http://nullpointer.pw/tags/easypoi%E5%AF%BC%E5%85%A5Excel%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E6%A0%A1%E9%AA%8C/"},{"name":"easypoiå¯¼å…¥Collectionæ ¡éªŒ","slug":"easypoiå¯¼å…¥Collectionæ ¡éªŒ","permalink":"http://nullpointer.pw/tags/easypoi%E5%AF%BC%E5%85%A5Collection%E6%A0%A1%E9%AA%8C/"},{"name":"easypoiå¯¼å…¥é‡å¤è¡Œæ ¡éªŒ","slug":"easypoiå¯¼å…¥é‡å¤è¡Œæ ¡éªŒ","permalink":"http://nullpointer.pw/tags/easypoi%E5%AF%BC%E5%85%A5%E9%87%8D%E5%A4%8D%E8%A1%8C%E6%A0%A1%E9%AA%8C/"},{"name":"easypoiå¯¼å…¥é‡å¤å€¼æ ¡éªŒ","slug":"easypoiå¯¼å…¥é‡å¤å€¼æ ¡éªŒ","permalink":"http://nullpointer.pw/tags/easypoi%E5%AF%BC%E5%85%A5%E9%87%8D%E5%A4%8D%E5%80%BC%E6%A0%A1%E9%AA%8C/"}]},{"title":"ParallelsDesktopå®‰è£…ç²¾ç®€ç‰ˆç³»ç»Ÿ","date":"2019-09-12T14:36:34.000Z","path":"ParallelsDesktopå®‰è£…ç²¾ç®€ç‰ˆç³»ç»Ÿ.html","text":"åˆ†äº«ä¸€ä¸ªè™šæ‹Ÿæœºå®‰è£…ç²¾ç®€ç‰ˆ Windows10 ç³»ç»Ÿçš„æ–¹æ³•ï¼Œåªå ç”¨ 5G å­˜å‚¨ç©ºé—´å¤§å°çš„å®Œæ•´ç‰ˆ win10 ç³»ç»Ÿå“¦ï¼Œä¸è¦å®‰è£…é‚£äº›åƒåœ¾é˜‰å‰²è¿‡çš„win7æˆ–è€…xpç³»ç»Ÿäº†ï¼Œwin10 ä¹Ÿå¯ä»¥å ç”¨è¿™ä¹ˆå°çš„ç©ºé—´å“¦~ ç”¨äº† Mac è¿™ä¹ˆä¹…ï¼Œæ„Ÿè§‰å¼€å‘ç¡®å®ç”¨ Mac æ›´æ–¹ä¾¿æ›´å‹å¥½ä¸€äº›ï¼Œä½†æ˜¯æœ‰æ—¶å€™å°±ä¼šç”¨åˆ° Windows ç³»ç»Ÿï¼Œæ¯”å¦‚éœ€è¦ç”¨åˆ° XShell ä¹‹ç±» win ä¸Šç‹¬æœ‰çš„è½¯ä»¶ã€‚è¿™æ—¶å€™åœ¨ Mac ä¸Šå®‰ä¸€ä¸ª Windows è™šæ‹Ÿæœºå°±å¾ˆæœ‰ç”¨å¤„äº†ã€‚å³ä½¿æ˜¯ Windows ç”µè„‘ï¼Œåšä¸€äº›æ•æ„Ÿæ“ä½œå®¹æ˜“ä¸­æ¯’æ—¶å€™ï¼ˆæ¯”å¦‚ä½œæ­»ç©ç©ç—…æ¯’ä¹‹ç±»çš„ï¼‰ï¼Œä¹Ÿæœ€å¥½éš”ç¦»ç³»ç»Ÿåœ¨è™šæ‹Ÿæœºé‡Œé¼“æ£ã€‚ åœ¨ Mac ä¸Š Parallels Desktop å®‰è£…çš„è™šæ‹Ÿæœºå…¨å±åï¼Œå’ŒMacç³»ç»Ÿæ— ç¼åˆ‡æ¢ï¼Œå°±æ˜¯èˆ’æœ~ å•¥ï¼Ÿä½ è¿˜é—®æˆ‘æœ‰ä»€ä¹ˆç”¨ï¼Ÿå¦‚æœä½ ä¹°ä¸ª 128 GB å­˜å‚¨çš„ Mac å°±çŸ¥é“æœ‰æ²¡æœ‰ç”¨äº†ã€‚ï¼ˆæˆ‘çš„ 256 ä¹Ÿä¸å¤Ÿç”¨ï¼Œå› æ­¤é¼“æ£å‡ºè¿™ä¹ˆä¸ªæ–¹æ³•æ¥ï¼‰ Windows ç³»ç»Ÿå¾ˆå ç©ºé—´ï¼Œæ–°å®‰è£…çš„ç³»ç»ŸåŠ¨è¾„å ç”¨ 40G - 60G å­˜å‚¨ç©ºé—´ï¼Œå¦‚æœå®‰è£…åˆ°è™šæ‹Ÿæœºä¸­ï¼Œå°±æ˜¾å¾—ä¸æ˜¯é‚£ä¹ˆåˆ’ç®—äº†ã€‚ï¼ˆåœ¨è™šæ‹Ÿæœºä¸­å®‰è¿‡åŸç‰ˆé•œåƒçš„åŒå­¦ï¼Œå¯¹äºè™šæ‹Ÿæœºå ç”¨ç©ºé—´çš„å¤§å°ï¼Œè‚¯å®šæ·±æœ‰ä½“ä¼šï¼‰ åŸç‰ˆé•œåƒçš„ ISO æ–‡ä»¶ä¸€èˆ¬éƒ½è¦ 13G ä»¥ä¸Šï¼Œäºæ˜¯æˆ‘åœ¨ è¿œæ™¯è®ºå› æ‰¾åˆ°ä¸€ä¸ªå¤§ç¥ç²¾ç®€è¿‡çš„ Win10 ESD é•œåƒï¼Œåªç²¾ç®€äº†æ— ç”¨çš„ä¸€äº›æœåŠ¡ï¼Œæ— æ†ç»‘ï¼Œé•œåƒåŒ…ä»… 1G å¤§å°ï¼Œå®‰è£…åä¹Ÿä»…å ç”¨ 4G ç©ºé—´ï¼ŒçœŸé¦™ï¼ å¦‚æœä½ ä¸çŸ¥é“æˆ‘å¨å¨çš„æ˜¯ä»€ä¹ˆï¼Œå°±ä¸ç”¨ç»§ç»­å¾€ä¸‹çœ‹äº†ï¼Œä»¥ä¸‹ä»¥ Parallels Desktop è™šæ‹Ÿæœºä¸¾ä¾‹ï¼Œå…¶ä»–è™šæ‹Ÿæœºæ¯”å¦‚ Vmware Fusion ä¹‹ç±»çš„è¯·è§¦ç±»æ—é€šã€‚ å®‰è£…å‡†å¤‡å‡ ä¹æ‰€æœ‰çš„è™šæ‹Ÿæœºè½¯ä»¶å®‰è£…æ—¶ï¼Œåªæ”¯æŒ ISO æ–‡ä»¶ï¼Œä½†æ˜¯ä¸€èˆ¬å°è£…çš„ç³»ç»Ÿéƒ½æ˜¯ ESD WIM ä¹‹ç±»çš„é•œåƒæ ¼å¼ï¼ŒSoï¼Œéœ€è¦è½¬æ¢æˆ ISO æ ¼å¼ã€‚ æˆ‘è¿™é‡Œç»™å‡ºè½¬æ¢å¥½çš„å¤§ç¥ç²¾ç®€çš„é•œåƒ ISO æ–‡ä»¶ï¼Œç”¨äº†ä¸€å¹´å¤šäº†ï¼Œå¾ˆç¨³å®šï¼Œå’ŒåŸç‰ˆé•œåƒæ²¡æœ‰ä»»ä½•å·®åˆ«ï¼Œå ç”¨ç©ºé—´ç›¸å¯¹åŸç‰ˆé•œåƒå°‘çš„ä¸æ˜¯ä¸€ç‚¹åŠç‚¹ã€‚è‹¥æƒ³è¦è‡ªå·±å°è£… ISOï¼Œè§æ–‡æœ«å‚è€ƒé“¾æ¥ã€‚ Win10ç²¾ç®€ç‰ˆ ISO é•œåƒä»¥åŠå¼•å¯¼é•œåƒä¸‹è½½ æå–ç : vcmq ç½‘ç›˜å†…æœ‰ä¸¤ä¸ª ISO æ–‡ä»¶ï¼ŒWePE_64_V2.0.iso ä¸ºå¼•å¯¼é•œåƒï¼Œwin10.iso ä¸ºç³»ç»Ÿé•œåƒã€‚ ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°ã€‚ å®‰è£…å¼•å¯¼é•œåƒ æ–°å»ºè™šæ‹Ÿæœºï¼Œé€‰æ‹© WePE_64_V2.0.iso è¿™ä¸ªå¼•å¯¼é•œåƒï¼Œå¯èƒ½ä¼šæœ‰å¦‚ä¸‹ä¹‹ç±»çš„æç¤ºï¼Œæ— è§†è·³è¿‡å³å¯ã€‚ é€‰æ‹©ç³»ç»Ÿç±»å‹ä¸º win10 è¿™é‡Œéšä¾¿é€‰ä¸€ä¸ªå°±è¡Œ é€‰æ‹©ä¿å­˜ä½ç½®ä»¥åŠè®¾ç½®è™šæ‹Ÿæœºåç§° å…³é—­è®¾å®šï¼Œç»§ç»­å®‰è£…è™šæ‹Ÿæœºï¼Œç›´åˆ°å¼€æœºè¿›å…¥ PE å¼•å¯¼ç³»ç»Ÿ å®‰è£… win10 é…ç½®è™šæ‹Ÿæœºè¿æ¥çš„é•œåƒä¸º win10.iso æ‰“å¼€å¼•å¯¼ç³»ç»Ÿå†…å·¦ä¸‹è§’çš„åˆ†åŒºå·¥å…· DiskGeniusï¼Œå³é”®ç¡¬ç›˜é€‰æ‹©å»ºç«‹æ–°åˆ†åŒºï¼ˆè¿™é‡Œçš„å¤§å°æ˜¯ä¸å‡†ç¡®çš„ï¼Œä¸ç”¨ç†ä¼šï¼‰ï¼Œç¡®å®šä¹‹åï¼Œé€‰æ‹©ä¿å­˜æ›´æ”¹ï¼Œç„¶åæ ¼å¼åŒ–é€‰æ˜¯ï¼ˆæ”¾å¿ƒä¸ä¼šå½±å“ä½ çš„å®¿ä¸»æœºç¯å¢ƒï¼‰ æ“ä½œå®Œå¦‚å›¾æ‰€ç¤ºï¼ˆæˆ‘çš„æ˜¯ 256Gï¼Œè¿™é‡Œä¹Ÿæ˜¾ç¤ºçš„æ˜¯ 256GBï¼‰ æ‰“å¼€ Windows å®‰è£…å™¨ï¼Œé€‰æ‹© win10 é•œåƒï¼ˆåœ¨DVD é©±åŠ¨å™¨å†…ï¼‰ é€‰æ‹©å¼€å§‹å®‰è£…ï¼Œç„¶åç‚¹ç¡®å®šï¼Œç­‰å¾…å®‰è£…ï¼Œå®‰è£…å®Œéœ€è¦æ‰‹åŠ¨åœ¨å¼€å§‹èœå•ä¸­æ‰‹åŠ¨é‡å¯ã€‚ é‡å¯åï¼Œç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œ win10ç³»ç»Ÿ çš„åŠ è½½ï¼Œç¨ç­‰ä¸€ä¼šå„¿å³å¯ æ”¶å°¾å·¥ä½œ é€‰æ‹©æ¡Œé¢ä¸Šçš„ç³»ç»Ÿæ¿€æ´»å·¥å…·ï¼Œç›´æ¥é€‰æ‹©æ¿€æ´»å³å¯ã€‚ è¿™æ—¶å€™å…¨å±è™šæ‹Ÿæœºï¼Œä¼šå‘ç°åˆ†è¾¨ç‡ä¸æ˜¯æœ€ä½³çš„ï¼Œå› ä¸ºä½ éœ€è¦å®‰è£…ä¸€ä¸‹è™šæ‹Ÿæœºå·¥å…·ï¼Œé€€å‡ºå…¨å± é€‰æ‹©å®‰è£… Parallels Tools è¿›å…¥æˆ‘çš„ç”µè„‘ï¼ŒDVDé©±åŠ¨å™¨ï¼Œè¿è¡Œ Autorun æ–‡ä»¶è¿›è¡Œå®‰è£…ï¼Œå®‰è£…å®Œé€‰æ‹©é‡å¯ç³»ç»Ÿ é‡å¯åï¼Œé€‰æ‹©æœ€å¤§åŒ–ï¼ˆè€Œä¸æ˜¯èåˆæ¨¡å¼ï¼‰ ç¨ç­‰ä¸€ä¼šï¼Œè™šæ‹Ÿæœºä¼šè‡ªåŠ¨è°ƒæ•´åˆ†è¾¨ç‡åˆ°è‡ªé€‚åº”ã€‚ç³»ç»Ÿä¹Ÿä¼šæˆåŠŸæ¿€æ´»ï¼Œæ¡Œé¢æ¿€æ´»è½¯ä»¶ä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚ å®Œæˆï¼ äº®ç‚¹çœ‹ä¸€ä¸‹è™šæ‹Ÿæœºå ç”¨å§å˜¿å˜¿~ å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©å§~ å‚è€ƒ https://jingyan.baidu.com/article/1876c85261a7f5890b137683.html","tags":[{"name":"ParallelsDesktopå®‰è£…ç²¾ç®€ç‰ˆç³»ç»Ÿ","slug":"ParallelsDesktopå®‰è£…ç²¾ç®€ç‰ˆç³»ç»Ÿ","permalink":"http://nullpointer.pw/tags/ParallelsDesktop%E5%AE%89%E8%A3%85%E7%B2%BE%E7%AE%80%E7%89%88%E7%B3%BB%E7%BB%9F/"},{"name":"Vmvareå®‰è£…ç²¾ç®€ç‰ˆç³»ç»Ÿ","slug":"Vmvareå®‰è£…ç²¾ç®€ç‰ˆç³»ç»Ÿ","permalink":"http://nullpointer.pw/tags/Vmvare%E5%AE%89%E8%A3%85%E7%B2%BE%E7%AE%80%E7%89%88%E7%B3%BB%E7%BB%9F/"},{"name":"ç²¾ç®€ç‰ˆwin10ç³»ç»Ÿ","slug":"ç²¾ç®€ç‰ˆwin10ç³»ç»Ÿ","permalink":"http://nullpointer.pw/tags/%E7%B2%BE%E7%AE%80%E7%89%88win10%E7%B3%BB%E7%BB%9F/"},{"name":"è™šæ‹Ÿæœºå®‰è£…esdæ ¼å¼ç³»ç»Ÿé•œåƒ","slug":"è™šæ‹Ÿæœºå®‰è£…esdæ ¼å¼ç³»ç»Ÿé•œåƒ","permalink":"http://nullpointer.pw/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85esd%E6%A0%BC%E5%BC%8F%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F/"},{"name":"è™šæ‹Ÿæœºå®‰è£…wimæ ¼å¼ç³»ç»Ÿé•œåƒ","slug":"è™šæ‹Ÿæœºå®‰è£…wimæ ¼å¼ç³»ç»Ÿé•œåƒ","permalink":"http://nullpointer.pw/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85wim%E6%A0%BC%E5%BC%8F%E7%B3%BB%E7%BB%9F%E9%95%9C%E5%83%8F/"}]},{"title":"Javaå†…å­˜åˆ†é¡µå·¥å…·ç±»","date":"2019-07-23T14:34:01.000Z","path":"Javaå†…å­˜åˆ†é¡µå·¥å…·ç±».html","text":"å‰è¨€å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°åŸºäºå†…å­˜æ•°æ®è¿›è¡Œåˆ†é¡µå¤„ç†çš„æƒ…å†µï¼Œä¾‹å¦‚æ‰¹é‡æ›´æ–°æ•°æ®åº“æ—¶ï¼Œé›†åˆè¿‡å¤§éœ€è¦åˆ†æ‰¹æ›´æ–°çš„æƒ…å†µï¼Œè¿˜æœ‰ä¾‹å¦‚å¯¹ç¼“å­˜ä¸­çš„é›†åˆæ•°æ®è¿›è¡Œåˆ†é¡µè·å–è¿™ç§æƒ…å†µã€‚æœ¬æ–‡æä¾›äº†é€šç”¨çš„å†…å­˜åˆ†é¡µå·¥å…·ï¼Œå‚è€ƒäº†ç½‘ç»œä¸Šçš„ä¸€äº›ä»£ç ï¼Œä¸»è¦åŸºäº subList() æ–¹æ³•å®ç°ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼å·¥å…·ç±»æºç åœ¨æœ¬æ–‡åº•éƒ¨ã€‚ ä¼˜åŒ–å‰é¦–å…ˆæ¥çœ‹ä¸€ä¸‹æ­£å¸¸å¦‚æœè¦å®ç°è¿™äº›éœ€æ±‚çš„è¯ï¼Œä»£ç çš„å®ç°æ˜¯æ€ä¹ˆæ ·çš„ 1234567891011121314151617181920212223242526272829303132333435// åˆ†é¡µè¿›è¡Œæ‰¹é‡æ›´æ–°private void batchUpdateStudent(List&lt;Student&gt; students) &#123; int limit = 100; int size = students.size(); int m = size / limit; int n = size % limit; for (int i = 1; i &lt;= m; i++) &#123; List&lt;Student&gt; list = students.subList((i - 1) * limit, i * limit); studentDao.batchUpdate(list); &#125; if (n != 0) &#123; List&lt;Student&gt; list = students.subList(m * limit, students.size()); studentDao.batchUpdate(list); &#125;&#125;// åˆ†é¡µè·å–æ•°æ®public List&lt;Student&gt; pageStudents(Integer page, Integer pageSize) &#123; if (page &lt; 1) &#123; page = 1; &#125; int start = (page - 1) * pageSize; int limit = page * pageSize; // ä»ç¼“å­˜ä¸­è·å–å…¨é‡æ•°æ® List&lt;Student&gt; students = studentCache.getStudents(); if (CollectionUtils.isEmpty(students)) &#123; return new ArrayList&lt;&gt;(); &#125; if (limit &gt; students.size()) &#123; limit = students.size(); &#125; return students.subList(start, limit), students.size();&#125; å¯ä»¥çœ‹å‡ºæ–¹æ³•çš„ä»£ç æ¯”è¾ƒå†—ä½™ï¼Œå¦‚æœå¤šå¤„éœ€è¦å†…å­˜åˆ†é¡µï¼Œé‡å¤ä»£ç ä¸å¯é¿å…ä¼šæœ‰å¾ˆå¤šï¼ ä¼˜åŒ–å12345678910111213141516171819202122// åˆ†é¡µè¿›è¡Œæ‰¹é‡æ›´æ–°private void batchUpdateStudent(List&lt;Student&gt; students) &#123; RAMPager&lt;Student&gt; pager = new RAMPager&lt;&gt;(students, 100); // æ–¹å¼ä¸€ï¼šä½¿ç”¨è¿­ä»£å™¨ Iterator&lt;List&lt;Student&gt;&gt; iterator = pager.iterator(); while (iterator.hasNext()) &#123; studentDao.batchUpdate(iterator.next()); &#125; // æ–¹å¼äºŒï¼šä½¿ç”¨ç´¢å¼• //for (int i = 1; i &lt;= pager.getPageCount(); i++) &#123; // studentDao.batchUpdate(pager.page(i)); //&#125;&#125;// åˆ†é¡µè·å–æ•°æ®public List&lt;Student&gt; pageStudents(Integer page, Integer pageSize) &#123; // ä»ç¼“å­˜ä¸­è·å–å…¨é‡æ•°æ® List&lt;Student&gt; students = studentCache.getStudents(); RAMPager&lt;Student&gt; pager = new RAMPager&lt;&gt;(students, pageSize); return pager.page(page);&#125; æ³¨ï¼šå¦‚æœåªæ˜¯åˆ†é¡µï¼Œè€Œä¸éœ€è¦å…³æ³¨é¡µç ï¼Œä½¿ç”¨è¿­ä»£å™¨å³å¯ï¼› å·¥å…·ç±»æºç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107import java.util.ArrayList;import java.util.Arrays;import java.util.Iterator;import java.util.List;/** * ç±»åç§°ï¼šRAMPager * ç±»æè¿°ï¼šå†…å­˜åˆ†é¡µå·¥å…· * åˆ›å»ºäººï¼šWeJan * åˆ›å»ºæ—¶é—´ï¼š2019å¹´07æœˆ22æ—¥ 13:43 * Version: 1.1 */public class RAMPager&lt;T&gt; &#123; private List&lt;T&gt; data; private int pageSize; /** * @param data åŸå§‹æ•°æ® * @param pageSize æ¯é¡µæ¡æ•° */ public RAMPager(List&lt;T&gt; data, int pageSize) &#123; this.data = data; this.pageSize = pageSize; &#125; /** * è·å–æŸé¡µæ•°æ®ï¼Œä»ç¬¬1é¡µå¼€å§‹ * * @param pageNum ç¬¬å‡ é¡µ * @return åˆ†é¡µæ•°æ® */ public List&lt;T&gt; page(int pageNum) &#123; if (pageNum &lt; 1) &#123; pageNum = 1; &#125; int from = (pageNum - 1) * pageSize; int to = Math.min(pageNum * pageSize, data.size()); if (from &gt; to) &#123; from = to; &#125; return data.subList(from, to); &#125; /** * è·å–æ€»é¡µæ•° */ public int getPageCount() &#123; if (pageSize == 0) &#123; return 0; &#125; return data.size() % pageSize == 0 ? (data.size() / pageSize) : (data.size() / pageSize + 1); &#125; /** * å…ƒç´ è¿­ä»£å™¨ */ public Iterator&lt;List&lt;T&gt;&gt; iterator() &#123; return new Itr(); &#125; private class Itr implements Iterator&lt;List&lt;T&gt;&gt; &#123; int page = 1; Itr() &#123; &#125; public boolean hasNext() &#123; return page &lt;= getPageCount(); &#125; public List&lt;T&gt; next() &#123; int i = page; if (i &gt; getPageCount()) return new ArrayList&lt;&gt;(); page = i + 1; return RAMPager.this.page(i); &#125; &#125; public static void main(String[] args) &#123; List&lt;Integer&gt; list = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8); System.out.println(&quot;åŸå§‹æ•°æ®æ˜¯ï¼š&quot; + list); int pageSize = 2; System.out.println(&quot;æ¯é¡µå¤§å°æ˜¯ï¼š&quot; + pageSize); RAMPager&lt;Integer&gt; pager = new RAMPager&lt;&gt;(list, pageSize); System.out.println(&quot;æ€»é¡µæ•°æ˜¯: &quot; + pager.getPageCount()); System.out.println(&quot;&lt;- - - - - - - - - - - - - -&gt;&quot;); // æ— éœ€æ„ŸçŸ¥é¡µç æƒ…å†µä¸‹ä½¿ç”¨ Iterator&lt;List&lt;Integer&gt;&gt; iterator = pager.iterator(); while (iterator.hasNext()) &#123; List&lt;Integer&gt; next = iterator.next(); System.out.println(&quot;next: &quot; + next); &#125; System.out.println(&quot;&lt;- - - - - - - - - - - - - -&gt;&quot;); // éœ€è¦æŒ‡å®šé¡µç æƒ…å†µä½¿ç”¨ï¼Œé¡µç ä»ç¬¬ä¸€é¡µå¼€å§‹ï¼Œä¸”å°äºç­‰äºæ€»é¡µæ•°ï¼ for (int i = 1; i &lt;= pager.getPageCount(); i++) &#123; List&lt;Integer&gt; page = pager.page(i); System.out.println(&quot;ç¬¬ &quot; + i + &quot; é¡µæ•°æ®æ˜¯:&quot; + page); &#125; &#125;&#125; ç»“è¯­å¸Œæœ›å¯¹ä½ æœ‰ç”¨~","tags":[{"name":"javaå†…å­˜åˆ†é¡µå·¥å…·ç±»","slug":"javaå†…å­˜åˆ†é¡µå·¥å…·ç±»","permalink":"http://nullpointer.pw/tags/java%E5%86%85%E5%AD%98%E5%88%86%E9%A1%B5%E5%B7%A5%E5%85%B7%E7%B1%BB/"},{"name":"javaå†…å­˜åˆ†é¡µ","slug":"javaå†…å­˜åˆ†é¡µ","permalink":"http://nullpointer.pw/tags/java%E5%86%85%E5%AD%98%E5%88%86%E9%A1%B5/"}]},{"title":"Mysqlæ—¥æœŸåˆ†ç»„æ— æ•°æ®æŸ¥è¯¢å¡«å……0","date":"2019-05-09T14:30:30.000Z","path":"Mysqlæ—¥æœŸåˆ†ç»„æ— æ•°æ®æŸ¥è¯¢å¡«å……0.html","text":"å‰è¨€è¿™ç¯‡æ–‡ç« æ ‡é¢˜ä¸å¥½å–ã€‚ã€‚ã€‚(ä¸»è¦æ˜¯ç”Ÿæˆè¿ç»­çš„æ—¥æœŸ)ï¼Œæœ¬æ–‡å…³é”®ç‚¹æœ‰ï¼šMysql è·å–æŒ‡å®šæ—¶é—´æ®µå†…çš„æ‰€æœ‰æ—¥æœŸåˆ—è¡¨ï¼ŒMysql æŒ‰ç…§æ—¥æœŸåˆ†ç»„æŸ¥è¯¢æ²¡æœ‰æ•°æ®çš„æ—¥æœŸä¹Ÿä¸€å¹¶æŸ¥è¯¢å‡ºæ¥ã€‚ é—®é¢˜äº§å“æå‡ºä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦å±•ç¤ºè¿™æ ·çš„ä¸€å¼ æŠ˜çº¿å›¾ï¼Œç”¨æ¥åæ˜ æŒ‡å®šæ—¶é—´æ®µå†…ç½‘ç«™æ³¨å†Œç”¨æˆ·çš„å¢åŠ è¶‹åŠ¿ï¼Œäºæ˜¯éœ€è¦åç«¯çš„ JSON å·¥ç¨‹å¸ˆç»™å‡ºå¯¹åº”çš„æ¥å£ã€‚ ç–å¿½å¤§æ„å…·ä½“çš„è¡¨ç»“æ„å’Œæ•°æ®æ˜¯è¿™æ ·çš„ JSON å·¥ç¨‹å¸ˆä¸åŠ æ€ç´¢ï¼Œå±•å¼€äº† CRUD å¤§æ³•ï¼Œé¡ºæ‰‹å†™ä¸‹äº†ä¸€ä¸ª SQLï¼Œä¸åˆ°5åˆ†é’Ÿï¼Œæ¥å£å®Œæ´»ï¼Œæµ‹éƒ½æ²¡æµ‹è¯•ç›´æ¥ç»™åˆ°äº†å‰ç«¯å¼€å‘ã€‚ 1234select date(t.create_time) as `date`, count(t.id) as numfrom t_user tgroup by `date`; å‰ç«¯æ‹¿åˆ°æ•°æ®åå¼€å§‹ç»˜å›¾ï¼Œç»“æœç”»çš„å›¾å®Œå…¨ä¸å¯¹å•Šï¼Œå› ä¸ºæ—¶é—´ä¸æ˜¯è¿ç»­çš„ã€‚äºæ˜¯åé¦ˆåˆ°äº† JSON å·¥ç¨‹å¸ˆè¿™é‡Œã€‚ JSON å·¥ç¨‹å¸ˆä¸€æƒ³ï¼Œå“å“Ÿï¼Œæ²¡è€ƒè™‘æ‰æŸå¤©æ²¡æœ‰æ•°æ®çš„æƒ…å†µï¼Œåˆ†ç»„æŸ¥è¯¢çš„è¯ï¼Œè‚¯å®šç¼ºå°‘è¿™ä¸€å¤©çš„æ•°æ®çš„ã€‚ 123456789+------------+-----+| date | num |+------------+-----+| 2019-05-06 | 2 |+------------+-----+| 2019-05-08 | 2 |+------------+-----+| 2019-05-09 | 9 |+------------+-----+ æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯å³ä½¿æŸå¤©æ²¡æœ‰æ•°æ®ï¼Œä¹Ÿå¡«å……ä¸€ä¸ª 0 ä½œä¸ºè®°å½•å€¼ã€‚ ä¿®æ­£æŸ¥è¯¢æ•°æ®æ‰¾åˆ°äº†é—®é¢˜å°±å¥½åŠäº†ï¼Œæ‹äº†ä¸€ä¸‹é€»è¾‘åˆ†æˆäº†ä¸¤æ­¥ ä¸€ã€æ‹¿åˆ°æ‰€æœ‰æ—¥æœŸ2019å¹´09æœˆ12æ—¥æ›´æ–° æ„Ÿè°¢è¯„è®ºåŒºä¸­ @ä¸€ä¸ªå°å¯çˆ±ï¼ˆæ„Ÿè§‰æ˜¯ä¸ªæœ‰è¶£çš„äººå“ˆå“ˆï¼‰æå‡ºçš„æ–¹æ³•ï¼Œäºæ˜¯æˆ‘å°±æ¥æ›´æ–°ä¸€ä¸‹æœ¬æ–‡äº†ã€‚æœ€å¥½çš„æ–¹å¼æ˜¯åœ¨ Java ä»£ç ä¸­å¤„ç†ç”Ÿæˆè¿ç»­çš„æ—¥æœŸï¼Œç„¶ååˆ›å»ºä¸€ä¸ª map å¯¹è±¡ï¼Œåˆå§‹åŒ–æ‰€æœ‰çš„é”®å€¼å¯¹çš„å€¼ä¸º 0ï¼Œç„¶åéå†æŸ¥è¯¢å‡ºæ¥çš„æŒ‰ç…§æ—¥æœŸä½œä¸º keyï¼Œä¹‹åè¿›è¡Œ put è¦†ç›–é»˜è®¤å€¼å³å¯ã€‚ æä¾›ä¸€ä¸ªç”Ÿæˆè¿ç»­æ—¥æœŸçš„æ–¹æ³• 12345678910111213141516171819public static Set&lt;String&gt; getBetweenDate(String start, String end) &#123; LocalDate startDate = LocalDate.parse(start); LocalDate endDate = LocalDate.parse(end); long between = ChronoUnit.DAYS.between(startDate, endDate); if (between &lt; 1) &#123; return Stream.of(start, end).collect(Collectors.toSet()); &#125; return Stream.iterate(startDate, e -&gt; e.plusDays(1)) .limit(between + 1) .map(LocalDate::toString) .collect(Collectors.toSet());&#125;public static void main(String[] args) &#123; Set&lt;String&gt; days = BaseTest.getBetweenDate(&quot;2019-08-29&quot;, &quot;2019-09-02&quot;); log.info(&quot;&#123;&#125;&quot;, days);&#125; äºŒã€æŒ‰ç…§æ—¥æœŸåˆ†ç»„æŸ¥è¯¢åŸæ¥çš„æ–‡ç« å¯èƒ½ä¼šé€ æˆè¯¯è§£ï¼Œå·²æ›´æ–°æ‰æŒ‰ç…§æ—¥æœŸåˆ†ç»„æŸ¥è¯¢ï¼Œéå†æŸ¥è¯¢ç»“æœï¼Œè¦†ç›–ç¬¬ä¸€æ­¥é‡Œçš„æ—¶é—´mapçš„å€¼å³å¯ã€‚ ç»“æœå¦‚ä¸‹ï¼š 1234567891011121314151617+------------+-----+| date | num |+------------+-----+| 2019-05-03 | 0 |+------------+-----+| 2019-05-04 | 0 |+------------+-----+| 2019-05-05 | 0 |+------------+-----+| 2019-05-06 | 2 |+------------+-----+| 2019-05-07 | 0 |+------------+-----+| 2019-05-08 | 2 |+------------+-----+| 2019-05-09 | 9 |+------------+-----+ é¡ºåˆ©è¾¾åˆ°äº†ç›®çš„ï¼Œæ”¶å·¥ï¼ å‚è€ƒ https://www.cnblogs.com/zhengguangpan/p/10308886.html https://blog.csdn.net/Dai_Aixy/article/details/83144619 https://www.cnblogs.com/dennyzhangdd/p/8073181.html","tags":[{"name":"åˆ†ç»„æŸ¥è¯¢æ— æ•°æ®å¡«å……0","slug":"åˆ†ç»„æŸ¥è¯¢æ— æ•°æ®å¡«å……0","permalink":"http://nullpointer.pw/tags/%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2%E6%97%A0%E6%95%B0%E6%8D%AE%E5%A1%AB%E5%85%850/"},{"name":"è·å–æŒ‡å®šæ—¶é—´æ®µå†…çš„æ—¶é—´æ—¥æœŸåˆ—è¡¨","slug":"è·å–æŒ‡å®šæ—¶é—´æ®µå†…çš„æ—¶é—´æ—¥æœŸåˆ—è¡¨","permalink":"http://nullpointer.pw/tags/%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5%E5%86%85%E7%9A%84%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%88%97%E8%A1%A8/"},{"name":"javaç”Ÿæˆè¿ç»­æ—¥æœŸ","slug":"javaç”Ÿæˆè¿ç»­æ—¥æœŸ","permalink":"http://nullpointer.pw/tags/java%E7%94%9F%E6%88%90%E8%BF%9E%E7%BB%AD%E6%97%A5%E6%9C%9F/"}]},{"title":"WebMagicæºç é˜…è¯»ä¹‹Scheduler","date":"2019-01-28T21:26:25.000Z","path":"WebMagicæºç é˜…è¯»ä¹‹Scheduler.html","text":"æœ¬æ–‡æ˜¯ WebMagic æºç é˜…è¯»ç¬¬ä¸‰ç¯‡ï¼Œç‰ˆæœ¬ä¾ç„¶æ˜¯ version-0.0.1 çš„ tagã€‚ä½œè€…å¯¹äº Scheduler çš„æè¿°æ˜¯å¦‚ä¸‹ï¼š åŒ…å«urlç®¡ç†å’Œè°ƒåº¦çš„æ¥å£ã€‚åŒ…æ‹¬urlæŠ“å–é˜Ÿåˆ—ï¼Œurlå»é‡ç­‰åŠŸèƒ½ã€‚ é˜…è¯»Scheduleræºç Scheduler æ˜¯ä¸€ä¸ªæ¥å£ç±»ï¼Œæºç ä¸­å®ç°æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯ é»˜è®¤ Spider ä½¿ç”¨ QueueScheduler 12// é»˜è®¤ä½¿ç”¨åŸºäºå†…å­˜çš„é˜Ÿåˆ—private Scheduler scheduler = new QueueScheduler(); Scheduler æ¥å£åªæœ‰ä¸¤ä¸ªæ–¹æ³• 12345678910111213/** * åŠ å…¥ä¸€ä¸ªå¾…æŠ“å–çš„é“¾æ¥ * @param request å¾…æŠ“å–çš„é“¾æ¥ * @param task å®šä¹‰çš„ä»»åŠ¡ï¼Œä»¥æ»¡è¶³å•Schedulerå¤šTaskçš„æƒ…å†µ */public void push(Request request,Task task);/** * è¿”å›ä¸‹ä¸€ä¸ªè¦æŠ“å–çš„é“¾æ¥ * @param task å®šä¹‰çš„ä»»åŠ¡ï¼Œä»¥æ»¡è¶³å•Schedulerå¤šTaskçš„æƒ…å†µ * @return ä¸‹ä¸€ä¸ªè¦æŠ“å–çš„é“¾æ¥ */public Request poll(Task task); æ¥ä¸‹æ¥ï¼Œåˆ†æå¸¸ç”¨çš„çš„ä¸¤ä¸ªå®ç°ç±» QueueScheduler å’Œ RedisScheduler QueueScheduler çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—å®ç°è¯·æ±‚çš„ç”Ÿäº§æ¶ˆè´¹å…³ç³»ï¼Œpush å’Œ poll éƒ½æ˜¯åŒæ­¥æ–¹æ³•ï¼ŒåŒæ—¶å› ä¸º LinkedBlockingQueue çš„é•¿åº¦æ˜¯ Integer.MAX_VALUEï¼Œå¦‚æœé˜Ÿåˆ—è¿‡é•¿ï¼Œä¼šå‡ºç° OOM çš„æƒ…å†µã€‚ RedisScheduler æºç ä¸­ä½¿ç”¨ Redis çš„ list ç»“æ„åš URL é˜Ÿåˆ—ï¼Œé€šè¿‡ rpush æ–¹æ³•ï¼Œå°†æ–°çš„ URL æ”¾å…¥é˜Ÿåˆ—å³è¾¹ï¼Œé€šè¿‡ lpop ä»é˜Ÿåˆ—å·¦ä¾§å¼¹å‡ºä¸€ä¸ªå¾…æŠ“å–çš„ URL ã€‚ ä½¿ç”¨äº† Redis çš„æœ‰åºé›†åˆè¿›è¡Œ URL å»é‡ï¼ŒåŸç†æ˜¯ï¼šå¦‚æœ url æ˜¯æœ‰åºé›†å’Œçš„æˆå‘˜ï¼Œè¿”å› url çš„æ’åã€‚ å¦‚æœ url ä¸æ˜¯æœ‰åºé›†å’Œçš„æˆå‘˜ï¼Œè¿”å› nullã€‚zrank æ–¹æ³•å‚æ•°å¦‚ä¸‹ï¼šzrank(æœ‰åºé›†åˆçš„key, æˆå‘˜åç§°) å½“æˆåŠŸæ·»åŠ  URL åˆ°é˜Ÿåˆ—ï¼Œè°ƒç”¨ zadd æ–¹æ³•å°† URL æ”¾å…¥æœ‰åºé›†åˆå½“ä¸­ï¼Œä¾¿äºåç»­ URL åˆ¤é‡ã€‚ æ€»ç»“åŠŸåŠ›ä¸è¶³ï¼Œå°šä¸”çœ‹ä¸å‡ºè¿™éƒ¨åˆ†æºç çš„ä¸è¶³ä¹‹å¤„ï¼Œåªçœ‹åˆ° RedisScheduler ä¸­ jedis é‡Šæ”¾èµ„æºçš„æ“ä½œæœªæ”¾åˆ° final ä¸­ï¼Œæœ‰æ‰€éšæ‚£ã€‚ è”ç³»ç‹¬è¡Œçš„è·¯æ€»æ˜¯å­¤ç‹¬çš„ï¼Œå¸Œæœ›èƒ½æ‰¾åˆ°ä¸€äº›å°ä¼™ä¼´å…±åŒè¿›æ­¥~ QQ ç¾¤å·:967808880","tags":[{"name":"æºç è§£æ","slug":"æºç è§£æ","permalink":"http://nullpointer.pw/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"}]},{"title":"WebMagicæºç é˜…è¯»ä¹‹Spider","date":"2019-01-15T13:28:37.000Z","path":"WebMagicæºç é˜…è¯»ä¹‹Spider.html","text":"æ€»æ˜¯è§‰å¾—è‡ªå·±å¹³æ—¶æ€»æ˜¯åœ¨å†™é€»è¾‘ä»£ç ï¼Œäºæ˜¯å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Œä½†æ˜¯åˆè§‰å¾—æ— å¤„å¯æ–½å±•ï¼Œå¯¹äºå¦‚ä½•æé«˜è‡ªå·±çš„ç¼–ç èƒ½åŠ›æ€»æ˜¯å›°æƒ‘ï¼Œä¹Ÿæ›¾çœ‹äº†ä¸€äº›æºç ï¼Œä½†æ€»å› ä¸ºéš¾åº¦å¤ªå¤§è€Œä¸äº†äº†ä¹‹ã€‚å› ä¸ºå¤§å¤šæ•°çš„å¼€æºæ¡†æ¶æºç éšç€ç‰ˆæœ¬çš„æ›´è¿­ï¼Œéš¾åº¦è¶Šå‘ä¸Šå‡æºç æ„ˆå‘æ™¦æ¶©éš¾æ‡‚ï¼Œä½†æºç è¿˜æ˜¯ä¸èƒ½ä¸è¯»ï¼Œæ‰€ä»¥è§‰å¾—ä»æœ€ç®€å•çš„æºç å¼€å§‹è¯»èµ·å§ï¼Œå› ä¸ºå·¥ä½œä¸­ï¼Œç”¨åˆ°äº† WebMagic æ¡†æ¶ï¼Œäºæ˜¯å†³å®šä»å®ƒå¼€å§‹ï¼Œä¸ºäº†é™ä½é˜…è¯»éš¾åº¦ï¼Œæˆ‘é€‰æ‹©äº†ç¬¬ä¸€ä¸ª tag ç‰ˆæœ¬çš„æºç å¼€å§‹é˜…è¯»ï¼Œä»æ˜“å…¥éš¾ï¼Œç”±æµ…å…¥æ·±ï¼Œå¸Œæœ›è‡ªå·± 2019 å¹´ä»£ç èƒ½åŠ›èƒ½æœ‰æ‰€æå‡! ä¸‹è½½æºç é¦–å…ˆåœ¨ IDEA ä¸ŠæŠŠ WebMagic çš„æºç  clone åˆ°æœ¬åœ° ç„¶å checkout ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„ tag åœ¨å¯¹è¯æ¡†ä¸­ï¼Œä½¿ç”¨æ™ºèƒ½æç¤ºå¿«æ·é”®å±•ç¤ºå‡ºæ‰€æœ‰çš„ tagï¼Œé»˜è®¤å¿«æ·é”®æ˜¯ ctrl(command) + ç©ºæ ¼ï¼Œå› ä¸ºå¯èƒ½ä¼šå’Œè¾“å…¥æ³•å†²çªï¼Œæˆ‘ä¿®æ”¹æˆäº† command + ; æˆ‘é€‰æ‹©äº† version-0.1.0 ç‰ˆæœ¬ï¼Œç„¶ååŸºäºè¿™ä¸ª tagï¼Œåˆ›å»ºäº†è‡ªå·±çš„æœ¬åœ°åˆ†æ”¯ï¼Œä¾¿äºåœ¨ä¸Šé¢è¿›è¡Œæ·»åŠ æ³¨é‡Šç­‰æ“ä½œã€‚ é˜…è¯» Spider æºç å‚è§å®˜ç½‘æ¶æ„å›¾ï¼ŒSpider è¿™ä¸ªç»„ä»¶æ˜¯ WebMagic æ¡†æ¶çš„æ ¸å¿ƒæ‰€åœ¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯çˆ¬è™«çš„å…¥å£ç±»ï¼ŒSpider å°†å„å¤§ç»„ä»¶ä¸²è”èµ·æ¥ï¼Œå…±åŒå·¥ä½œã€‚ Spider å®ç°äº† Task å’Œ Runnable æ¥å£ï¼ŒTask æä¾›äº†ä¸¤ä¸ªæ¥å£æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ getSite()ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ getUUID()ï¼Œçˆ¬è™«è¿è¡Œæ—¶ï¼Œå°†çˆ¬è™«è‡ªèº«å¼•ç”¨ä¼ é€’åˆ°å„ä¸ªç»„ä»¶è¿›è¡Œå¤„ç†ã€‚ ä¸€èˆ¬ä½¿ç”¨ WebMagic æ—¶ï¼Œé€šè¿‡ Spider.create() æ–¹æ³•åˆ›å»ºçˆ¬è™«ï¼Œåˆ›å»ºæ—¶å¯ä»¥æŒ‡å®š Downloaderã€Schedulerã€PageProcessorã€Pipeline è¿™å‡ ä¸ªç»„ä»¶ï¼Œä½œè€…å°†è¿™å››ä¸ªç»„ä»¶æŠ½è±¡æˆäº†æ¥å£ï¼Œæ–¹ä¾¿æ‰©å±•ï¼Œå…¶ä¸­ PageProcessor æ˜¯å¿…é¡»æŒ‡å®šçš„ç»„ä»¶ï¼Œå…¶ä»–çš„ç»„ä»¶ WebMagic æä¾›äº†å¯¹åº”çš„é»˜è®¤å€¼ã€‚ Spider ç±»ä¸»è¦æ ¸å¿ƒæ˜¯ run æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475@Overridepublic void run() &#123; // é€šè¿‡ AtomicInteger çš„ CAS ä¹è§‚é”ä¿è¯å¤šçº¿ç¨‹ä¸‹ï¼Œçˆ¬è™«åªä¼šå¯åŠ¨ä¸€æ¬¡ // å¦‚æœçˆ¬è™«çŠ¶æ€å½“å‰çŠ¶æ€æ˜¯ STAT_INITï¼Œåˆ™æ›´æ–°æˆ STAT_RUNNINGï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ if (!stat.compareAndSet(STAT_INIT, STAT_RUNNING)) &#123; throw new IllegalStateException(&quot;Spider is already running!&quot;); &#125; // æ·»åŠ å¯åŠ¨ URL if (startUrls != null) &#123; for (String startUrl : startUrls) &#123; scheduler.push(new Request(startUrl), this); &#125; &#125; // ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªè¯·æ±‚ Request request = scheduler.poll(this); // æ·»åŠ ç®¡é“å¤„ç†ï¼Œå¦‚æœä¸ºç©ºæ·»åŠ ï¼Œè¾“å‡ºåˆ°æ§åˆ¶å° if (pipelines.isEmpty()) &#123; pipelines.add(new ConsolePipeline()); &#125; //single thread if (executorService==null)&#123; // é»˜è®¤å•çº¿ç¨‹ // å¾ªç¯è°ƒåº¦æ‰€æœ‰çš„ Request while (request != null) &#123; processRequest(request); request = scheduler.poll(this); &#125; &#125; else &#123; // å¦‚æœå·²ç»è°ƒç”¨ Spider.thread(n) æ–¹æ³•åˆ™èµ°è¿™ä¸ªåˆ†æ”¯ //multi thread // åˆå§‹åŒ–æ´»è·ƒçº¿ç¨‹æ•°é‡ä¸º 0ï¼Œå½“çˆ¬è™«çº¿ç¨‹å¯åŠ¨åï¼Œå¦‚æœæ´»è·ƒçº¿ç¨‹å˜æˆ 0 æ—¶ï¼Œè·³å‡ºæ­»å¾ªç¯ final AtomicInteger threadAlive = new AtomicInteger(0); while (true) &#123; if (request == null) &#123; //when no request found but some thread is alive, sleep a while. try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; &#125; &#125; else &#123; final Request requestFinal = request; // æ‰§è¡Œçº¿ç¨‹ä¹‹å‰å¯¹æ´»è·ƒçº¿ç¨‹æ•°è¿›è¡ŒåŸå­æ€§è‡ªå¢æ“ä½œ threadAlive.incrementAndGet(); executorService.execute(new Runnable() &#123; @Override public void run() &#123; processRequest(requestFinal); // å¤„ç†å®Œè¯·æ±‚ä¹‹åå¯¹æ´»è·ƒçº¿ç¨‹æ•°è¿›è¡ŒåŸå­æ€§è‡ªå‡æ“ä½œ threadAlive.decrementAndGet(); &#125; &#125;); &#125; // å¾ªç¯ä»é˜Ÿåˆ—ä¸­å–æ–°çš„å¾…æŠ“å– URL request = scheduler.poll(this); // å½“æ´»è·ƒçº¿ç¨‹æ•°ä¸º 0ï¼Œè¯´æ˜é˜Ÿåˆ—å·²ç»ä¸ºç©ºäº† if (threadAlive.get() == 0) &#123; // ä¸ºäº†ä¿é™©èµ·è§ï¼Œå†é‡è¯•è·å–ä¸€ä¸‹è¯·æ±‚ request = scheduler.poll(this); // å¦‚æœä¾ç„¶ä¸º nullï¼Œåˆ™è·³å‡º while å¾ªç¯ if (request == null) &#123; break; &#125; &#125; &#125; // å…³é—­çº¿ç¨‹æ±  executorService.shutdown(); &#125; // å½“æ‰€æœ‰è¯·æ±‚æŠ“å–å®Œæ¯•ï¼Œå³æ´»è·ƒçº¿ç¨‹æ•°é‡å˜æˆ 0 æ—¶ï¼Œä¿®æ”¹çˆ¬è™«çŠ¶æ€ä¸ºå·²åœæ­¢ stat.compareAndSet(STAT_RUNNING, STAT_STOPPED);&#125; æ€»ç»“ä»æºç ä¸­çœ‹åˆ°ï¼Œå¯¹äºå¤šçº¿ç¨‹å…±äº«èµ„æºæ´»è·ƒçº¿ç¨‹æ•°çš„å¤„ç†ï¼Œä½¿ç”¨åˆ°äº† Integer çš„åŸå­ç±» AtomicIntegerï¼Œä¿è¯æ´»è·ƒçº¿ç¨‹æ•°é‡åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ç»Ÿè®¡ç»“æœçš„æ­£ç¡®æ€§ã€‚ ä½œè€…å°†å››å¤§ç»„ä»¶æŠ½è±¡æˆäº†æ¥å£ï¼Œé¢å‘æ¥å£ç¼–ç¨‹ï¼Œæ–¹ä¾¿æ‰©å±•ï¼Œå¾ˆå€¼å¾—å­¦ä¹ ã€‚ å› ä¸ºæ˜¯åˆå§‹ç‰ˆæœ¬ï¼Œä¸å¯é¿å…çš„ä¼šæœ‰ä¸€äº›æ˜æ˜¾çš„ Bug å­˜åœ¨ï¼Œæ¯”å¦‚åœ¨ page ç±»çš„ addTargetRequests æ–¹æ³•ä¸­åº”è¯¥ç”¨ continueï¼Œä½†æ˜¯é”™ç”¨äº† breakçš„æƒ…å†µï¼Œæ‰€ä»¥åˆå§‹ç‰ˆæœ¬æºç é˜…è¯»å®Œæˆåï¼Œéœ€è¦è¯»è¯»æ–°ä¸€äº›ç‰ˆæœ¬çš„æºç ã€‚ è”ç³»ç‹¬è¡Œçš„è·¯æ€»æ˜¯å­¤ç‹¬çš„ï¼Œå¸Œæœ›èƒ½æ‰¾åˆ°ä¸€äº›å°ä¼™ä¼´å…±åŒè¿›æ­¥å“ˆå“ˆ~ QQ ç¾¤å·:967808880","tags":[{"name":"æºç è§£æ","slug":"æºç è§£æ","permalink":"http://nullpointer.pw/tags/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"}]},{"title":"2018å¹´ç»ˆæ€»ç»“","date":"2018-12-31T02:00:25.000Z","path":"2018å¹´ç»ˆæ€»ç»“.html","text":"ä¸å»å¹´ä¸€æ ·ï¼Œå·²ç„¶ 2018 å¹´å°¾ï¼Œå…¨å›½å¤šæ•°åŸå¸‚å‡ ä¹éƒ½å¤§å¤§å°å°åœ°è½è¿‡å‡ åœºé›ªï¼›åŒ—äº¬ï¼Œå´æ— åŠç‚¹ä¸‹é›ªçš„å¾å…†ï¼Œåˆé›ªåº”è¯¥ä¹Ÿè¦æ‹–å»¶åˆ°æ˜å¹´å¼€æ˜¥ä¹‹åäº†å§ï¼ä¸å»å¹´ä¸€æ ·ï¼Œç«‹ä¸‹çš„ç›®æ ‡é™¤äº†ç»§ç»­åšæŒå†™åšå®¢ä¹‹å¤–ï¼Œå…¶ä»–å…¨éƒ¨è¢«æŠ›è¯¸è„‘åï¼›å¦‚æœä¸æ˜¯æŠŠå†™åšå®¢è¿™ä¸ªç›®æ ‡è¿›è¡Œäº†é‡åŒ–ï¼Œå¼ºè¿«ç€è‡ªå·±å»æ‰§è¡Œï¼Œæ€•æ˜¯æ‰€æœ‰çš„ç›®æ ‡éƒ½åªæ˜¯æœ‰å§‹æ— ç»ˆç½¢äº†ï¼ ä½“éªŒÂ·çªç ´ä» 2017 å¹´å§‹ï¼Œä¸€ç›´ä»¥æ¥ï¼Œè®°å½•æ¯å¤©æ—¶é—´æ”¯å‡ºçš„ä¹ æƒ¯éƒ½åœ¨ä¿æŒç€ï¼Œä½†æ˜¯ç›®å‰å¯¹äºè‡ªå·±çš„ä½œç”¨å¹¶ä¸å¤§ï¼›ä¹Ÿä»…ä»…æ˜¯å¹´åº•è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦å†™å¹´ç»ˆæ€»ç»“çš„æ—¶å€™ï¼Œçœ‹ä¸€çœ¼å…¨å¹´æ—¶é—´ç»Ÿè®¡çš„åˆ†å¸ƒæƒ…å†µï¼Œè®©è‡ªå·±åæ‚”æœªèƒ½çæƒœå…‰é˜´è€Œå·²ã€‚å€ŸåŠ©äº APP è®°å½•æ—¶é—´çš„ä¾¿åˆ©æ€§ï¼Œè™½ç„¶ä¸€å¤©çš„æ—¶é—´èƒ½åœ¨ 5 åˆ†é’Ÿå†…å…¨éƒ¨è®°å½•å®Œæ¯•ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¹Ÿä¼šæƒ³ï¼Œè®°è¿™ä¸ªå¯¹è‡ªå·±åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ ä¹Ÿè®¸é‡å˜æˆ–è®¸èƒ½äº§ç”Ÿè´¨å˜å§ï¼æŸ³æ¯”æ­‡å¤«å‡ åå¹´å¦‚ä¸€æ—¥çš„è®°å½•ï¼Œä¸–äººä¹Ÿä¸æ˜¯æ²¡æœ‰å¼„æ¸…ä»–è®°å½•æ—¶é—´åˆ°åº•æœ‰ä»€ä¹ˆç”¨å—ï¼Ÿå…¶ä¸­çš„å¦™å¤„å¯èƒ½ä¹Ÿåªæœ‰æŸ³æ¯”æ­‡å¤«è‡ªå·±çŸ¥é“å§ï¼ çŸ¥é“è‡ªå·±ç”Ÿå‘½æµé€çš„æ‰€æœ‰æ—¶é—´ï¼Œèƒ½è®©è‡ªå·±å˜å¾—æ›´åŠ è‡ªå¾‹ï¼Œå…¶å®è¿™æ ·å°±è¶³å¤Ÿäº†ï¼ å¹´ä¸­ï¼Œå’Œå¥³æœ‹å‹ä¸€èµ·å»çœ‹äº†ä¸€æ¬¡æˆ¿å­ï¼Œå½“æ—¶å°±å†³å®šåœ¨é‚£é‡Œä¹°ï¼Œåšä»€ä¹ˆå†³å®šéƒ½å¾ˆå¿«ï¼Œä¹°æˆ¿è¿™ä»¶äº‹ä¹Ÿä¸ä¾‹å¤–ã€‚ä¹°ä¹‹å‰è§‰å¾—è‡ªå·±æ˜¯åˆšéœ€ï¼Œä¹°äº†ä¹‹åï¼Œå…¶å®ä¹°ä¸ä¹°ä¹Ÿå¹¶éé‚£ä¹ˆé‡è¦ã€‚ä½†æ˜¯ç»“å©šçš„è¯ï¼Œæˆ¿å­è¿˜æ˜¯è¦æœ‰çš„ï¼Œå°±è¿™æ ·ä¸Šè½¦äº†ï¼Œ2 å¹´åæ‰èƒ½äº¤æˆ¿ï¼Œç›®å‰çš„ä½“éªŒå°±æ˜¯å¦‚æœä¸æ˜¯æ¯ä¸ªæœˆé“¶è¡Œè¦ä»å¡é‡Œæ‰£é™¤æˆ¿è´·ï¼Œæˆ‘éƒ½å¿«å¿˜äº†è‡ªå·±ä¹Ÿç®—æ˜¯ä¹°è¿‡æˆ¿çš„äººäº†ğŸ˜‚ã€‚ å®¶åº­Â·ç”Ÿæ´»å’Œæœ‹å‹å‡ºå»åƒé¥­çš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šæ„Ÿå¹æˆ‘ä»¬æ´»çš„æœ‰ç‚¹åƒè¡Œå°¸èµ°è‚‰ï¼Œé™¤äº†ä¸Šç­ï¼Œå›å®¶ï¼Œå‡ ä¹æ²¡æœ‰å…¶ä»–çš„äº‹æƒ…å»åšï¼Œä¸åƒé‚£äº›åœ¨å¹¿åœºè·³è¡—èˆï¼Œç©æ»‘æ¿ï¼Œç©æ‘„å½±çš„äººæ´»çš„æœ‰è¶£ï¼Œæ€»æ˜¯ä¼šæ„Ÿå¹è¿™æ‰æ˜¯ç”Ÿæ´»ï¼ å»å¹´ä¹Ÿæ€»æ˜¯è¢«å¥³æœ‹å‹æ‹‰ç€å»åŒ—äº¬çš„å„å¤§æ™¯ç‚¹å…¬å›­ç©ï¼Œä½†ä¹Ÿåªæ˜¯èµ°é©¬è§‚èŠ±åœ°æ¸¸è§ˆï¼Œä»Šå¹´ç´¢æ€§å°±æ²¡æœ‰å†å»è¿‡é‚£äº›åœ°æ–¹äº†ï¼Œäººå¯¹äºæ‰¾ä¸åˆ°ä¹è¶£çš„äº‹æƒ…ä¸€ç›´æ˜¯æŠ—æ‹’çš„ã€‚äºæ˜¯å›½åº†è·‘åˆ°ä¸Šæµ·ç©äº†å‡ æ—¥ï¼Œé™¤äº†è¿ªå£«å°¼ï¼Œä¹Ÿå¹¶æœªè§‰å¾—ä¸Šæµ·æ›´æœ‰è¶£ã€‚ ä¹Ÿè¯¥å»æ‰¾åˆ°å¹¶ä¸”å»åšä¸€ä»¶æœ‰æ„ä¹‰æœ‰æ„æ€çš„äº‹æƒ…äº†ã€‚ å¥åº·Â·èº«ä½“æƒ³èµ·ä»Šå¹´å°è±¡æœ€æ·±çš„ä¸€ä»¶äº‹ï¼Œå¦‚ä½•çœ‹å¾…å¹´ä»… 25 å²çš„å¤§ç–† DJI å‘˜å·¥æˆ–å› è¿‡åŠ³è€ŒçŒæ­»å®¶ä¸­ï¼Ÿï¼Œä»…ä»… 25 å²è€Œå·²ï¼è¿™ç§æƒ…å†µå‘ç”Ÿåœ¨äº†åŒé¾„äººçš„èº«ä¸Šï¼ŒçœŸçš„æ˜¯å¤ªå¯æ€•äº†ï¼è¿™ä»¶äº‹æƒ…ä¹Ÿç»™è‡ªå·±æ•²å“äº†è­¦é’Ÿï¼Œä¿æŠ¤å¥½è‡ªå·±çš„èº«ä½“å¾ˆé‡è¦ã€‚ ä¿è¯å¥åº·çš„ä½œæ¯ï¼Œè§„å¾‹çš„é¥®é£Ÿï¼Œåˆç†çš„è¿åŠ¨ï¼Œå¾ˆæœ‰å¿…è¦ã€‚ è™½ç„¶ä¸åŠ ç­ï¼Œä½†æ˜¯æˆ‘ååœ¨ç”µè„‘å‰æ—¶é—´å¹¶ä¸æ¯”åŠ ç­çš„äººå°‘ï¼Œå¥åº·çš„ä½œæ¯ï¼Œè§„å¾‹çš„é¥®é£Ÿï¼Œè¿™ä¸¤ç‚¹éƒ½æœ‰åšåˆ°ï¼Œæ—©ç¡æ—©èµ·ï¼Œä¸€æ—¥ä¸‰é¤ï¼Œåªæ˜¯ç¼ºä¹ä¸€äº›è¿åŠ¨ã€‚ å­¦ä¹ Â·æˆé•¿ä¸€ç›´æ‰¾ä¸åˆ°å­¦ä¹ ä¸ç”Ÿæ´»ä¹‹é—´çš„å¹³è¡¡ç‚¹ï¼Œå­¦ä¹ çš„æ—¶å€™ï¼ŒæŠµæŠ—å­¦ä¹ ä¹‹å¤–çš„ä»»ä½•äº‹æƒ…ï¼›ä¸å­¦ä¹ çš„æ—¶å€™ï¼Œæ€€æœ‰æ·±æ·±çš„è´Ÿç½ªæ„Ÿï¼Œä½†æ˜¯å­¦ä¹ æ•ˆç‡æ€»æ²¡æœ‰æœŸæœ›çš„é‚£æ ·é«˜ã€‚ åˆç†å®‰æ’å¥½å­¦ä¹ ä¸ä¼‘é—²çš„å…³ç³»ï¼Œåˆæ˜¯ä¸€é¡¹éœ€è¦è‡ªæˆ‘å­¦ä¹ æå‡ä¹‹å¤„ã€‚ è‡ªç„¶ç åŒæ‹¼æ‰“å­—æ³•ï¼Œæ˜¯çœ‹åˆ°çŸ¥ä¹ä¸Šä¸€åå¤§ V æ¨èå­¦ä¹ çš„æŠ€èƒ½ï¼ŒèŠ±äº†ä¸åˆ° 3 ä¸ªå°æ—¶å°±èƒ½åŸºæœ¬æŒæ¡ã€‚æ¯”å¦‚è¦æ‰“å‡ºâ€œä¸­å›½â€è¿™ä¸¤ä¸ªå­—ï¼Œå¦‚æœä½¿ç”¨å…¨æ‹¼çš„è¯ï¼Œéœ€è¦è¾“å…¥ zhonggoï¼Œ è‡³å°‘éœ€è¦æ•² 8 ä¸‹é”®ç›˜ï¼Œè€Œç”¨åŒæ‹¼ï¼Œåªéœ€è¦è¾“å…¥ vsgoï¼ŒåŠ ä¸Šç©ºæ ¼é€‰æ‹©åªéœ€è¦ 5 ä¸‹ã€‚åŒæ‹¼ä¹Ÿæ²¡æœ‰äº”ç¬”æ‰“å­—é‚£æ ·éš¾ä»¥å­¦ä¹ ï¼Œå¯¹è‡ªå·±çš„å¥½å¤„è¿˜æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå°‘æ•²å‡»é”®ç›˜ä¹Ÿæ˜¯ä¿æŠ¤äº†è‡ªå·±çš„æ‰‹æŒ‡å¤´ã€‚ ä¹‹å‰ä¸€ç›´çº ç»“çœ‹ä¹¦çš„æ•°é‡ï¼Œå›«å›µåæ£åœ°çœ‹äº†ä¸€äº›ä¹¦ï¼Œçœ‹å®Œçš„æ—¶å€™å‡ ä¹å·²ç»å¿˜äº†è¿™æœ¬ä¹¦åˆ°åº•è®²äº†äº›ä»€ä¹ˆï¼Œä¹°çš„ kindle ç°åœ¨å·²ç»æ”¾åœ¨è§’è½é»˜é»˜åƒç°ä¸­â€¦â€¦ ä»Šå¹´æ²¡æœ‰ç”¨ kindle çœ‹ä¹¦ï¼Œè€Œæ˜¯ä¹°äº†ä¸€äº›ç»å…¸çš„æŠ€æœ¯å®ä½“ä¹¦æ¥çœ‹ï¼Œçœ‹ä¹¦çš„æ•ˆæœä¹Ÿæ¯”ç”¨ kindle çœ‹çš„æ•ˆæœè¦å¥½ï¼Œkindle è¿˜æ˜¯æ›´é€‚åˆçœ‹å°è¯´é¸¡æ±¤åŠ±å¿—ä¹¦è¿™ç±»ä¹¦å§ï¼ å·¥ä½œÂ·äº‹ä¸šæœ€è¿‘è¿™ä¸¤å¹´ï¼Œé€æ¸è§‰å¾—è‡ªå·±çš„æŠ€æœ¯æå‡é€Ÿåº¦å˜å¾—ç›¸å½“æ…¢äº†ï¼Œä»Šå¹´ä¸€å¹´ï¼Œåœ¨è„‘æµ·é‡Œèƒ½é©¬ä¸Šæƒ³èµ·æ¥çš„å°±æ˜¯å­¦ä¹ äº† ESï¼Œæ­äº†ä¸ªå…¬å¸å…¬ç”¨æœç´¢å·¥ç¨‹æä¾›ç½‘ç«™çš„æœç´¢ï¼Œå…¶ä»–çš„å‡ ä¹å°±æƒ³ä¸èµ·æ¥äº†ï¼›å­¦ä¹ äº† Spring Cloud ç›¸å…³æŠ€æœ¯ï¼Œä½†æ˜¯æ²¡æœ‰çœŸæ­£åœ°å»å®è·µåº”ç”¨è¿‡ï¼Œéƒ½å¿«é—å¿˜äº†ğŸ˜‚ï¼Œå¸Œæœ›èƒ½æœ‰æœºä¼šå®è·µå§ï¼›æœ€è¿‘åšæ—§å•ä½“é¡¹ç›®çš„é‡æ„ä¸ºåˆ†å¸ƒå¼åº”ç”¨çš„å·¥ä½œï¼Œè€ƒè™‘åˆ°éœ€è¦å¹³è¡¡è¿ç§»ä¸å›¢é˜ŸæŠ€æœ¯ï¼Œä¿å®ˆåœ°ä½¿ç”¨äº† Dubbo æ¥å®ç°ï¼Œåšä¹‹å‰è§‰å¾—å¾ˆç®€å•å•Šï¼Œå°±æ˜¯æŠŠä¹‹å‰ä»£ç è¿ç§»è¿‡æ¥ï¼Œæ”¹æ”¹å°±è¡Œäº†ï¼Œåšçš„æ—¶å€™æ‰å‘ç°ï¼Œå¦‚æœè¦æŒ‰ç…§æˆ‘æœŸæœ›ä¸­çš„é¡¹ç›®è§„èŒƒ/ä»£ç è´¨é‡å»åšï¼Œå‡ ä¹å°±åˆæ˜¯é‡å†™äº†ä¸€åŠä»£ç ï¼Œåˆç»™è‡ªå·±åŸ‹äº†ä¸ªå‘ã€‚ç›®å‰ä¹Ÿåªæœ‰è‡ªå·±åœ¨åšï¼Œå¸Œæœ›æ¥å¹´èƒ½æœ‰ä¸€ä¸ªå¹¶è‚©æˆ˜æ–—çš„ä¼™ä¼´ï¼Œæ¯•ç«Ÿåªæœ‰è‡ªå·±åœ¨æ‘¸ç´¢ç€è¡Œè¿›ï¼Œè¿˜æ˜¯å¾ˆæ…¢çš„ã€‚ 2019è¦åšçš„äº‹æƒ…é‡åŒ–è‡ªå·±çš„ç›®æ ‡ï¼Œå¤„ç†å¥½ç”Ÿæ´»ä¸å­¦ä¹ çš„å¹³è¡¡å…³ç³»ã€‚","tags":[{"name":"å¹´ç»ˆæ€»ç»“","slug":"å¹´ç»ˆæ€»ç»“","permalink":"http://nullpointer.pw/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"}]},{"title":"dubboè‡ªå®šä¹‰å¼‚å¸¸ä¼ é€’ä¿¡æ¯ä¸¢å¤±é—®é¢˜è§£å†³","date":"2018-12-10T22:39:07.000Z","path":"dubboè‡ªå®šä¹‰å¼‚å¸¸ä¼ é€’ä¿¡æ¯ä¸¢å¤±é—®é¢˜è§£å†³.html","text":"ç›®å‰è®¡åˆ’å¯¹å·²æœ‰çš„å•ä½“é¡¹ç›®è¿›è¡Œç»„ç»‡æ¶æ„æ‹†åˆ†ï¼Œè°ƒç ”äº†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¸¸ç”¨ä¸­é—´ä»¶ Dubbo å’Œ Spring Cloudï¼Œé€‰æ‹©äº† Dubboï¼Œå¯ä»¥å¯¹å½“å‰ç°æœ‰é¡¹ç›®è¿›è¡Œå¹³æ»‘å‡çº§æ”¹é€ ã€‚ä½†æ˜¯ä¸€å¼€å§‹å°±é‡åˆ°äº†éº»çƒ¦ï¼Œè‡ªå®šä¹‰å¼‚å¸¸åœ¨ä¼ é€’çš„è¿‡ç¨‹ä¸­å˜æˆäº† RuntimeExceptionï¼Œç»Ÿä¸€å¼‚å¸¸å¤„ç† GlobalExceptionHandler æ— æ³•è·å–å¼‚å¸¸ä¿¡æ¯ã€‚ é—®é¢˜é‡ç°é¡¹ç›®è¿›è¡Œç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ŒæŠ½å–äº†ä¸€ä¸ªé€šç”¨å¼‚å¸¸ ServiceExceptionï¼Œæ­¤å¼‚å¸¸æ˜¯éå—æ£€å¼‚å¸¸ï¼Œå³ç»§æ‰¿äº RuntimeExceptionã€‚è°ƒç ”æ—¶å‘ç°å¦‚æœæœåŠ¡æä¾›æ–¹å³ provider æŠ›å‡ºäº† ServiceException å¼‚å¸¸ï¼Œconsumer æœåŠ¡æ¶ˆè´¹æ–¹å°±ä¼šæ”¶åˆ°ä¸€ä¸ª RuntimeException å¼‚å¸¸ï¼Œè€Œ ServiceException å¼‚å¸¸çš„å†…å®¹è¢«åŒ…å«åœ¨äº† RuntimeException çš„å¼‚å¸¸å †æ ˆä¸­ 1234[Request processing failed; nested exception is java.lang.RuntimeException: io.github.mosiki.common.exception.ServiceException: missing_required_parametersio.github.mosiki.common.exception.ServiceException: missing_required_parameters at io.github.mosiki.provider.HelloService.sayHello(HelloService.java:20) at com.alibaba.dubbo.common.bytecode.Wrapper1.invokeMethod(Wrapper1.java) è€Œæˆ‘çš„ç»Ÿä¸€å¼‚å¸¸å¤„ç†æ˜¯è¿™æ ·çš„ï¼Œåªå¤„ç† ServiceException ä»¥åŠ Exceptionï¼Œå› æ­¤å°±æ— æ³•è·å–åˆ°åŸå§‹å¼‚å¸¸çš„ä¿¡æ¯äº†ã€‚ 123456789101112131415@Slf4j@RestControllerAdvicepublic class GlobalExceptionHandler &#123; @ExceptionHandler(ServiceException.class) public Result handlerServiceException(ServiceException ex) &#123; return Result.failure(ex.getCode(), ex.getMessage()); &#125; @ExceptionHandler(&#123;Exception.class&#125;) public Result handlerException(Exception ex) &#123; log.error(&quot;å‘ç”ŸæœªçŸ¥å¼‚å¸¸ï¼š&#123;&#125;&quot;, ex); return Result.failure(HttpStatus.INTERNAL_SERVER_ERROR.value(), &quot;æœåŠ¡å™¨æ‰“äº†ä¸ªå°ç›¹å„¿~è¯·ç¨å€™å†è¯•&quot;); &#125;&#125; è®¿é—®æ¥å£å°†è¿”å›å¦‚ä¸‹ï¼Œå¼‚å¸¸ä¸­åŸæœ‰ä¿¡æ¯ä¸¢å¤±ã€‚ ä¸Šç½‘æœç´¢å‘ç°ï¼Œè¿™æ˜¯å› ä¸º dubbo çš„å¼‚å¸¸å¤„ç†ç±» com.alibaba.dubbo.rpc.filter.ExceptionFilter è¿›è¡Œå¤„ç†åçš„ç»“æœï¼ŒDebug ä¹‹åç¡®å®å¦‚æ­¤ï¼Œdubbo åœ¨æ­¤è¿›è¡Œäº†è½¬æ¢ã€‚ é—®é¢˜è§£å†³ä¹‹é“ç°åœ¨æˆ‘æƒ³è¦ provider æŠŠè‡ªå®šä¹‰çš„å¼‚å¸¸åŸå°ä¸åŠ¨çš„æŠ›ç»™ consumer è¿›è¡Œå¤„ç†ï¼Œäºæ˜¯æœ‰äº†å¦‚ä¸‹æ€è·¯ï¼š ç¦ç”¨ provider çš„ ExceptionFilter è®© GlobalExceptionHandler å¤„ç† consumer çš„å¼‚å¸¸ æŒ‰ç…§æ­¤æ€è·¯åšå°±å¾ˆç®€å•äº†ï¼Œç½‘ä¸Šå¤§å¤šæ–‡ç« çš„åŠæ³•éƒ½æ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰ç”¨ AOP å¤„ç†çš„ï¼Œç”šè‡³è¿˜æœ‰è®©è‡ªå·±ä¿®æ”¹ç¼–è¯‘æºç ä¸Šä¼ ç§æœçš„-_-||ï¼Œæœ¬æ–‡ç»™å‡ºæ¯”è¾ƒç®€ä¾¿çš„æ–¹æ³•ï¼Œæä¾›å‚è€ƒã€‚ ç¦ç”¨providerçš„ExceptionFilterä¿®æ”¹ provider çš„é…ç½®ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨ yml é…ç½®æ–‡ä»¶ï¼Œå…¶ä»–ç±»å‹å¦‚ xml/properties ä¹ŸåŒç†ï¼Œè®¾ç½® provider çš„ filter ä¸º -exceptionï¼Œè¿™æ ·å¼‚å¸¸å°±ä¸ä¼šè¢«å¤„ç†è€Œæ˜¯ç›´æ¥æŠ›å‡ºäº†ã€‚ 1234567891011dubbo: application: name: provider protocol: name: dubbo port: 20100 registry: address: 127.0.0.1:2181 protocol: zookeeper provider: filter: -exception GlobalExceptionHandleræ•è·ServiceExceptionåªæ˜¯ç¦ç”¨äº† provider çš„ ExceptionHandler è¿˜ä¸èƒ½å®Œå…¨è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ï¼Œè®¿é—®æ¥å£ï¼Œprovider æŠ›å‡ºå¼‚å¸¸ consumer æ­£ç¡®æ¥æ”¶ä¸º ServiceExceptionã€‚ 12345[Request processing failed; nested exception is io.github.mosiki.common.exception.ServiceException: missing_required_parameters] with root causeio.github.mosiki.common.exception.ServiceException: missing_required_parameters at io.github.mosiki.provider.HelloService.sayHello(HelloService.java:20) ~[na:na] at com.alibaba.dubbo.common.bytecode.Wrapper1.invokeMethod(Wrapper1.java) ~[na:na] æˆ‘ä»¬å¤„ç†ä¸€ä¸‹ GlobalExceptionHandlerã€‚ SpringBoot ä¸»è¦è¿™ä¸ªå¯åŠ¨ç±»çš„ä½ç½®å’Œå…¨å±€å¼‚å¸¸å¤„ç†å™¨çš„ä½ç½®ï¼Œä¸€å®šè¦ä¿è¯å¼‚å¸¸å¤„ç†å™¨åœ¨å¯åŠ¨ç±»çš„åŒçº§åŒ…æˆ–è€…åœ¨å¯åŠ¨ç±»çš„å­åŒ…å½“ä¸­ï¼Œå¦åˆ™å¼‚å¸¸å¤„ç†å™¨å°†ä¸ç”Ÿæ•ˆï¼ æ•ˆæœå±•ç¤ºä»¥ä¸Šä¸¤æ­¥å®Œæˆåï¼Œé‡å¯æœåŠ¡ï¼Œè®¿é—®æ¥å£æµ‹è¯•ã€‚ æ‹¿åˆ°äº† provider æŠ›å‡ºçš„åŸå§‹è‡ªå®šä¹‰å¼‚å¸¸ï¼Œå¦‚æ­¤é—®é¢˜å°±è§£å†³äº†ã€‚ ä»£ç ä¸‹è½½ https://github.com/Mosiki/dubbo-exception-example-parent å‚è€ƒ https://blog.csdn.net/yangzaizi/article/details/80638306","tags":[{"name":"dubboè‡ªå®šä¹‰å¼‚å¸¸","slug":"dubboè‡ªå®šä¹‰å¼‚å¸¸","permalink":"http://nullpointer.pw/tags/dubbo%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8/"},{"name":"dubboå¼‚å¸¸å †æ ˆè¢«åƒ","slug":"dubboå¼‚å¸¸å †æ ˆè¢«åƒ","permalink":"http://nullpointer.pw/tags/dubbo%E5%BC%82%E5%B8%B8%E5%A0%86%E6%A0%88%E8%A2%AB%E5%90%83/"},{"name":"dubboå¤„ç†è‡ªå®šä¹‰å¼‚å¸¸é—®é¢˜","slug":"dubboå¤„ç†è‡ªå®šä¹‰å¼‚å¸¸é—®é¢˜","permalink":"http://nullpointer.pw/tags/dubbo%E5%A4%84%E7%90%86%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E9%97%AE%E9%A2%98/"}]},{"title":"IDEAè¿œç¨‹ä»“åº“ç‰ˆæœ¬å›æ»š","date":"2018-12-02T11:10:42.000Z","path":"IDEAè¿œç¨‹ä»“åº“ç‰ˆæœ¬å›æ»š.html","text":"ä½¿ç”¨ git è¿›è¡Œé¡¹ç›®çš„ç‰ˆæœ¬æ§åˆ¶æ—¶ï¼Œè‚¯å®šä¼šé‡åˆ°å›æ»šç‰ˆæœ¬çš„æƒ…å†µï¼Œå›æ»šæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æœ¬åœ°ä»“åº“å›æ»šï¼Œå¦å¤–ä¸€ç§æ˜¯è¿œç¨‹ä»“åº“å›æ»šã€‚ä»¥ä¸‹è¯¦ç»†è®²è§£ä¸¤ç§å›æ»šæ–¹å¼ï¼Œæœ¬æ–‡ä¸»è¦è®²è§£è¿œç¨‹å›æ»šï¼Œä»¥åŠå¸¸è§ä½¿ç”¨è¯¯åŒºã€‚ æœ¬åœ°ä»“åº“å›æ»šæœ¬åœ°å›æ»šå°±å¾ˆç®€å•ï¼Œåªæ˜¯è¦æ’¤é”€ commit ä¿¡æ¯å³å¯ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨ Reset HEADè¿›è¡Œå›æ»šã€‚ HEAD^ æ˜¯è¿˜åŸåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼ŒHEAD^^ æ˜¯è¿˜åŸåˆ°ä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚Reset Type æœ‰ä¸‰ç§ï¼š mixed é»˜è®¤æ–¹å¼ï¼Œåªä¿ç•™æºç ï¼Œå›é€€commitå’Œindexä¿¡æ¯soft å›é€€åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œåªå›é€€äº†commitçš„ä¿¡æ¯ï¼Œä¸ä¼šæ¢å¤åˆ°index fileä¸€çº§ã€‚å¦‚æœè¿˜è¦æäº¤ï¼Œç›´æ¥commithard å½»åº•å›é€€ï¼Œæœ¬åœ°æºç ä¹Ÿä¼šå˜æˆä¸Šä¸€ä¸ªç‰ˆæœ¬å†…å®¹ é”™è¯¯çš„è¿œç¨‹ä»“åº“å›æ»šæ–¹å¼è¿œç¨‹ä»“åº“ä»£ç å›æ»šï¼Œå¦‚æœä¸Š Google ä¸Šä¸€æœï¼ŒåŸºæœ¬å‡ºæ¥çš„ç­”æ¡ˆéƒ½æ˜¯ä½¿ç”¨ Reset HEAD åŠ ä¸Š git push -f å¼ºåˆ¶æäº¤çš„æ–¹å¼ã€‚ æˆ‘æœ¬åœ°æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªäººåŒæ—¶åœ¨è¿™æ¡åˆ†æ”¯ä¸Šå¼€å‘ï¼Œå…¶ä¸­ä¸€ä¸ªäºº å° A å¦‚æœä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œå›æ»šäº†è¿œç¨‹ä»“åº“ä»£ç ï¼Œå¦å¤–ä¸€ä¸ªäºº å° B æ­¤æ—¶æœ¬åœ°è¿˜æ˜¯å›æ»šä¹‹å‰çš„ä»£ç ï¼Œå° B é‚£é‡Œå°±ä¼šå‡ºç°æœ¬åœ°ä»£ç ç‰ˆæœ¬é«˜äºè¿œç¨‹åˆ†æ”¯ç‰ˆæœ¬çš„æƒ…å†µï¼Œæ­¤æ—¶è‹¥å° B è¿›è¡Œäº† push æ“ä½œï¼Œä¹‹å‰å° A å›æ»šçš„ä»£ç å°±åˆä¼šè¢«æ¨é€åˆ°è¿œç¨‹çš„ä»“åº“äº†ã€‚é™¤éå° B åœ¨å›æ»šåï¼Œå°†å…¶æœ¬åœ°ä»“åº“çš„ç‰ˆæœ¬ä¹Ÿè¿›è¡Œå›æ»šã€‚æ‰èƒ½ä¿è¯ä¸ä¼šæŠŠå›æ»šçš„ä»£ç é‡æ–° push å›è¿œç¨‹ä»“åº“ï¼Œä½†æ˜¯å¦‚æœå¼€å‘äººå‘˜å¤šï¼Œå°±æ— æ³•ä¿è¯æ‰€æœ‰å¼€å‘äººå‘˜çš„æœ¬åœ°åˆ†æ”¯éƒ½å›æ»šï¼ å› æ­¤ï¼Œä¸è¦ä½¿ç”¨ git push -f è¿™ç§æ–¹å¼æ¥å¼ºåˆ¶å›æ»šè¿œç¨‹ä»“åº“ä»£ç ï¼ æ­£ç¡®çš„è¿œç¨‹ä»“åº“å›æ»šæ–¹å¼ å¦‚å›¾æ‰€ç¤ºï¼Œç°åœ¨éœ€è¦å°†è¿œç¨‹ä»“åº“å›æ»šåˆ° dev-103 è¿™æ¬¡æäº¤ç‚¹ã€‚ é€‰ä¸­ dev-103 è¿™ä¸€è¡Œï¼Œå³é”®é€‰æ‹© Revert è¿™é‡Œæç¤ºéœ€è¦ commit commit ä¹‹åï¼Œpush åˆ°è¿œç¨‹ä»“åº“ä¸­ã€‚æœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š æ–°å¢äº†ä¸€æ¡æäº¤è®°å½•ï¼ŒæŸ¥çœ‹ä»£ç å·²ç»è¢«å›æ»šäº† å…¶ä»–å¼€å‘äººå‘˜å¦‚æœè¿›è¡Œäº† pullï¼Œå…¶æœ¬åœ°ä»“åº“ä¹Ÿè¢«æ­£ç¡®å›æ»šåˆ°äº† dev-103 æäº¤ç‚¹ï¼Œå°±æ— éœ€å†æ‹…å¿ƒå›æ»šçš„ä»£ç åˆè¢«é‡æ–° push åˆ°è¿œç¨‹ä»“åº“å•¦ã€‚ æå®šï¼Œæ”¶å·¥ï¼","tags":[{"name":"Gitè¿œç¨‹ä»“åº“å›æ»š","slug":"Gitè¿œç¨‹ä»“åº“å›æ»š","permalink":"http://nullpointer.pw/tags/Git%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%9B%9E%E6%BB%9A/"},{"name":"Gitæœ¬åœ°ä»“åº“å›æ»š","slug":"Gitæœ¬åœ°ä»“åº“å›æ»š","permalink":"http://nullpointer.pw/tags/Git%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E5%9B%9E%E6%BB%9A/"}]},{"title":"ESæœç´¢ç»“æœè°ƒä¼˜","date":"2018-11-29T14:13:58.000Z","path":"ESæœç´¢ç»“æœè°ƒä¼˜.html","text":"è‡ªä»ä½¿ç”¨ ElasticSearch é‡æ„äº†ä¸»ç«™çš„æœç´¢é¡¹ç›®ä¹‹åï¼Œä¹‹ååˆé™†ç»­æ¥å…¥äº†å…¶ä»–ä¸¤ä¸ªé¡¹ç›®ï¼Œç›®å‰ä½¿ç”¨ SpringBoot æ–¹å¼è·‘äº†ä¸€ä¸ªä¼ªé›†ç¾¤ï¼Œä¸»ç«™ä½¿ç”¨çš„æ—¶å€™ï¼Œæ¯”è¾ƒç¨³å®šï¼Œæ²¡æœ‰äººåé¦ˆè¯´æœ‰é—®é¢˜ã€‚ ä½†æ–°æ¥å…¥çš„ä¸€ä¸ªç«™ç‚¹å•†åŠ¡åé¦ˆè¯´ï¼Œæœç´¢ä¸å¤Ÿå‡†ç¡®ï¼Œå®Œå…¨åŒ¹é…çš„å…³é”®è¯ä¸æ˜¯æ’åœ¨æœç´¢ç»“æœåˆ—è¡¨é¦–ä½ï¼Œè·‘åˆ°æœç´¢ä¸Šå»çœ‹äº†ä¸€çœ¼ï¼Œç¡®å®å®Œå…¨åŒ¹é…çš„ç»“æœåˆ†æ•°ä¸æ˜¯æœ€é«˜çš„ï¼Œå¯¼è‡´æ²¡æœ‰æ’åœ¨ç»“æœé¦–ä½ï¼Œä»Šå¤©å°±æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ é»˜è®¤åŒ¹é…æŸ¥è¯¢å…ˆçœ‹çœ‹æˆ‘ä¹‹å‰å†™çš„æŸ¥è¯¢ä»£ç ç‰‡æ®µï¼Œ 12MultiMatchQueryBuilder matchQuery = QueryBuilders.multiMatchQuery(query.getQueryString(), &quot;name&quot;, &quot;author&quot;);boolQuery.must(matchQuery); è¿™ç§å†™æ³•ï¼Œå®Œå…¨æ²¡æœ‰å¯¹æœç´¢ç»“æœçš„å¹³åˆ†è¿›è¡Œå¹²æ‰°ï¼Œåªæ˜¯æŒ‰ç…§ ES çš„é»˜è®¤åˆ†è¯è®¡ç®—åŒ¹é…åº¦çš„ç»“æœã€‚ æƒé‡æŸ¥è¯¢æˆ‘å°è¯•äº†ä½¿ç”¨æƒé‡æŸ¥è¯¢ï¼Œå³æå‡æŸäº›å­—æ®µçš„æƒé‡ï¼Œä½†æ˜¯è®¾ç½®ä¹‹åï¼Œç»“æœåè€Œæ›´åŠ ä¸å°½å¦‚äººæ„ã€‚ 12boolQuery.should(QueryBuilders.matchQuery(&quot;name&quot;, queryString).boost(3.0f));boolQuery.should(QueryBuilders.matchQuery(&quot;author&quot;, queryString).boost(1.f)); è¿™æ ·è¿›è¡ŒæŸ¥è¯¢ä¹‹åï¼Œå¦‚æœæƒ³è¦æŸ¥è¯¢ä½œè€…ï¼Œä½†æ˜¯ä½œå“åç§°çš„æƒé‡æ›´é«˜äº›ï¼Œæ‰€ä»¥å®Œå…¨åŒ¹é…çš„ä½œè€…ä¹Ÿè¢«æ’åœ¨äº†åé¢ã€‚ æœ€ä½³å­—æ®µæŸ¥è¯¢çœ‹äº†å®˜æ–¹åšå®¢å’Œä¸€ç¯‡åšå®¢æ–‡ç« ï¼Œå‘ç° multi-match-query çš„é«˜çº§æŸ¥è¯¢æ–¹å¼ã€‚ multi_match å¤šåŒ¹é…æŸ¥è¯¢çš„ç±»å‹æœ‰å¤šç§ï¼Œå…¶ä¸­çš„ä¸‰ç§æ°å·§ä¸ äº†è§£æˆ‘ä»¬çš„æ•°æ® ä¸­ä»‹ç»çš„ä¸‰ä¸ªåœºæ™¯å¯¹åº”ï¼Œå³ï¼š best_fields ã€ most_fields å’Œ cross_fields ï¼ˆæœ€ä½³å­—æ®µã€å¤šæ•°å­—æ®µã€è·¨å­—æ®µï¼‰ã€‚ è¿™é‡Œæˆ‘ä»¬æƒ³è¦æœç´¢æ—¶ï¼Œå®Œå…¨åŒ¹é…çš„å…³é”®å­—æ’åæ›´é å‰ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨æœ€ä½³å­—æ®µ best_fields è¿›è¡ŒæŸ¥è¯¢ 12345MultiMatchQueryBuilder multiMatchQuery = QueryBuilders .multiMatchQuery(queryString, &quot;name&quot;, &quot;author&quot;) .type(MultiMatchQueryBuilder.Type.BEST_FIELDS) .tieBreaker(0.1f); boolQuery.must(multiMatchQuery); é¦–å…ˆè®¾ç½® type ä¸º BEST_FIELDSï¼Œå…¶æ¬¡ï¼Œæˆ‘ä»¬æƒ³è¦å®Œå…¨åŒ¹é…çš„åˆ†æ•°é«˜ç‚¹ï¼Œé‚£ä¹ˆå°±è®©æ²¡æœ‰å®Œå…¨åŒ¹é…çš„åˆ†æ–‡æ¡£è¯„åˆ†ä½å³å¯ï¼Œæˆ‘è¿™é‡Œä¹˜ä»¥äº† 0.1 çš„ç³»æ•°ï¼Œç³»æ•°çš„èŒƒå›´æ˜¯ 0-1 ä¹‹é—´ã€‚ åŠ ä¸Šäº†ç³»æ•°ä¹‹åï¼Œä¸å®Œå…¨åŒ¹é…çš„æ–‡æ¡£è¯„åˆ†å°±è¢«æ‹‰å¼€äº†ï¼Œå°±è¾¾åˆ°äº†æˆ‘çš„æœ€ç»ˆç›®çš„ã€‚ æœ€ä½³å­—æ®µä¼˜åŒ–2019å¹´01æœˆ19æ—¥08:01:31 æ›´æ–°é€šè¿‡ä¸Šä¸€æ­¥ä¼˜åŒ–ï¼Œå·²ç»æå‡äº†å®Œå…¨åŒ¹é…æ–‡æ¡£çš„è¯„åˆ†ï¼Œä½†æ˜¯è¿˜ä¸è¶³ä»¥æ‹‰å¼€è¯„åˆ† ç°åœ¨æ˜¯ä½œå“åç§°/ä½œè€…ä¸¤ä¸ªå­—æ®µéƒ½å­˜åœ¨ç›¸åŒçš„å€¼ï¼Œä½†æ˜¯æƒ³è®©ä½œå“åç§°å­—æ®µçš„æƒé‡æ›´é«˜ç‚¹ï¼Œå³æœç´¢ç›¸åŒå€¼çš„æ—¶å€™ï¼Œä¼˜å…ˆæœç´¢å‡ºä½œå“åä¸ºè¯¥å€¼çš„æ•°æ®æœ€ç»ˆä¼˜åŒ–ç»“æœï¼š ä»£ç å®ç°ï¼š 12345678910111213141516171819202122232425262728293031public void testHighlightQuery() &#123; BookQuery query = new BookQuery(); query.setQueryString(&quot;ç©¿è¶Š&quot;); // å¤åˆæŸ¥è¯¢ BoolQueryBuilder boolQuery = QueryBuilders.boolQuery(); PageRequest pageRequest = PageRequest.of(query.getPage() - 1, query.getSize()); NativeSearchQueryBuilder queryBuilder = new NativeSearchQueryBuilder() .withQuery(boolQuery) .withHighlightFields( new HighlightBuilder.Field(&quot;name&quot;).preTags(&quot;&lt;span style=\\&quot;color:red\\&quot;&gt;&quot;).postTags(&quot;&lt;/span&gt;&quot;), new HighlightBuilder.Field(&quot;author&quot;).preTags(&quot;&lt;span style=\\&quot;color:red\\&quot;&gt;&quot;).postTags(&quot;&lt;/span&gt;&quot;)) .withPageable(pageRequest); // ä»¥ä¸‹ä¸ºæŸ¥è¯¢æ¡ä»¶, ä½¿ç”¨ must query è¿›è¡ŒæŸ¥è¯¢ç»„åˆ// MultiMatchQueryBuilder matchQuery = QueryBuilders.multiMatchQuery(query.getQueryString(), &quot;name&quot;, &quot;intro&quot;, &quot;author&quot;);// boolQuery.must(matchQuery); String queryString = query.getQueryString(); // æœ€ä½³å­—æ®µ + é™ä½é™¤äº†nameä¹‹å¤–å­—æ®µçš„æƒé‡ç³»æ•° MatchQueryBuilder nameQuery = QueryBuilders.matchQuery(&quot;name&quot;, queryString); MatchQueryBuilder authorQuery = QueryBuilders.matchQuery(&quot;author&quot;, queryString).boost(0.8f); DisMaxQueryBuilder disMaxQueryBuilder = QueryBuilders.disMaxQuery().add(nameQuery).add(authorQuery); queryBuilder.withQuery(disMaxQueryBuilder); NativeSearchQuery searchQuery = queryBuilder.build(); Page&lt;Book&gt; books = elasticsearchTemplate.queryForPage(searchQuery, Book.class, extResultMapper); books.forEach(e -&gt; log.info(&quot;&#123;&#125;&quot;, e)); // &lt;span style=&quot;color:red&quot;&gt;ç©¿è¶Š&lt;/span&gt;å°é“äºº&#125; ä¸»è¦é€šè¿‡ QueryBuilders.disMaxQuery ç»“åˆ boost å¯¹éæ ¸å¿ƒå­—æ®µé™ä½æƒé‡æ¥å®Œæˆ èµ„æºä¸‹è½½ https://github.com/Mosiki/SpringDataElasticSearchQuickStartExample å‚è€ƒ https://www.cnblogs.com/yjf512/p/4897294.html dis_max æŸ¥è¯¢","tags":[{"name":"ElasticSearchå®Œå…¨åŒ¹é…ç»“æœè°ƒä¼˜","slug":"ElasticSearchå®Œå…¨åŒ¹é…ç»“æœè°ƒä¼˜","permalink":"http://nullpointer.pw/tags/ElasticSearch%E5%AE%8C%E5%85%A8%E5%8C%B9%E9%85%8D%E7%BB%93%E6%9E%9C%E8%B0%83%E4%BC%98/"},{"name":"esæŸ¥è¯¢è°ƒä¼˜","slug":"esæŸ¥è¯¢è°ƒä¼˜","permalink":"http://nullpointer.pw/tags/es%E6%9F%A5%E8%AF%A2%E8%B0%83%E4%BC%98/"}]},{"title":"githubä»£ç cloneåŠ é€Ÿ","date":"2018-11-24T08:52:01.000Z","path":"githubä»£ç cloneåŠ é€Ÿ.html","text":"è¿™é˜µå­æƒ³çœ‹çœ‹å¼€æºé¡¹ç›® MyBatis çš„æºç ï¼Œç»“æœä½¿ç”¨ git çš„ clone å‘½ä»¤æ€ä¹ˆä¹Ÿ clone ä¸ä¸‹æ¥ï¼Œæˆ‘ä»¥ä¸ºæ˜¯ç½‘é€Ÿæ…¢ï¼Œä¸Š Google ä¸€æœï¼ŒåŸæ¥ Github çš„åŸŸåè¢« DNS æ±¡æŸ“äº†ï¼Œæˆ‘è¯´å‘¢æ€ä¹ˆè®¿é—® Github ä¸€ç›´éƒ½å¾ˆæ…¢ï¼ŒçŸ¥é“äº†é—®é¢˜åŸå› å°±è§£å†³æ‰è¿™ä¸ªæ¶å¿ƒçš„é—®é¢˜ å†å†æ›´æ–°å®‰è£…æ²¹çŒ´ä»¥åŠåŠ é€Ÿè„šæœ¬ æ²¹çŒ´å®‰è£…: https://www.tampermonkey.net/ æ²¹çŒ´è„šæœ¬ï¼šhttps://greasyfork.org/scripts/398278-github-%E9%95%9C%E5%83%8F%E8%AE%BF%E9%97%AE-%E5%8A%A0%E9%80%9F%E4%B8%8B%E8%BD%BD ç›´æ¥è®¿é—®GitHubæŸ¥çœ‹æ•ˆæœã€‚å¦‚ä¸‹å›¾ ä¸ä¸Šä¸€æ¬¡åŒç†ï¼Œè¿™æ¬¡ä¹Ÿä½¿ç”¨çš„æ˜¯åå‘ä»£ç†è¾¾åˆ°åŠ é€Ÿçš„ç›®çš„ï¼Œåªä¸è¿‡è¿™æ¬¡ä½¿ç”¨çš„åŸŸåéç¬”è€…æä¾›çš„ã€‚ä½¿ç”¨æ–¹æ³•ï¼šhttps://github.com.cnpmjs.org/ç”¨æˆ·å/ä»“åº“åå¦‚ï¼šhttps://github.com.cnpmjs.org/apache/skywalkingï¼Œåˆ™cloneåœ°å€ä¸ºï¼šhttp://github-mirror.bugkiller.org/apache/skywalking.git å†æ¬¡æ›´æ–°å‘ç°å¦å¤–ä¸€ç§æ–¹å¼å¯ä»¥å®ç°åŠ é€Ÿçš„æ–¹å¼ï¼Œå³é€šè¿‡ä¸€å°æœåŠ¡å™¨ï¼ˆå¯ä»¥æ˜¯éå›½å¤–æœåŠ¡å™¨ï¼‰é€šè¿‡nginxåå‘ä»£ç†GitHubï¼Œç„¶åç›´æ¥è®¿é—®ä»£ç†åçš„åœ°å€å³å¯ã€‚è¿™ç§æ–¹å¼é€‚åˆä¸‹è½½ä»£ç çš„zipåŒ…æˆ–è€…ä»“åº“é‡Œçš„releasesæ–‡ä»¶ï¼Œæ¯”å¦‚https://xxxx.domain.com/Mosiki/github/archive/master.zipã€‚ å…·ä½“åå‘ä»£ç†çš„é…ç½®è¯»è€…å¯ä»¥è‡ªè¡ŒæŸ¥æ‰¾æ•™ç¨‹ã€‚ è¿™é‡Œç»™å‡ºå…è´¹çš„æœåŠ¡ï¼Œä½†æ˜¯æ¯æ—¥ä¼šæœ‰ä¸Šé™é™åˆ¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ— æ³•ä½¿ç”¨çš„æƒ…å†µï¼Œè¯»è€…æœ€å¥½è‡ªå·±æ­å»ºä»£ç†æœåŠ¡ã€‚ 1https://git.vcmq.workers.dev/ å¯ä»¥å‚è€ƒ æ­¤æ–‡ç«  è‡ªè¡Œæ­å»ºä»£ç†æœåŠ¡ æ›´æ–°ä¸€ä¸‹2019å¹´09æœˆ03æ—¥æ›´æ–°ï¼š æœ€è¿‘å‘ç°ç”¨ hosts æ–¹å¼ä¸å¤ªå¥½ä½¿äº†ï¼Œå¦‚æœæ”¹ hosts çš„æ–¹å¼ä¹Ÿä¸èµ·ä½œç”¨çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªç»æ‹›äº†ã€‚ æ­¥éª¤ä¸€ï¼šfork ä½ æƒ³è¦ clone çš„åº“ æ­¥éª¤äºŒï¼šç™»å½•ç äº‘ï¼Œç™»å½•æˆåŠŸåï¼Œç‚¹å‡»ç½‘é¡µå³ä¸Šè§’åŠ å·ï¼Œé€‰æ‹© ä» GitHub å¯¼å…¥ä»“åº“ è¿™ä¸ªè¿‡ç¨‹ç äº‘ä¼šè®©ä½ å» GitHub æˆæƒæ‹‰å–ä½ çš„ä»“åº“ï¼Œé€‰æ‹©åŒæ„å°±è¡Œäº†ã€‚ æ­¥éª¤ä¸‰ï¼šæ‰¾åˆ°ä½ åœ¨ GitHub ä¸­ fork çš„ä»“åº“é€‰æ‹©å¯¼å…¥ï¼Œç­‰å¾…ä¸€ä¼šå„¿å°±è¡Œäº†ï¼Œå¦‚æœä»“åº“è¾ƒå¤§ï¼Œå¯èƒ½å¯¼å…¥ä¼šèŠ±ä¸€äº›æ—¶é—´ã€‚ æ­¥éª¤å››ï¼šä½¿ç”¨ç äº‘çš„åœ°å€è¿›è¡Œ clone å³å¯ï¼Œå›½å†…çš„é€Ÿåº¦è¿˜æ˜¯éå¸¸å¿«çš„ï¼ å¤‡æ³¨ï¼šæ­¤æ–¹æ³•åªé€‚ç”¨äºä¸´æ—¶ä¸‹è½½ä»“åº“ï¼Œå¦‚æœè¦æ˜¯æ PR ä»€ä¹ˆçš„ï¼Œè¿˜æ˜¯ä½¿ç”¨æ”¹ hosts æ–¹æ³•æˆ–è€…èµ°ä»£ç†çš„æ–¹å¼å§ã€‚ 2019å¹´06æœˆ16æ—¥æ›´æ–°ä¸€ä¸‹ï¼š çœ‹è¯„è®ºæœ‰äººè¯´ä¸å¥½ä½¿ï¼Œæˆ‘åœ¨ mac ä¸Šæœ¬åœ°æµ‹è¯•äº†ä¸€ä¸‹ï¼ˆæœªå¼€å¯å…¨å±€ä»£ç†ï¼‰ï¼Œçº¢æ¡†ä¹‹ä¸Šæ˜¯æœªæŒ‡å®š hosts çš„ç»“æœï¼Œé€Ÿåº¦å¾ˆæ…¢ï¼Œå¹³å‡ä¸åˆ° 50k/s çš„é€Ÿåº¦ï¼Œçº¢æ¡†å†…æ˜¯åˆ‡æ¢åˆ°æœ€æ–° host ä¹‹åçš„ç»“æœï¼Œé€Ÿåº¦ä¸€ç›´åœ¨å¢åŠ ï¼Œè¾¾åˆ° 3.25MB/sï¼Œæ•ˆæœæ˜¾è€Œæ˜“è§ã€‚ Tips: å¦‚æœåˆ‡æ¢åˆ°æœ€æ–° hosts åè¿˜æ˜¯å¾ˆæ…¢ï¼Œå¯ä»¥é‡æ–°å¼€ä¸€ä¸ªç»ˆç«¯å°è¯•ï¼Œæˆ–è€…æ–­å¼€å†é‡è¿ä¸€ä¸‹ç½‘ç»œï¼Œå¯èƒ½æ˜¯ hosts è¿˜æœªç”Ÿæ•ˆã€‚ï¼ˆswitch hosts åœ¨ win ä¸‹éœ€è¦ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ï¼Œmac ä¸‹éœ€è¦è¾“å…¥å¼€æœºå¯†ç è·å¾—æƒé™ï¼‰ åŠ é€Ÿè®¿é—®åœ¨ç½‘ä¸Šæœç´¢ä¸€åœˆï¼Œå¥½å¤šæ–‡ç« ä¸­æé€Ÿçš„æ–¹æ³•å°±æ˜¯ä¿®æ”¹ git çš„ä»£ç†é…ç½®ï¼Œå‰ææ˜¯æœ‰ SS ä¹‹ç±»çš„{ä»£}{ç†}å·¥å…·ï¼Œç„¶è€Œæˆ‘å¼€äº†å…¨å±€{ä»£}{ç†}ï¼Œè®¾ç½®äº† git çš„ä»£ç†é…ç½®ï¼Œclone çš„é€Ÿåº¦è¿˜æ˜¯å¾ˆæ…¢ï¼Œåªèƒ½åˆ° 30kb/sï¼Œå¦‚æœåº“å¤§ç‚¹ï¼Œä¸‹ä¸ªå‡ å¤©å‡ å¤œéƒ½å¯èƒ½ğŸ˜… è®¾ç½®ä»£ç†ä¸å¥½ä½¿ï¼Œå°±ç»§ç»­æœç´¢è§£å†³æ–¹æ³•ï¼Œåœ¨ github ä¸Šæ‰¾åˆ°ä¸€ä¸ª issuesï¼Œå…¶ä¸­æä¾›äº† github çš„ hoståˆ—è¡¨ã€‚ GitHubä¸­å›½åŠ é€Ÿè®¿é—® éšç€ issue æ‰¾åˆ°äº†ä¸€ä¸ªç”Ÿæˆ hosts çš„ repoï¼Œä½†æ˜¯è¿™ä¸ª repo çš„ hosts å¹¶ä¸æ˜¯æ¯æ—¥æ›´æ–°çš„ï¼Œäºæ˜¯è‡ªå·± fork äº†ä¸€ä»½ï¼Œå†™äº†ä¸ªç®€å• crontabï¼Œæ¯æ—¥æ‰§è¡Œç”Ÿæˆæ›´æ–° hosts æ–‡ä»¶ã€‚ ä»“åº“åœ°å€ï¼š**https://github.com/Mosiki/github** é£Ÿç”¨æ–¹æ³•æœ€éº»çƒ¦çš„æ–¹å¼å°±æ˜¯å»æ‰‹åŠ¨ä¿®æ”¹ host æ–‡ä»¶ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä¸‹è½½ Switch Host è½¯ä»¶è¿›è¡Œ host ä¿®æ”¹ï¼Œè·¨å¹³å°ï¼Œå› ä¸º hosts æ–‡ä»¶æ¯æ—¥éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦æœ¬åœ°çš„ hosts ä¹Ÿèƒ½è‡ªåŠ¨æ›´æ–°ï¼Œ å¥½åœ¨ SwitchHosts æä¾›äº†è¿œç¨‹ hosts çš„åŠŸèƒ½ã€‚ å¤åˆ¶å¦‚ä¸‹ hosts åœ°å€ï¼ˆæµ‹è¯•å‘ç°GitHubçš„ç½‘å€æœ‰å¯èƒ½è®¿é—®ä¸äº†ï¼Œå› è€Œæ›´æ¢æˆäº†ç äº‘çš„é•œåƒä»“åº“åœ°å€ï¼‰ 1https://gitee.com/Mosiki/github/raw/master/github_hosts.txt æ–°å¢è¿œç¨‹ hostsç¬”è€…åœ¨ mac ä¸‹æ“ä½œï¼Œwin æ˜¯åŒç†ã€‚ è®¾ç½®è‡ªåŠ¨æ›´æ–°é€‰æ‹© 24 å°æ—¶å³å¯ï¼Œç¬¬ä¸€æ¬¡æ·»åŠ çš„æ—¶å€™éœ€è¦æ‰‹åŠ¨ç‚¹å‡»åˆ·æ–°æŒ‰é’®ï¼Œåˆ·æ–°è·å–ä¸€ä¸‹è¿œç¨‹çš„ hostsæ›´æ–°å®Œæˆä¹‹åç‚¹å‡»ç¡®å®šä¿å­˜å³å¯ã€‚ æ‰“å¼€ hosts å¼€å…³å¦‚å›¾è®¾ç½®å®Œï¼ŒæŠŠå¼€å…³æ‰“å¼€å°± Ok äº†ã€‚ æµ‹è¯•Cloneé€Ÿåº¦ç”± 30kb/s å˜æˆ 4M/s äº† ğŸ˜‚ ä¿®æ”¹åï¼Œåœ¨ GitHub çš„ release ä¸­ä¸‹è½½ä¸œè¥¿ä¹Ÿå˜å¿«äº†ã€‚","tags":[{"name":"github cloneæ…¢è§£å†³","slug":"github-cloneæ…¢è§£å†³","permalink":"http://nullpointer.pw/tags/github-clone%E6%85%A2%E8%A7%A3%E5%86%B3/"},{"name":"github ä¸‹è½½æ…¢è§£å†³","slug":"github-ä¸‹è½½æ…¢è§£å†³","permalink":"http://nullpointer.pw/tags/github-%E4%B8%8B%E8%BD%BD%E6%85%A2%E8%A7%A3%E5%86%B3/"}]},{"title":"IDEAä¹‹Gitåˆ†æ”¯ä»¥åŠStashä½¿ç”¨","date":"2018-10-31T00:31:42.000Z","path":"IDEAä¹‹Gitåˆ†æ”¯åˆå¹¶ä»¥åŠStashä½¿ç”¨.html","text":"éšç€å…¬å¸å¼€å‘äººå‘˜çš„å¢åŠ ï¼Œä»¥åŠå¤šéœ€æ±‚çš„å¹¶è¡Œå¼€å‘ï¼ŒåŠŸèƒ½ä¸Šçº¿å°±ä¼šç¢æ‰‹ç¢è„šï¼›å®³æ€•è‡ªå·±æ²¡å†™å®Œçš„ä»£ç è¢«åˆ«äººéƒ¨ç½²åˆ°çº¿ä¸Šï¼Œå®³æ€•åˆ«äººä»£ç æ²¡å†™å®Œè¢«è‡ªå·±éƒ¨ç½²åˆ°çº¿ä¸Šï¼›æ€»ä¹‹åŠŸèƒ½ä¸Šçº¿ä¹‹å‰è¿˜è¦å’Œæ‰€æœ‰å¼€å‘æ²Ÿé€šï¼Œèƒ½ä¸èƒ½éƒ¨ç½²ä»£ç ï¼Ÿå¦‚æœåªæ˜¯å‡ ä¸ªäººçš„å›¢é˜Ÿå€’ä¹Ÿæ— å¦¨ï¼Œä½†æ˜¯å¼€å‘äººå‘˜å¤šäº†ï¼Œæ²Ÿé€šæˆæœ¬å°±å¾ˆé«˜äº†ã€‚äºæ˜¯ Git çš„åˆ†æ”¯å°±å‘æŒ¥å®ƒçš„ä½œç”¨äº†ï¼Œæœ¬æ–‡è®²è§£å·¥ä½œä¸­ä½¿ç”¨ IDEA è¿›è¡Œåˆ†æ”¯çš„ç®¡ç†ä»¥åŠåˆå¹¶ï¼Œä»¥åŠå…¶ä»– Git ä½¿ç”¨æŠ€å·§ã€‚ ç¯å¢ƒå‡†å¤‡ä¸ºäº†æ¼”ç¤ºï¼Œå…ˆç”¨ IDEA åˆ›å»ºä¸€ä¸ªç®€å•å·¥ç¨‹ï¼Œæäº¤åˆ° git è¿œç¨‹ä»“åº“å½“ä¸­ã€‚ dev-100 åˆ†æ”¯åˆ›å»ºç°åœ¨æ¥åˆ°äº†ä¸€ä¸ªç¼–å·ä¸º 100 çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åœ¨ master åŸºç¡€ä¸Šï¼Œåˆ›å»º dev-100 åˆ†æ”¯ åˆ›å»ºæ–°åˆ†æ”¯ dev-100çš„åŒæ—¶ï¼Œå¹¶åˆ‡æ¢åˆ° dev-100 åˆ†æ”¯ã€‚ dev-100 åˆ†æ”¯ä»£ç å¼€å‘åœ¨ dev-100 åˆ†æ”¯ç¼–å†™éœ€æ±‚ç¼–å·ä¸º 100 çš„ åŠŸèƒ½ï¼Œä»£ç å®Œæˆåè¿›è¡Œ commit ä»¥åŠ pushï¼ˆå¦‚æœè¿™ä¸ªåˆ†æ”¯åªæœ‰ä½ ä¸€ä¸ªäººåœ¨å¼€å‘çš„è¯ï¼Œå°±ä¸ç”¨ push åˆ°è¿œç¨‹åˆ†æ”¯äº†ï¼Œåªéœ€è¦ commit å³å¯ï¼‰ åˆ†æ”¯åˆå¹¶ç°åœ¨æˆ‘ä»¬è¦æŠŠ dev-100 åˆ†æ”¯ä¸Šçš„ä»£ç åˆå¹¶åˆ° master ä¸»åˆ†æ”¯ä¸Šå…ˆåˆ‡æ¢åˆ° master åˆ†æ”¯ åˆå¹¶ dev-100 åˆ†æ”¯åˆ° master åˆ†æ”¯ä¹‹å‰ï¼Œå»ºè®®å…ˆå¯¹ master ä»£ç è¿›è¡Œ pull æ›´æ–°æ“ä½œï¼Œç„¶åå†æ‰§è¡Œ Merge into Current å¦‚æœæ²¡æœ‰å†²çªï¼Œdev-100 ä¸­çš„ä»£ç å°±ä¼šè¢«åˆå¹¶åˆ° master åˆ†æ”¯ä¸Šäº†ï¼Œåˆå¹¶æˆåŠŸåï¼Œéœ€è¦ push æ‰èƒ½æ¨é€åˆ°è¿œç¨‹ä»“åº“ å–æ¶ˆåˆ†æ”¯åˆå¹¶åˆå¹¶å®Œæˆåï¼Œä½†æ˜¯ç”±äºä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬æƒ³è¦å–æ¶ˆæœ¬æ¬¡åˆå¹¶ï¼Œå³é”® gitï¼Œé€‰æ‹© Reset HEAD HEAD^ æ˜¯è¿˜åŸåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼ŒHEAD^^ æ˜¯è¿˜åŸåˆ°ä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚Reset Type æœ‰ä¸‰ç§ï¼š mixed é»˜è®¤æ–¹å¼ï¼Œåªä¿ç•™æºç ï¼Œå›é€€commitå’Œindexä¿¡æ¯ soft å›é€€åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œåªå›é€€äº†commitçš„ä¿¡æ¯ï¼Œä¸ä¼šæ¢å¤åˆ°index fileä¸€çº§ã€‚å¦‚æœè¿˜è¦æäº¤ï¼Œç›´æ¥commit hard å½»åº•å›é€€ï¼Œæœ¬åœ°æºç ä¹Ÿä¼šå˜æˆä¸Šä¸€ä¸ªç‰ˆæœ¬å†…å®¹ ä¸€èˆ¬ä½¿ç”¨é»˜è®¤çš„ mixed æˆ–è€…ç²—æš´çš„ hard æ–¹å¼ã€‚æˆ‘ä»¬è¿™é‡Œæ˜¯å–æ¶ˆåˆå¹¶ï¼Œæ‰€ä»¥é€‰æ‹© Hard æ–¹å¼ï¼Œå¹¶ä¸”æ˜¯**HEAD^**è¿˜åŸåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œå›é€€åæ¢å¤äº†åŸæ¥ master çš„ä»£ç ã€‚ è§£å†³åˆå¹¶å†²çªé—®é¢˜æ¥ä¸‹æ¥æ¼”ç¤ºåˆå¹¶å†²çªï¼Œæ­¤æ—¶æ˜¯åœ¨ master åˆ†æ”¯ï¼Œæˆ‘ä»¬ä¿®æ”¹æ–‡ä»¶ï¼Œå¹¶ commit ä»¥åŠ push åˆ°è¿œç¨‹ä»“åº“ã€‚ æ­¤æ—¶å†æŠŠ dev-100 åˆ†æ”¯åˆå¹¶åˆ° master åˆ†æ”¯å°±ä¼šæç¤ºå†²çªã€‚ åŒå‡»å†²çªæ–‡ä»¶ï¼Œå¤„ç†å†²çªã€‚å¤„ç†å®Œæˆåï¼Œç‚¹å‡» apply å³å¯ï¼Œå¦‚æœæœ‰å¤šä¸ªå†²çªæ–‡ä»¶ï¼Œéƒ½æŒ‰ç…§è¿™ç§æ–¹å¼å¤„ç†ï¼Œè¿™æ˜¯æˆ‘ä»¬å¤„ç†å®Œå†²çªä¹‹åçš„ä»£ç ã€‚ dev-100 åˆ†æ”¯å·²ç»è¢«æˆåŠŸåˆå¹¶åˆ° master äº†ï¼Œå°±å¯ä»¥åˆ é™¤äº†ã€‚å¯ä»¥ç›´æ¥åˆ é™¤è¿œç¨‹ dev-100 åˆ†æ”¯ï¼Œåˆ é™¤æ—¶ IDEA ä¼šæç¤ºæ˜¯å¦åŒæ—¶åˆ é™¤æœ¬åœ°çš„ dev-100 åˆ†æ”¯ï¼Œå‹¾é€‰å³å¯ã€‚ ç°åœ¨æˆ‘ä»¬æŠŠåˆ†æ”¯åˆå¹¶çš„ç»“æœ push åˆ°è¿œç¨‹ä»“åº“ã€‚ ä»£ç æš‚å­˜ä¹‹git stashç¼–å· 100 çš„éœ€æ±‚å®Œæˆä¹‹åï¼Œç°åœ¨æˆ‘ä»¬åˆæ¥åˆ°ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œæ­£åœ¨ dev-101 åˆ†æ”¯è¿›è¡Œå¼€å‘ï¼Œå¼€å‘è¿˜æœªå®Œæˆã€‚ çªç„¶çº¿ä¸Šå‡ºç° bugï¼Œéœ€è¦æˆ‘ä»¬ç´§æ€¥è¿›è¡Œä¿®æ”¹ï¼Œäºæ˜¯æˆ‘ä»¬è¦åŸºäºæœ€æ–°çš„ master åˆ†æ”¯æ–°å»ºä¸€ä¸ª bug åˆ†æ”¯ bug-12ï¼Œéœ€è¦å…ˆåˆ‡æ¢åˆ° master åˆ†æ”¯ï¼Œä½†æ˜¯å½“å‰åˆ†æ”¯çš„ä»£ç æ²¡æœ‰commitï¼Œ å¦‚æœç›´æ¥åˆ‡æ¢åˆ° master åˆ†æ”¯çš„è¯ï¼Œdev-101 åˆ†æ”¯ä¸Šçš„æ–°å¢ä»£ç å°±ä¼šè·‘åˆ° master åˆ†æ”¯ï¼Œè€Œä»£ç åˆä¸èƒ½æ­¤æ—¶ commit ï¼Œäºæ˜¯å°±è½®åˆ° stash å‡ºåœºäº†ã€‚Stash ä¼šä¿å­˜å½“å‰å·¥ä½œè¿›åº¦ï¼Œä¼šæŠŠæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„æ”¹åŠ¨ä¿å­˜èµ·æ¥ã€‚æ·»åŠ å¤‡æ³¨ï¼Œé€‰æ‹© CREATE STASHã€‚ä½ ä¼šå‘ç°å½“å‰å·¥ä½œåŒºå†…çš„ä»£ç è¢«æ¢å¤æˆäº†åŸæ ·ã€‚ ä»£ç æš‚å­˜è¿˜åŸæ­¤åˆ»åˆ‡æ¢åˆ° master åˆ†æ”¯ï¼Œå¹¶åˆ›å»º bug-12 åˆ†æ”¯è¿›è¡Œä¿®å¤ bugï¼Œä¿®å¤å®Œæˆååˆå¹¶åˆ° master åˆ†æ”¯å¹¶ push åˆ°è¿œç¨‹ä»“åº“ï¼Œä¸Šæ–‡å·²ç»æ¼”ç¤ºå¦‚ä½•åˆå¹¶ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚ å°† bug-12 ä¸ master åˆå¹¶å®Œæˆä¹‹åï¼Œç°åœ¨è¦æ¥ç€å†™ dev-101 éœ€æ±‚ä»£ç ï¼Œé¦–å…ˆå…ˆåˆ‡æ¢åˆ° dev-101 åˆ†æ”¯ï¼›ä½†æ˜¯ä¹‹å‰çš„ä»£ç å·²ç»è¢«æˆ‘ä»¬æ”¾åˆ°äº† git çš„ stash å½“ä¸­ï¼Œæˆ‘ä»¬ç°åœ¨è¦æŠŠä»£ç è¿˜åŸåˆ°å·¥ä½œåŒºå½“ä¸­ã€‚é€‰æ‹© Unstash Changesé€‰æ‹©ä¹‹å‰ä¿å­˜çš„ï¼ŒåŒæ—¶å‹¾é€‰ Pop stashï¼ˆè¿˜åŸå®Œæˆåï¼Œä¼šè‡ªåŠ¨åˆ é™¤è¿™ä¸ª stashï¼‰ï¼Œç¡®å®šåï¼Œå·¥ä½œåŒºä¹‹å‰å†™çš„ä»£ç å°±åˆå›æ¥äº†ã€‚ ç»“è¯­Stash åˆ©ç”¨å¥½äº†ï¼Œå°±å¯ä»¥è‡ªå¦‚åˆ‡æ¢åˆ†æ”¯ï¼Œé¢å¯¹çªå¦‚å…¶æ¥çš„éœ€æ±‚ä¹Ÿä¸å¿…çƒ¦æ¼äº†~","tags":[{"name":"IDEA Gitåˆ†æ”¯åˆå¹¶","slug":"IDEA-Gitåˆ†æ”¯åˆå¹¶","permalink":"http://nullpointer.pw/tags/IDEA-Git%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6/"},{"name":"IDEA ä½¿ç”¨Stash","slug":"IDEA-ä½¿ç”¨Stash","permalink":"http://nullpointer.pw/tags/IDEA-%E4%BD%BF%E7%94%A8Stash/"},{"name":"IDEA å¤„ç†åˆ†æ”¯åˆå¹¶å†²çª","slug":"IDEA-å¤„ç†åˆ†æ”¯åˆå¹¶å†²çª","permalink":"http://nullpointer.pw/tags/IDEA-%E5%A4%84%E7%90%86%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E5%86%B2%E7%AA%81/"}]},{"title":"MongoDB æç®€å®è·µå…¥é—¨","date":"2018-10-27T01:20:46.000Z","path":"MongoDBæç®€å®è·µå…¥é—¨.html","text":"ä»¥å‰å­¦ä¹  MongoDB æ—¶å€™å‚è€ƒçš„ä¸€ç¯‡æ–‡ç« ï¼Œå†™çš„è›®å¥½çš„ï¼Œå¾ˆé€‚åˆ MongoDB çš„å…¥é—¨å­¦ä¹ ï¼Œé‚è½¬è½½è¿‡æ¥ã€‚ MongoDB æç®€å®è·µå…¥é—¨1. ä¸ºä»€ä¹ˆç”¨MongoDBï¼Ÿä¼ ç»Ÿçš„è®¡ç®—æœºåº”ç”¨å¤§å¤šä½¿ç”¨å…³ç³»å‹æ•°æ®åº“æ¥å­˜å‚¨æ•°æ®ï¼Œæ¯”å¦‚å¤§å®¶å¯èƒ½ç†Ÿæ‚‰çš„MySql, Sqliteç­‰ç­‰ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯æ•°æ®ä»¥è¡¨æ ¼(table)çš„å½¢å¼å‚¨å­˜èµ·æ¥çš„ã€‚æ•°æ®åº“ç”±ä¸€å¼ å¼ æ’åˆ—æ•´é½çš„è¡¨æ ¼æ„æˆï¼Œå°±å¥½åƒä¸€ä¸ªExcelè¡¨å•ä¸€æ ·ï¼Œæ¯ä¸ªè¡¨æ ¼ä¼šæœ‰è‹¥å¹²åˆ—ï¼Œæ¯”å¦‚ä¸€ä¸ªå­¦ç”Ÿä¿¡æ¯è¡¨ï¼Œå¯èƒ½åŒ…å«å­¦å·ã€å§“åã€æ€§åˆ«ã€å…¥å­¦å¹´ä»½ã€é«˜è€ƒæˆç»©ã€ç±è´¯ç­‰ç­‰ã€‚è€Œè¡¨æ ¼çš„æ¯ä¸€æ’ï¼Œåˆ™æ˜¯ä¸€ä¸ªä¸ªå­¦ç”Ÿçš„å…·ä½“ä¿¡æ¯ã€‚åœ¨ä¼ä¸šçº§åº”ç”¨å’Œå‰äº’è”ç½‘æ—¶ä»£ï¼Œå…³ç³»å‹æ•°æ®åº“å‡ ä¹æ˜¯ä¸äºŒé€‰æ‹©ã€‚å…³ç³»å‹æ•°æ®åº“çš„ç‰¹ç‚¹æ˜¯æœ‰æ•´é½åˆ’ä¸€çš„ç»„ç»‡ï¼Œå¾ˆæ–¹ä¾¿å¯¹æ•°æ®è¿›è¡Œæè¿°ã€æ’å…¥ã€æœç´¢ã€‚ æƒ³è±¡æœ‰ä¸€ä¸ªä¼ ç»Ÿçš„ç½‘ä¸Šæœè£…å•†åº—å§ï¼Œå®ƒçš„ä¸»è¦çš„æ•°æ®å¯èƒ½æ˜¯å‚¨å­˜åœ¨ä¸€å¼ å«productsçš„è¡¨å•é‡Œï¼Œè¡¨å•å¯èƒ½åŒ…å«è¿™äº›åˆ—ï¼šå•†å“ç¼–å·(ID)ã€åç§°(Name)ã€å•†å®¶(brand)ã€ä¸»ç›®å½•(cate)ã€å­ç›®å½•(sub-cat)ã€é›¶å”®ä»·(price)ã€æ˜¯å¦ä¿ƒé”€(promotion)ç­‰ç­‰ã€‚å¦‚æœæœ‰ä¸€ä¸ªç”¨æˆ·æƒ³è¦æŸ¥æ‰¾æ‰€æœ‰ä»·æ ¼ä½äº300å…ƒçš„æ­£åœ¨ä¿ƒé”€çš„é‹å­çš„ç¼–å·å’Œåç§°ï¼Œåˆ™å¯ä»¥æ‰§è¡Œç±»ä¼¼äºä»¥ä¸‹çš„SQLè¯­å¥ï¼š 12SELECT ID, name FROM products WHERE cate=&#x27;shoes&#x27; AND price&lt;300 and AND promotion=true; SQLå…·å¤‡äº†å¼ºå¤§äº†çš„æ·±åº¦æŸ¥è¯¢èƒ½åŠ›ï¼Œèƒ½æ»¡è¶³å„å¼å„æ ·çš„æŸ¥è¯¢è¦æ±‚ã€‚è€Œå¦‚æœè¦å¯¹æ•°æ®è¿›è¡Œæ·»åŠ å’Œåˆ é™¤ï¼Œæˆæœ¬ä¹Ÿæ˜¯éå¸¸ä½çš„ã€‚è¿™äº›æ˜¯SQLçš„ä¼˜åŠ¿ä¹‹ä¸€ï¼Œ ä½†éšç€äº’è”ç½‘çš„å…´èµ·ä»¥åŠæ•°æ®å½¢å¼çš„å¤šæ ·åŒ–ï¼Œå››å¹³å…«ç¨³çš„SQLè¡¨å•åœ¨ä¸€äº›é¢†åŸŸæ¸æ¸æ˜¾ç°å‡ºå®ƒçš„åŠ£åŠ¿ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ã€‚è€ƒè™‘ä¸€ä¸ªåšå®¢åå°ç³»ç»Ÿï¼Œå¦‚æœæˆ‘ä»¬ç”¨å…³ç³»å‹æ•°æ®åº“ä¸ºæ¯ç¯‡åšå®¢(article)å»ºä¸€ä¸ªè¡¨å•çš„è¯ï¼Œè¿™ä¸ªè¡¨å•å¤§æ¦‚ä¼šåŒ…æ‹¬ä»¥ä¸‹è¿™äº›åˆ—ï¼š ID Title Description Author Content Likes A_1 Title1 Political Article Joe Content 1 12 A_2 Title2 Humorous Story Sam Content 2 50 è¿™æ—¶å€™ç”¨SQLæ•°æ®åº“æ¥å­˜å‚¨æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œä½†å‡å¦‚æˆ‘ä»¬è¦ä½æ¯ç¯‡æ–‡ç« æ·»åŠ è¯„è®ºåŠŸèƒ½ï¼Œä¼šå‘ç°æ¯ç¯‡æ–‡ç« å¯èƒ½è¦å¤šç¯‡è¯„è®ºï¼Œè€Œä¸”è¿™ä¸ªæ•°ç›®æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œè€Œä¸”æ¯ç¯‡è¯„è®ºè¿˜åŒ…æ‹¬å¥½å‡ é¡¹å†…å®¹ï¼šè¯„è®ºçš„äººã€è¯„è®ºçš„æ—¶é—´ã€ä»¥åŠè¯„è®ºå†…å®¹ã€‚è¿™æ—¶å€™è¦å°†è¿™äº›å†…å®¹éƒ½å¡è¿›ä¸Šè¿°çš„é‚£ä¸ªè¡¨ï¼Œå°±æ˜¾å¾—å¾ˆå›°éš¾ã€‚é€šå¸¸çš„åšæ³•æ˜¯ä¸ºè¯„è®º(comment)å•ç‹¬å»ºä¸€ä¸ªè¡¨ï¼š ID Author Time Content Article C_1 Anna 2014-12-26 08:23 Really good articles! A_1 C_2 David 2014-12-25 09:30 I like it! A_1 ç±»ä¼¼åœ°ï¼Œæ¯ç¯‡æ–‡ç« å¯èƒ½ä¼šæœ‰è‹¥å¹²æ ‡ç­¾(tags)ã€‚æ ‡ç­¾æœ¬èº«åˆæ˜¯ä¸€ä¸ªè¡¨å•ï¼š ID Category Tags Content Article T_1 Anna 2014-12-26 08:23 Really good articles! A_1 T_2 David 2014-12-25 09:30 I like it! A_2 è€Œåšå®¢çš„è¡¨æ ¼åˆ™è¦é€šè¿‡foreign keyè·Ÿè¿™äº›ç›¸å…³è”çš„è¡¨æ ¼è”ç³»èµ·æ¥(å¯èƒ½è¿˜åŒ…æ‹¬ä½œè€…ã€å‡ºç‰ˆç¤¾ç­‰å…¶å®ƒè¡¨æ ¼)ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“æˆ‘ä»¬åšæŸ¥è¯¢çš„æ—¶å€™ï¼Œæ¯”å¦‚è¯´ï¼Œâ€œæ‰¾å‡ºè¯„è®ºæ•°ä¸å°‘äº3çš„æ ‡ç­¾ä¸ºâ€˜æ”¿æ²»è¯„è®ºâ€™çš„ä½œè€…ä¸ºSamçš„æ–‡ç« â€ï¼Œå°±ä¼šæ¶‰åŠåˆ°å¤æ‚çš„è·¨è¡¨æŸ¥è¯¢ï¼Œéœ€è¦å¤§é‡ä½¿ç”¨joinè¯­å¥ã€‚è¿™ç§è·¨è¡¨æŸ¥è¯¢ä¸ä»…é™ä½äº†æŸ¥è¯¢é€Ÿåº¦ï¼Œè€Œä¸”è¿™äº›è¯­å¥å†™èµ·æ¥ä¹Ÿä¸ç®€å•ã€‚ é‚£ä¹ˆï¼Œå¦‚æœç”¨MongoDBæ•°æ®åº“æ¥å®ç°ï¼Œå¯ä»¥å¦‚ä½•è®¾è®¡æ•°æ®æ¨¡å‹å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œåƒä¸‹é¢è¿™æ ·[1]ï¼š 12345678910111213141516171819_id: POST_ID title: TITLE_OF_POST, description: POST_DESCRIPTION, author: POST_BY, tags: [TAG1, TAG2, TAG3], likes: TOTAL_LIKES, comments: [ &#123; user:&#x27;COMMENT_BY&#x27;, message: TEXT, dateCreated: DATE_TIME, &#125;, &#123; user:&#x27;COMMENT_BY&#x27;, message: TEXT, dateCreated: DATE_TIME, &#125; ] åœ¨MongoDBé‡Œï¼Œæ¯ç¯‡åšå®¢æ–‡ç« ä»¥ä¸€ä¸ªæ–‡æ¡£(document)çš„å½¢å¼ä¿å­˜èµ·æ¥ï¼Œè€Œæ–‡æ¡£å†…éƒ¨åŒ…å«äº†å¾ˆå¤šé¡¹ç›®ï¼Œæ¯”å¦‚title tagsç­‰ï¼Œæ¯ä¸€ä¸ªé¡¹ç›®éƒ½æ˜¯key-valueçš„å½¢å¼ï¼Œå³æœ‰ä¸€ä¸ªé¡¹ç›®çš„åå­—ï¼Œæ¯”å¦‚titleï¼Œä»¥åŠå®ƒçš„å€¼TITLE_OF_POSTã€‚è€Œé‡è¦çš„æ˜¯ï¼Œä¸€ä¸ªkeyå¯ä»¥æœ‰å¤šä¸ªvaluesï¼Œä»–ä»¬ç”¨[]æ‹¬èµ·æ¥ã€‚ è¿™ç§â€œå®½æ¾â€çš„æ•°æ®å­˜å‚¨å½¢å¼éå¸¸çµæ´»ï¼ŒMongoDBä¸é™åˆ¶æ¯ä¸ªkeyå¯¹åº”çš„valuesçš„æ•°ç›®ã€‚æ¯”å¦‚æœ‰çš„æ–‡ç« æ²¡æœ‰è¯„è®ºï¼Œåˆ™å®ƒçš„å€¼å°±æ˜¯ä¸€ä¸ªç©ºé›†ï¼Œå®Œå…¨æ²¡æœ‰é—®é¢˜ï¼›æœ‰çš„æ–‡ç« è¯„è®ºå¾ˆå¤šï¼Œä¹Ÿå¯ä»¥æ— é™åˆ¶åœ°æ’å…¥ã€‚æ›´çµæ´»çš„æ˜¯ï¼ŒMongoDBä¸è¦æ±‚åŒä¸€ä¸ªé›†åˆ(collectionï¼Œç›¸å½“äºSQLçš„table)é‡Œé¢çš„ä¸åŒdocumentæœ‰ç›¸åŒçš„keyï¼Œæ¯”å¦‚é™¤äº†ä¸Šè¿°è¿™ç§æ–‡æ¡£ç»„ç»‡ï¼Œæœ‰çš„æ–‡æ¡£æ‰€ä»£è¡¨çš„æ–‡ç« å¯èƒ½æ²¡æœ‰likesè¿™ä¸ªé¡¹ç›®ï¼Œå†æ¯”å¦‚æœ‰çš„æ–‡ç« å¯èƒ½æœ‰æ›´å¤šçš„é¡¹ç›®ï¼Œæ¯”å¦‚å¯èƒ½è¿˜æœ‰dislikesç­‰ç­‰ã€‚è¿™äº›ä¸åŒçš„æ–‡æ¡£éƒ½å¯ä»¥çµæ´»åœ°å­˜å‚¨åœ¨åŒä¸€ä¸ªé›†åˆä¸‹ï¼Œè€Œä¸”æŸ¥è¯¢èµ·æ¥ä¹Ÿå¼‚å¸¸ç®€å•ï¼Œå› ä¸ºéƒ½åœ¨ä¸€ä¸ªæ–‡æ¡£é‡Œï¼Œä¸ç”¨è¿›è¡Œå„ç§è·¨æ–‡æ¡£æŸ¥è¯¢ã€‚è€Œè¿™ç§MongoDBå¼çš„å­˜å‚¨ä¹Ÿæ–¹ä¾¿äº†æ•°æ®çš„ç»´æŠ¤ï¼Œå¯¹äºä¸€ç¯‡åšå®¢æ–‡ç« æ¥è¯´ï¼Œæ‰€æœ‰çš„ç›¸å…³æ•°æ®éƒ½åœ¨è¿™ä¸ªdocumenté‡Œé¢ï¼Œä¸ç”¨å»è€ƒè™‘ä¸€ä¸ªæ•°æ®æ“ä½œéœ€è¦involveå¤šå°‘ä¸ªè¡¨æ ¼ã€‚ å½“ç„¶ï¼Œé™¤äº†ä¸Šè¿°çš„ä¼˜ç‚¹ï¼ŒMongoDBè¿˜æœ‰ä¸å°‘åˆ«çš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚MongoDBçš„æ•°æ®æ˜¯ç”¨JSON(Javascript Object Notation)å­˜å‚¨çš„(å°±æ˜¯ä¸Šé¢çš„è¿™ç§key-valueçš„å½¢å¼)ï¼Œè€Œå‡ ä¹æ‰€æœ‰çš„webåº”ç”¨éƒ½æ˜¯åŸºäºJavascriptçš„ã€‚å› æ­¤ï¼Œå­˜å‚¨çš„æ•°æ®å’Œåº”ç”¨çš„æ•°æ®çš„æ ¼å¼æ˜¯é«˜åº¦ä¸€è‡´çš„ï¼Œä¸éœ€ç»è¿‡è½¬æ¢ã€‚æ›´å¤šçš„ä¼˜ç‚¹å¯ä»¥æŸ¥çœ‹ï¼š[2]ã€‚ 2. å…³äºè¿™ç¯‡æ–‡ç« è¿™ä¸ªæç®€æ•™ç¨‹ï¼Œæˆ–è€…è¯´ç¬”è®°ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªè¦†ç›–MongoDBæ–¹æ–¹é¢é¢çš„æ•™ç¨‹ã€‚æ‰€è°“æç®€çš„æ„æ€ï¼Œå°±æ˜¯åªé€‰å–é‚£äº›æœ€é‡è¦ã€æœ€å¸¸ç”¨çš„å†…å®¹è¿›è¡ŒåŸºäºå®ä¾‹çš„ä»‹ç»ï¼Œä»è€Œè®©è¯»è€…èƒ½å¤Ÿåœ¨æœ€çŸ­çš„æ—¶é—´å†…å¿«é€Ÿä¸Šæ‰‹ï¼Œå¹¶ä¸”èƒ½é¡ºåˆ©åœ°è¿›è¡Œåç»­çš„çºµæ·±çš„å­¦ä¹ ã€‚ å…·ä½“åœ°è¯´ï¼Œè¿™ä¸ªæ•™ç¨‹çš„ç‰¹ç‚¹æ˜¯ï¼š ä¸æ±‚å…¨é¢ï¼Œåªæ±‚å®ç”¨ã€‚åªè¦†ç›–æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼› ä»¥å¤§é‡ä¾‹å­ä¸ºå¯¼å‘ï¼› ä¸€è¾¹é˜…è¯»ä¸€è¾¹åŠ¨æ‰‹æ“ä½œçš„è¯ï¼Œå¤§çº¦åªéœ€è¦2å°æ—¶çš„æ—¶é—´ï¼› é˜…è¯»è¿™ç¯‡æ–‡ç« ä¸éœ€è¦æœ‰ç‰¹åˆ«çš„åŸºç¡€ï¼Œä½†æœ€å¥½çŸ¥é“æ•°æ®åº“çš„åŸºæœ¬æ¦‚å¿µï¼Œå¦‚æœæœ¬èº«ç†Ÿæ‚‰SQLé‚£å°±æ›´å¥½å•¦ã€‚ 3. å®‰è£…ä¸ç¯å¢ƒMongoDBå¯ä»¥åœ¨Windowsã€Linuxã€Mac OS Xç­‰ä¸»æµå¹³å°è¿è¡Œï¼Œè€Œä¸”ä¸‹è½½å’Œå®‰è£…éå¸¸ç®€å•ï¼Œéå¸¸å‹å¥½ã€‚è¿™ç¯‡æ–‡æ¡£çš„ä¾‹å­é‡‡ç”¨MongoDB 2.6ç‰ˆæœ¬ï¼Œå‡åœ¨OS Xæµ‹è¯•è¿‡ï¼Œæœ‰å……è¶³çš„ç†ç”±ç›¸ä¿¡ï¼Œåœ¨å…¶å®ƒå¹³å°ä¹Ÿèƒ½é¡ºåˆ©è¿è¡Œã€‚ Windowsçš„å®‰è£…å’Œè®¾ç½®å¯ä»¥å‚è€ƒï¼šhttp://www.w3cschool.cc/mongodb/mongodb-window-install.htmlï¼› Linuxçš„å®‰è£…å’Œè®¾ç½®å¯ä»¥å‚è€ƒï¼šhttp://www.w3cschool.cc/mongodb/mongodb-linux-install.htmlï¼› Mac OS Xä¸‹çš„å®‰è£…å’Œè®¾ç½®ï¼š 1. åœ¨https://www.mongodb.org/ ä¸‹è½½é€‚åˆä½ çš„Macçš„MongoDb; 2. ä¸‹è½½å¾—åˆ°çš„æ–‡ä»¶æ˜¯ä¸€ä¸ªzipæ–‡ä»¶ï¼Œè§£å‹ï¼Œç„¶åæ”¾åˆ°ä½ æƒ³åˆ°çš„æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚/Users/Steven/MongoDB; 3. åˆ›å»ºä¸€ä¸ªä½ å–œæ¬¢çš„æ–‡ä»¶å¤¹æ¥å­˜å‚¨ä½ çš„æ•°æ®ï¼Œæ¯”å¦‚/User/Steven/myData; 4. æ‰“å¼€Terminalï¼Œcdåˆ°2é‡Œé¢é‚£ä¸ªæ–‡ä»¶å¤¹/Users/Steven/MongoDBï¼Œå†cd bin; 5. è¾“å…¥./mongod â€“dbpath /User/Steven/myData,ç­‰åˆ°å‡ºç°ç±»ä¼¼â€œwaiting for connections on port 27017â€ï¼Œè¯´æ˜MongoDBæœåŠ¡å™¨å·²æ¶è®¾å¥½ï¼Œè€Œæ•°æ®å°†å‚¨å­˜åœ¨myDataé‡Œé¢ï¼› 6. æ–°æ‰“å¼€ä¸€ä¸ªTerminal, cd /Users/Steven/MongoDB/bin,ç„¶åè¿è¡Œ./mongo;é¡ºåˆ©çš„è¯å®ƒå°†å‡ºç°ä¸€ä¸ªinteractive shellè®©ä½ è¿›è¡Œå„ç§æ“ä½œï¼Œè€Œä½ çš„æ•°æ®å°†å‚¨å­˜åœ¨myDataé‡Œ å¦‚æœä»¥ä¸Šçš„å„ä¸ªæ­¥éª¤éƒ½è¿è¡Œé¡ºåˆ©ï¼Œå°±å¯ä»¥è·³åˆ°ä¸‹ä¸€èŠ‚å•¦ã€‚ 4. åˆ›å»ºé›†åˆå’Œåˆ é™¤é›†åˆåœ¨ä¸Šä¸€èŠ‚æ‰§è¡Œå®Œæ­¥éª¤6åï¼Œä½ ä¼šçœ‹åˆ°å‘½ä»¤è¡Œé‡Œæ˜¾ç¤ºï¼šconnecting to: testï¼Œè¿™é‡Œçš„testæ˜¯é»˜è®¤çš„æ•°æ®åº“ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªæ•°æ®åº“ã€‚åœ¨å‘½ä»¤è¡Œé‡Œæ‰“å…¥ï¼š 12use tutorial è¿™æ ·å°±æ–°å»ºäº†ä¸€ä¸ªå«åštutorialçš„æ•°æ®åº“ã€‚ä½ å¯ä»¥æ‰§è¡Œ 12show databases æ¥æ˜¾ç¤ºå½“å‰çš„æ•°æ®åº“ã€‚ä¸è¿‡è¿™æ—¶å€™ç”±äºæˆ‘ä»¬çš„æ–°æ•°æ®åº“æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ä¼šæ˜¾ç¤ºç±»ä¼¼è¿™æ ·çš„ï¼š 123admin (empty)local 0.078GB æˆ‘ä»¬è¯•ç€å¾€æˆ‘ä»¬çš„æ•°æ®åº“é‡Œæ·»åŠ ä¸€ä¸ªé›†åˆ(collection)ï¼ŒMongoDBé‡Œçš„é›†åˆå’ŒSQLé‡Œé¢çš„è¡¨æ ¼æ˜¯ç±»ä¼¼çš„ï¼š 12db.createCollection(&#x27;author&#x27;) é¡ºåˆ©çš„è¯ä¼šæ˜¾ç¤ºï¼š 12&#123; &quot;ok&quot; : 1 &#125; è¡¨ç¤ºåˆ›å»ºæˆåŠŸã€‚ ä½ å¯ä»¥å†å›å¤´æ‰§è¡Œï¼š 12show databases è¿™æ—¶å€™æˆ‘ä»¬çš„tutorialé›†åˆå·²ç»ä½åˆ—å…¶ä¸­ã€‚ä½ å¯ä»¥å†æ‰§è¡Œ 12show collections å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„é›†åˆauthorä¹Ÿåœ¨å…¶ä¸­ã€‚ æˆ‘ä»¬æš‚æ—¶ä¸éœ€è¦authorè¿™ä¸ªé›†åˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œï¼š 12db.author.drop() æ¥å°†å…¶åˆ é™¤ã€‚è¿™æ—¶å€™ä½ å†æ‰§è¡Œshow collectionsï¼Œå°±å†ä¹Ÿçœ‹ä¸åˆ°æˆ‘ä»¬çš„authoräº†ã€‚ è¿™ä¸€èŠ‚è¦è®°ä½çš„ç‚¹ä¸»è¦åªæœ‰ä¸€ä¸ªï¼šé›†åˆ(collection)ç±»ä¼¼äºSQLçš„è¡¨æ ¼(table)ï¼Œç±»ä¼¼äºExcelçš„ä¸€ä¸ªä¸ªè¡¨æ ¼ã€‚ 5. æ’å…¥æƒ³è±¡ä¸€ä¸ªç²¾ç®€ç‰ˆçš„â€œè±†ç“£ç”µå½±â€ã€‚æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œæ¥å­˜å‚¨æ¯éƒ¨ç”µå½±çš„ä¿¡æ¯ï¼Œç”µå½±çš„ä¿¡æ¯åŒ…æ‹¬ï¼š ç”µå½±åå­— å¯¼æ¼” ä¸»æ¼”(å¯èƒ½å¤šä¸ª) ç±»å‹æ ‡ç­¾(å¯èƒ½å¤šä¸ª) ä¸Šæ˜ æ—¥æœŸ å–œæ¬¢äººæ•° ä¸å–œæ¬¢äººæ•° ç”¨æˆ·è¯„è®º(å¯èƒ½å¤šä¸ª) æ˜¾ç„¶æˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªå«ç”µå½±çš„é›†åˆï¼š 12db.createCollection(&#x27;movie&#x27;) ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ’å…¥æ•°æ®äº†ï¼š 1234567891011121314151617181920212223242526db.movie.insert( &#123; title: &#x27;Forrest Gump&#x27;, directed_by: &#x27;Robert Zemeckis&#x27;, stars: [&#x27;Tom Hanks&#x27;, &#x27;Robin Wright&#x27;, &#x27;Gary Sinise&#x27;], tags: [&#x27;drama&#x27;, &#x27;romance&#x27;], debut: new Date(1994,7,6,0,0), likes: 864367, dislikes: 30127, comments: [ &#123; user:&#x27;user1&#x27;, message: &#x27;My first comment&#x27;, dateCreated: new Date(2013,11,10,2,35), like: 0 &#125;, &#123; user:&#x27;user2&#x27;, message: &#x27;My first comment too!&#x27;, dateCreated: new Date(2013,11,11,6,20), like: 0 &#125; ]&#125;) è¯·æ³¨æ„ï¼Œè¿™é‡Œæ’å…¥æ•°æ®ä¹‹å‰ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å…ˆå£°æ˜movieè¿™ä¸ªé›†åˆé‡Œé¢æœ‰å“ªäº›é¡¹ç›®ã€‚æˆ‘ä»¬ç›´æ¥æ’å…¥å°±å¯ä»¥äº†~è¿™ä¸€ç‚¹å’ŒSQLä¸ä¸€æ ·ï¼ŒSQLå¿…é¡»å…ˆå£°æ˜ä¸€ä¸ªtableé‡Œé¢æœ‰å“ªäº›åˆ—ï¼Œè€ŒMongoDBä¸éœ€è¦ã€‚ æŠŠä¸Šé¢çš„ä¾‹å­å¤åˆ¶è¿›å‘½ä»¤è¡Œåº”è¯¥å¯ä»¥é¡ºåˆ©è¿è¡Œï¼Œä½†æˆ‘å¼ºçƒˆå»ºè®®ä½ æ‰‹åŠ¨æ‰“ä¸€ä¸‹ï¼Œæˆ–è€…è¾“å…¥ä¸€éƒ¨ä½ è‡ªå·±å–œæ¬¢çš„ç”µå½±ã€‚insertæ“ä½œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š 1. ä¸åŒkey-valueéœ€è¦ç”¨é€—å·éš”å¼€ï¼Œè€Œkey:valueä¸­é—´æ˜¯ç”¨å†’å·ï¼› 2. å¦‚æœä¸€ä¸ªkeyæœ‰å¤šä¸ªvalueï¼Œvalueè¦ç”¨[]ã€‚å“ªæ€•å½“å‰åªæœ‰ä¸€ä¸ªvalueï¼Œä¹ŸåŠ ä¸Š[]ä»¥å¤‡åç»­çš„æ·»åŠ ï¼› 3. æ•´ä¸ªâ€œæ•°æ®å—â€è¦ç”¨{}æ‹¬èµ·æ¥ï¼› å¦‚æœä½ åœ¨insertä¹‹åçœ‹åˆ°WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)ï¼Œè¯´æ˜å†™å…¥æˆåŠŸã€‚ è¿™ä¸ªæ—¶å€™ä½ å¯ä»¥ç”¨æŸ¥è¯¢çš„æ–¹å¼æ¥è¿”å›æ•°æ®åº“ä¸­çš„æ•°æ®ï¼š 12db.movie.find().pretty() è¿™é‡Œfind()é‡Œé¢æ˜¯ç©ºçš„ï¼Œè¯´æ˜æˆ‘ä»¬ä¸åšé™åˆ¶å’Œç­›é€‰ï¼Œç±»ä¼¼äºSQLæ²¡æœ‰WHEREè¯­å¥ä¸€æ ·ã€‚è€Œpretty()è¾“å‡ºçš„æ˜¯ç»æ ¼å¼ç¾åŒ–åçš„æ•°æ®ï¼Œä½ å¯ä»¥è‡ªå·±è¯•è¯•æ²¡æœ‰pretty()ä¼šæ€ä¹ˆæ ·ã€‚ ä»”ç»†è§‚å¯Ÿfind()çš„ç»“æœï¼Œä½ ä¼šå‘ç°å¤šäº†ä¸€ä¸ªå«&#39;_id&#39;çš„ä¸œè¥¿ï¼Œè¿™æ˜¯æ•°æ®åº“è‡ªåŠ¨åˆ›å»ºçš„ä¸€ä¸ªIDå·ï¼Œåœ¨åŒä¸€ä¸ªæ•°æ®åº“é‡Œï¼Œæ¯ä¸ªæ–‡æ¡£çš„IDå·éƒ½æ˜¯ä¸åŒçš„ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥åŒæ—¶è¾“å…¥å¤šä¸ªæ•°æ®ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061db.movie.insert([ &#123; title: &#x27;Fight Club&#x27;, directed_by: &#x27;David Fincher&#x27;, stars: [&#x27;Brad Pitt&#x27;, &#x27;Edward Norton&#x27;, &#x27;Helena Bonham Carter&#x27;], tags: &#x27;drama&#x27;, debut: new Date(1999,10,15,0,0), likes: 224360, dislikes: 40127, comments: [ &#123; user:&#x27;user3&#x27;, message: &#x27;My first comment&#x27;, dateCreated: new Date(2008,09,13,2,35), like: 0 &#125;, &#123; user:&#x27;user2&#x27;, message: &#x27;My first comment too!&#x27;, dateCreated: new Date(2003,10,11,6,20), like: 14 &#125;, &#123; user:&#x27;user7&#x27;, message: &#x27;Good Movie!&#x27;, dateCreated: new Date(2009,10,11,6,20), like: 2 &#125; ]&#125;,&#123; title: &#x27;Seven&#x27;, directed_by: &#x27;David Fincher&#x27;, stars: [&#x27;Morgan Freeman&#x27;, &#x27;Brad Pitt&#x27;, &#x27;Kevin Spacey&#x27;], tags: [&#x27;drama&#x27;,&#x27;mystery&#x27;,&#x27;thiller&#x27;], debut: new Date(1995,9,22,0,0), likes: 134370, dislikes: 1037, comments: [ &#123; user:&#x27;user3&#x27;, message: &#x27;Love Kevin Spacey&#x27;, dateCreated: new Date(2002,09,13,2,35), like: 0 &#125;, &#123; user:&#x27;user2&#x27;, message: &#x27;Good works!&#x27;, dateCreated: new Date(2013,10,21,6,20), like: 14 &#125;, &#123; user:&#x27;user7&#x27;, message: &#x27;Good Movie!&#x27;, dateCreated: new Date(2009,10,11,6,20), like: 2 &#125; ]&#125;]) é¡ºåˆ©çš„è¯ä¼šæ˜¾ç¤ºï¼š 12345678910BulkWriteResult(&#123; &quot;writeErrors&quot; : [ ], &quot;writeConcernErrors&quot; : [ ], &quot;nInserted&quot; : 2, &quot;nUpserted&quot; : 0, &quot;nMatched&quot; : 0, &quot;nModified&quot; : 0, &quot;nRemoved&quot; : 0, &quot;upserted&quot; : [ ] è¡¨é¢æˆ‘ä»¬æˆåŠŸåœ°æ’å…¥äº†ä¸¤ä¸ªæ•°æ®ã€‚æ³¨æ„æ‰¹é‡æ’å…¥çš„æ ¼å¼æ˜¯è¿™æ ·çš„ï¼šdb.movie.insert([&#123;ITEM1&#125;,&#123;ITEM2&#125;])ã€‚å‡ éƒ¨ç”µå½±çš„å¤–é¢éœ€è¦ç”¨[]æ‹¬èµ·æ¥ã€‚ è¯·æ³¨æ„ï¼Œè™½ç„¶collectionçš„æ’å…¥ä¸éœ€è¦å…ˆå£°æ˜ï¼Œä½†è¡¨è¾¾ç›¸åŒæ„æ€çš„keyï¼Œåå­—è¦ä¸€æ ·ï¼Œæ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªæ–‡æ¡£é‡Œç”¨directed_byæ¥è¡¨ç¤ºå¯¼æ¼”ï¼Œåˆ™åœ¨å…¶å®ƒæ–‡æ¡£ä¹Ÿè¦ä¿æŒåŒæ ·çš„åå­—(è€Œä¸æ˜¯directorä¹‹ç±»çš„)ã€‚ä¸åŒçš„åå­—ä¸æ˜¯ä¸å¯ä»¥ï¼ŒæŠ€æœ¯ä¸Šå®Œå…¨å¯è¡Œï¼Œä½†ä¼šç»™æŸ¥è¯¢å’Œæ›´æ–°å¸¦æ¥å›°éš¾ã€‚ å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå«tutorialçš„æ•°æ®åº“ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå«movieçš„é›†åˆï¼Œè€Œmovieé‡Œé¢æœ‰ä¸‰ä¸ªè®°å½•ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å¯¹å…¶è¿›è¡ŒæŸ¥è¯¢äº†ã€‚ 6. æŸ¥è¯¢åœ¨ä¸Šä¸€èŠ‚æˆ‘ä»¬å·²ç»æ¥è§¦åˆ°æœ€ç®€å•çš„æŸ¥è¯¢db.movie.find().pretty()ã€‚MongoDBæ”¯æŒå„ç§å„æ ·çš„æ·±åº¦æŸ¥è¯¢åŠŸèƒ½ã€‚å…ˆæ¥ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œæ‰¾å‡ºå¤§å«èŠ¬å¥‡(David Fincher)å¯¼æ¼”çš„æ‰€æœ‰ç”µå½±ï¼š 12db.movie.find(&#123;&#x27;directed_by&#x27;:&#x27;David Fincher&#x27;&#125;).pretty() å°†è¿”å›ã€Šæå‡»ä¿±ä¹éƒ¨ã€‹å’Œã€Šä¸ƒå®—ç½ªã€‹ä¸¤éƒ¨ç”µå½±ã€‚è¿™ç§æœç´¢å’ŒSQLçš„WHEREè¯­å¥æ˜¯å¾ˆç›¸ä¼¼çš„ã€‚ ä¹Ÿå¯ä»¥è®¾ç½®å¤šä¸ªæ¡ä»¶ã€‚æ¯”å¦‚æ‰¾å‡ºå¤§å«èŠ¬å¥‡å¯¼æ¼”çš„, æ‘©æ ¹å¼—é‡Œæ›¼ä¸»æ¼”çš„ç”µå½±ï¼š 12db.movie.find(&#123;&#x27;directed_by&#x27;:&#x27;David Fincher&#x27;, &#x27;stars&#x27;:&#x27;Morgan Freeman&#x27;&#125;).pretty() è¿™é‡Œä¸¤ä¸ªæ¡ä»¶ä¹‹é—´ï¼Œæ˜¯ANDçš„å…³ç³»ï¼Œåªæœ‰åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶çš„ç”µå½±æ‰ä¼šè¢«è¾“å‡ºã€‚åŒç†ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªçš„æ¡ä»¶ï¼Œä¸èµ˜è¿°ã€‚ æ¡ä»¶ä¹‹é—´ä¹Ÿå¯ä»¥æ˜¯æˆ–çš„å…³ç³»ï¼Œæ¯”å¦‚æ‰¾å‡ºç½—å®¾æ€€ç‰¹æˆ–æ‘©æ ¹å¼—é‡Œæ›¼ä¸»æ¼”çš„ç”µå½±ï¼š 12345678db.movie.find(&#123; $or: [ &#123;&#x27;stars&#x27;:&#x27;Robin Wright&#x27;&#125;, &#123;&#x27;stars&#x27;:&#x27;Morgan Freeman&#x27;&#125; ]&#125;).pretty() æ³¨æ„è¿™é‡Œé¢ç¨æ˜¾å¤æ‚çš„å„ç§æ‹¬å·ã€‚ è¿˜å¯ä»¥è®¾ç½®ä¸€ä¸ªèŒƒå›´çš„æœç´¢ï¼Œæ¯”å¦‚æ‰¾å‡º50ä¸‡äººä»¥ä¸Šèµçš„ç”µå½±ï¼š 12db.movie.find(&#123;&#x27;likes&#x27;:&#123;$gt:500000&#125;&#125;).pretty() åŒæ ·è¦æ³¨æ„ç•¥å¤æ‚çš„æ‹¬å·ã€‚æ³¨æ„ï¼Œåœ¨è¿™äº›æŸ¥è¯¢é‡Œï¼Œkeyçš„å•å¼•å·éƒ½æ˜¯å¯é€‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šè¿°è¯­å¥ä¹Ÿå¯ä»¥å†™æˆï¼š 12db.movie.find(&#123;likes:&#123;$gt:500000&#125;&#125;).pretty() ç±»ä¼¼åœ°ï¼Œå°‘äºäºŒåä¸‡äººèµçš„ç”µå½±ï¼š 12db.movie.find(&#123;likes:&#123;$lt:200000&#125;&#125;).pretty() ç±»ä¼¼çš„è¿ç®—ç¬¦è¿˜æœ‰ï¼š$lte:å°äºæˆ–ç­‰äºï¼›$gte:å¤§äºæˆ–ç­‰äºï¼›$ne:ä¸ç­‰äºã€‚ æ³¨æ„ï¼Œå¯¹äºåŒ…å«å¤šä¸ªå€¼çš„keyï¼ŒåŒæ ·å¯ä»¥ç”¨findæ¥æŸ¥è¯¢ã€‚æ¯”å¦‚ï¼š 12db.movie.find(&#123;&#x27;tags&#x27;:&#x27;romance&#x27;&#125;) å°†è¿”å›ã€Šé˜¿ç”˜æ­£ä¼ ã€‹ï¼Œè™½ç„¶å…¶æ ‡ç­¾æ—¢æœ‰romanceï¼Œåˆæœ‰dramaï¼Œä½†åªè¦ç¬¦åˆä¸€ä¸ªå°±å¯ä»¥äº†ã€‚ å¦‚æœä½ ç¡®åˆ‡åœ°çŸ¥é“è¿”å›çš„ç»“æœåªæœ‰ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥ç”¨findOne: 12db.movie.findOne(&#123;&#x27;title&#x27;:&#x27;Forrest Gump&#x27;&#125;) å¦‚æœæœ‰å¤šä¸ªç»“æœï¼Œåˆ™ä¼šæŒ‰ç£ç›˜å­˜å‚¨é¡ºåºè¿”å›ç¬¬ä¸€ä¸ªã€‚è¯·æ³¨æ„ï¼ŒfindOne()è‡ªå¸¦prettyæ¨¡å¼ï¼Œæ‰€ä»¥ä¸èƒ½å†åŠ pretty()ï¼Œå°†æŠ¥é”™ã€‚ å¦‚æœç»“æœå¾ˆå¤šè€Œä½ åªæƒ³æ˜¾ç¤ºå…¶ä¸­ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ç”¨limit()å’Œskip()ï¼Œå‰è€…æŒ‡æ˜è¾“å‡ºçš„ä¸ªæ•°ï¼Œåè€…æŒ‡æ˜ä»ç¬¬äºŒä¸ªç»“æœå¼€å§‹æ•°ã€‚æ¯”å¦‚ï¼š 12db.movie.find().limit(2).skip(1).pretty() åˆ™è·³è¿‡ç¬¬ä¸€éƒ¨ï¼Œä»ç¬¬äºŒéƒ¨å¼€å§‹é€‰å–ä¸¤éƒ¨ç”µå½±ã€‚ 7. å±€éƒ¨æŸ¥è¯¢ç¬¬äº”èŠ‚çš„æ—¶å€™æˆ‘ä»¬è®²äº†findçš„ç”¨æ³•ï¼Œä½†å¯¹äºç¬¦åˆæ¡ä»¶çš„æ¡ç›®ï¼Œæˆ‘ä»¬éƒ½æ˜¯è¿”å›æ•´ä¸ªJSONæ–‡ä»¶çš„ã€‚è¿™ç±»ä¼¼äºSQLé‡Œé¢çš„SELECT *ã€‚æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦çš„ï¼Œä»…ä»…æ˜¯éƒ¨åˆ†æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œfindçš„å±€éƒ¨æŸ¥è¯¢çš„åŠŸèƒ½å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œè¿”å›tagsä¸ºdramaçš„ç”µå½±çš„åå­—å’Œé¦–æ˜ æ—¥æœŸã€‚ 12db.movie.find(&#123;&#x27;tags&#x27;:&#x27;drama&#x27;&#125;,&#123;&#x27;debut&#x27;:1,&#x27;title&#x27;:1&#125;).pretty() æ•°æ®åº“å°†è¿”å›ï¼š 12345678910111213141516&#123; &quot;_id&quot; : ObjectId(&quot;549cfb42f685c085f1dd47d4&quot;), &quot;title&quot; : &quot;Forrest Gump&quot;, &quot;debut&quot; : ISODate(&quot;1994-08-05T16:00:00Z&quot;)&#125;&#123; &quot;_id&quot; : ObjectId(&quot;549cff96f685c085f1dd47d6&quot;), &quot;title&quot; : &quot;Fight Club&quot;, &quot;debut&quot; : ISODate(&quot;1999-11-14T16:00:00Z&quot;)&#125;&#123; &quot;_id&quot; : ObjectId(&quot;549cff96f685c085f1dd47d7&quot;), &quot;title&quot; : &quot;Seven&quot;, &quot;debut&quot; : ISODate(&quot;1995-10-21T16:00:00Z&quot;)&#125; è¿™é‡Œfindçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æ¥æ§åˆ¶è¾“å‡ºçš„ï¼Œ1è¡¨ç¤ºè¦è¿”å›ï¼Œè€Œ0åˆ™è¡¨ç¤ºä¸è¿”å›ã€‚é»˜è®¤å€¼æ˜¯0ï¼Œä½†_idæ˜¯ä¾‹å¤–ï¼Œå› æ­¤å¦‚æœä½ ä¸æƒ³è¾“å‡º_idï¼Œéœ€è¦æ˜¾å¼åœ°å£°æ˜ï¼š 12db.movie.find(&#123;&#x27;tags&#x27;:&#x27;drama&#x27;&#125;,&#123;&#x27;debut&#x27;:1,&#x27;title&#x27;:1,&#x27;_id&#x27;:0&#125;).pretty() 8. æ›´æ–°å¾ˆå¤šæƒ…å†µä¸‹ä½ éœ€è¦æ›´æ–°ä½ çš„æ•°æ®åº“ï¼Œæ¯”å¦‚æœ‰äººå¯¹æŸéƒ¨ç”µå½±ç‚¹äº†ä¸ªèµï¼Œé‚£ä¹ˆä½ éœ€è¦æ›´æ–°ç›¸åº”çš„æ•°æ®åº“ã€‚æ¯”å¦‚æœ‰äººå¯¹ã€Šä¸ƒå®—ç½ªã€‹ç‚¹äº†ä¸ªèµï¼Œè€Œå®ƒæœ¬æ¥çš„èµçš„ä¸ªæ•°æ˜¯134370ï¼Œé‚£ä¹ˆä½ éœ€è¦æ›´æ–°åˆ°134371ã€‚å¯ä»¥è¿™æ ·æ“ä½œï¼š 12db.movie.update(&#123;title:&#x27;Seven&#x27;&#125;, &#123;$set:&#123;likes:134371&#125;&#125;) ç¬¬ä¸€ä¸ªå¤§æ‹¬å·é‡Œè¡¨æ˜è¦é€‰å–çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªè¡¨æ˜è¦æ”¹åŠ¨çš„æ•°æ®ã€‚è¯·æ³¨æ„ä¸Šè¿°çš„æ“ä½œç›¸å½“ä¸ç°å®ï¼Œå› ä¸ºä½ é¦–å…ˆè¦çŸ¥é“ä¹‹å‰çš„æ•°å­—æ˜¯å¤šå°‘ï¼Œç„¶ååŠ ä¸€ï¼Œä½†é€šå¸¸ä½ ä¸è¯»å–æ•°æ®åº“çš„è¯ï¼Œæ˜¯ä¸ä¼šçŸ¥é“è¿™ä¸ªæ•°(134370)çš„ã€‚MongoDBæä¾›äº†ä¸€ç§ç®€ä¾¿çš„æ–¹æ³•ï¼Œå¯ä»¥å¯¹ç°æœ‰æ¡ç›®è¿›è¡Œå¢é‡æ“ä½œã€‚å‡è®¾åˆæœ‰äººå¯¹ã€Šä¸ƒå®—ç½ªã€‹ç‚¹äº†ä¸¤ä¸ªèµï¼Œåˆ™å¯ä»¥ï¼š 12db.movie.update(&#123;title:&#x27;Seven&#x27;&#125;, &#123;$inc:&#123;likes:2&#125;&#125;) å¦‚æœä½ æŸ¥è¯¢çš„è¯ï¼Œä¼šå‘ç°ç‚¹èµæ•°å˜ä¸º134373äº†ï¼Œè¿™é‡Œç”¨çš„æ˜¯$incã€‚é™¤äº†å¢é‡æ›´æ–°ï¼ŒMongoDBè¿˜æä¾›äº†å¾ˆå¤šçµæ´»çš„æ›´æ–°é€‰é¡¹ï¼Œå…·ä½“å¯ä»¥çœ‹ï¼šhttp://docs.mongodb.org/manual/reference/operator/update-field/ ã€‚ æ³¨æ„å¦‚æœæœ‰å¤šéƒ¨ç¬¦åˆè¦æ±‚çš„ç”µå½±ã€‚åˆ™é»˜è®¤åªä¼šæ›´æ–°ç¬¬ä¸€ä¸ªã€‚å¦‚æœè¦å¤šä¸ªåŒæ—¶æ›´æ–°ï¼Œè¦è®¾ç½®&#123;multi:true&#125;ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š 12db.movie.update(&#123;&#125;, &#123;$inc:&#123;likes:10&#125;&#125;,&#123;multi:true&#125;) æ‰€æœ‰ç”µå½±çš„èµæ•°éƒ½å¤šäº†10. æ³¨æ„ï¼Œä»¥ä¸Šçš„æ›´æ–°æ“ä½œä¼šæ›¿æ¢æ‰åŸæ¥çš„å€¼ï¼Œæ‰€ä»¥å¦‚æœä½ æ˜¯æƒ³åœ¨åŸæœ‰çš„å€¼å¾—åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªå€¼çš„è¯ï¼Œåˆ™åº”è¯¥ç”¨$pushï¼Œæ¯”å¦‚ï¼Œä¸ºã€Šä¸ƒå®—ç½ªã€‹æ·»åŠ ä¸€ä¸ªpopularçš„tagsã€‚ 12db.movie.update(&#123;&#x27;title&#x27;:&#x27;Seven&#x27;&#125;, &#123;$push:&#123;&#x27;tags&#x27;:&#x27;popular&#x27;&#125;&#125;) ä½ ä¼šå‘ç°ã€Šä¸ƒå®—ç½ªã€‹ç°åœ¨æœ‰å››ä¸ªæ ‡ç­¾ï¼š 1234567&quot;tags&quot; : [ &quot;drama&quot;, &quot;mystery&quot;, &quot;thiller&quot;, &quot;popular&quot;], 9. åˆ é™¤åˆ é™¤çš„å¥æ³•å’Œfindå¾ˆç›¸ä¼¼ï¼Œæ¯”å¦‚ï¼Œè¦åˆ é™¤æ ‡ç­¾ä¸ºromanceçš„ç”µå½±ï¼Œåˆ™ï¼š 12db.movie.remove(&#123;&#x27;tags&#x27;:&#x27;romance&#x27;&#125;) è€ƒè™‘åˆ°æˆ‘ä»¬æ•°æ®åº“æ¡ç›®å¼‚å¸¸ç¨€å°‘ï¼Œå°±ä¸å»ºè®®ä½ æ‰§è¡Œè¿™æ¡å‘½ä»¤äº†~ æ³¨æ„ï¼Œä¸Šé¢çš„ä¾‹å­ä¼šåˆ é™¤æ‰€æœ‰æ ‡ç­¾åŒ…å«romanceçš„ç”µå½±ã€‚å¦‚æœä½ åªæƒ³åˆ é™¤ç¬¬ä¸€ä¸ªï¼Œåˆ™ 12db.movie.remove(&#123;&#x27;tags&#x27;:&#x27;romance&#x27;&#125;,1) å¦‚æœä¸åŠ ä»»ä½•é™åˆ¶ï¼š 12db.movie.remove() ä¼šåˆ é™¤movieè¿™ä¸ªé›†åˆä¸‹çš„æ‰€æœ‰æ–‡æ¡£ã€‚ 10. ç´¢å¼•å’Œæ’åºä¸ºæ–‡æ¡£ä¸­çš„ä¸€äº›keyåŠ ä¸Šç´¢å¼•(index)å¯ä»¥åŠ å¿«æœç´¢é€Ÿåº¦ã€‚è¿™ä¸€ç‚¹ä¸éš¾ç†è§£ï¼Œå‡å¦‚æ²¡æœ‰æ²¡æœ‰ç´¢å¼•ï¼Œæˆ‘ä»¬è¦æŸ¥æ‰¾åå­—ä¸ºSevençš„ç”µå½±ï¼Œå°±å¿…é¡»åœ¨æ‰€æœ‰æ–‡æ¡£é‡Œé€ä¸ªæœç´¢ã€‚è€Œå¦‚æœå¯¹åå­—è¿™ä¸ªkeyåŠ ä¸Šç´¢å¼•å€¼ï¼Œåˆ™ç”µå½±åè¿™ä¸ªå­—ç¬¦ä¸²å’Œæ•°å­—å»ºç«‹äº†æ˜ å°„ï¼Œè¿™æ ·åœ¨æœç´¢çš„æ—¶å€™å°±ä¼šå¿«å¾ˆå¤šã€‚æ’åºçš„æ—¶å€™ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¸èµ˜è¿°ã€‚MongoDBé‡Œé¢ä¸ºæŸä¸ªkeyåŠ ä¸Šç´¢å¼•çš„æ–¹å¼å¾ˆç®€å•ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦å¯¹å¯¼æ¼”è¿™ä¸ªkeyåŠ ç´¢å¼•ï¼Œåˆ™å¯ä»¥ï¼š 12db.movie.ensureIndex(&#123;directed_by:1&#125;) è¿™é‡Œçš„1æ˜¯å‡åºç´¢å¼•ï¼Œå¦‚æœè¦é™åºç´¢å¼•ï¼Œç”¨-1ã€‚ MongoDBæ”¯æŒå¯¹è¾“å‡ºè¿›è¡Œæ’åºï¼Œæ¯”å¦‚æŒ‰åå­—æ’åºï¼š 12db.movie.find().sort(&#123;&#x27;title&#x27;:1&#125;).pretty() åŒæ ·åœ°ï¼Œ1æ˜¯å‡åºï¼Œ-1æ˜¯é™åºã€‚é»˜è®¤æ˜¯1ã€‚ 12db.movie.getIndexes() å°†è¿”å›æ‰€æœ‰ç´¢å¼•ï¼ŒåŒ…æ‹¬å…¶åå­—ã€‚ è€Œ 12db.movie.dropIndex(&#x27;index_name&#x27;) å°†åˆ é™¤å¯¹åº”çš„ç´¢å¼•ã€‚ 11. èšåˆMongoDBæ”¯æŒç±»ä¼¼äºSQLé‡Œé¢çš„GROUP BYæ“ä½œã€‚æ¯”å¦‚å½“æœ‰ä¸€å¼ å­¦ç”Ÿæˆç»©çš„æ˜ç»†è¡¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾å‡ºæ¯ä¸ªåˆ†æ•°æ®µçš„å­¦ç”Ÿå„æœ‰å¤šå°‘ã€‚ä¸ºäº†å®ç°è¿™ä¸ªæ“ä½œï¼Œæˆ‘ä»¬éœ€è¦ç¨åŠ æ”¹åŠ¨æˆ‘ä»¬çš„æ•°æ®åº“ã€‚æ‰§è¡Œä»¥ä¸‹ä¸‰æ¡å‘½ä»¤ï¼š 1234db.movie.update(&#123;title:&#x27;Seven&#x27;&#125;,&#123;$set:&#123;grade:1&#125;&#125;)db.movie.update(&#123;title:&#x27;Forrest Gump&#x27;&#125;,&#123;$set:&#123;grade:1&#125;&#125;)db.movie.update(&#123;title:&#x27;Fight Club&#x27;&#125;,&#123;$set:&#123;grade:2&#125;&#125;) è¿™å‡ æ¡æ˜¯ç»™æ¯éƒ¨ç”µå½±åŠ ä¸€ä¸ªè™šæ‹Ÿçš„åˆ†çº§ï¼Œå‰ä¸¤éƒ¨æ˜¯å½’ç±»æ˜¯ä¸€çº§ï¼Œåä¸€éƒ¨æ˜¯äºŒçº§ã€‚ è¿™é‡Œä½ ä¹Ÿå¯ä»¥çœ‹åˆ°MongoDBçš„å¼ºå¤§ä¹‹å¤„ï¼šå¯ä»¥åŠ¨æ€åœ°åç»­æ·»åŠ å„ç§æ–°é¡¹ç›®ã€‚ æˆ‘ä»¬å…ˆé€šè¿‡èšåˆæ¥æ‰¾å‡ºæ€»å…±æœ‰å‡ ç§çº§åˆ«ã€‚ 12db.movie.aggregate([&#123;$group:&#123;_id:&#x27;$grade&#x27;&#125;&#125;]) è¾“å‡ºï¼š 123&#123; &quot;_id&quot; : 2 &#125;&#123; &quot;_id&quot; : 1 &#125; æ³¨æ„è¿™é‡Œçš„2å’Œ1æ˜¯æŒ‡çº§åˆ«ï¼Œè€Œä¸æ˜¯æ¯ä¸ªçº§åˆ«çš„ç”µå½±æ•°ã€‚è¿™ä¸ªä¾‹å­çœ‹å¾—æ¸…æ¥šäº›ï¼š 12db.movie.aggregate([&#123;$group:&#123;_id:&#x27;$directed_by&#x27;&#125;&#125;]) è¿™é‡ŒæŒ‰ç…§å¯¼æ¼”åå­—è¿›è¡Œèšåˆã€‚è¾“å‡ºï¼š 123&#123; &quot;_id&quot; : &quot;David Fincher&quot; &#125;&#123; &quot;_id&quot; : &quot;Robert Zemeckis&quot; &#125; æ¥ç€æˆ‘ä»¬è¦æ‰¾å‡ºï¼Œæ¯ä¸ªå¯¼æ¼”çš„ç”µå½±æ•°åˆ†åˆ«æœ‰å¤šå°‘ï¼š 12db.movie.aggregate([&#123;$group:&#123;_id:&#x27;$directed_by&#x27;,num_movie:&#123;$sum:1&#125;&#125;&#125;]) å°†ä¼šè¾“å‡ºï¼š 123&#123; &quot;_id&quot; : &quot;David Fincher&quot;, &quot;num_movie&quot; : 2 &#125;&#123; &quot;_id&quot; : &quot;Robert Zemeckis&quot;, &quot;num_movie&quot; : 1 &#125; æ³¨æ„$sumåé¢çš„1è¡¨ç¤ºåªæ˜¯æŠŠç”µå½±æ•°åŠ èµ·æ¥ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»Ÿè®¡åˆ«çš„æ•°æ®ï¼Œæ¯”å¦‚ä¸¤ä½å¯¼æ¼”è°çš„èµæ¯”è¾ƒå¤šï¼š 12db.movie.aggregate([&#123;$group:&#123;_id:&#x27;$directed_by&#x27;,num_likes:&#123;$sum:&#x27;$likes&#x27;&#125;&#125;&#125;]) è¾“å‡ºï¼š 123&#123; &quot;_id&quot; : &quot;David Fincher&quot;, &quot;num_likes&quot; : 358753 &#125;&#123; &quot;_id&quot; : &quot;Robert Zemeckis&quot;, &quot;num_likes&quot; : 864377 &#125; æ³¨æ„è¿™äº›æ•°æ®éƒ½çº¯å±è™šæ„å•Šï¼ é™¤äº†$sumï¼Œè¿˜æœ‰å…¶å®ƒä¸€äº›æ“ä½œã€‚æ¯”å¦‚ï¼š 12db.movie.aggregate([&#123;$group:&#123;_id:&#x27;$directed_by&#x27;,num_movie:&#123;$avg:&#x27;$likes&#x27;&#125;&#125;&#125;]) ç»Ÿè®¡å¹³å‡çš„èµã€‚ 12db.movie.aggregate([&#123;$group:&#123;_id:&#x27;$directed_by&#x27;,num_movie:&#123;$first:&#x27;$likes&#x27;&#125;&#125;&#125;]) è¿”å›æ¯ä¸ªå¯¼æ¼”çš„ç”µå½±ä¸­çš„ç¬¬ä¸€éƒ¨çš„èµæ•°ã€‚ å…¶å®ƒå„ç§æ“ä½œå¯ä»¥å‚è€ƒï¼šhttp://docs.mongodb.org/manual/reference/operator/aggregation/group/ ã€‚ 12. All or Nothing?MongoDBæ”¯æŒå•ä¸ªæ–‡æ¡£å†…çš„åŸå­åŒ–æ“ä½œ(atomic operation)ï¼Œè¿™æ˜¯è¯´ï¼Œå¯ä»¥å°†å¤šæ¡å…³äºåŒä¸€ä¸ªæ–‡æ¡£çš„æŒ‡ä»¤æ”¾åˆ°ä¸€èµ·ï¼Œä»–ä»¬è¦ä¹ˆä¸€èµ·æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚è€Œä¸ä¼šæ‰§è¡Œåˆ°ä¸€åŠã€‚æœ‰äº›åœºåˆéœ€è¦ç¡®ä¿å¤šæ¡æ‰§è¡Œä¸€èµ·é¡ºæ¬¡æ‰§è¡Œã€‚æ¯”å¦‚ä¸€ä¸ªåœºæ™¯ï¼šä¸€ä¸ªç”µå•†ç½‘ç«™ï¼Œç”¨æˆ·æŸ¥è¯¢æŸç§å•†å“çš„å‰©ä½™æ•°é‡ï¼Œä»¥åŠç”¨æˆ·è´­ä¹°è¯¥ç§å•†å“ï¼Œè¿™ä¸¤ä¸ªæ“ä½œï¼Œå¿…é¡»æ”¾åœ¨ä¸€èµ·æ‰§è¡Œã€‚ä¸ç„¶çš„è¯ï¼Œå‡å®šæˆ‘ä»¬å…ˆæ‰§è¡Œå‰©ä½™æ•°é‡çš„æŸ¥è¯¢ï¼Œè¿™æ˜¯å‡å®šä¸º1ï¼Œç”¨æˆ·æ¥ç€è´­ä¹°ï¼Œä½†å‡å¦‚è¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´è¿˜åŠ å…¥äº†å…¶å®ƒæ“ä½œï¼Œæ¯”å¦‚å¦ä¸€ä¸ªç”¨æˆ·æŠ¢å…ˆè´­ä¹°äº†ï¼Œé‚£ä¹ˆåŸå…ˆè´­ä¹°ç”¨æˆ·çš„è´­ä¹°çš„è¡Œä¸ºå°±ä¼šé€ æˆæ•°æ®åº“çš„é”™è¯¯ï¼Œå› ä¸ºå®é™…ä¸Šè¿™ç§å•†å“ä»¥åŠæ²¡æœ‰å­˜è´§äº†ã€‚ä½†å› ä¸ºæŸ¥è¯¢å‰©ä½™æ•°é‡å’Œè´­ä¹°ä¸æ˜¯åœ¨ä¸€ä¸ªâ€œåŸå­åŒ–æ“ä½œâ€ä¹‹å†…ï¼Œå› æ­¤ä¼šå‘ç”Ÿè¿™æ ·çš„é”™è¯¯[2]ã€‚ MongoDBæä¾›äº†findAndModifyçš„æ–¹æ³•æ¥ç¡®ä¿atomic operationã€‚æ¯”å¦‚è¿™æ ·çš„ï¼š 1234567db.movie.findAndModify( &#123; query:&#123;&#x27;title&#x27;:&#x27;Forrest Gump&#x27;&#125;, update:&#123;$inc:&#123;likes:10&#125;&#125; &#125; ) queryæ˜¯æŸ¥æ‰¾å‡ºåŒ¹é…çš„æ–‡æ¡£ï¼Œå’Œfindæ˜¯ä¸€æ ·çš„ï¼Œè€Œupdateåˆ™æ˜¯æ›´æ–°likesè¿™ä¸ªé¡¹ç›®ã€‚æ³¨æ„ç”±äºMongoDBåªæ”¯æŒå•ä¸ªæ–‡æ¡£çš„atomic operationï¼Œå› æ­¤å¦‚æœqueryå‡ºå¤šäºä¸€ä¸ªæ–‡æ¡£ï¼Œåˆ™åªä¼šå¯¹ç¬¬ä¸€ä¸ªæ–‡æ¡£è¿›è¡Œæ“ä½œã€‚ findAndModifyè¿˜æ”¯æŒæ›´å¤šçš„æ“ä½œï¼Œå…·ä½“è§ï¼šhttp://docs.mongodb.org/manual/reference/command/findAndModify/ã€‚ 13. æ–‡æœ¬æœç´¢é™¤äº†å‰é¢ä»‹ç»çš„å„ç§æ·±åº¦æŸ¥è¯¢åŠŸèƒ½ï¼ŒMongoDBè¿˜æ”¯æŒæ–‡æœ¬æœç´¢ã€‚å¯¹æ–‡æœ¬æœç´¢ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯¹è¦æœç´¢çš„keyå»ºç«‹ä¸€ä¸ªtextç´¢å¼•ã€‚å‡å®šæˆ‘ä»¬è¦å¯¹æ ‡é¢˜è¿›è¡Œæ–‡æœ¬æœç´¢ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆè¿™æ ·ï¼š 12db.movie.ensureIndex(&#123;title:&#x27;text&#x27;&#125;) æ¥ç€æˆ‘ä»¬å°±å¯ä»¥å¯¹æ ‡é¢˜è¿›è¡Œæ–‡æœ¬æœç´¢äº†ï¼Œæ¯”å¦‚ï¼ŒæŸ¥æ‰¾å¸¦æœ‰â€Gumpâ€çš„æ ‡é¢˜ï¼š 12db.movie.find(&#123;$text:&#123;$search:&quot;Gump&quot;&#125;&#125;).pretty() æ³¨æ„textå’Œsearchå‰é¢çš„$ç¬¦å·ã€‚ è¿™ä¸ªä¾‹å­é‡Œï¼Œæ–‡æœ¬æœç´¢ä½œç”¨ä¸æ˜¯éå¸¸æ˜æ˜¾ã€‚ä½†å‡è®¾æˆ‘ä»¬è¦æœç´¢çš„keyæ˜¯ä¸€ä¸ªé•¿é•¿çš„æ–‡æ¡£ï¼Œè¿™ç§text searchçš„æ–¹ä¾¿æ€§å°±æ˜¾ç°å‡ºæ¥äº†ã€‚MongoDBç›®å‰æ”¯æŒ15ç§è¯­è¨€çš„æ–‡æœ¬æœç´¢ã€‚ 14. æ­£åˆ™è¡¨è¾¾å¼MongoDBè¿˜æ”¯æŒåŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„æŸ¥è¯¢ã€‚å¦‚æœä¸çŸ¥é“æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥å‚è€ƒWikipediaã€‚è¿™é‡Œç®€å•ä¸¾å‡ ä¸ªä¾‹å­ã€‚æ¯”å¦‚ï¼ŒæŸ¥æ‰¾æ ‡é¢˜ä»¥bç»“å°¾çš„ç”µå½±ä¿¡æ¯ï¼š 12db.movie.find(&#123;title:&#123;$regex:&#x27;.*b$&#x27;&#125;&#125;).pretty() ä¹Ÿå¯ä»¥å†™æˆï¼š 12db.movie.find(&#123;title:/.*b$/&#125;).pretty() æŸ¥æ‰¾å«æœ‰â€™Fightâ€™æ ‡é¢˜çš„ç”µå½±ï¼š 12db.movie.find(&#123;title:/Fight/&#125;).pretty() æ³¨æ„ä»¥ä¸ŠåŒ¹é…éƒ½æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œå¦‚æœä½ è¦è®©å…¶ä¸åŒºåˆ†å¤§å°å†™ï¼Œåˆ™å¯ä»¥ï¼š 12db.movie.find(&#123;title:&#123;$regex:&#x27;fight.*b&#x27;,$options:&#x27;$i&#x27;&#125;&#125;).pretty() $iæ˜¯insensitiveçš„æ„æ€ã€‚è¿™æ ·çš„è¯ï¼Œå³ä½¿æ˜¯å°å†™çš„fightï¼Œä¹Ÿèƒ½æœåˆ°äº†ã€‚ 15. åè®°è‡³æ­¤ï¼ŒMongoDBçš„æœ€åŸºæœ¬çš„å†…å®¹å°±ä»‹ç»å¾—å·®ä¸å¤šäº†ã€‚å¦‚æœæœ‰ä»€ä¹ˆé—æ¼çš„ä»¥åæˆ‘ä¼šè¡¥ä¸Šä¾†ã€‚å¦‚æœä½ ä¸€è·¯çœ‹åˆ°åº•å®Œå…¨äº†è¿™ä¸ªå…¥é—¨æ•™ç¨‹ï¼Œæ­å–œä½ ï¼Œä½ ä¸€å®šæ˜¯ä¸€ä¸ªæœ‰æ¯…åŠ›çš„äººã€‚ æŠŠè¿™ä¸ªæ–‡æ¡£è¿‡ä¸€éï¼Œä¸ä¼šè®©ä½ å˜æˆä¸€ä¸ªMongoDBçš„ä¸“å®¶(å¦‚æœä¼šé‚£å°±å¤ªå¥‡æ€ªäº†)ã€‚ä½†å¦‚æœå®ƒèƒ½æˆ–å¤šæˆ–å°‘å‡å°‘ä½ ä¸Šæ‰‹çš„æ—¶é—´ï¼Œæˆ–è€…è®©ä½ æ„è¯†åˆ°â€œå’¦ï¼ŒMongoDBå…¶å®æ²¡é‚£ä¹ˆå¤æ‚â€ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•™ç¨‹çš„ç›®çš„ä¹Ÿå°±è¾¾åˆ°å•¦ã€‚ è¿™ä¸ªæ–‡æ¡£æ˜¯åŒ†å¿™å†™å°±çš„ï¼Œå‡ºé”™ç®€ç›´æ˜¯ä¸€å®šçš„ã€‚å¦‚æœæ‚¨å‘ç°äº†ä»»ä½•é”™è¯¯æˆ–è€…æœ‰å…³äºæœ¬æ–‡çš„ä»»ä½•å»ºè®®ï¼Œéº»çƒ¦å‘é‚®ä»¶ç»™æˆ‘ï¼ˆstevenslxie at gmail.comï¼‰æˆ–è€…åœ¨GitHubä¸Šç›´æ¥äº¤æµï¼Œä¸èƒœæ„Ÿæ¿€ã€‚ è½¬è½½å£°æ˜å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œå¯ä»¥éšæ„è½¬è½½ã€‚ä½†è¯· æ ‡æ˜åŸä½œè€…StevenSLXie; æ ‡æ˜åŸé“¾æ¥(https://github.com/StevenSLXie/Tutorials-for-Web-Developers/blob/master/MongoDB%20%E6%9E%81%E7%AE%80%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8.md); åœ¨å¯èƒ½çš„æƒ…å†µä¸‹è¯·ä¿æŒæ–‡æœ¬æ˜¾ç¤ºçš„ç¾è§‚ã€‚æ¯”å¦‚ï¼Œè¯·ä¸è¦ç›´æ¥ä¸€é”®å¤åˆ¶åˆ°åšå®¢ä¹‹ç±»ï¼Œå› ä¸ºä»£ç çš„æ˜¾ç¤ºæ•ˆæœå¯èƒ½éå¸¸ç³Ÿç³•; è¯·å°†è¿™ä¸ªè½¬è½½å£°æ˜åŒ…å«è¿›æ¥ï¼›","tags":[{"name":"mongodb","slug":"mongodb","permalink":"http://nullpointer.pw/tags/mongodb/"}]},{"title":"Javaç”Ÿæˆsitemapç½‘ç«™åœ°å›¾","date":"2018-10-21T12:47:31.000Z","path":"Javaç”Ÿæˆsitemapç½‘ç«™åœ°å›¾.html","text":"sitemap æ˜¯ä»€ä¹ˆï¼Ÿå¯¹åº”æ²¡æœ‰æ¥è§¦è¿‡ç½‘ç«™ SEO çš„åŒå­¦å¯èƒ½ä¸çŸ¥é“ï¼Œè¿™é‡Œå¼•ç”¨ä¸€ä¸‹ç™¾åº¦ç«™é•¿çš„ä¸€æ®µè§£é‡Šã€‚ Sitemapï¼ˆå³ç«™ç‚¹åœ°å›¾ï¼‰å°±æ˜¯æ‚¨ç½‘ç«™ä¸Šå„ç½‘é¡µçš„åˆ—è¡¨ã€‚åˆ›å»ºå¹¶æäº¤Sitemapæœ‰åŠ©äºç™¾åº¦å‘ç°å¹¶äº†è§£æ‚¨ç½‘ç«™ä¸Šçš„æ‰€æœ‰ç½‘é¡µã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨Sitemapæä¾›æœ‰å…³æ‚¨ç½‘ç«™çš„å…¶ä»–ä¿¡æ¯ï¼Œå¦‚ä¸Šæ¬¡æ›´æ–°æ—¥æœŸã€Sitemapæ–‡ä»¶çš„æ›´æ–°é¢‘ç‡ç­‰ï¼Œä¾›ç™¾åº¦Spiderå‚è€ƒ ç®€å•æ¥è¯´ï¼Œsitemap å°±æ˜¯æœç´¢å¼•æ“çˆ¬è™«ä¾¿äºçˆ¬å–åˆ°ç½‘ç«™å†…çš„æ‰€æœ‰ç½‘é¡µã€‚ SEOä¹‹åˆä¹‹å‰ç‰¹æ„é€šè¿‡ site æŒ‡ä»¤æŸ¥è¯¢è¿‡å…¬å¸åŒè¡Œä¸šç½‘ç«™çš„æ”¶å½•æƒ…å†µï¼Œå‘ç°æœç´¢å¼•æ“å¯¹äºæˆ‘å¸çš„ç½‘ç«™æ”¶å½•æ•°é‡çœŸçš„ä¸æ˜¯å·®äº†ä¸€æ˜ŸåŠç‚¹-.-ï¼ŒåŸå› å˜›ï¼Œå°±æ˜¯ä¸€ç›´æ²¡æœ‰ä¸“é—¨çš„äººåš SEO ä¼˜åŒ–å·¥ä½œã€‚ å‰å‡ ä¸ªæœˆæˆ‘å€’æ˜¯ç”Ÿæˆäº†ç½‘ç«™çš„ä¸€éƒ¨åˆ† sitemap æäº¤åˆ°ç¥é©¬æœç´¢ç«™é•¿å¹³å°ï¼Œä½†æ˜¯æ˜æ˜æ˜¯æŒ‰ç…§å®˜æ–¹æ–‡æ¡£æ ¼å¼ç”Ÿæˆçš„ï¼Œå´ä¸€ç›´æç¤ºæ ¼å¼ä¸å¯¹ï¼Œä¹Ÿä¸çŸ¥é“ä»€ä¹ˆæƒ…å†µï¼Œä¹Ÿæ²¡æœ‰å®˜æ–¹åé¦ˆæ¸ é“ï¼Œå°±ä¸äº†äº†ä¹‹äº†ã€‚æœ€è¿‘å…¬å¸æ–°æ‹›äº† SEO ä¸“å‘˜ï¼Œäºæ˜¯ä¾¿æœ‰äº†å®šæ—¶ç”Ÿæˆ sitemap æ–‡ä»¶çš„éœ€æ±‚ã€‚è¿™ç§ç”Ÿæˆçš„æ–‡ä»¶ä¸€èˆ¬éƒ½æ˜¯å¯¹å¤–ç›´æ¥å¯ä»¥è®¿é—®çš„ï¼Œå¯ä»¥é€šè¿‡ nginx é…ç½®é™æ€èµ„æºæ–‡ä»¶æ¥å®Œæˆã€‚ éœ€æ±‚æ¢è®¨sitemap çš„æ ¼å¼ä¸€èˆ¬æ˜¯ XML æ ¼å¼çš„ï¼Œç¬¬ä¸€ååº”å°±æ˜¯å¯ä»¥ä½¿ç”¨ DOM4J æ¥å®Œæˆï¼Œä½†æ˜¯åš SEO çš„åŒäº‹è¯´äº†ï¼Œå› ä¸º sitemap æ–‡ä»¶çš„é™åˆ¶ï¼ŒåŒä¸€ä¸ª sitemap æ–‡ä»¶æœ€å¤šæœ‰ 5 ä¸‡æ¡ URLï¼Œè¶…å‡º 5 ä¸‡æ¡ï¼Œå°±åº”è¯¥æ”¾å…¥åˆ°ä¸‹ä¸€ä¸ª sitemap æ–‡ä»¶å½“ä¸­å»ã€‚é€šè¿‡ DOM4J æ¥åšçš„è¯ï¼Œè¿˜éœ€è¦åˆ¤æ–­æ¡æ•°æ„Ÿè§‰æœ‰ç‚¹éº»çƒ¦(æ‡’)ï¼Œå°±ä¸Š gayhub æœäº†ä¸€ä¸‹ç›¸å…³çš„è½®å­ generate sitemapï¼Œæ‰¾åˆ°äº†ç°æˆçš„è½®å­ **sitemapgen4j**ï¼Œé¡¹ç›®çš„ README ä¸­ä½¿ç”¨æ–¹æ³•å†™çš„æ¯”è¾ƒå®Œå–„ï¼Œè¿™é‡Œä¸å†å¤šè¯´ã€‚ ä¸ºä»€ä¹ˆæ–‡æ¡£å¾ˆå®Œå–„çš„æƒ…å†µä¸‹ï¼Œæˆ‘è¦å†™è¿™ç¯‡åšå®¢å‘¢ï¼Ÿ(10æœˆç¬¬ä¸€ç¯‡ï¼Œå‡‘æ•°çš„(é€ƒ~) ä¸Šæ–‡æåˆ°äº†ï¼Œå¦‚æœè¶…å‡ºäº† 5 ä¸‡æ¡éœ€è¦å†™å…¥å¦å¤–ä¸€ä¸ª sitemap å½“ä¸­ï¼Œè¿™ä¸ªåŠŸèƒ½ sitemapgen4j å·²ç»æ›¿æˆ‘ä»¬å®ç°äº†ï¼Œæ— éœ€æ‹…å¿ƒã€‚å¦‚æœè¶…å‡ºï¼Œç”Ÿæˆçš„æ–‡ä»¶å°±åƒæ˜¯è¿™æ ·çš„ï¼š 1234- article1.xml- article2.xml- article3.xml- article4.xml è¿™æ ·çš„è¯ï¼Œåœ¨ç«™é•¿å¹³å°è¿™é‡Œï¼Œå¦‚æœæ–°å¢äº†æ–‡ä»¶å°±è¦æ–°å¢ä¸€æ¡sitemap ç½‘å€è®°å½•ï¼Œå¾ˆéº»çƒ¦ã€‚ å¥½åœ¨ï¼Œæœç´¢å¼•æ“è€ƒè™‘åˆ°äº†è¿™ç§é—®é¢˜ï¼Œæœ‰ç›¸åº”çš„è§£å†³æ–¹æ³•ã€‚ æˆ‘ä»¬æŠŠæ¯æ¬¡ç”Ÿæˆçš„ sitemap æ–‡ä»¶çš„åœ°å€ï¼Œæ·»åŠ åˆ°ä¸€ä¸ª sitemap ç´¢å¼•æ–‡ä»¶å½“ä¸­å»ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦å‘å¹³å°æäº¤ä¸€ä¸ª sitemap ç´¢å¼•æ–‡ä»¶çš„åœ°å€å³å¯ã€‚ ä¸å¤šè¯´ï¼Œä»£ç è§ã€‚ ç”Ÿæˆ sitemap æ–‡ä»¶é¦–å…ˆå¼•å…¥ sitemapgen4j ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;com.github.dfabulich&lt;/groupId&gt; &lt;artifactId&gt;sitemapgen4j&lt;/artifactId&gt; &lt;version&gt;1.1.1&lt;/version&gt;&lt;/dependency&gt; ç¼–å†™ç”Ÿæˆ sitemap ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657public void generateSitemap() &#123; String tempPath = &quot;/home/seo&quot;; //String tempPath = System.getProperty(&quot;java.io.tmpdir&quot;) + File.separator + &quot;/seo/&quot;; File file = new File(tempPath); if (!file.exists()) &#123; file.mkdirs(); &#125; String domain = &quot;https://www.domain.com&quot;; try &#123; WebSitemapGenerator g1 = WebSitemapGenerator.builder(domain, file) .fileNamePrefix(&quot;article&quot;).build(); Date date = new Date(); for (int i = 1; i &lt; 21; i++) &#123; WebSitemapUrl url = new WebSitemapUrl.Options(domain + &quot;/article/&quot; + i ).lastMod(date).build(); g1.addUrl(url); &#125; WebSitemapGenerator g2 = WebSitemapGenerator.builder(domain, file) .fileNamePrefix(&quot;issue&quot;).build(); Date date2 = new Date(); for (int i = 1; i &lt; 21; i++) &#123; WebSitemapUrl url = new WebSitemapUrl.Options(domain + &quot;/issue/&quot; + i ).lastMod(date2).build(); g2.addUrl(url); &#125; List&lt;String&gt; fileNames = new ArrayList&lt;&gt;(); // ç”Ÿæˆ sitemap æ–‡ä»¶ List&lt;File&gt; articleFiles = g1.write(); articleFiles.forEach(e -&gt; fileNames.add(e.getName())); List&lt;File&gt; issueFiles = g2.write(); issueFiles.forEach(e -&gt; fileNames.add(e.getName())); // æ„é€  sitemap_index ç”Ÿæˆå™¨ W3CDateFormat dateFormat = new W3CDateFormat(W3CDateFormat.Pattern.DAY); SitemapIndexGenerator sitemapIndexGenerator = new SitemapIndexGenerator .Options(domain, new File(tempPath + &quot;sitemap_index.xml&quot;)) .dateFormat(dateFormat) .autoValidate(true) .build(); fileNames.forEach(e -&gt; &#123; try &#123; // ç»„è£… sitemap æ–‡ä»¶ URL åœ°å€ sitemapIndexGenerator.addUrl(domain + &quot;/&quot; + e); &#125; catch (MalformedURLException e1) &#123; e1.printStackTrace(); &#125; &#125;); // ç”Ÿæˆ sitemap_index æ–‡ä»¶ sitemapIndexGenerator.write(); &#125; catch (MalformedURLException e) &#123; e.printStackTrace(); &#125;&#125; é€šè¿‡ Nginx æä¾›ç»™å¤–éƒ¨è®¿é—®æ–‡ä»¶å·²ç»ç”Ÿæˆäº†ï¼Œå°±éœ€è¦å¯¹å¤–æä¾›è®¿é—®äº†ï¼Œè¿™é‡Œä½¿ç”¨ nginx æ¥å®ç°ï¼Œå¦‚æœç”¨ apache ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ ä¸Šæ–‡ç”Ÿæˆçš„æ–‡ä»¶æˆ‘æ”¾åœ¨äº† /home/seo ç›®å½•ä¸‹ï¼Œæ–‡ä»¶æœ‰ 123456- seo - article1.xml - article2.xml - article3.xml - article4.xml - sitemap_index.xml ç°åœ¨ä¿®æ”¹ nginx é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œå› ä¸º sitemap ç”Ÿæˆä¸€ä»½å°±å¯ä»¥äº†ï¼Œä½†æ˜¯è¦é€šè¿‡åŸŸåèƒ½ç›´æ¥è®¿é—®åˆ°ï¼Œæ‰€ä»¥éœ€è¦åœ¨ nginx è·³è½¬ä¸€ä¸‹åˆ°æœ‰ sitemap æ–‡ä»¶çš„æœåŠ¡å™¨ã€‚ å­˜æ”¾ sitemap æ–‡ä»¶çš„ nginx é…ç½®å¦‚ä¸‹ 123456789101112131415server &#123; listen 8888; server_name 111.112.113.114; charset utf8; access_log logs&#x2F;access.log main; location &#x2F; &#123; alias &#x2F;home&#x2F;seo&#x2F;; sendfile on; autoindex on; autoindex_exact_size off; autoindex_localtime on; &#125;&#125; æ ¹åŸŸåçš„ nginx é…ç½®æ–‡ä»¶ 123456789101112131415server &#123; listen 80; server_name www.domain.com; charset utf8; access_log logs&#x2F;access.log main; location &#x2F;seo&#x2F; &#123; proxy_pass http:&#x2F;&#x2F;111.112.113.114:8888; &#125; location &#x2F; &#123; proxy_pass http:&#x2F;&#x2F;homeServer; &#125;&#125; æ³¨æ„: ç¬¬ä¸€ä¸ª locationå— ä¸­çš„ proxy_pass è¡Œå°¾æœ‰ä¸ª / www.domain.com/seo/sitemap_index.xmlå°±ä¼šåœ¨ www.domain.com è¿™é‡Œç›´æ¥åä»£åˆ° 111.112.113.114 è¿™å°æœåŠ¡å™¨ä¸Šäº†ã€‚ ç«™é•¿å¹³å°åªç”¨æäº¤è¿™ä¸€ä¸ª URL www.domain.com/seo/sitemap_index.xml å³å¯ã€‚ æœ‰ç–‘é—®?æ¬¢è¿æ¥ä¿¡ï¼Œç»™æˆ‘å†™ä¿¡","tags":[{"name":"javaç”Ÿæˆsitemap","slug":"javaç”Ÿæˆsitemap","permalink":"http://nullpointer.pw/tags/java%E7%94%9F%E6%88%90sitemap/"},{"name":"sitemapgen4jç”Ÿæˆsitemap","slug":"sitemapgen4jç”Ÿæˆsitemap","permalink":"http://nullpointer.pw/tags/sitemapgen4j%E7%94%9F%E6%88%90sitemap/"},{"name":"seo","slug":"seo","permalink":"http://nullpointer.pw/tags/seo/"}]},{"title":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…³é”®è¯é«˜äº®","date":"2018-09-17T13:27:03.000Z","path":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…³é”®è¯é«˜äº®.html","text":"å‰é¢å‡ ç¯‡æ–‡ç« è¯¦ç»†è®²è§£äº† ElasticSearch çš„æ­å»ºä»¥åŠä½¿ç”¨ SpringDataElasticSearch æ¥å®Œæˆæœç´¢æŸ¥è¯¢ï¼Œä½†æ˜¯æœç´¢ä¸€èˆ¬éƒ½ä¼šæœ‰æœç´¢å…³é”®å­—é«˜äº®çš„åŠŸèƒ½ï¼Œä»Šå¤©æˆ‘ä»¬æŠŠå®ƒç»™åŠ ä¸Šã€‚ ç³»åˆ—æ–‡ç«  ä¸€ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearché›†ç¾¤æ­å»º äºŒã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearchå…¥é—¨ ä¸‰ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹IKåˆ†è¯ä»¥åŠæ‹¼éŸ³åˆ†è¯ å››ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹Logstashå®æ—¶åŒæ­¥å»ºç«‹ç´¢å¼• äº”ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…¥é—¨ å…­ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…³é”®è¯é«˜äº® â€¦ ç¯å¢ƒä¾èµ–æœ¬æ–‡ä»¥åŠåç»­ es ç³»åˆ—æ–‡ç« éƒ½åŸºäº 5.5.3 è¿™ä¸ªç‰ˆæœ¬çš„ elasticsearch ï¼Œè¿™ä¸ªç‰ˆæœ¬æ¯”è¾ƒç¨³å®šï¼Œå¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ SpringDataElasticSearch çš„åŸºæœ¬ä½¿ç”¨å¯ä»¥çœ‹æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç«  å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…¥é—¨ï¼Œæœ¬æ–‡å°±ä¸å†èµ˜è¿°ã€‚ é«˜äº®å…³é”®å­—å®ç°å‰æ–‡æŸ¥è¯¢æ˜¯é€šè¿‡å†™ä¸€ä¸ªæ¥å£æ¥ç»§æ‰¿ ElasticsearchRepository æ¥å®ç°çš„ï¼Œä½†æ˜¯å¦‚æœè¦å®ç°é«˜äº®ï¼Œæˆ‘ä»¬å°±ä¸èƒ½è¿™æ ·åšäº†ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ° ElasticsearchTemplateæ¥å®Œæˆã€‚ æŸ¥çœ‹è¿™ä¸ªç±»çš„æºç  123public class ElasticsearchTemplate implements ElasticsearchOperations, ApplicationContextAware &#123; ...&#125; å¯ä»¥çœ‹åˆ°ï¼ŒElasticsearchTemplate å®ç°äº†æ¥å£ ApplicationContextAwareï¼Œæ‰€ä»¥è¿™ä¸ªç±»æ˜¯è¢« Spring ç®¡ç†çš„ï¼Œå¯ä»¥åœ¨ç±»é‡Œé¢ç›´æ¥æ³¨å…¥ä½¿ç”¨ã€‚ ä»£ç å¦‚ä¸‹: 123456789101112131415161718192021222324252627282930313233343536@Slf4j@Componentpublic class HighlightBookRepositoryTest extends EsSearchApplicationTests &#123; @Autowired private ElasticsearchTemplate elasticsearchTemplate; @Resource private ExtResultMapper extResultMapper; @Test public void testHighlightQuery() &#123; BookQuery query = new BookQuery(); query.setQueryString(&quot;ç©¿è¶Š&quot;); // å¤åˆæŸ¥è¯¢ BoolQueryBuilder boolQuery = QueryBuilders.boolQuery(); // ä»¥ä¸‹ä¸ºæŸ¥è¯¢æ¡ä»¶, ä½¿ç”¨ must query è¿›è¡ŒæŸ¥è¯¢ç»„åˆ MultiMatchQueryBuilder matchQuery = QueryBuilders.multiMatchQuery(query.getQueryString(), &quot;name&quot;, &quot;intro&quot;, &quot;author&quot;); boolQuery.must(matchQuery); PageRequest pageRequest = PageRequest.of(query.getPage() - 1, query.getSize()); NativeSearchQuery searchQuery = new NativeSearchQueryBuilder() .withQuery(boolQuery) .withHighlightFields( new HighlightBuilder.Field(&quot;name&quot;).preTags(&quot;&lt;span style=\\&quot;color:red\\&quot;&gt;&quot;).postTags(&quot;&lt;/span&gt;&quot;), new HighlightBuilder.Field(&quot;author&quot;).preTags(&quot;&lt;span style=\\&quot;color:red\\&quot;&gt;&quot;).postTags(&quot;&lt;/span&gt;&quot;)) .withPageable(pageRequest) .build(); Page&lt;Book&gt; books = elasticsearchTemplate.queryForPage(searchQuery, Book.class, extResultMapper); books.forEach(e -&gt; log.info(&quot;&#123;&#125;&quot;, e)); // &lt;span style=&quot;color:red&quot;&gt;ç©¿è¶Š&lt;/span&gt;å°é“äºº &#125;&#125; æ³¨æ„è¿™é‡Œ çš„ 1Page&lt;Book&gt; books = elasticsearchTemplate.queryForPage(searchQuery, Book.class, extResultMapper); è¿™é‡Œè¿”å›çš„æ˜¯åˆ†é¡µå¯¹è±¡ã€‚æŸ¥è¯¢æ–¹å¼å’Œä¸Šæ–‡çš„å·®ä¸å¤šï¼Œåªä¸è¿‡æ˜¯æ˜¯ Repository å˜æˆäº† ElasticsearchTemplateï¼Œæ“ä½œæ–¹å¼ä¹Ÿå¤§åŒå°å¼‚ã€‚ è¿™é‡Œç”¨åˆ°äº† ExtResultMapperï¼Œè¯·æ¥ç€çœ‹ä¸‹æ–‡ã€‚ è‡ªå®šä¹‰ResultMapperResultMapper æ˜¯ç”¨äºå°† ES æ–‡æ¡£è½¬æ¢æˆ Java å¯¹è±¡çš„æ˜ å°„ç±»ï¼Œå› ä¸º SpringDataElasticSearch é»˜è®¤çš„çš„æ˜ å°„ç±» DefaultResultMapper ä¸æ”¯æŒé«˜äº®ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å®šä¹‰ä¸€ä¸ª ResultMapperã€‚ å¤åˆ¶ DefaultResultMapper ç±»ï¼Œé‡å‘½åä¸º ExtResultMapperï¼Œå¯¹æ„é€ æ–¹æ³•åç§°ä¿®æ”¹ä¸ºæ­£ç¡®çš„å€¼ã€‚ æ–°å¢ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºå°†é«˜äº®çš„å†…å®¹èµ‹å€¼ç»™éœ€è¦è½¬æ¢çš„ Java å¯¹è±¡å†…ã€‚ åœ¨ mapResults æ–¹æ³•å†…è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ æ³¨æ„ï¼šè¿™ä¸ªç±»å¯ä»¥ç›´æ¥æ‹·è´åˆ°ä½ çš„é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ï¼æˆ‘å†™è¿™ä¹ˆå¤šï¼Œåªæ˜¯æƒ³è¯´æ˜ä¸ºä»€ä¹ˆè¿™ä¸ªç±»æ˜¯è¿™æ ·çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216import com.fasterxml.jackson.core.JsonEncoding;import com.fasterxml.jackson.core.JsonFactory;import com.fasterxml.jackson.core.JsonGenerator;import org.apache.commons.beanutils.PropertyUtils;import org.elasticsearch.action.get.GetResponse;import org.elasticsearch.action.get.MultiGetItemResponse;import org.elasticsearch.action.get.MultiGetResponse;import org.elasticsearch.action.search.SearchResponse;import org.elasticsearch.common.text.Text;import org.elasticsearch.search.SearchHit;import org.elasticsearch.search.SearchHitField;import org.elasticsearch.search.fetch.subphase.highlight.HighlightField;import org.springframework.data.domain.Pageable;import org.springframework.data.elasticsearch.ElasticsearchException;import org.springframework.data.elasticsearch.annotations.Document;import org.springframework.data.elasticsearch.annotations.ScriptedField;import org.springframework.data.elasticsearch.core.AbstractResultMapper;import org.springframework.data.elasticsearch.core.DefaultEntityMapper;import org.springframework.data.elasticsearch.core.EntityMapper;import org.springframework.data.elasticsearch.core.aggregation.AggregatedPage;import org.springframework.data.elasticsearch.core.aggregation.impl.AggregatedPageImpl;import org.springframework.data.elasticsearch.core.mapping.ElasticsearchPersistentEntity;import org.springframework.data.elasticsearch.core.mapping.ElasticsearchPersistentProperty;import org.springframework.data.mapping.context.MappingContext;import org.springframework.stereotype.Component;import org.springframework.util.Assert;import org.springframework.util.StringUtils;import java.io.ByteArrayOutputStream;import java.io.IOException;import java.lang.reflect.InvocationTargetException;import java.nio.charset.Charset;import java.util.*;/** * ç±»åç§°ï¼šExtResultMapper * ç±»æè¿°ï¼šè‡ªå®šä¹‰ç»“æœæ˜ å°„ç±» * åˆ›å»ºäººï¼šWeJan * åˆ›å»ºæ—¶é—´ï¼š2018-09-13 20:47 */@Componentpublic class ExtResultMapper extends AbstractResultMapper &#123; private MappingContext&lt;? extends ElasticsearchPersistentEntity&lt;?&gt;, ElasticsearchPersistentProperty&gt; mappingContext; public ExtResultMapper() &#123; super(new DefaultEntityMapper()); &#125; public ExtResultMapper(MappingContext&lt;? extends ElasticsearchPersistentEntity&lt;?&gt;, ElasticsearchPersistentProperty&gt; mappingContext) &#123; super(new DefaultEntityMapper()); this.mappingContext = mappingContext; &#125; public ExtResultMapper(EntityMapper entityMapper) &#123; super(entityMapper); &#125; public ExtResultMapper( MappingContext&lt;? extends ElasticsearchPersistentEntity&lt;?&gt;, ElasticsearchPersistentProperty&gt; mappingContext, EntityMapper entityMapper) &#123; super(entityMapper); this.mappingContext = mappingContext; &#125; @Override public &lt;T&gt; AggregatedPage&lt;T&gt; mapResults(SearchResponse response, Class&lt;T&gt; clazz, Pageable pageable) &#123; long totalHits = response.getHits().totalHits(); List&lt;T&gt; results = new ArrayList&lt;&gt;(); for (SearchHit hit : response.getHits()) &#123; if (hit != null) &#123; T result = null; if (StringUtils.hasText(hit.sourceAsString())) &#123; result = mapEntity(hit.sourceAsString(), clazz); &#125; else &#123; result = mapEntity(hit.getFields().values(), clazz); &#125; setPersistentEntityId(result, hit.getId(), clazz); setPersistentEntityVersion(result, hit.getVersion(), clazz); populateScriptFields(result, hit); // é«˜äº®æŸ¥è¯¢ populateHighLightedFields(result, hit.getHighlightFields()); results.add(result); &#125; &#125; return new AggregatedPageImpl&lt;T&gt;(results, pageable, totalHits, response.getAggregations(), response.getScrollId()); &#125; private &lt;T&gt; void populateHighLightedFields(T result, Map&lt;String, HighlightField&gt; highlightFields) &#123; for (HighlightField field : highlightFields.values()) &#123; try &#123; PropertyUtils.setProperty(result, field.getName(), concat(field.fragments())); &#125; catch (InvocationTargetException | IllegalAccessException | NoSuchMethodException e) &#123; throw new ElasticsearchException(&quot;failed to set highlighted value for field: &quot; + field.getName() + &quot; with value: &quot; + Arrays.toString(field.getFragments()), e); &#125; &#125; &#125; private String concat(Text[] texts) &#123; StringBuffer sb = new StringBuffer(); for (Text text : texts) &#123; sb.append(text.toString()); &#125; return sb.toString(); &#125; private &lt;T&gt; void populateScriptFields(T result, SearchHit hit) &#123; if (hit.getFields() != null &amp;&amp; !hit.getFields().isEmpty() &amp;&amp; result != null) &#123; for (java.lang.reflect.Field field : result.getClass().getDeclaredFields()) &#123; ScriptedField scriptedField = field.getAnnotation(ScriptedField.class); if (scriptedField != null) &#123; String name = scriptedField.name().isEmpty() ? field.getName() : scriptedField.name(); SearchHitField searchHitField = hit.getFields().get(name); if (searchHitField != null) &#123; field.setAccessible(true); try &#123; field.set(result, searchHitField.getValue()); &#125; catch (IllegalArgumentException e) &#123; throw new ElasticsearchException(&quot;failed to set scripted field: &quot; + name + &quot; with value: &quot; + searchHitField.getValue(), e); &#125; catch (IllegalAccessException e) &#123; throw new ElasticsearchException(&quot;failed to access scripted field: &quot; + name, e); &#125; &#125; &#125; &#125; &#125; &#125; private &lt;T&gt; T mapEntity(Collection&lt;SearchHitField&gt; values, Class&lt;T&gt; clazz) &#123; return mapEntity(buildJSONFromFields(values), clazz); &#125; private String buildJSONFromFields(Collection&lt;SearchHitField&gt; values) &#123; JsonFactory nodeFactory = new JsonFactory(); try &#123; ByteArrayOutputStream stream = new ByteArrayOutputStream(); JsonGenerator generator = nodeFactory.createGenerator(stream, JsonEncoding.UTF8); generator.writeStartObject(); for (SearchHitField value : values) &#123; if (value.getValues().size() &gt; 1) &#123; generator.writeArrayFieldStart(value.getName()); for (Object val : value.getValues()) &#123; generator.writeObject(val); &#125; generator.writeEndArray(); &#125; else &#123; generator.writeObjectField(value.getName(), value.getValue()); &#125; &#125; generator.writeEndObject(); generator.flush(); return new String(stream.toByteArray(), Charset.forName(&quot;UTF-8&quot;)); &#125; catch (IOException e) &#123; return null; &#125; &#125; @Override public &lt;T&gt; T mapResult(GetResponse response, Class&lt;T&gt; clazz) &#123; T result = mapEntity(response.getSourceAsString(), clazz); if (result != null) &#123; setPersistentEntityId(result, response.getId(), clazz); setPersistentEntityVersion(result, response.getVersion(), clazz); &#125; return result; &#125; @Override public &lt;T&gt; LinkedList&lt;T&gt; mapResults(MultiGetResponse responses, Class&lt;T&gt; clazz) &#123; LinkedList&lt;T&gt; list = new LinkedList&lt;&gt;(); for (MultiGetItemResponse response : responses.getResponses()) &#123; if (!response.isFailed() &amp;&amp; response.getResponse().isExists()) &#123; T result = mapEntity(response.getResponse().getSourceAsString(), clazz); setPersistentEntityId(result, response.getResponse().getId(), clazz); setPersistentEntityVersion(result, response.getResponse().getVersion(), clazz); list.add(result); &#125; &#125; return list; &#125; private &lt;T&gt; void setPersistentEntityId(T result, String id, Class&lt;T&gt; clazz) &#123; if (mappingContext != null &amp;&amp; clazz.isAnnotationPresent(Document.class)) &#123; ElasticsearchPersistentEntity&lt;?&gt; persistentEntity = mappingContext.getRequiredPersistentEntity(clazz); ElasticsearchPersistentProperty idProperty = persistentEntity.getIdProperty(); // Only deal with String because ES generated Ids are strings ! if (idProperty != null &amp;&amp; idProperty.getType().isAssignableFrom(String.class)) &#123; persistentEntity.getPropertyAccessor(result).setProperty(idProperty, id); &#125; &#125; &#125; private &lt;T&gt; void setPersistentEntityVersion(T result, long version, Class&lt;T&gt; clazz) &#123; if (mappingContext != null &amp;&amp; clazz.isAnnotationPresent(Document.class)) &#123; ElasticsearchPersistentEntity&lt;?&gt; persistentEntity = mappingContext.getPersistentEntity(clazz); ElasticsearchPersistentProperty versionProperty = persistentEntity.getVersionProperty(); // Only deal with Long because ES versions are longs ! if (versionProperty != null &amp;&amp; versionProperty.getType().isAssignableFrom(Long.class)) &#123; // check that a version was actually returned in the response, -1 would indicate that // a search didn&#x27;t request the version ids in the response, which would be an issue Assert.isTrue(version != -1, &quot;Version in response is -1&quot;); persistentEntity.getPropertyAccessor(result).setProperty(versionProperty, version); &#125; &#125; &#125;&#125; æ³¨æ„è¿™é‡Œä½¿ç”¨åˆ°äº† PropertyUtils ï¼Œéœ€è¦å¼•å…¥ä¸€ä¸ª Apache çš„ä¾èµ–ã€‚ 12345&lt;dependency&gt; &lt;groupId&gt;commons-beanutils&lt;/groupId&gt; &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt; &lt;version&gt;1.9.3&lt;/version&gt;&lt;/dependency&gt; è‡ªå®šä¹‰ ResultMapper å†™å¥½ä¹‹åï¼Œæ·»åŠ  @Component æ³¨è§£ï¼Œè¡¨ç¤ºä¸º Spring çš„ä¸€ä¸ªç»„ä»¶ï¼Œåœ¨ç±»ä¸­è¿›è¡Œæ³¨å…¥ä½¿ç”¨å³å¯ã€‚ æœ€åæœ¬æ–‡ç¤ºä¾‹é¡¹ç›®åœ°å€ï¼šhttps://github.com/Mosiki/SpringDataElasticSearchQuickStartExample æœ‰ç–‘é—®?æ¬¢è¿æ¥ä¿¡ï¼Œç»™æˆ‘å†™ä¿¡","tags":[{"name":"SpringDataElasticSearché«˜äº®","slug":"SpringDataElasticSearché«˜äº®","permalink":"http://nullpointer.pw/tags/SpringDataElasticSearch%E9%AB%98%E4%BA%AE/"},{"name":"SpringDataElasticSearchå…³é”®è¯é«˜äº®","slug":"SpringDataElasticSearchå…³é”®è¯é«˜äº®","permalink":"http://nullpointer.pw/tags/SpringDataElasticSearch%E5%85%B3%E9%94%AE%E8%AF%8D%E9%AB%98%E4%BA%AE/"},{"name":"ElasticsearchTemplateä½¿ç”¨","slug":"ElasticsearchTemplateä½¿ç”¨","permalink":"http://nullpointer.pw/tags/ElasticsearchTemplate%E4%BD%BF%E7%94%A8/"}]},{"title":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…¥é—¨","date":"2018-09-13T13:51:17.000Z","path":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…¥é—¨.html","text":"ç½‘ä¸Šå¤§å¤šé€šè¿‡ java æ“ä½œ es ä½¿ç”¨çš„éƒ½æ˜¯ TransportClientï¼Œè€Œä»‹ç»ä½¿ç”¨ SpringDataElasticSearch çš„æ–‡ç« ç›¸å¯¹æ¯”è¾ƒå°‘ï¼Œç¬”è€…ä¹Ÿæ˜¯æ‘¸ç´¢äº†è®¸ä¹…ï¼Œæ¥ä¸‹æ¥æœ¬æ–‡ä»‹ç» SpringDataElasticSearch çš„ api ä½¿ç”¨ï¼Œæ›´åŠ æ–¹ä¾¿çš„è¿›è¡ŒæŸ¥è¯¢ã€‚ ç³»åˆ—æ–‡ç«  ä¸€ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearché›†ç¾¤æ­å»º äºŒã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearchå…¥é—¨ ä¸‰ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹IKåˆ†è¯ä»¥åŠæ‹¼éŸ³åˆ†è¯ å››ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹Logstashå®æ—¶åŒæ­¥å»ºç«‹ç´¢å¼• äº”ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…¥é—¨ å…­ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…³é”®è¯é«˜äº® â€¦ ç¯å¢ƒä¾èµ–æœ¬æ–‡ä»¥åŠåç»­ es ç³»åˆ—æ–‡ç« éƒ½åŸºäº 5.5.3 è¿™ä¸ªç‰ˆæœ¬çš„ elasticsearch ï¼Œè¿™ä¸ªç‰ˆæœ¬æ¯”è¾ƒç¨³å®šï¼Œå¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ æœ¬æ–‡é¡¹ç›®åŸºäº SpringBoot 2.0.4.RELEASE è¿›è¡Œæ„å»ºï¼Œé¦–å…ˆå¼•å…¥ Spring Data ElasticSearch çš„ä¾èµ–ã€‚ æ³¨æ„ï¼šå› ä¸ºæ˜¯ Spring Boot é¡¹ç›®ï¼Œæ‰€ä»¥å¼•å…¥çš„ä¾èµ–æ˜¯ spring-boot-starter-data-elasticsearchï¼Œè€Œä¸æ˜¯ç›´æ¥å¼•å…¥ spring-data-elasticsearchã€‚ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;&lt;/dependency&gt; Spring Data ElasticSearch ä¸ ElasticSearch æœ‰å¯¹åº”å…³ç³» spring data elasticsearch elasticsearch 3.1.x 6.2.2 3.0.x 5.5.0 2.1.x 2.4.0 2.0.x 2.2.0 1.3.x 1.5.2 è€Œæœ¬æ–‡ä½¿ç”¨çš„ SpringBoot 2.0.4.RELEASE è‡ªåŠ¨ä¾èµ–çš„ Spring Data ElasticSearch ç‰ˆæœ¬æ˜¯ 3.0.9.RELEASEï¼Œå¯¹åº”çš„ elasticsearch ç‰ˆæœ¬æ˜¯ 5.5.xï¼Œå¯çŸ¥ä¾èµ–æ˜¯æ­£ç¡®çš„ç‰ˆæœ¬ã€‚ åˆ›å»º Document ç±»12345678910111213141516171819202122232425262728293031323334353637383940414243@Data@Document(indexName = &quot;novel&quot;, type = &quot;book&quot;, createIndex = false)public class Book implements Serializable &#123; private static final long serialVersionUID = 8504604495927552402L; /** * éœ€è¦æ·»åŠ  @Id æ ‡è¯†ä¸»é”® */ @Id private Integer id; private Integer words; private String intro; private String name; private Integer sort; private Boolean vip; private Integer site; private String author; private Integer collection; private Integer click; private Integer popularity; private Integer goods; private Integer status; /** * éœ€è¦è‡ªå®šä¹‰æ—¶é—´æ ¼å¼åŒ–æ ¼å¼ï¼Œå¦åˆ™ä¼šä½¿ç”¨é»˜è®¤æ—¶é—´æ ¼å¼åŒ– */ @JsonFormat (shape = JsonFormat.Shape.STRING, pattern =&quot;yyyy-MM-dd HH:mm:ss&quot;) private Date updatetime;&#125; è¿™ä¸ª Document ç±»å°è£…äº†ç´¢å¼•çš„å…¨éƒ¨å­—æ®µä¿¡æ¯ï¼Œæ³¨æ„å­—æ®µåç§°è¦ä¸ç´¢å¼•ç±»å‹çš„å­—æ®µåç§°ä¸€è‡´ã€‚ åˆ›å»º Repository æ¥å£123public interface BookRepository extends ElasticsearchRepository&lt;Book, Integer&gt; &#123;&#125; ç”¨è¿‡ SpringDataJPA çš„æœ‹å‹éƒ½åº”è¯¥çŸ¥é“ï¼ŒElasticsearchRepository çš„ä¸¤ä¸ªæ³›å‹åˆ†åˆ«ä¸º Documet ä»¥åŠ Document çš„ä¸»é”®ç±»å‹ã€‚ åˆ›å»ºæµ‹è¯•ç±»12345678910@Slf4j@SpringBootTest@RunWith(SpringRunner.class)public class BookRepositoryTest &#123; @Autowired private BookRepository bookRepository; &#125; æ¼”ç¤ºç®€å•æŸ¥è¯¢åŒ¹é…æŸ¥è¯¢(MatchQuery)è¿›è¡Œæ¨¡ç³ŠåŒ¹é…æŸ¥è¯¢ï¼Œè¿™é‡Œæ¼”ç¤ºçš„æ˜¯é€šè¿‡ name è¿™ä¸ªå­—æ®µè¿›è¡ŒæŸ¥è¯¢ 123456@Testpublic void findBook() &#123; MatchQueryBuilder matchQuery = QueryBuilders.matchQuery(&quot;name&quot;, &quot;ç«çˆ†å¨±ä¹å¤©ç‹&quot;); bookRepository.search(matchQuery) .forEach(e -&gt; log.info(&quot;ä½œå“ä¿¡æ¯ï¼š&#123;&#125;&quot;, e));&#125; é¡¹æŸ¥è¯¢(TermQuery)å®Œå…¨åŒ¹é…æŸ¥è¯¢ï¼Œè¿™é‡Œæ¼”ç¤ºæŸ¥è¯¢ id ä¸º 2 çš„æ•°æ® 1234567@Testpublic void findBook() &#123; TermQueryBuilder termQuery = QueryBuilders.termQuery(&quot;id&quot;, 2); bookRepository.search(termQuery) .forEach(e -&gt; log.info(&quot;ä½œå“ä¿¡æ¯ï¼š&#123;&#125;&quot;, e));&#125; èŒƒå›´æŸ¥è¯¢(Range Query)èŒƒå›´æŸ¥è¯¢ï¼Œè¿™é‡Œæ¼”ç¤ºæŸ¥è¯¢å­—æ•°åœ¨ 0-30w ä¹‹é—´çš„ä½œå“ 123456@Testpublic void findBook() &#123; RangeQueryBuilder rangeQuery = QueryBuilders.rangeQuery(&quot;words&quot;).gt(0).lt(300000); bookRepository.search(rangeQuery) .forEach(e -&gt; log.info(&quot;ä½œå“ä¿¡æ¯ï¼š&#123;&#125;&quot;, e));&#125; æ³¨æ„ï¼šå¦‚æœå¯¹æ—¶é—´è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼Œæ³¨æ„ä¸èƒ½ä¼ é€’ Date å¯¹è±¡æˆ–è€… æ¯«ç§’å€¼ï¼Œåªèƒ½ä¼ é€’ yyyy-MM-dd HH:mm:ss æ ¼å¼çš„å­—ç¬¦ä¸²æ—¶é—´å‚æ•°ã€‚ å¤åˆæŸ¥è¯¢ä»¥ä¸Šæ¼”ç¤ºäº†å‡ ä¸ªåŸºæœ¬æŸ¥è¯¢ï¼Œä½†æ˜¯å¦‚æœè¦å®ç°å¤šç­›é€‰æ¡ä»¶çš„æŸ¥è¯¢ï¼Œå°±éœ€è¦æŠŠå¤šä¸ªåŸºæœ¬æŸ¥è¯¢è¿›è¡Œç»„åˆï¼Œè¿™é‡Œå°±ç”¨åˆ°äº† bool æŸ¥è¯¢ ç°åœ¨æ¥å®ç°è¿™ä¸ªæŸ¥è¯¢ BookQuery å‚æ•°å°è£…ä½¿ç”¨ BookQuery ç±»å°è£…æŸ¥è¯¢å‚æ•° 12345678910111213141516171819202122232425262728293031@Datapublic class BookQuery &#123; private String queryString; private Integer page = 1; private Integer size = 20; private Integer wordsBegin; private Integer wordsEnd; private Integer sort; private Boolean vip; private Integer site; private Integer collection; private Integer click; private Integer popularity; private Integer goods; private Integer status; private Date updatetime;&#125; æŸ¥è¯¢æµ‹è¯•1234567891011121314151617181920212223242526272829303132333435363738@Testpublic void findBook() &#123; BookQuery query = new BookQuery(); query.setQueryString(&quot;é­”&quot;); query.setSite(2);// 1 æ˜¯ç”·ç”Ÿ 2 æ˜¯å¥³ç”Ÿ query.setSort(29); // 29 æ˜¯ç„å¹» query.setVip(true);// æŸ¥è¯¢ vip ä½œå“ query.setWordsBegin(0); // æŸ¥è¯¢å­—æ•°åœ¨ 0-25w ä¹‹é—´çš„ä½œå“ query.setWordsEnd(500000); query.setPage(1);// åˆ†é¡µé¡µç  query.setSize(10);// æ¯é¡µæ˜¾ç¤ºæ•° // å¤åˆæŸ¥è¯¢ BoolQueryBuilder boolQuery = QueryBuilders.boolQuery(); // ä»¥ä¸‹ä¸ºæŸ¥è¯¢æ¡ä»¶, ä½¿ç”¨ must query è¿›è¡ŒæŸ¥è¯¢ç»„åˆ MultiMatchQueryBuilder matchQuery = QueryBuilders.multiMatchQuery(query.getQueryString(), &quot;name&quot;, &quot;intro&quot;, &quot;author&quot;); boolQuery.must(matchQuery); // ä»¥ä¸‹ä¸ºè¿‡æ»¤ç­›é€‰æ¡ä»¶ï¼Œä½¿ç”¨ filter æ¯”ä½¿ç”¨ must query æ€§èƒ½è¦å¥½ TermQueryBuilder siteQuery = QueryBuilders.termQuery(&quot;site&quot;, query.getSite()); boolQuery.filter(siteQuery); TermQueryBuilder sortQuery = QueryBuilders.termQuery(&quot;sort&quot;, query.getSort()); boolQuery.filter(sortQuery); TermQueryBuilder vipQuery = QueryBuilders.termQuery(&quot;vip&quot;, query.getVip()); boolQuery.filter(vipQuery); RangeQueryBuilder wordsQuery = QueryBuilders.rangeQuery(&quot;words&quot;).gt(query.getWordsBegin()).lt(query.getWordsEnd()); boolQuery.filter(wordsQuery); Sort sort = Sort.by(Sort.Direction.DESC, &quot;click&quot;); // åˆ†é¡µ åŒæ—¶æ ¹æ® ç‚¹å‡»æ•° click è¿›è¡Œé™åºæ’åˆ— PageRequest pageRequest = PageRequest.of(query.getPage() - 1, query.getSize(), sort); log.info(&quot;&#123;&#125;&quot;, boolQuery); bookRepository.search(boolQuery, pageRequest) .forEach(e -&gt; log.info(&quot;ä½œå“ä¿¡æ¯ï¼š&#123;&#125;&quot;, e));&#125; æŸ¥å‡ºç»“æœï¼š 12342018-09-12 22:33:05.750 INFO 25896 --- [ main] i.g.mosiki.search.BookRepositoryTest : ä½œå“ä¿¡æ¯ï¼šBook(id=7, words=345004, intro= æ¨èã€Šå¯»é¾™ä¼ ã€‹ã€Šé­‚æ‘„å¤©ä¸‹ã€‹ ä½œå“å±ç„å¹»å¼‚ç•Œå¤§é™†é£æ ¼ï¼ å¯æƒœé¢‘é“ä¸èƒ½æ›´æ”¹åªèƒ½åœ¨å¥‡å¹»æ··ï¼ ä¹¦å‹ç¾¤ï¼š292... , name=ç­é­”æˆåœ£, sort=29, vip=true, site=2, author=ç­‰å¾…æ½‡æ¹˜è¯—ç¤¾, collection=13, click=63263, popularity=2314, goods=5353, status=0, updatetime=Tue Sep 04 16:54:15 CST 2018)2018-09-12 22:33:05.751 INFO 25896 --- [ main] i.g.mosiki.search.BookRepositoryTest : ä½œå“ä¿¡æ¯ï¼šBook(id=9, words=233000, intro= ä¸€ååœ°çƒçš„å¹³å‡¡çš„å°‘å¹´ï¼Œå› ä¸ºä¸€åœºæ¸¸æˆï¼Œè·å¾—æ­»ç¥çš„ä¼ æ‰¿ï¼Œä»è€Œç©¿è¶Šåˆ°å¦å¤–ä¸€ç‰‡é™Œç”Ÿçš„å¤§é™†ï¼Œä»æ­¤å¼€å¯äº†ä¸€æ®µä¼ å¥‡çš„äººç”Ÿï¼Œä¹å¤©æ˜Ÿæ²³ï¼Œå¾ä¹ƒæ­»ç¥ï¼ŒæŒæ§ç”Ÿæ­»ï¼Œåˆ¤å¤ºç½ªæ¶ï¼Œæˆ‘ä»æ²¡è§è¿‡åœ°ç‹±ï¼Œå› ä¸ºæˆ‘çš„åå­—ï¼Œä¾¿ä»£è¡¨åœ°ç‹±ï¼Œå¾ä¹ƒæ­»ç¥ï¼Œå¾åæ—å¤©ã€‚ï¼ˆPSï¼šå•å¥³ä¸»ï¼Œçˆ½æ–‡ä¸è™å¿ƒï¼Œä¸»è§’ä»¥æ€è¯é“ï¼Œæ€è¯¥æ€ä¹‹äººï¼Œä¸åœ£æ¯ï¼Œç•¥è…¹é»‘ï¼‰ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šå¸¦ç€æ­»ç¥å»ç©¿è¶Šã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼å¸¦ç€æ­»ç¥å»ç©¿è¶Šæœ€æ–°ç« èŠ‚,å¸¦ç€æ­»ç¥å»ç©¿è¶Šæ— å¼¹çª—,å¸¦ç€æ­»ç¥å»ç©¿è¶Šå…¨æ–‡é˜…è¯». , name=å¸¦ç€æ­»ç¥å»ç©¿è¶Š, sort=29, vip=true, site=2, author=æ¢¦ä¾, collection=6326, click=523, popularity=135, goods=34252, status=0, updatetime=Thu Dec 28 04:53:07 CST 2017)2018-09-12 22:33:05.751 INFO 25896 --- [ main] i.g.mosiki.search.BookRepositoryTest : ä½œå“ä¿¡æ¯ï¼šBook(id=5, words=490000, intro= å¯Œå®¶å­å¼Ÿå¢¨æµå› ä¸ºå‘ç°äº†æ‘å­ä¸­çš„ç§˜å¯†ï¼Œåœ¨è‰¯å¿ƒä¸äº²æƒ…çš„æŠ˜ç£¨ä¸‹ï¼Œé€ƒåˆ°äº†è¾¹å¢ƒå°åŸã€‚å› ä¸ºä¸€ä¸ªé¦™-è‰³è€Œåˆææ€–çš„æ¢¦ï¼Œå¢¨æµç»å†äº†ä¸€äº›è¯¡å¼‚çš„äº‹ï¼Œä»è€Œå¾—çŸ¥è‡ªå·±çš„å‰ä¸–ä¸ä»Šç”Ÿçš„ä½¿å‘½ã€‚è¸ä¸Šè—åœ°ï¼Œå†ç»ç£¨éš¾ï¼Œå…‹æœäº†è‡ªå·±çš„å¿ƒé­”ï¼Œæˆ˜èƒœäº†... , name=ä¼é­”, sort=29, vip=true, site=2, author=ä¸€å¶style, collection=526, click=9, popularity=41516, goods=7687, status=0, updatetime=Thu Sep 06 04:54:05 CST 2018) æœ€åSpringDataElasticSearch å…¥é—¨å°±åˆ°è¿™é‡Œäº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼Ÿ æœ¬æ–‡ç¤ºä¾‹é¡¹ç›®åœ°å€ï¼šhttps://github.com/Mosiki/SpringDataElasticSearchQuickStartExample æœ‰ç–‘é—®?æ¬¢è¿æ¥ä¿¡ï¼Œç»™æˆ‘å†™ä¿¡ å‚è€ƒ https://blog.csdn.net/tianyaleixiaowu/article/details/77965257 https://tech.youzan.com/search-engine1/#43filteredquery","tags":[{"name":"SpringDataElasticSearchä½¿ç”¨æ•™ç¨‹","slug":"SpringDataElasticSearchä½¿ç”¨æ•™ç¨‹","permalink":"http://nullpointer.pw/tags/SpringDataElasticSearch%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"},{"name":"SpringDataElasticSearchæŸ¥è¯¢","slug":"SpringDataElasticSearchæŸ¥è¯¢","permalink":"http://nullpointer.pw/tags/SpringDataElasticSearch%E6%9F%A5%E8%AF%A2/"},{"name":"SpringDataElasticSearchå…¥é—¨","slug":"SpringDataElasticSearchå…¥é—¨","permalink":"http://nullpointer.pw/tags/SpringDataElasticSearch%E5%85%A5%E9%97%A8/"}]},{"title":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹Logstashå®æ—¶åŒæ­¥å»ºç«‹ç´¢å¼•","date":"2018-09-13T13:48:38.000Z","path":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹Logstashå®æ—¶åŒæ­¥å»ºç«‹ç´¢å¼•.html","text":"ç”¨è¿‡ Solr çš„æœ‹å‹éƒ½çŸ¥é“ï¼ŒSolr å¯ä»¥ç›´æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æ•°æ®åº“è¿æ¥ä»è€Œå®Œæˆç´¢å¼•çš„åŒæ­¥åˆ›å»ºï¼Œä½†æ˜¯ ElasticSearch æœ¬èº«å¹¶ä¸å…·å¤‡è¿™æ ·çš„åŠŸèƒ½ï¼Œé‚£å¦‚ä½•å»ºç«‹ç´¢å¼•å‘¢ï¼Ÿæ–¹æ³•å…¶å®å¾ˆå¤šï¼Œå¯ä»¥ä½¿ç”¨ Java API çš„æ–¹å¼å»ºç«‹ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Logstash çš„æ’ä»¶ logstash-input-jdbc å®Œæˆï¼Œä»Šå¤©æ¥æ¢è®¨ä¸‹å¦‚ä½•ä½¿ç”¨ logstash-input-jdbc å®Œæˆå…¨é‡åŒæ­¥ä»¥åŠå¢é‡åŒæ­¥ã€‚ ç¯å¢ƒæœ¬æ–‡ä»¥åŠåç»­ es ç³»åˆ—æ–‡ç« éƒ½åŸºäº 5.5.3 è¿™ä¸ªç‰ˆæœ¬çš„ elasticsearch ï¼Œè¿™ä¸ªç‰ˆæœ¬æ¯”è¾ƒç¨³å®šï¼Œå¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ é»˜è®¤ä½ å·²ç»æ­å»ºå¥½ es çš„åŸºç¡€ç¯å¢ƒï¼Œå¦‚è¿˜æœªæ­å»ºå¥½ï¼Œè¯·å‚è€ƒå‰æ–‡ã€‚æ¥ä¸‹æ¥åªè®²è§£ logstash çš„å®‰è£…ä½¿ç”¨ã€‚æœ¬æ–‡ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ logstash ï¼Œç‰ˆæœ¬å·ä¸º 6.4.0ã€‚ ç³»åˆ—æ–‡ç«  ä¸€ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearché›†ç¾¤æ­å»º äºŒã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearchå…¥é—¨ ä¸‰ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹IKåˆ†è¯ä»¥åŠæ‹¼éŸ³åˆ†è¯ å››ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹Logstashå®æ—¶åŒæ­¥å»ºç«‹ç´¢å¼• äº”ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…¥é—¨ å…­ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…³é”®è¯é«˜äº® â€¦ æ•°æ®å‡†å¤‡ å¦‚å›¾æ‰€ç¤ºï¼Œå¦‚æœè¦å®ç°è¿™ä¸ªæœç´¢ï¼Œé¦–å…ˆè¦åˆ›å»ºç›¸å…³çš„ç´¢å¼•ï¼Œç­›é€‰æ¡ä»¶æœ‰ç”·ç”Ÿ/å¥³ç”Ÿï¼Œè¿˜æœ‰åˆ†ç±»ï¼Œå±æ€§ï¼Œå­—æ•°ï¼Œè¿è½½çŠ¶æ€ï¼Œå“è´¨ç­‰ï¼Œæ’åºæ¡ä»¶æœ‰äººæ°”ï¼Œæ—¶é—´ï¼Œå­—æ•°ï¼Œæ”¶è—ï¼Œæ¨èï¼Œç‚¹å‡»ã€‚ è¿™äº›æ•°æ®æ­£å¸¸éƒ½ä¸ä¼šå†åŒä¸€å¼ è¡¨å½“ä¸­ï¼Œè€Œæ˜¯åˆ†å¸ƒäºä¸åŒçš„è¡¨ä¸­ï¼Œä½†è¿™äº›æ•°æ®éƒ½ä¸ä½œå“çš„ id ç´§ç´§å…³è”ã€‚æœ¬æ–‡ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼ŒæŠŠè¿™äº›æ•°æ®éƒ½æ”¾åœ¨åŒä¸€å¼ è¡¨å½“ä¸­ï¼Œå¦‚æœåœ¨å®é™…ä½¿ç”¨çš„è¿‡ç¨‹å½“ä¸­ï¼Œå¦‚æœé‡åˆ°å¤šå¼ è¡¨çš„æƒ…å†µï¼Œå¯ä»¥å†™ sql è¿›è¡Œè”åˆæŸ¥è¯¢ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥å»ºç«‹ç´¢å¼•ï¼Œå®ç°æ–¹å¼è¯¦è§ä¸‹æ–‡ã€‚ åˆ›å»ºè¡¨ç»“æ„12345678910111213141516171819CREATE TABLE `book` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `create_time` datetime(0) NULL DEFAULT NULL, `update_time` datetime(0) NULL DEFAULT NULL, `status` tinyint(11) NULL DEFAULT NULL, `name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL, `intro` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL, `icon` int(11) NULL DEFAULT NULL, `author` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL, `words` int(11) NULL DEFAULT NULL, `collection` int(11) NULL DEFAULT NULL, `goods` int(11) NULL DEFAULT NULL, `click` int(11) NULL DEFAULT NULL, `site` tinyint(11) NULL DEFAULT NULL, `sort` tinyint(11) NULL DEFAULT NULL, `vip` tinyint(11) NULL DEFAULT NULL, `popularity` int(11) NULL DEFAULT NULL, PRIMARY KEY (`id`) USING BTREE) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_bin ; å¯¼å…¥æµ‹è¯•æ•°æ®æ³¨ï¼šæµ‹è¯•æ•°æ®æ˜¯é€šè¿‡çˆ¬è™«åœ¨ç›—ç‰ˆç½‘ç«™æŠ“çš„ï¼Œä¸ªåˆ«æ•°æ®èƒ¡ä¹±å¡«å†™çš„ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (1, &#x27;2017-12-27 20:53:01&#x27;, &#x27;2018-09-10 20:53:46&#x27;, 0, &#x27;ç«çˆ†å¨±ä¹å¤©ç‹&#x27;, &#x27; æœ‰äººè¯´ï¼šâ€œä»–æ˜¯è‡³é«˜æ— ä¸Šçš„éŸ³ä¹æ•™çš‡ï¼â€æœ‰äººè¯´ï¼šâ€œä»–æ˜¯æ— äººèƒ½åŠçš„å½±è§†å›½ç‹ï¼â€è¿˜æœ‰äººè¯´ï¼šâ€œä»–æ˜¯ç¥çº§ä½œå®¶ã€è¯å‰§å¤§å¸ˆã€ä¼Ÿå¤§çš„éŸ³ä¹å®¶â€¦â€¦â€ä»–ä½¿åå¤å…ƒç´ ç‹‚æš´å†²å‡»è¥¿æ–¹æ–‡åŒ–ï¼Œå´åˆèƒ½åšå‡ºä»¤è¥¿æ–¹äººä¹Ÿä¸åŠçš„æ¬§ç¾éŸ³ä¹å½±è§†ã€‚ä»–é€ å°±äº†æ— æ•°çš„æ­Œæ˜Ÿå½±æ˜Ÿï¼Œåˆ›ä½œå‡ºæ— æ•°çš„ç»å…¸ï¼Œå»ºç«‹äº†ä¸€ä¸ªåºå¤§çš„å¨±ä¹å¸å›½ã€‚å½“æ‰€æœ‰äººç§°é¢‚ä»–è†œæ‹œä»–çš„æ—¶å€™ï¼Œåªæœ‰ä»–è‡ªå·±çŸ¥é“ï¼Œä»–ä¸è¿‡æ˜¯ä¸€ä¸ªæ„å¤–æ¥è‡ªå¼‚æ—¶ç©ºçš„æ–‡åŒ–ä½¿è€…ã€‚ &#x27;, 1, &#x27;èŒ¶ä¸é…’ä¹‹æ­Œ&#x27;, 230000, 4234, 42315, 523, 2, 9, 1, 12423);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (2, &#x27;2017-12-27 20:53:01&#x27;, &#x27;2017-12-27 20:53:03&#x27;, 0, &#x27;æ— é™å¹³è¡Œè¿›åŒ–&#x27;, &#x27; æ—¥å¤ä¸€æ—¥çš„æ¯ç‡¥ç”Ÿæ´»è®©å»–å®‡å¼€å§‹äº§ç”Ÿäº†éš¾ä»¥æŠ‘åˆ¶çš„åŒå€¦ã€‚æ²‰é‡åºå¤§çš„ç»æµè´Ÿæ‹…ä½¿ä»–çš„ç”Ÿæ´»å¼€å§‹äº§ç”Ÿäº†å˜åŒ–ã€‚å†å²çš„ç¼ºå¤±æ›´æ˜¯æˆä¸ºäº†ä»–å¿ƒä¸­ä¸æ•£çš„è°œå›¢ã€‚æŸä¸€å¤©çªå¦‚å…¶æ¥çš„é™Œç”Ÿä¿¡æ¯ç»ˆäºç»™ä»–æ‰“å¼€äº†ä¸€æ‰‡é—¨ã€‚æ€§æ ¼å„å¼‚çš„Xæˆ˜è­¦ä¸å¤æ‚åºå¤§çš„å¤ä»‡è€…è”ç›Ÿä¼šå†åº¦çˆ†å‘æ€æ ·çš„æˆ˜äº‰ã€‚åŠ å‹’æ¯”æµ·ä¸Šæ˜¯å¦è¿˜ä¼šæ‰¬èµ·ç¬¬å››è‰˜ä¼ å¥‡æˆ˜èˆ°çš„æ——å¸œã€‚é“ºå¤©ç›–åœ°çš„å®‡å®™è™«æ—ä¸å†°å†·æœºæ¢°çš„äººå·¥æ™ºèƒ½è°æ‰æ˜¯æœ€å…·æœ‰ä¾µç•¥æ€§çš„æ–‡æ˜ã€‚æœ€ç»ˆå»–å®‡ä¼šå¦‚ä½•é€‰æ‹©ï¼Œå‘å·¦è¿˜æ˜¯å‘å³â€¦â€¦ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šæ— é™å¹³è¡Œè¿›åŒ–ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼æ— é™å¹³è¡Œè¿›åŒ–æœ€æ–°ç« èŠ‚,æ— é™å¹³è¡Œè¿›åŒ–æ— å¼¹çª—,æ— é™å¹³è¡Œè¿›åŒ–å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;é›ªè‰²é“¶ç‹¼CS&#x27;, 555555, 450000, 13412, 555, 2, 9, 1, 342);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (3, &#x27;2017-12-27 20:53:02&#x27;, &#x27;2018-09-15 20:53:55&#x27;, 0, &#x27;é€†å¤©è¯ç¥&#x27;, &#x27; ä¸€ä¸ªæ„å¤–ï¼Œè®©ä»–åœ¨æ˜Ÿç©ºçš„å½¼å²¸ä¸¤åœ°ç›¸æœ›ã€‚ä¸‰äººæºæ‰‹ï¼Œæ€å‡ºäº†è¿™ç‰‡å¤§é™†çš„å››æ–¹å¨åã€‚ä»–ï¼Œå¼ å‡¡ï¼Œæ—¢ç„¶è·å¾—æ–°ç”Ÿï¼Œå°±ç»ä¸å†åšå¼±è€…ã€‚æ—¢ç„¶è¦æˆä¸ºå¼ºè€…ï¼Œå°±å¿…é¡»è®©è¿™ç‰‡æ˜Ÿç©ºé¢¤æŠ–ï¼â€œæ—¢ç„¶æ˜¯æˆ‘çš„æœªæ¥ï¼Œé‚£ä¾¿åªèƒ½ç”±æˆ‘ä¸»å®°â€ &#x27;, 1, &#x27;æ«å¶&#x27;, 340000, 213334, 3421, 42314, 2, 9, 1, 52315);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (4, &#x27;2017-12-27 20:53:02&#x27;, &#x27;2018-08-16 20:53:59&#x27;, 0, &#x27;é”¦ç»£é£åä¹‹ç¬¬ä¸€å†œå®¶å¥³1&#x27;, &#x27; å‰ä¸–å¥¹æ˜¯é“è¡€æ‰‹è…•çš„å¸å›½é›†å›¢æ€»è£ï¼Œå´è¢«å¿ƒçˆ±ä¹‹äººè®¾è®¡ï¼Œé­‚å½’å¤©å›½ã€‚ å†æ¬¡ççœ¼ï¼Œçœ¼å‰çš„ä¸‰é—´èŒ…è‰å±‹ï¼Œä¸€å¯¹å°ç˜¦çŒ´ã€‚ å°±ç®—æ˜¯å¥¹å®šåŠ›å†å¼ºæ‚ï¼Œåœ¨ä»–ä»¬å–Šå‡ºé‚£å£°â€œå¨˜â€çš„æ—¶å€™ï¼Œè¿˜æ˜¯è®©å¥¹å·®ç‚¹æ²¡è·³èµ·æ¥ã€‚ å‰ä¸–æ´»åˆ°28è¿˜æ˜¯æ¸…ç™½å¦‚å…°ï¼Œä¸€ä¸ªç©¿è¶Šå°±è®©å¥¹å‹‰å¼ºç®—æ˜¯Bçš„èº«æï¼Œå­•è‚²å‡ºä¸€å¯¹å„¿å¥³ï¼Ÿ å½“ç„¶ï¼Œè¿™è¿˜æ˜¯å…¶æ¬¡ï¼Œæœ€é‡è¦çš„æ˜¯å¥¹ä¸«çš„å±…ç„¶æ˜¯æœªå©šç”Ÿå­ï¼Œè¿™åœ¨ç°ä»£éƒ½é­äººç™½çœ¼çš„äº‹æƒ…ï¼Œé‚£ä¸ªå¤©æ€çš„èƒ½å‘Šè¯‰å¥¹ï¼Œè¿™ä¸ªèº«ä½“çš„åŸä¸»ï¼Œæ˜¯ä¸æ˜¯å¤ªç‰›å‰äº†ï¼Œå±…ç„¶æ²¡æœ‰è¢«æµ¸çŒªç¬¼ã€‚ åªæ˜¯ï¼Œå½“è¿™å¯¹ç˜¦çš„çš®åŒ…éª¨çš„å°åŒ…å­åœ¨å¥¹è·Ÿå‰ï¼Œè‚¿ç€ä¸¤å¯¹çœ¼æ³¡å¿è€…æ³ªèŠ±è·‘å‰è·‘åï¼Œå°±ç®—æ˜¯å¥¹å†ä¸æƒ³é¢å¯¹ç°å®ï¼Œä¹Ÿæ— æ³•åè§†ä¸ç†ã€‚ æ—¢ç„¶è®©å¥¹å†æ¬¡é‡ç”Ÿï¼Œå¥¹åŠ¿å¿…è¦å·¦æ‰‹æŒ¥èˆé”„å¤´ï¼Œå³æ‰‹æ‰§ç¬”ç®—ç›˜ï¼Œå¸¦ç€ä¸€å¯¹å¯çˆ±çš„åŒ…å­ï¼Œå‘å®¶è‡´å¯Œã€‚ è´­ç”°åœ°ï¼Œå»ºè±ªå®…ï¼Œä¹°ä¸‹äººï¼Œé¡¾é•¿å·¥ï¼Œä¸€åˆ‡éƒ½å†æœç€è®©å¥¹æ»¡æ„çš„æ–¹å‘å‰è¿›ï¼Œè€Œé‚£äº›çœ¼çº¢å«‰å¦’ä¹‹è¾ˆï¼Œå®Œå…¨éƒ½æ˜¯å¥¹ä¸šä½™ä¹‹æ—¶çš„æ¶ˆé£ï¼Œæ ¹æœ¬å°±ä¸æ˜¯ä¸€ä¸ªç­‰çº§ã€‚ ä½†æ˜¯ï¼Œå¸¸åœ¨æ²³è¾¹èµ°ï¼Œå“ªæœ‰ä¸æ¹¿é‹ï¼Œè¿™ä¸ªé“ç†å¥¹æ˜ç™½ï¼Œå´æ²¡æƒ³åˆ°é‚£é‹å­ä¼šæ¹¿çš„è¿™ä¹ˆå¿«ï¼Œé¢å¯¹é‚£ä¸ªå¦‚åŒå¦–å­½èˆ¬ï¼Œè¡¨é¢è°¦è°¦å…¬å­ï¼Œé£åæ— åŒï¼Œå®åˆ™è…¹é»‘ç‹¡è¯ˆï¼Œæ€ä¹ˆå‘æ­»å¥¹æ€ä¹ˆæ¥ï¼Œè¿˜è®©å¥¹æœ‰ç«æ²¡å¤„å‘ã€‚ ç²¾å½©å°å‰§åœº å½“ä¸€å¯¹ç²‰é›•ç‰ç¢çš„åŒ…å­è¢«ä¸€ä¸ªé£åç»ä»£çš„ç”·äººä¸€æ‰‹ä¸€ä¸ªæŠ±è¿›æ¥ï¼Œå›ç‘¶çœŸå¿ƒçš„é»‘é¢äº†ï¼Œæ³ªå¥”äº†ã€‚ ä»–ä»¬è¿™ä¸¤ä¸ªæ²¡è‰¯å¿ƒçš„åˆ°åº•æ˜ä¸æ˜ç™½ï¼Œä»€ä¹ˆæ˜¯å¼•ç‹¼å…¥å®¤å•Šã€‚ â€œå¤šè°¢å®å…¬å­é€ä»–ä»¬å›æ¥ï¼Œæ‚¨çœ‹å¦‚ä»Šå¤©è‰²å·²æ™šï¼Œä¸ºäº†å®å…¬å­çš„åå£°ï¼Œå°å¦‡äººä¹Ÿä¸æ•¢ä¹…ç•™ï¼Œå®å…¬å­è¯·å›å§ã€‚â€å¥¹å¿«æ­¥ä¸Šå‰ï¼Œä¸€æŠŠä¸€ä¸ªæŠŠå°åŒ…å­ä»é‚£ä¸ªç”·äººæ€€é‡Œè’¿å‡ºæ¥ï¼Œå¿«è¨€å¿«è¯­çš„ä¸‹äº†é€å®¢ä»¤ã€‚ ç”·äººå¥½çœ‹çš„çœ‰æ¯›å¾®æŒ‘ï¼Œéšåä¸€æ¨¡æƒ…ç»ªä»çœ¸ä¸­è¿…é€Ÿåˆ’è¿‡ï¼Œå¿«çš„éš¾ä»¥æ•æ‰ã€‚ â€œæ— å¦¨ï¼Œæˆ‘æ¥é™ªé™ªè¿™ä¸¤ä¸ªå°å®¶ä¼™ï¼Œå›å¨˜å­ä¸å¿…å¤šå¿ƒã€‚â€ â€œæˆ‘â€¦â€å¥¹å·®ç‚¹æ²¡è¢«å™æ­»ï¼Œå¥¹æœ‰ä»€ä¹ˆå¥½å¤šå¿ƒçš„ï¼Œå°±å†²ç€ä»–è§Šè§å¥¹çš„å­©å­ï¼Œå°±ä¸èƒ½è®©å¥¹ç•™ä¸‹ã€‚ åªæ˜¯å¥¹çš„è¯æ²¡æœ‰è¯´å®Œï¼Œå°±è¢«ç”·äººè´´é¢è€Œæ¥çš„ä¿Šå½¦å“å¾—å‘åé€€å»ï¼Œè€Œç”·äººå«ç¬‘çš„é»‘çœ¸å’Œæ¸…æ·¡çš„è¯è¯­ï¼Œå´è®©å¥¹å·®ç‚¹æ€’ç«ç‹‚é£™ï¼Œâ€œè¿˜æ˜¯ä½ æƒ³æˆ‘æŠŠä»–ä»¬å¸¦å›å»ï¼Ÿâ€ å›ç‘¶å¤§æƒŠï¼Œå¸¦å›å»ï¼Ÿé‚£æ˜¯ç»å¯¹ä¸å¯èƒ½çš„ï¼Œå¥¹çš„å„¿å¥³ï¼Œè°æ•¢æ‰“ä¸»æ„ï¼Œè°å°±æ²¡æ´»è·¯ï¼Œè¯è™½ç„¶å¾ˆç›´ç™½ï¼Œå´ç‹¬ç‹¬å¯¹ä»–ä¸ç®¡ç”¨ã€‚ &#x27;, 1, &#x27;å¸­å¦–å¦–&#x27;, 444902, 23, 5353, 21323, 2, 9, 1, 314);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (5, &#x27;2017-12-27 20:53:02&#x27;, &#x27;2018-09-05 20:54:05&#x27;, 0, &#x27;ä¼é­”&#x27;, &#x27; å¯Œå®¶å­å¼Ÿå¢¨æµå› ä¸ºå‘ç°äº†æ‘å­ä¸­çš„ç§˜å¯†ï¼Œåœ¨è‰¯å¿ƒä¸äº²æƒ…çš„æŠ˜ç£¨ä¸‹ï¼Œé€ƒåˆ°äº†è¾¹å¢ƒå°åŸã€‚å› ä¸ºä¸€ä¸ªé¦™-è‰³è€Œåˆææ€–çš„æ¢¦ï¼Œå¢¨æµç»å†äº†ä¸€äº›è¯¡å¼‚çš„äº‹ï¼Œä»è€Œå¾—çŸ¥è‡ªå·±çš„å‰ä¸–ä¸ä»Šç”Ÿçš„ä½¿å‘½ã€‚è¸ä¸Šè—åœ°ï¼Œå†ç»ç£¨éš¾ï¼Œå…‹æœäº†è‡ªå·±çš„å¿ƒé­”ï¼Œæˆ˜èƒœäº†... &#x27;, 1, &#x27;ä¸€å¶style&#x27;, 490000, 526, 7687, 9, 2, 29, 1, 41516);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (6, &#x27;2017-12-27 20:53:02&#x27;, &#x27;2018-09-10 00:54:10&#x27;, 0, &#x27;å¼ºçˆ±ä¹‹ç‹¬å®¶æ‹¥æœ‰&#x27;, &#x27; å¥¹æ˜¯åè´µåƒé‡‘ï¼Œä»–æ˜¯å•†ç•Œç²¾è‹±ã€‚ ä»–ä»¬çš„è®¢å©šç¤¼ä¸Šï¼Œå¥¹æƒ¨é­èƒŒå›ã€‚ çˆ¶äº²æ°”è¡€æ”»å¿ƒå½“åœºæ˜å€’ï¼Œå†ä¹Ÿæ²¡æœ‰é†’æ¥ã€‚ è‡ªå·±æ›´è¢«æœªå©šå¤«åºŠä¸Šçš„å¥³äººé™·å®³å…¥ç‹±. è«ä»²æ™–è¿™ä¸ªè®©å¥¹åˆçˆ±åˆæ¨çš„ç”·äººå‡ ä¹æˆäº†å¥¹è¿™ä¸‰å¹´çš„æ¢¦é¥ã€‚ ä¸‰å¹´çš„ç‰¢ç‹±ï¼Œå†å‡ºæ¥ï¼Œå¥¹ä¸€æ— æ‰€æœ‰ï¼Œè€Œä»–å·²æ˜¯æ±ŸåŸç¿»æ‰‹ä¸ºäº‘è¦†æ‰‹ä¸ºé›¨çš„ç¥ç§˜è§’è‰²ã€‚ &#x27;, 1, &#x27;æ²³æ¸…æµ·æ™ä¸ƒä¸ƒ&#x27;, 980000, 513, 212342, 36236, 2, 29, 1, 1142314);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (7, &#x27;2017-12-27 20:53:02&#x27;, &#x27;2018-09-04 08:54:15&#x27;, 0, &#x27;ç­é­”æˆåœ£&#x27;, &#x27; æ¨èã€Šå¯»é¾™ä¼ ã€‹ã€Šé­‚æ‘„å¤©ä¸‹ã€‹ ä½œå“å±ç„å¹»å¼‚ç•Œå¤§é™†é£æ ¼ï¼ å¯æƒœé¢‘é“ä¸èƒ½æ›´æ”¹åªèƒ½åœ¨å¥‡å¹»æ··ï¼ ä¹¦å‹ç¾¤ï¼š292... &#x27;, 1, &#x27;ç­‰å¾…æ½‡æ¹˜è¯—ç¤¾&#x27;, 345004, 13, 5353, 63263, 2, 29, 1, 2314);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (8, &#x27;2017-12-27 20:53:03&#x27;, &#x27;2018-09-03 21:54:27&#x27;, 0, &#x27;æˆ‘çš„åˆç§Ÿç¾å¥³æ€»è£&#x27;, &#x27; å’Œç¾å¥³åŒå±…æ˜¯ä¸€ä»¶å¾ˆå¿«ä¹å¾ˆäº«å—çš„äº‹æƒ…å—ï¼Ÿçœ‹çœ‹å…µç‹æ›¹å°é›·è„¸ä¸Šè›‹è›‹çš„å¿§ä¼¤ï¼Œå¤§å®¶è¿˜æ˜¯é†’é†’å§ï¼ä»–å¥½æƒ³å¥½æƒ³å‘Šè¯‰éš”å£æˆ¿é—´çš„åˆ˜è–‡è–‡ï¼Œèƒ½ä¸èƒ½åˆ«åœ¨å®¢å…é‡Œé»„ç“œè˜¸èœ‚èœœå®æ¥å®å»ï¼Ÿèƒ½ä¸èƒ½æ™šä¸Šå…‰æºœæºœç²¾æ²¹æŒ‰æ‘©çš„æ—¶å€™æ‹‰å¥½çª—å¸˜ï¼Ÿæˆ‘ç”Ÿç†å¾ˆæ­£å¸¸ï¼Œè‚ å­å¾ˆèŠ±èŠ±ï¼Œçˆ±å¥½è‹è€æ¹¿ï¼Œä½ ä¸«åˆ«é€¼äººå¤ªç”šï¼ &#x27;, 1, &#x27;è–¯æ¡&#x27;, 890000, 5435, 3553, 543, 2, 29, 1, 412356);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (9, &#x27;2017-12-27 20:53:03&#x27;, &#x27;2017-12-27 20:53:07&#x27;, 0, &#x27;å¸¦ç€æ­»ç¥å»ç©¿è¶Š&#x27;, &#x27; ä¸€ååœ°çƒçš„å¹³å‡¡çš„å°‘å¹´ï¼Œå› ä¸ºä¸€åœºæ¸¸æˆï¼Œè·å¾—æ­»ç¥çš„ä¼ æ‰¿ï¼Œä»è€Œç©¿è¶Šåˆ°å¦å¤–ä¸€ç‰‡é™Œç”Ÿçš„å¤§é™†ï¼Œä»æ­¤å¼€å¯äº†ä¸€æ®µä¼ å¥‡çš„äººç”Ÿï¼Œä¹å¤©æ˜Ÿæ²³ï¼Œå¾ä¹ƒæ­»ç¥ï¼ŒæŒæ§ç”Ÿæ­»ï¼Œåˆ¤å¤ºç½ªæ¶ï¼Œæˆ‘ä»æ²¡è§è¿‡åœ°ç‹±ï¼Œå› ä¸ºæˆ‘çš„åå­—ï¼Œä¾¿ä»£è¡¨åœ°ç‹±ï¼Œå¾ä¹ƒæ­»ç¥ï¼Œå¾åæ—å¤©ã€‚ï¼ˆPSï¼šå•å¥³ä¸»ï¼Œçˆ½æ–‡ä¸è™å¿ƒï¼Œä¸»è§’ä»¥æ€è¯é“ï¼Œæ€è¯¥æ€ä¹‹äººï¼Œä¸åœ£æ¯ï¼Œç•¥è…¹é»‘ï¼‰ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šå¸¦ç€æ­»ç¥å»ç©¿è¶Šã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼å¸¦ç€æ­»ç¥å»ç©¿è¶Šæœ€æ–°ç« èŠ‚,å¸¦ç€æ­»ç¥å»ç©¿è¶Šæ— å¼¹çª—,å¸¦ç€æ­»ç¥å»ç©¿è¶Šå…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;æ¢¦ä¾&#x27;, 233000, 6326, 34252, 523, 2, 29, 1, 135);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (10, &#x27;2017-12-27 20:53:03&#x27;, &#x27;2017-12-27 20:53:07&#x27;, 0, &#x27;äº¡çµä¸èŠ¯ç‰‡&#x27;, &#x27; ä¸€ä½è‰è”ä¸–ç•Œå† å†›æ•°è½½çš„ç”µå­ç«æŠ€ç©å®¶ï¼Œåœ¨ä¸€æ¬¡æ¯”èµ›ä¸­ï¼Œå¤©é™é»‘è‰²é—ªç”µï¼Œå¸¦ç€ä¸»è§’å¼ è¿œè¿˜æœ‰ä¸€æšåœ°çƒä¸Šæœ€å…ˆè¿›çš„èŠ¯ç‰‡ã€ç©¿è¶Šåˆ°äº†å‰‘ä¸é­”æ³•çš„ä¸–ç•Œã€‚æ•…äº‹æ²¡æœ‰yyï¼Œæƒ…èŠ‚å‘å±•æœ‰è¿¹å¯å¯»ã€‚æ²¡æœ‰ç§é©¬ï¼Œæ‰€æœ‰çˆ±æƒ…èµ·äºç‚¹æ»´ã€‚æ›´æ²¡æœ‰ç”·ä¸»è™èº¯ä¸€éœ‡ã€ä»è€…äº‘é›†ï¼Œæœ‰çš„åªæ˜¯åŒç”Ÿå…±æ­»ç§¯ç´¯çš„å‹æƒ…ï¼Œè¿™ã€å°±æ˜¯ä¼™ä¼´çš„æ„ä¹‰ã€‚ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šäº¡çµä¸èŠ¯ç‰‡ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼äº¡çµä¸èŠ¯ç‰‡æœ€æ–°ç« èŠ‚,äº¡çµä¸èŠ¯ç‰‡æ— å¼¹çª—,äº¡çµä¸èŠ¯ç‰‡å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;å†¬å†¬ä¸œ&#x27;, 2559900, 5, 431, 42135, 2, 29, 1, 4124);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (11, &#x27;2017-12-27 20:53:03&#x27;, &#x27;2017-12-27 20:53:08&#x27;, 0, &#x27;ç©¿è¶Šå°é“äºº&#x27;, &#x27; å°æé£åˆ€é‡Œé¢:â€œé£åˆ€å‰å®³ï¼Ÿæˆ‘çš„ç¬¦å’’å¦‚ä½•ï¼Ÿâ€ä»™å‰‘ä¸‰:â€œè¿™å°±æ˜¯åƒé‡Œä¹‹å¤–å–äººé¦–çº§çš„å‰‘å•Šï¼â€çº¢æ¥¼æ¢¦é‡Œé¢ï¼šâ€œè´¾å®ç‰é‚£å—é€šçµå®ç‰åº”è¯¥æ˜¯ä¸ªçµå®çº§çš„ï¼Œææ¥ææ¥ã€‚â€ä¸‰å›½æ¼”ä¹‰ï¼šâ€œæ’’è±†æˆå…µï¼Œé»„å·¾åŠ›å£«ï¼Œã€Šå¤ªå¹³å¤©ä¹¦ã€‹ï¼Œä»™æœ¯å•Šï¼Œå¼ è§’ï¼Œä½ åˆ«è·‘ï¼â€è¥¿æ¸¸è®°ï¼šâ€œå‘¼ï¼Œç»ˆäºåˆ°äº†ä»™ç•Œäº†ã€‚â€ä¸‰ä½“ï¼šâ€œäºŒå‘ç®”ï¼Œçœ‹æˆ‘èŠ¥å­é¡»å¼¥ä¹‹æœ¯ã€‚â€æ¼«å¨:â€œoaaï¼Ÿä»€ä¹ˆä¸œè¥¿ï¼Ÿâ€å°é“äººè½¬èº«ï¼Œä¸€åŒçœ¼çœ‹äº†è¿‡æ¥ï¼šâ€œå‘µï¼æ‰§ç¬”è€…ï¼Ÿâ€ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šç©¿è¶Šå°é“äººã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼ç©¿è¶Šå°é“äººæœ€æ–°ç« èŠ‚,ç©¿è¶Šå°é“äººæ— å¼¹çª—,ç©¿è¶Šå°é“äººå…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;æ¥šéªš&#x27;, 455000, 342536, 23545, 53533254, 2, 29, 0, 2431);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (12, &#x27;2017-12-27 20:53:03&#x27;, &#x27;2018-09-06 20:58:34&#x27;, 0, &#x27;å¨æ­¦å°å¨˜å­&#x27;, &#x27; æœç­±ç–åšäº†ä¸ªå™©æ¢¦ï¼Œæ¢¦é‡Œå¨˜è¢«äººå®³æ­»ï¼Œå¥¹ä¹Ÿæ²¡å¾—åˆ°å¥½ä¸‹åœºã€‚ä¸€ççœ¼ï¼šæˆçœŸäº†ï¼æ—¢ç„¶æœ‰äººè¦èµ¶å°½æ€ç»ï¼Œå°±åˆ«æ€ªå¥¹ä»¥ç‰™è¿˜ç‰™ï¼è°çŸ¥ä¸ºå¨˜æŠ¥ä»‡æ„å¤–å‘ç°èº«ä¸–ï¼šå“­ï¼Œæ˜¯æ¡çš„ï¼å¥½ä¸å®¹æ˜“æœ‰ä¸ªå¯¹çœ¼çš„å°‘å¹´ï¼šå™—ï¼Œæ˜¯èˆ…èˆ…ï¼æ—¢ç„¶å¥¹çš„äººç”Ÿæ˜¯ä¸€ä¸ªå‘è¿ç€ä¸€ä¸ªå‘ï¼Œä¸å¦‚å‡¿æˆä¸€æ¡æ²³ï¼Œæ”¾å¼€æ¥é€ ä½œå§ï¼ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šå¨æ­¦å°å¨˜å­ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼å¨æ­¦å°å¨˜å­æœ€æ–°ç« èŠ‚,å¨æ­¦å°å¨˜å­æ— å¼¹çª—,å¨æ­¦å°å¨˜å­å…¨æ–‡é˜…è¯». &#x27;, 1, &#x27;ç‡•ä¸ƒçˆ±åƒé±¼&#x27;, 2389400, 325, 4325, 324, 2, 29, 0, 213);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (13, &#x27;2017-12-27 20:53:03&#x27;, &#x27;2018-09-10 08:45:40&#x27;, 0, &#x27;å†°ç«ç ´åç¥&#x27;, &#x27; å½“å·¨é¾™çš„æ—¶ä»£æ¸æ¸ç»ˆç»“ï¼Œå½“æœ¯å¸ˆä»¬åœ¨æ˜Ÿç©ºä¸‹ç•™ä¸‹æ— æ•°çš„è´¢å¯Œå’Œä¼ è¯´ï¼Œä¸€ä¸ªä¸ªè§‰é†’çš„å°‘å¹´ï¼Œä¾¿å¼€å§‹è¸ä¸Šä»–ä»¬çš„å¾é€”ã€‚ &#x27;, 1, &#x27;æ— ç½ª&#x27;, 23452343, 325324, 52, 555, 2, 26, 0, 412);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (14, &#x27;2017-12-27 20:53:04&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;åå¹´ç›¸æ‹ä¸ç›¸çŸ¥&#x27;, &#x27; åå¹´ä¹‹å‰ï¼Œå¥¹å–œæ¬¢ä»–ï¼Œè€Œä»–ä¸çŸ¥é“ã€‚åå¹´ä¹‹åï¼Œä»–çˆ±æ‹å¥¹ï¼Œå¯å¥¹å´ä¸åœ¨ã€‚ä¸€æ®µä¸æºæ‚ä»»ä½•å…¶ä»–åˆ©ç›Šçš„çº¯æƒ…çˆ±æ‹ä¹‹æ—…ï¼Œç©¶ç«Ÿæ‹æƒ…çš„ç»ˆç‚¹åœ¨ä½•æ–¹ï¼Ÿæ—…é€”çš„ç»“å±€åˆå°†æ€æ ·ï¼Ÿ677577335æœ¬ä¹¦ç¾¤ï¼Œå„ä½å–œæ¬¢æœ¬ä¹¦çš„ä¸å–œæ¬¢æœ¬ä¹¦çš„éƒ½å¯ä»¥è¿›æ¥ï¼Œåªè¦æ˜¯å–œæ¬¢çœ‹å°è¯´çš„éƒ½å¯ä»¥è¿›æ¥èŠèŠ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šåå¹´ç›¸æ‹ä¸ç›¸çŸ¥ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼åå¹´ç›¸æ‹ä¸ç›¸çŸ¥æœ€æ–°ç« èŠ‚,åå¹´ç›¸æ‹ä¸ç›¸çŸ¥æ— å¼¹çª—,åå¹´ç›¸æ‹ä¸ç›¸çŸ¥å…¨æ–‡é˜…è¯». &#x27;, 1, &#x27;é’æ¾ä¸æœ½&#x27;, 2355421, 4, 5534, 42314, 2, 26, 0, 231);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (15, &#x27;2017-12-27 20:53:04&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;ç»ˆææ•™å¸ˆ&#x27;, &#x27; æœ±é›€ä¸­å­¦æ ¡è§„ï¼š ç¬¬ä¸€æ¡ï¼Œç¦æ­¢å¸ˆç”Ÿæ‹ï¼ ç¬¬äºŒæ¡ï¼Œç¦æ­¢å¸ˆç”Ÿæ‹ï¼ ç¬¬ä¸‰æ¡ï¼Œç¦æ­¢å¸ˆç”Ÿæ‹ï¼ â€”â€”â€”- æˆ‘åšå®šä¸ç§»çš„è®¤ä¸ºç©¿ç™½è‰²åŠé€æ˜è¡¬è¡£ï¼Œé‡Œé¢çš„é»‘è‰²Braè‹¥éšè‹¥ç°çš„å­¦ç”Ÿå¦¹å­æ‰æ˜¯æœ€æ€§æ„Ÿçš„å¥³ç¥ï¼ &#x27;, 1, &#x27;æŸ³ä¸‹æŒ¥&#x27;, 2143214, 523, 5555, 234, 2, 26, 0, 512);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (16, &#x27;2017-12-27 20:53:04&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;é‚ªç‹ç»å® è›‡èå«¡å¦ƒ&#x27;, &#x27; â€œå¤ªå­æ®¿ä¸‹ï¼Œä»Šæ—¥ä¸æ˜¯ä½ æ¯å©šï¼Œè€Œæ˜¯æˆ‘æ¯å©šã€‚æˆ‘èŠ±æƒŠç¾½ä¸å«æ¸£ç”·ï¼Œä¸å«ç§çŒªç”·ï¼Œè¦å«ä¾¿å«å® æˆ‘ä¸Šå¤©ç–¼æˆ‘å…¥åœ°ï¼Œä¸€ç”Ÿåªå¨¶ä¸€å¦»çš„ç”·äººã€‚â€ ä¸€é“åœ£æ—¨é€åˆ°å¤ªå­é¢å‰ï¼Œå¤ªå­è„¸è‰²ç¬é—´é’é»‘ä¸€ç‰‡ï¼Œæ»¡å ‚å®¾å®¢çš†å¤±è‰²ã€‚ å¥¹ï¼Œé­é­‰ç»„ç»‡çš„é‡‘ç‰Œåˆ¶æ¯’å¸ˆï¼Œä¸€æœç©¿è¶Šæˆäº†ä»»äººæ¬ºå‡Œçš„å¯æ€œå¤ªå­å¦ƒï¼Œçˆ¹ä¸ç–¼å¦¹ä¸çˆ±ï¼Œè¿˜è¢«ç™¾èˆ¬æ¬ºå‡Œã€‚ éª‚æˆ‘çš„ï¼Œæ¶æ¯’çš„éª‚å›å»ã€‚æ‰“æˆ‘çš„ï¼Œç‹ ç‹ çš„æ‰“å›å»ã€‚ç®—è®¡æˆ‘çš„ï¼Œç™¾å€åƒå€çš„ç®—è®¡å›å»ã€‚ å¯æ˜¯è¿™äº›æ¸£ç”·æ¸£å¥³ä¸€ä¸ªä¸ªèµ¶ç€é€ä¸Šé—¨è®©å¥¹æ”¶æ‹¾ï¼Œé‚£å°±åˆ«æ€ªå¥¹å†·è¡€æ— æƒ…ï¼Œå¿ƒç‹ æ‰‹è¾£äº†ï¼Œå¼„ä¸æ­»ä½ ä¹Ÿè¦å¼„æ®‹ä½ ã€‚ ä»–ï¼Œå¸å›½å®¶å–»æˆ·æ™“ï¼Œé—»ä¹‹å˜è‰²çš„å—œè¡€é‚ªç‹ï¼Œä»æ— ä¸€ç‰©å…¥çœ¼ï¼Œå´å¼ºåŠ¿éœ¸é“çš„ç¼ ä¸Šå¥¹ï¼Œçœ‰çœ¼ç¼ç¼ï¼Œé‚ªé­…å‹¾å¼•ï¼šâ€œæˆ‘å® ä½ ä¸Šå¤©ï¼Œç–¼ä½ å…¥åœ°ï¼Œè¦ä¸è¦ï¼Ÿâ€ ç²¾å½©å¯¹è¯ä¸€ï¼š â€œç¾½å„¿ï¼Œè¿™ä¸€æ¬¡æˆ‘çœŸå¿ƒè¯šæ„çš„å‘ä½ æäº²ï¼Œå¨¶ä½ åšæˆ‘çš„ä¸œå®«å¤ªå­å¦ƒï¼Œæœªæ¥ç‡•äº‘å›½çš„çš‡åå¨˜å¨˜ã€‚â€ â€œæ ‘ä¸è¦çš®å¿…æ­»æ— ç–‘ï¼Œäººä¸è¦è„¸å¤©ä¸‹æ— æ•Œï¼Œå¤ªå­æ®¿ä¸‹çš„è„¸çš®å ªç§°ä¸€ç»ã€‚â€ â€œç¾½å„¿ï¼Œæˆ‘é”™äº†ï¼Œä½ åŸè°…æœ¬å®«ä¸€å›å§ã€‚â€ â€œæˆ‘çœ‹è§ä½ è¿™å¼ ç ´è„¸å°±æƒ³å¼„æ®‹ä½ ï¼Œæ›´åˆ«æä¸Šä½ è¿™ç ´èˆ¹äº†ï¼Œæ»šå§ã€‚â€ ç²¾å½©å¯¹è¯äºŒï¼š â€œåŒ—å¹½ç‹æ®¿ä¸‹ï¼Œä½ ä¸æ˜¯è¯´ä½ æ˜¯æ–­è¢–å—ï¼Ÿâ€å¥³å­æ°”æ€¥è´¥åçš„å†·å“¼ã€‚ â€œä¸æ˜¯æˆ‘è¯´çš„ï¼Œæ˜¯ä½ è¯´çš„ã€‚â€ â€œé‚£ä½ è¯´ä»€ä¹ˆéš¾è¨€ä¹‹éšï¼Œè¯´ä»€ä¹ˆè®©æˆ‘å¸®ä½ æ²»ï¼ŒåŸæ¥æ˜¯å æˆ‘çš„ä¾¿å®œåƒæˆ‘çš„è±†è…è´¥ã€‚â€ â€œè²Œä¼¼æœ¬ç‹æ‰æ˜¯æ¯”è¾ƒåƒäºçš„é‚£ä¸€ä¸ªï¼Œä½ åƒæˆ‘çš„è±†è…æ¯”æˆ‘åƒä½ çš„è±†è…å¤šï¼Œâ€ä¿Šç¾éœ¸æ°”çš„ç”·å­ä¸€è„¸çš„å§”å±ˆã€‚ â€œæ„æ€æ˜¯ç‹çˆ·ä½ åƒäºäº†ï¼Ÿâ€å¥³å­å¾®çœ¯çœ¼ä¸Šï¼Œé˜´ä¾§ä¾§çš„å¼€å£ã€‚ â€œä¸åƒäºï¼Œåªè¦ä½ å¯¹æˆ‘è´Ÿè´£å°±å¥½ã€‚â€ â€œå‡­ä»€ä¹ˆè¦æˆ‘è´Ÿè´£ã€‚â€ â€œæœ¬ç‹è´Ÿè´£ä¹Ÿè¡Œï¼Œæˆ‘å® ä½ ï¼Œæˆ‘ç–¼ä½ ï¼Œå¯å¥½ï¼Ÿâ€ &#x27;, 1, &#x27;å´ç¬‘ç¬‘&#x27;, 3859643, 245632, 4223, 43325, 2, 26, 0, 51251);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (17, &#x27;2017-12-27 20:53:04&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;ç¥é­”éœ¸ä½“&#x27;, &#x27; æ‹“æ‹”é‡é€†å¤©é‡ç”Ÿã€èº«è—ç¥æ ¹ã€æ‰‹æ¡ç¥ç¬¦ã€æ‹¥æœ‰å‰ä¸–è®°å¿†ï¼Œä»å°å¼€å§‹ä¿®ç‚¼æœ€éš¾ä¿®ç‚¼çš„ç‚¼ä½“æ³•å†³ç¥é­”ä¹å˜ã€‚ ç¥é­”ä¹å˜ï¼Œæ¯ä¿®ç‚¼æˆåŠŸä¸€å˜ï¼Œä¸ä½†è‚‰ä½“åŠ›é‡æš´å¢ï¼Œè¿˜å¤šä¸€äº›ç¥å¥‡çš„æœ¬é¢†ã€‚ ä¸ºäº†ä¿®ç‚¼ç¥é­”ä¹å˜ï¼Œæ‹“æ‹”é‡èµ°éæ— æ•°æ˜Ÿå®‡ä¸–ç•Œï¼Œé—¯è¿‡æ— æ•°é™©åœ°ç»åŸŸï¼Œå¤§æˆ˜ç¥é­”ç¥å…½é¬¼ç¥ã€‚ æœ€ç»ˆï¼Œç¥é­”ä¹å˜å¤§æˆï¼Œæˆå°±çœŸæ­£çš„ç¥é­”éœ¸ä½“ï¼Œæ— æ•Œè¯¸å¤©ä¸‡ç•Œã€‚ å®Œæœ¬è€ä¹¦ã€Šå…­é“ä»™å°Šã€‹ï¼Œäº”ç™¾äºŒåä¸‡å­—ï¼Œäººå“ä¿è¯ï¼æ”¾å¿ƒæ”¶è—ï¼ è€äº‘æ–°ä¹¦ç¾¤ 229522850 &#x27;, 1, &#x27;äº‘éœ†é£&#x27;, 2456235, 3532, 5535, 5434, 2, 26, 0, 5154);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (18, &#x27;2017-12-27 20:53:04&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;å¦–å¨†å¬å”¤å¸ˆ&#x27;, &#x27; åä¸ºâ€œå¦–å¨†â€çš„æ— è‰¯å°‘å¥³ï¼Œè¢«ä¸€æšè¯¡å¼‚çš„é»‘æš—é­”ç é™„èº«ï¼ŒäºŒæ¬¡ç©¿è¶Šå¼‚ä¸–ã€‚ å¥¹æ˜¯è¢«ç–¯å­å¸¦å¤§çš„å°ä¹ä¸ï¼Œä¸‡å¹´ä¸é‡çš„â€œåºŸæâ€è´Ÿçµæ ¹ã€‚ å—åˆ°é»‘æš—é­”ç å½±å“è€Œå¸¦æœ‰è¢«ä¸–äººå”¾å¼ƒçš„æš—ä¹‹åŠ›çš„â€œé‚ªæ¶é­”å¥³â€ï¼ é­”äº‘å®—è¦åå™¬å¥¹ï¼šâ€œä½ çš„åŠ›é‡åŒ–ä¸ºæˆ‘ç”¨å¯å¥½ï¼Ÿâ€ å…‰æ˜é˜µè¥è¦ç»æ€å¥¹ï¼šâ€œé­”å¥³ï¼å“ªé‡Œé€ƒï¼â€ å¼ºå¤§æˆ˜ç¥è¦å‹’ç´¢å¥¹ï¼šâ€œç”¨è¿™å¹»å™¨ï¼Œä½ ä¸é…ï¼â€ å…‰ä¸æš—ï¼Œçš†ä¸å®¹å¥¹åœ¨ä¸–é—´å­˜åœ¨ï¼ å–„ä¸æ¶ï¼Œè°æ‰é™ªå¥¹ç›´æ£é»„é¾™ï¼Ÿ â€œæƒ³åå™¬æˆ‘çš„ï¼æŠŠä½ ä»¬çš„å®è—éƒ½æ‹¿å‡ºæ¥å§ï¼â€ â€œæƒ³ç»æ€æˆ‘çš„ï¼ç”¨è½®å›é¼æŠŠä½ ä»¬éƒ½ç‚¼æˆæ´»äººè¯ä¸¹ï¼â€ â€œæƒ³å‹’ç´¢æˆ‘çš„ï¼æœ¬å§‘å¨˜è¦ä½ çœ‹çœ‹ä»€ä¹ˆæ‰æ˜¯å¼ºï¼ç›—ï¼ç‹ï¼â€ å¤´å¸¦æ¤ç³»ç‹—è¡€ç‰¡ä¸¹çš‡ï¼è„šè¸èµ¤ç«çƒˆç„°ç‚¸æ¯›é¸¡ï¼æ‰‹æŒæ€äººç‚¼ä¸¹è½®å›é¼â€¦â€¦ å¼ºå¥‘å¼‚å…½ï¼æš—é©­é­”ä»†ï¼ å¬å”¤ï¼ç¥å…½çº§ä»¥ä¸‹çš„å–½å•°é€šé€šè®©å¼€ï¼ â€œæˆ‘ä»¥æœ±é›€åœ£ç«ï¼Œé©æ–°è¿™ä¸ªä¸–ç•Œï¼â€ ä¸”çœ‹å¥³ä¸»ä»¥å¦©åªšçš„çœ¼æ³¢ç©è½¬ä¸–é—´é«˜æ‰‹ï¼Œä»¥è…¹é»‘å¼ºå¤§çš„æ‰‹æ®µç‹‚æˆ˜å¤©ä¸‹ç¾¤é›„ï¼ æœ¬æ–‡ä¸€å¯¹ä¸€ çˆ†ç¬‘+å¥³å¼º+è…¹é»‘+æˆé•¿ å°æ¶æï¼ŒçœŸç„å¹»~ æ­¤æ–‡ä»æ— æ–­æ›´è®°å½•ï¼Œæƒ…èŠ‚ç²¾å½©ï¼Œæ¬¢è¿å„è·¯é“å‹çƒ­æƒ…è·³å‘~ â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—† â€”â€”â€”â€”äººç‰©æ‰“æ²¹è¯—ä¸€é¦–â€”â€”â€”â€” â—†å¥¹æœ‰ä¸€ä¸ªæ— èŠçš„æ—¶å€™å°±ä¼šç‚¹èµ·â€œç­é­”ç¥ç„°â€çƒ§æŸ´ç©çš„ç–¯çˆ¹çˆ¹ï¼šâ€œå¦–å¦–ï¼Œæˆ‘é¥¿ï¼Œæˆ‘è¦åƒå¤§é¸¡è…¿ï¼â€ â—†å¥¹æœ‰ä¸€åªäººè§äººä¸çˆ±ï¼ŒèŠ±è§èŠ±ä¸å¼€çš„æ¤ç³»æˆ˜å…½ï¼šâ€œæˆ‘æ˜¯ä¸‘å…«æ€ªï¼Œå—¯ï¼Œå¦–å¦–è¯´è¿‡æˆ‘æ˜¯ä¸‘å…«æ€ªï¼Œæˆ‘çš„çœ¼ï¼Œåªæ¯”æ˜Ÿæ˜Ÿç’€ç’¨é‚£ä¹ˆä¸€ç‚¹ç‚¹ï¼Œæˆ‘çš„è„¸ï¼Œåªæ¯”å…ˆå¤©å¤§å¸å¸…é‚£ä¹ˆä¸€ç‚¹ç‚¹ï¼Œæˆ‘å¾ˆè‡ªå‘ï¼Œè¯·ä¸è¦è·Ÿæˆ‘è®²è¯ã€‚â€ â—†å¥¹æœ‰ä¸€ä¸ªé’±æ¯”å‘½é‡è¦ï¼Œæœ‰é’±å°±æ˜¯å¨˜çš„å°‘å¹´å¤§ç®¡å®¶ï¼Œå¦‚æœé—®ä»–è¦é’±è¿˜æ˜¯è¦å‘½ï¼Œä»–ä¼šç›´æ¥å››ä»°å…«å‰å€’åœ¨åœ°ä¸Šï¼šâ€œå¤§çˆ·ï¼Œå¥´å®¶ä¸€å¤œï¼Œåªè¦ä¸€ä¸ªé‡‘å¸ã€‚â€ â—†å¥¹æœ‰ä¸€ä¸ªéªšåŒ…çš„çº¢å‘è¿½æ±‚è€…ï¼šâ€œæ¥çš„ç¾å¥³ä»¬ï¼Œå¿«ç•™ä¸‹ä½ ä»¬çš„â€˜æ”¶è—â€™ï¼Œä¸ç„¶æœ¬å…¬å­æ»šåœ°åŠæœˆï¼Œç»ä¸å‡ºå…³ï¼â€ Oï¼ˆâˆ©ï¼¿âˆ©ï¼‰O~ â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—† ----------å…¬å‘Šæ¿---------- â—†æœ¬æ–‡æ¯æ—¥æ›´æ–°æ—¶é—´â—† å¦‚æ— ç‰¹åˆ«é€šçŸ¥ï¼Œæ¯æ—¥ä¸Šåˆä¹ç‚¹å·¦å³ 5000+ Oï¼ˆâˆ©ï¼¿âˆ©ï¼‰O~ â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—† æ¨èç„å¹»å¥½æ–‡ã€Šç››ä¸–é‚ªå‡°ã€‹ BYï¼šæœˆæ¸…æ ‘å½± å¥¹çš„å€¾æƒ…ä»˜å‡ºï¼Œç»ˆæŠµä¸è¿‡ä¸€å¥åŠŸé«˜ç›–ä¸»ã€‚ äº²å‹çš„å€’æˆˆï¼Œçˆ±äººçš„èƒŒå›ï¼Œè®©å¥¹å¿ƒå¦‚æ­»ç°ã€‚ å”¯æœ‰ä»–ä¾æ—§ç«™åœ¨å¥¹èº«è¾¹ï¼Œæ‹¥å¥¹å…¥æ€€ã€‚ â€œä»¥å¾ä¹‹å¿ƒï¼Œäºˆæ±é‡ç”Ÿï¼Œè½¬ä¸–ä¹‹é­‚ï¼Œç”Ÿç”Ÿç›¸ä¼´ï¼Œä¸ç¦»ä¸å¼ƒã€‚å¥‘ï¼â€ æµ´ç«é‡ç”Ÿï¼Œå†æ¬¡ççœ¼ï¼Œå¥¹å·²å…¥é­”ï¼ ä¸”çœ‹å¥¹å¦‚ä½•åœ¨è¿™è†æ£˜ä¸­ç ´å¼€é‡é‡è¿·é›¾ï¼Œå‡­å€Ÿç€è‡ªå·±çš„åŠªåŠ›ä¸€æ­¥æ­¥èµ°å‘äº‘ç«¯ï¼Œå°†æ›¾ç»çš„è€»è¾±ä¸€åŒè¸©åœ¨è„šä¸‹ï¼ å†ä¸–ä¸ºäººï¼Œå¥¹â€”â€”æ³¨å®šå…‰èŠ’ä¸‡ä¸ˆï¼ â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—† ï¼ï¼ï¼ï¼äººç‰©è®¤å…»å°åº—ï¼ï¼ï¼ ã€ç–¯ å­ã€‘ ç”± ç¾½æ¯› è®¤å…» ã€å¦– å¨†ã€‘ ç”± å…¬å­é™Œå‡Œ è®¤å…» ã€ç¿¦ ç¾½ã€‘ ç”± æœˆæ¸…æ ‘å½± è®¤å…» ã€ç™½ å¤œ ä¸€ã€‘ ç”± åˆ‘å†·å¢¨ è®¤å…» ã€ç“¦ ä¼¦ã€‘ ç”± ç‘•æ‹ è®¤å…» ã€é¾™ è§‰ã€‘ ç”± è²å¿ƒç´«ç’ƒ è®¤å…» ã€ä¸‘ ä¸‘ã€‘ ç”± å¾ä¾ç³¯ è®¤å…» ã€å…ƒ æ–¹ã€‘ ç”± å°æ®‹ è®¤å…» ã€ç‰§é‡å¯’æ±Ÿã€‘ ç”± å…”å…” è®¤å…» ã€çº³ å¤š å¤šã€‘ ç”± å¦å„¿ è®¤å…» ã€éº’ éºŸ ç‹ã€‘ ç”± 954637819 è®¤å…» ã€çƒˆç„°é£é¹°ã€‘ ç”± å¤è½©æœˆ è®¤å…» ã€æ‹” è‰ å„¿ã€‘ ç”± äº‘å½±æ‚ ç„¶ è®¤å…» ã€é’ å›ã€‘ ç”± å¿˜æƒ…ç´«é›ª è®¤å…» ã€æ³¥ å·´ å›¢ã€‘ ç”± åªšå¦† è®¤å…» ã€èµ¤ ç«ã€‘ ç”± åªšå¦† è®¤å…» ã€äºŒ æ¯›ã€‘ ç”± å°¤å…® è®¤å…» ã€æµ·æ¶…å®—å¸ˆã€‘ ç”± ysfengy è®¤å…» ã€å§¬ å¤© ç™½ã€‘ ç”±xanxus1896 è®¤å…» ã€ ç‚ ã€‘ ç”± å¤è½©æœˆ è®¤å…» ã€ç™¾ é‡Œ å°˜ã€‘ ç”± å°å¯çˆ± è®¤å…» ã€æˆ˜ è™ã€‘ ç”± è“ è®¤å…» ã€ç­ äº‘ é£ã€‘ ç”± æœˆä¾æµ…é›ª è®¤å…» ã€è¡€ å ä¸‰ã€‘ ç”± ç”±å¤œ è®¤å…» ã€å…­ çµ ç ã€‘ ç”± kanshu001 è®¤å…» ã€å›¡ å›¡ã€‘ ç”±1003695331è®¤å…» â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—†â—† ï¼ï¼ï¼ï¼å¥½æ–‡æ¨èï¼ï¼ï¼ æˆ‘çš„æ—§æ–‡ ã€Šçºµç´«ã€‹ åˆ‘å†·å¢¨ ã€Šå¼‚ç«ç„šå¤©ã€‹ æœˆæ¸…æ ‘å½± ã€Šç››ä¸–é‚ªå‡°ã€‹ å…”æ¢“ ã€Šè„±çº¿é»‘å…¬ä¸»ã€‹ ä»™é­… ã€Šå¦–ä»™é­…ä¸–ã€‹ å¢¨å¢¨ ã€Šå“¥å“¥æ˜¯åªå¦–ã€‹ å³å¢¨è¡€å¤œ ã€Šæ­»ç¥æˆé•¿å²ã€‹ &#x27;, 1, &#x27;ç¿¦ç¾½&#x27;, 1333413, 34, 6543, 678898, 2, 26, 0, 651223);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (19, &#x27;2017-12-27 20:53:04&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;æ°¸å¤œå›ç‹&#x27;, &#x27; åƒå¤œè‡ªå›°è‹¦ä¸­å´›èµ·ï¼Œåœ¨èƒŒå›ä¸­å è½ã€‚è‡ªæ­¤ä¸€ä¸ªäººï¼Œä¸€æŠŠæªï¼Œè¡Œåœ¨æ°¸å¤œä¸é»æ˜ä¹‹é—´ï¼Œå´èµ°å‡ºä¸€æ®µä¼ å¥‡ã€‚è‹¥æ°¸å¤œæ³¨å®šæ˜¯ä»–çš„å‘½è¿ï¼Œé‚£ä»–ä¹Ÿè¦æˆä¸ºä¸»å®°çš„ç‹ã€‚ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šæ°¸å¤œå›ç‹ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼æ°¸å¤œå›ç‹æœ€æ–°ç« èŠ‚,æ°¸å¤œå›ç‹æ— å¼¹çª—,æ°¸å¤œå›ç‹å…¨æ–‡é˜…è¯». &#x27;, 1, &#x27;çƒŸé›¨æ±Ÿå—&#x27;, 235212, 6342, 2343542, 6234, 2, 26, 0, 143212);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (20, &#x27;2017-12-27 20:53:04&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;é›ªä¸­æ‚åˆ€è¡Œ&#x27;, &#x27; æœ‰ä¸ªç™½ç‹å„¿è„¸ï¼Œä½©åŒåˆ€ç»£å†¬æ˜¥é›·ï¼Œè¦åšé‚£å¤©ä¸‹ç¬¬ä¸€ã€‚æ¹–åº•æœ‰ç™½å‘è€é­çˆ±åƒè¤ã€‚ç¼ºé—¨ç‰™è€ä»†èƒŒå‰‘åŒ£ã€‚å±±ä¸Šæœ‰ä¸ªéª‘é’ç‰›çš„å¹´è½»å¸ˆå”ç¥–ï¼Œä¸æ•¢ä¸‹å±±ã€‚æœ‰ä¸ªéª‘ç†ŠçŒ«æ‰›å‘æ—¥è‘µä¸å¤ªå†·çš„å°‘å¥³æ€æ‰‹ã€‚ è¿™ä¸ªæ±Ÿæ¹–ï¼Œé«˜äººå‡ºè¡Œè¦æ³¨é‡å‡ºå°˜è£…æ‰®ï¼Œå¥³ä¾ è¡Œèµ°æ±Ÿæ¹–è¦æ³¨æ„åŸ¹å…»äººæ°”ï¼Œå®—æ´¾è¦è·Ÿåº™å ‚æ‰“å¥½å…³ç³»ã€‚ è€Œä¸»è§’ï¼Œåˆ™æ½‡æ´’å¸¦åˆ€ï¼ŒæŠŠæ±Ÿæ¹–æ…äº†ä¸€ä¸ªé€šé€ã€‚ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šé›ªä¸­æ‚åˆ€è¡Œã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼é›ªä¸­æ‚åˆ€è¡Œæœ€æ–°ç« èŠ‚,é›ªä¸­æ‚åˆ€è¡Œæ— å¼¹çª—,é›ªä¸­æ‚åˆ€è¡Œå…¨æ–‡é˜…è¯». &#x27;, 1, &#x27;çƒ½ç«æˆè¯¸ä¾¯&#x27;, 35525, 353, 5345, 624, 2, 26, 0, 2314);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (21, &#x27;2017-12-27 20:53:04&#x27;, &#x27;2017-12-27 20:53:05&#x27;, 0, &#x27;åœ°çƒç¾å˜&#x27;, &#x27; ã€2017ç§‘å¹»å¾æ–‡ã€‘å‚èµ›ä½œå“ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šåœ°çƒç¾å˜ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼åœ°çƒç¾å˜æœ€æ–°ç« èŠ‚,åœ°çƒç¾å˜æ— å¼¹çª—,åœ°çƒç¾å˜å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;çŸ³æ…Œ&#x27;, 25254, 46236, 335, 5234, 2, 26, 0, 412);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (22, &#x27;2017-12-27 20:53:05&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;æ±‚ç”Ÿæ¬²&#x27;, &#x27; è¿™ä¸ªä¸–ç•Œï¼Œäººå¹¶ä¸æ˜¯å”¯ä¸€çš„æ™ºæ…§ç”Ÿç‰©ï¼Œè¿˜æœ‰è¿™æ¯”äººæ›´é«˜çº§çš„ç”Ÿç‰©ï¼Œä»–ä»¬çœ‹å¾…äººçš„æ€åº¦å¦‚ä½•ï¼Ÿè€å…¬ï¼Œæˆ‘è¦ä½ æ€äº†æ‰€æœ‰æƒ³ä¼¤å®³æˆ‘çš„äººã€‚â€œå¥¹çš„é‡å¿ƒå¤ªå¤§ï¼Œä¸æ˜¯å¸®å¥¹ï¼Œè€Œæ˜¯å®³å¥¹ã€‚â€â€œå¥¹çš„ä¸€åˆ‡ï¼Œæˆ‘è´Ÿè´£ã€‚â€ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šæ±‚ç”Ÿæ¬²ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼æ±‚ç”Ÿæ¬²æœ€æ–°ç« èŠ‚,æ±‚ç”Ÿæ¬²æ— å¼¹çª—,æ±‚ç”Ÿæ¬²å…¨æ–‡é˜…è¯». &#x27;, 1, &#x27;åå°”è¡—æ‰›æŠŠå­&#x27;, 56135, 6353, 5666, 2345, 2, 26, 0, 51243);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (23, &#x27;2017-12-27 20:53:05&#x27;, &#x27;2017-12-27 20:53:06&#x27;, 0, &#x27;éƒ½å¸‚æ— é™å–é’±ç³»ç»Ÿ&#x27;, &#x27; è‡ªä»å¾—åˆ°æ— é™å–é’±ç³»ç»Ÿä¹‹åï¼Œå¶å‡¡çš„äººç”Ÿè½¨è¿¹ä»æ­¤æ”¹å˜â€¦â€¦ æ¯å¤©æ—©ä¸Šé†’æ¥ï¼Œä¸ç”¨æ‹…å¿ƒæ²¡é’±èŠ±ï¼Œè€Œåº”è¯¥æ‹…å¿ƒè¿™ä¹ˆå¤šé’±ï¼Œè¦æ€ä¹ˆèŠ±â€¦â€¦ åªè¦æ˜¯ä»»ä½•é’±èƒ½å¤Ÿè§£å†³çš„é—®é¢˜ï¼Œéƒ½ä¸æ˜¯é—®é¢˜ï¼Œç„¶è€Œä¸ºäº†å¾—åˆ°è¿™äº›é’±ï¼Œä¸å¾—ä¸æŒ‰ç…§ç³»ç»Ÿæç¤ºï¼Œå®Œæˆä¸€ç³»åˆ—çš„ä»»åŠ¡ã€‚ ä»»åŠ¡å¤±è´¥çš„æƒ©ç½šï¼Œå°†ä¼šæ˜¯èº«ä½“æ¶ˆå¤±ååˆ†ä¹‹ä¸€ï¼ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šéƒ½å¸‚æ— é™å–é’±ç³»ç»Ÿã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼éƒ½å¸‚æ— é™å–é’±ç³»ç»Ÿæœ€æ–°ç« èŠ‚,éƒ½å¸‚æ— é™å–é’±ç³»ç»Ÿæ— å¼¹çª—,éƒ½å¸‚æ— é™å–é’±ç³»ç»Ÿå…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;é£å¤©å…¥åœ°&#x27;, 651341, 434, 5334, 234, 2, 26, 0, 215);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (24, &#x27;2017-12-27 20:53:05&#x27;, &#x27;2017-12-27 20:53:07&#x27;, 0, &#x27;è’å²›é¥¥è’&#x27;, &#x27; å¨ç¥ç©¿è¶Šåˆ°äº†ä¸€ç‰‡æµ·æ»©ä¸Šï¼Œé™¤äº†è„‘æµ·ä¸­çš„é¥¥è’åˆ¶ä½œç³»ç»Ÿï¼Œèº«ä¸Šåˆ«æ— é•¿ç‰©ã€‚ç¥¥å’Œçš„å²›å±¿ä¸Šæœ‰ç€æ½œè—é»‘æš—å’Œç§˜å¯†ï¼Œä¸ºäº†ç”Ÿå­˜ï¼Œå¨ç¥ä¸å¾—ä¸å·å…¥å…¶ä¸­ã€‚å¨ç¥å¼€å§‹å¯»æ‰¾å›å®¶çš„è·¯ã€‚è‡´å‘½çš„é»‘æš—ï¼Œç¥ç§˜çš„é˜´å½±ï¼Œåœ£æ´çš„æ˜Ÿçµã€‚ å¨ç¥ä¼šå›å»å—ï¼Ÿ æ–°ä¹¦æ¨èï¼šã€ç™½é“¶éœ¸ä¸» ã€ã€å¤§ç‹é¥¶å‘½ ã€ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šè’å²›é¥¥è’ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼è’å²›é¥¥è’æœ€æ–°ç« èŠ‚,è’å²›é¥¥è’æ— å¼¹çª—,è’å²›é¥¥è’å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;å‡å¿ƒä¹‹ç«&#x27;, 521333, 53534, 2436, 2345, 1, 26, 0, 415126);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (25, &#x27;2017-12-27 20:53:05&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;å®˜é“ä¹‹æ­¥æ­¥é«˜å‡&#x27;, &#x27; é’åŸå¸‚å›½èµ„å§”æ™®é€šç§‘å‘˜æ¥šå¤©èˆ’ï¼Œå› æ’ç ´åŠå…¬å®¤ä¸»ä»»çš„å¥½äº‹è€Œé¢ä¸´è¢«å‘é…çš„å„è¿ï¼Œéšåå´ç»å†äº†ä¸€ç³»åˆ—åŒªå¤·æ‰€æ€çš„å¥‡... &#x27;, 1, &#x27;åŒ—å²¸&#x27;, 551612, 234632, 5243, 3245, 1, 26, 0, 124);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (26, &#x27;2017-12-27 20:53:05&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;å‚²ç¥åˆ€å°Š&#x27;, &#x27; ä¸€é¢—æ¡€éªœçš„å¿ƒï¼Œä¸€æŠŠä¸ç¾çš„åˆ€ï¼Œä¸€ä¸ªå‚²è§†ä»™ç¥çš„ä¸æœ½ä¼ å¥‡ã€‚ä½ æ˜¯è°ï¼Ÿåˆ«é—®æˆ‘æ˜¯è°ï¼Œè¯·ä¸æˆ‘ä¸€æˆ˜ï¼â€”â€”â€”â€”â€”â€”QQç¾¤ï¼š51765913 &#x27;, 1, &#x27;é¡¹å&#x27;, 351314, 435, 45, 2534, 1, 26, 0, 6143);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (27, &#x27;2017-12-27 20:53:05&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;ä¾¯é—¨åŒ»å¥³,åº¶æ‰‹é©­å¤«&#x27;, &#x27; &#x27;, 1, &#x27;æ²§æµ·æ˜ç &#x27;, 251234, 243544, 3425, 35235, 1, 26, 0, 421342314);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (28, &#x27;2017-12-27 20:53:06&#x27;, &#x27;2017-12-27 20:53:13&#x27;, 0, &#x27;æ å¤ºè¯¸å¤©ä¸‡ç•Œ&#x27;, &#x27; é¾™ç„æ‹¥æœ‰æ å¤ºä¸‡ç•Œçš„ç‰ä½©ï¼Œä»¥è¯¸å¤©ä¸‡ç•Œçš„èµ„æºæˆæ— æ•Œå¤§ä¸»å®°ã€‚æ­¦ä¾ ä¸–ç•Œ:å¤©é¾™ï¼Œç¬‘å‚²ï¼Œå°„é›•ï¼Œç¥é›•ï¼Œé£äº‘â€¦â€¦ä»™ä¾ ä¸–ç•Œ:ä»™å‰‘ï¼ŒèŠ±åƒéª¨ï¼Œè¯›ä»™â€¦â€¦åŠ¨æ¼«ä¸–ç•Œ:ç«å½±ï¼Œè¶…ç¥å­¦é™¢â€¦â€¦å°è¯´ä¸–ç•Œ:å®Œç¾ä¸–ç•Œï¼Œæ–—ç ´ï¼Œé®å¤©ï¼Œæ–—ç½—â€¦â€¦ç”µå½±ä¸–ç•Œ:è¥¿æ¸¸é™é­”ä¸–ç•Œï¼Œåƒµå°¸å…ˆç”Ÿï¼Œå¤§è¯è¥¿æ¸¸â€¦â€¦ç¥è¯ä¸–ç•Œ:è¥¿æ¸¸è®°ï¼Œå°ç¥æ¦œï¼Œæ´ªè’â€¦â€¦ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šæ å¤ºè¯¸å¤©ä¸‡ç•Œã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼æ å¤ºè¯¸å¤©ä¸‡ç•Œæœ€æ–°ç« èŠ‚,æ å¤ºè¯¸å¤©ä¸‡ç•Œæ— å¼¹çª—,æ å¤ºè¯¸å¤©ä¸‡ç•Œå…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;æˆ‘åŸéå‡¡&#x27;, 521222, 24325, 2345, 666, 1, 26, 0, 411235);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (29, &#x27;2017-12-27 20:53:06&#x27;, &#x27;2017-12-27 20:53:07&#x27;, 0, &#x27;ç«å½±ä¹‹æœ€å¼ºè™«å¸ˆ&#x27;, &#x27; æ¿€èŒçš„èè‰ï¼Œçƒ­è¡€çš„å°‘å¹´ï¼Œä¸ºæ‰“ç ´æ¬¡å…ƒå£ä¸€å¾€æ— å‰ï¼ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šç«å½±ä¹‹æœ€å¼ºè™«å¸ˆã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼ç«å½±ä¹‹æœ€å¼ºè™«å¸ˆæœ€æ–°ç« èŠ‚,ç«å½±ä¹‹æœ€å¼ºè™«å¸ˆæ— å¼¹çª—,ç«å½±ä¹‹æœ€å¼ºè™«å¸ˆå…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;æ¥ä¸€åˆ€&#x27;, 544111, 325, 3434525, 623534, 1, 25, 0, 51244);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (30, &#x27;2017-12-27 20:53:07&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;é™†æˆ˜å…µç‹&#x27;, &#x27; å°‘å¹´ä»æ–°å…µè›‹å­ä¸€æ­¥æ­¥æˆé•¿ï¼Œç£¨ç»ƒæˆä¸€æŠŠéšå»çš„åˆ€é”‹ï¼Œæ—¶åˆ»ä¸ºç€æ¢¦æƒ³è€Œå¥‹æ–—ï¼Œç»å†æ— å°½çš„è‰°éš¾å›°é˜»ï¼Œæœ€ç»ˆäº†ä¸ºçœŸç›¸è€Œæˆ˜æ–—ï¼ï¼ æˆ‘çš„ä¹¦å‹äº¤æµç¾¤ï¼š241911158ï¼Œæˆ‘çš„QQï¼š807457338 &#x27;, 1, &#x27;å¯å¯æ¯”å°”&#x27;, 355555, 45346, 543, 5234, 1, 25, 0, 51261);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (31, &#x27;2017-12-27 20:53:07&#x27;, &#x27;2017-12-27 20:53:12&#x27;, 0, &#x27;å˜èº«ä¹‹æŠŠåæ´¾å…»æ­ªäº†è‚¿ä¹ˆç ´&#x27;, &#x27; æ¿€èŒçš„èè‰ï¼Œçƒ­è¡€çš„å°‘å¹´ï¼Œä¸ºæ‰“ç ´æ¬¡å…ƒå£ä¸€å¾€æ— å‰ï¼ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šå˜èº«ä¹‹æŠŠåæ´¾å…»æ­ªäº†è‚¿ä¹ˆç ´ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼å˜èº«ä¹‹æŠŠåæ´¾å…»æ­ªäº†è‚¿ä¹ˆç ´æœ€æ–°ç« èŠ‚,å˜èº«ä¹‹æŠŠåæ´¾å…»æ­ªäº†è‚¿ä¹ˆç ´æ— å¼¹çª—,å˜èº«ä¹‹æŠŠåæ´¾å…»æ­ªäº†è‚¿ä¹ˆç ´å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;å‘†èŒå°æ€»&#x27;, 222235, 364326, 25342, 632, 1, 25, 0, 521341);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (32, &#x27;2017-12-27 20:53:07&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;å”¯æ„¿æƒ…æ·±ä¸è´Ÿå©š&#x27;, &#x27; æ¸£ç”·å’Œå°ä¸‰è”æ‰‹è®¾è®¡ï¼Œè®©å¥¹è¢«æ‰£ä¸Šä¸å¹²å‡€çš„éª‚åï¼Œå©†å©†æš´æ‰“ï¼Œè¿˜é€¼ç€å¥¹å‡€èº«å‡ºæˆ·ã€‚å¥¹æ²¡äº†å®¶ï¼Œä¹Ÿå¤±å»äº†è…¹ä¸­åˆšæˆå‹çš„å­©å­ã€‚èµ°æŠ•æ— è·¯ï¼Œä¸ºäº†å¤ä»‡ï¼Œåªèƒ½é€‰æ‹©çˆ¬ä¸Šæ¸£ç”·å¯¹æ‰‹çš„åºŠã€‚ä»–æ˜¯å¤©ä¹‹éª„å­ï¼Œå¥¹æœ¬ä»¥ä¸ºé•œèŠ±æ°´æœˆåå†æ— äº¤é›†ï¼Œå´.. å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šå”¯æ„¿æƒ…æ·±ä¸è´Ÿå©šã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼å”¯æ„¿æƒ…æ·±ä¸è´Ÿå©šæœ€æ–°ç« èŠ‚,å”¯æ„¿æƒ…æ·±ä¸è´Ÿå©šæ— å¼¹çª—,å”¯æ„¿æƒ…æ·±ä¸è´Ÿå©šå…¨æ–‡é˜…è¯». &#x27;, 1, &#x27;æ—§åŸé›ª&#x27;, 5123566, 534, 234562, 636, 1, 25, 0, 42156);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (33, &#x27;2017-12-27 20:53:07&#x27;, &#x27;2017-12-27 20:53:08&#x27;, 0, &#x27;æˆ‘çš„ç»è‰²ç¾å¥³ç‰¹å·¥è€å©†&#x27;, &#x27; ã€ç«çˆ†æ–°ä¹¦ã€‘åœ°ä¸‹ä¸–ç•Œçš„ç‹è€…ç¥ç§˜å½’éšï¼Œå°±åœ¨å„ç•Œå¤§ä½¬éƒ½æ¾äº†ä¸€å£æ°”çš„æ—¶å€™ï¼Œæ®Šä¸çŸ¥ï¼Œè¿œåœ¨ä½£å…µç¦åœ°çš„åå¤ï¼Œæ€èµ·äº†ä¸€åœºå‰æ‰€æœªæœ‰çš„æ³¢æ¾œï¼ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šæˆ‘çš„ç»è‰²ç¾å¥³ç‰¹å·¥è€å©†ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼æˆ‘çš„ç»è‰²ç¾å¥³ç‰¹å·¥è€å©†æœ€æ–°ç« èŠ‚,æˆ‘çš„ç»è‰²ç¾å¥³ç‰¹å·¥è€å©†æ— å¼¹çª—,æˆ‘çš„ç»è‰²ç¾å¥³ç‰¹å·¥è€å©†å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;ç¨£ç‰§é±¼&#x27;, 351235, 2435, 45325, 5353, 1, 25, 0, 42);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (34, &#x27;2017-12-27 20:53:07&#x27;, &#x27;2017-12-27 20:53:10&#x27;, 0, &#x27;åŒ—é›„&#x27;, &#x27; æœ¬ä¹¦ç®€ä»‹ï¼š å¤§ä¸šå…­å¹´ï¼Œå¼ºç››çš„å¤§éš‹è¿æ¥äº†è½¬æŠ˜ç‚¹ã€‚ è¿™ä¸€å¹´ï¼Œéš‹å¸æ¨å¹¿å¼€å§‹å‡†å¤‡å¾ä¼é«˜ä¸½ï¼Œé¡ºåŠ¿æ‹‰å¼€äº†éš‹æœ«æˆ˜ä¹±çš„åºå¹•ã€‚ æ¥ä¸‹æ¥çš„å‡ å¹´é—´ï¼Œå¤©ä¸‹æ¿è¡ï¼Œç¾¤é›„å¹¶èµ·ã€‚ åå…«è·¯åç‹ï¼Œå…­åå››è·¯çƒŸå°˜ï¼Œè‰è½è±ªæ°ï¼Œé—¨é˜€ä¸–å®¶ï¼Œçº·çº·ç²‰å¢¨ç™»åœºï¼Œé€é¹¿å¤©ä¸‹ã€‚ åŒ—æ–¹çªå¥æ±—å›½ï¼Œé›„è¸æ¼ åŒ—ï¼Œè™è§†çœˆçœˆã€‚ å†…å¿§å¤–æ‚£ä¹‹ä¸‹ï¼Œä¸€ä¸ªå¼ºå¤§çš„å¸å›½ï¼Œæœ€ç»ˆè½°ç„¶å´©å¡Œã€‚ è¿™æ˜¯ä¸ªæœ€å…·ä¼ å¥‡è‰²å½©çš„æ—¶ä»£ï¼Œä¹ŸåŒæ ·æ˜¯ä¸­åŸå¤§åœ°æœ€ä¸ºæ··ä¹±é»‘æš—çš„æ—¶èŠ‚ã€‚ å°±åœ¨è¿™æ ·ä¸€ä¸ªæ—¶å€™ï¼Œä¸€ä¸ªæ¥å†å¥‡å¼‚çš„è¾¹å¡å°‘å¹´ï¼Œå¸¦ç€è‰åŸçš„é£å¯’ï¼Œå’Œä¸€è‚¡æ»¡ä¸åœ¨ä¹çš„åŠ²å¤´ï¼Œä¸€å¤´æ‰è¿›äº†è¿™ä¹±ä¸–æ¼©æ¶¡ä¹‹ä¸­ã€‚ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€ŠåŒ—é›„ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼åŒ—é›„æœ€æ–°ç« èŠ‚,åŒ—é›„æ— å¼¹çª—,åŒ—é›„å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;æ²³è¾¹è‰&#x27;, 5235132, 523, 3425, 35, 1, 25, 0, 143165);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (35, &#x27;2017-12-27 20:53:07&#x27;, &#x27;2017-12-27 20:53:10&#x27;, 0, &#x27;å¼‚ä¸–ç•Œçš„æˆ˜æ–—å¥¶å¦ˆ&#x27;, &#x27; æ›¾ç»è¶…äººæ°”ç½‘ç»œæ¸¸æˆâ€œå¼‚ä¸–ç•Œï¼Œâ€æ›¹ç²æ•æœ‰ä¸‰ä¸ªè§’è‰²åˆ›ä¸‹äº†ä¼ è¯´è®°å½•ã€‚ç‹‚æˆ˜å£«çº¢æ˜­æ„¿ï¼Œæ‰“å‡ºäº†â€œå¼‚ä¸–ç•Œâ€æœ€å¼ºä¸€å‡»çš„çˆ†å‘ä¼¤å®³ï¼›æ­¦åœ£æœæœæš®æš®ï¼Œè¿ç»­ä¸‰æ¬¡èµ›å­£æ‹¿ä¸‹ç«æŠ€åœºSOLOèµ›å† å†›ï¼›èˆ°ç‚®æŒæ§è€…çº¢ç»³ç»“å‘ï¼Œå¸¦é¢†å…¬ä¼šéƒ¨ä¸‹æ‹¿ä¸‹ä¸ƒæ¬¡ä¸–ç•Œçº§BOSSé¦–æ€ï¼›åœ¨å…¶æ¸¸æˆç»ˆæ­¢è¥è¿çš„é‚£ä¸€å¤©ï¼Œæ›¹ç²æ•æƒ³èµ·è‡ªå·±å”¯ç‹¬æ²¡æœ‰ç©è¿‡å¥¶å¦ˆï¼Œç»“æœç­‰åˆ°è¥è¿æ—¶é—´ç»“æŸï¼Œè§’è‰²å´æ— æ³•é€€å‡ºæ¸¸æˆï¼Œæ‹¥æœ‰ç«¥é¢œè´«ä¹³å¤–è¡¨çš„æ›¹ç²æ•å±•å¼€äº†å‰æ‰€æœªæœ‰çš„ç¬¬å››æ¬¡ä¼ è¯´â€¦â€¦ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šå¼‚ä¸–ç•Œçš„æˆ˜æ–—å¥¶å¦ˆã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼å¼‚ä¸–ç•Œçš„æˆ˜æ–—å¥¶å¦ˆæœ€æ–°ç« èŠ‚,å¼‚ä¸–ç•Œçš„æˆ˜æ–—å¥¶å¦ˆæ— å¼¹çª—,å¼‚ä¸–ç•Œçš„æˆ˜æ–—å¥¶å¦ˆå…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;å¤ä¼Šæ°´å¿ƒ&#x27;, 5661233, 26, 35, 3462, 1, 24, 0, 4112);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (36, &#x27;2017-12-27 20:53:07&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;æ­¦æé˜´é˜³&#x27;, &#x27; å¤©åœ°å§‹åˆ†é˜´é˜³ï¼Œäº˜å¤å¹³è¡¡ã€‚æœ‰äººä¼å›¾ä»¥å¤–åŠ›ä¸»å®°äº”è¡Œå¤§é™†ï¼Œé¢ è¦†ä¸–ç•Œï¼ä¸€ä¸ªèº«å…·èŠ±ç“¶ä½“è´¨çš„å°‘å¹´ï¼Œæ— å½¢ä¸­æˆäº†å¯¹æŠ—å¼ºå¤§å¤–åŠ›çš„ä¸»è¦äººé€‰ã€‚åäºŒå²èµ·æ­¥ï¼Œèƒ½å¦æ‹…èµ·é‡ä»»ï¼Ÿè«åé­‚åŠ›ã€äº”è¡Œä¹‹å­ã€çº¢é¢œçŸ¥å·±ã€é˜´é˜³äº’ä¿®â€¦â€¦è¿™é‡Œæ˜¯æ­¦åŠ¨ä¹¾å¤çš„ç²¾å½©ä¸–ç•Œï¼P:æ–°äººæ–°ä¹¦ï¼Œæ›´æ–°ç¨³å®šã€‚ä¹¦å‹ç¾¤249540907ã€‚è¯·å¤šæ”¯æŒï¼ &#x27;, 1, &#x27;æ¥šæ¾æº&#x27;, 455432, 345, 3, 23634, 1, 24, 1, 4145);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (37, &#x27;2017-12-27 20:53:08&#x27;, &#x27;2017-12-27 20:53:09&#x27;, 0, &#x27;è‹çµä¸»å®°&#x27;, &#x27; ä¸‡çµä¸–ç•Œï¼Œå¤©åœ°æ— å ï¼Œå®—æ—åƒä¸‡ï¼Œå¼ºäººè¾ˆå‡ºï¼è‹ç©¹ä¹‹ä¸‹ï¼Œè¡¨é¢ç¾¤é›„å‰²æ®ï¼Œå†…é‡Œæš—æµæ¶ŒåŠ¨ï¼Œåªå¾…å¤§æµªæ·˜æ²™ï¼Œä¼ºæœºä¹˜é£è€Œä¸Šâ€¦â€¦å¹³å‡¡å°å­éŸ©çƒ¨ï¼Œä¹ ç¥ç§˜åŠŸæ³•æ¨ªç©ºå‡ºä¸–ï¼Œè¸å¤ä»‡ä¹‹è·¯ï¼Œå…¥ä¿®ç‚¼å¾é€”ï¼Œæ€èµ·ä¸å¯é˜»æŒ¡ä¹‹æ´ªæµï¼è‡ªæ­¤ï¼Œå±±æ²³æ—¥æœˆå˜â€¦â€¦ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šè‹çµä¸»å®°ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼è‹çµä¸»å®°æœ€æ–°ç« èŠ‚,è‹çµä¸»å®°æ— å¼¹çª—,è‹çµä¸»å®°å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;äººç”Ÿå¥½æ¢¦&#x27;, 561355, 6666, 62, 54325, 1, 24, 1, 2143);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (38, &#x27;2017-12-27 20:53:08&#x27;, &#x27;2017-12-27 20:53:11&#x27;, 0, &#x27;å®šä½å¯»å®ç³»ç»Ÿ&#x27;, &#x27; åˆ«äººç”¨èŠå¤©è½¯ä»¶æ³¡å¦æŠŠå¦¹å­ï¼Œè½»æ¾ä¸€ä¸‹é™„è¿‘äººå°±æ˜¯ç¾å¥³å¦‚äº‘...å¯æ˜¯æˆ‘çš„é™„è¿‘äººé‡Œï¼Œæ²¡æœ‰ä»€ä¹ˆç¾å¥³ç›´æ’­...æœç´¢ä¸€ä¸‹é™„è¿‘äººï¼Œç²¾ç¡®å®šä½å‡ºæ¥çš„...ä¸æ˜¯çµä¸¹å¦™è¯ï¼Œå°±æ˜¯å¤è‘£æ–‡ç‰©...ä¸Šåˆ°å¤©æåœ°å®ï¼Œä¸‹åˆ°è¡¥è‚¾å£®é˜³...éƒ½åªå› è„‘æµ·ä¹‹ä¸­æœ‰ç€ä¸€ä¸ªç³»ç»Ÿï¼Œå¯ä»¥çœ‹åˆ°åˆ«äººçœ‹ä¸åˆ°çš„æœç´¢ä¿¡æ¯...åˆ«è¯´æˆ‘èº«ä¸Šå¸¦ç€BUGï¼Œæˆ‘çœŸçš„å°±æ˜¯æƒ³æ³¡å¦¹å­è€Œå·²...è®¾å®šå¥½è‡ªå·±çš„äººç”Ÿï¼Œèµ°å‡ºä¸€ä¸ªä¸ä¸€æ ·çš„äººç”Ÿå·…å³°... å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šå®šä½å¯»å®ç³»ç»Ÿã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼å®šä½å¯»å®ç³»ç»Ÿæœ€æ–°ç« èŠ‚,å®šä½å¯»å®ç³»ç»Ÿæ— å¼¹çª—,å®šä½å¯»å®ç³»ç»Ÿå…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;æ²é›ªæ²‰é£&#x27;, 123344, 5325, 266, 3425, 1, 24, 1, 12342);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (39, &#x27;2017-12-27 20:53:08&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;ä¸è´¥æˆ˜ç¥&#x27;, &#x27; å°‘å¹´ï¼Œå°±æ˜¯è¦åœ¨é˜³å…‰ä¸‹æŒ¥æ´’æ±—æ°´ï¼ å°‘å¹´ï¼Œå°±æ˜¯è¦ä¸æ–­æˆ˜æ–—ï¼Œç„¶åèƒœåˆ©ï¼ æ— å°½å¤©è·¯ä¹‹æ—…ï¼Œæ— å°½å¾é€”ï¼Œè§è¯å°‘å¹´çš„çƒ­è¡€å’Œä¼ å¥‡ï¼ å¿ƒæ€€é‡æœ›ï¼Œçƒˆè¡€å¦‚ç‡ƒï¼ æ°¸è¿œå°‘å¹´ï¼Œä¸è´¥æˆ˜ç¥ï¼ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šä¸è´¥æˆ˜ç¥ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼ &#x27;, 1, &#x27;æ–¹æƒ³&#x27;, 54633, 2534, 3262, 63263, 1, 24, 1, 2521);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (40, &#x27;2017-12-27 20:53:08&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;è‡³å°Šç¥å¸&#x27;, &#x27; è‡³å°Šç¥å¸çš„ç®€ä»‹ï¼šã€é‡ç£…æ¨èä½è°ƒå“¥å®Œæœ¬å°è¯´ã€Šè‡³å°Šé¾™å¸ã€‹ä¸ã€Šé€é¥ç‹‚å°‘ã€‹ã€‘ä¸€ä¸ªä»å°è¢«äººå˜²ç¬‘ä¸ºåºŸç‰©çš„å°‘å¹´ï¼Œåœ¨ä¸€æ¬¡å±é™©çš„ç‹©çŒä¸­ï¼Œé­äººæ‰“æ–­å››è‚¢ï¼ŒçŸ³æ²‰æ·±æ½­ï¼Œä¸æ–™å´å› ç¥¸å¾—ç¦ï¼Œæ”¶äº†ä¸€åä¸Šå¤ä»™äººçš„æ®‹é­‚ä¸ºä»†ã€‚åœ¨ä»™ä»†çš„æ¿€åŠ±ä¸‹ï¼Œä»–å‡­å€Ÿå¼ºæ‚çš„æ„å¿—åŠ›ä¸ä¸æ‡ˆçš„åŠªåŠ›ï¼Œåœ¨åº„ä¸­æ¯”æ­¦å¤§ä¼šä¸Šä¸€é¸£æƒŠäººï¼Œå½»åº•å‘Šåˆ«äº†åºŸç‰©çš„ç§°å·ï¼Œä¹‹åä»¥æ­¦å…¥é“ï¼Œå†²ç ´äº†ä½“å†…å µå¡çš„ç»è„‰ï¼Œæ‹¥æœ‰äº†äº”è¡Œå…ƒåŠ›çš„è¶…å¼ºä¿®ç‚¼å¤©èµ‹ã€‚ä»æ­¤ï¼Œå¶å¤©å†³å¿ƒå€¾æ¯•ç”Ÿä¹‹åŠ›ï¼Œé€†å¤©æ”¹å‘½ï¼Œå»è¿½å¯»ä¿®ç‚¼çš„æè‡´å¢ƒç•Œã€‚ä¸€è·¯æ€ä»™å¼‘ç¥ï¼Œå½ªæ‚çš„ä¿®ç‚¼ä¹‹è·¯æ— éœ€è§£é‡Šã€‚ &#x27;, 1, &#x27;ä½è°ƒå“¥&#x27;, 432513, 4532, 32234, 3254, 1, 22, 1, 51);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (41, &#x27;2017-12-27 20:53:08&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;ç´«é˜³&#x27;, &#x27; ç´«é˜³ &#x27;, 1, &#x27;é£å¾¡ä¹ç§‹&#x27;, 5513243, 276236, 32445, 6666, 1, 22, 1, 245);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (42, &#x27;2017-12-27 20:53:08&#x27;, &#x27;2017-12-27 20:53:10&#x27;, 0, &#x27;åˆ˜å¤‡çš„æ—¥å¸¸&#x27;, &#x27; ã€å†å²æ–°çºªå…ƒè„‘æ´é£æš´å¾æ–‡ã€‘å‚èµ›ä½œå“ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šåˆ˜å¤‡çš„æ—¥å¸¸ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼åˆ˜å¤‡çš„æ—¥å¸¸æœ€æ–°ç« èŠ‚,åˆ˜å¤‡çš„æ—¥å¸¸æ— å¼¹çª—,åˆ˜å¤‡çš„æ—¥å¸¸å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;ç†é¦™å¦‚é£&#x27;, 521111, 6234, 264534, 3425, 1, 22, 1, 6124);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (43, &#x27;2017-12-27 20:53:08&#x27;, &#x27;2017-12-27 20:53:12&#x27;, 0, &#x27;ç‹‚æ­¦ä»™çš‡&#x27;, &#x27; æˆ‘ä¸ºè¼èšï¼Œä¸–äººå¯æ¬ºï¼Œä¸–äººä¸ºè¼èšï¼Œæˆ‘å¯æ¬ºä¸–äººã€‚ä¸€æ¯ä¸Šå­˜ï¼Œæˆ˜æ–—ä¸æ­¢ã€‚å³ä¾¿æ˜¯æ­»ï¼Œä¹Ÿè¦æ­»çš„æƒŠå¤©åŠ¨åœ°ã€‚ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šç‹‚æ­¦ä»™çš‡ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼ç‹‚æ­¦ä»™çš‡æœ€æ–°ç« èŠ‚,ç‹‚æ­¦ä»™çš‡æ— å¼¹çª—,ç‹‚æ­¦ä»™çš‡å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;ç§‹é£è‹¥æ°´&#x27;, 356623, 626, 62, 23466, 1, 22, 1, 5124);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (44, &#x27;2017-12-27 20:53:08&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;æ–°åˆºå®¢åˆ—ä¼ &#x27;, &#x27; èº²åœ¨é˜´æš—çš„è§’è½ï¼Œå†·é™æ€è€ƒï¼Œä»”ç»†è§‚å¯Ÿå‘¨å›´çš„ä¸€åˆ‡åŠ¨å‘ï¼Œæ›´è¦å°å¿ƒåŒè¡Œæ¥æŠ¢ç”Ÿæ„ã€‚æŸä¸€åˆ»ï¼Œç›®æ ‡å‡ºç°ï¼Œè¿é¢å¾®ç¬‘èµ°è¿‡ã€‚åˆºå‡ºä¸€å‰‘ï¼ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šæ–°åˆºå®¢åˆ—ä¼ ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼æ–°åˆºå®¢åˆ—ä¼ æœ€æ–°ç« èŠ‚,æ–°åˆºå®¢åˆ—ä¼ æ— å¼¹çª—,æ–°åˆºå®¢åˆ—ä¼ å…¨æ–‡é˜…è¯». &#x27;, 1, &#x27;ä¸–å°˜é£&#x27;, 351334, 5234, 2345, 3425, 1, 22, 1, 42315);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (45, &#x27;2017-12-27 20:53:08&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;ä¸æœ½ç¥ç³&#x27;, &#x27; è¿™æ˜¯ä¸€ä¸ªç¥ç§˜çš„ä¸–ç•Œï¼Œè¿™é‡Œæœ‰æœ€å¼ºçš„æ­¦é“ï¼Œæœ€ç¥ç§˜çš„ç³æœ¯ï¼å…«ä¸–å†ï¼Œä¹ä¸ºå°Šï¼ä¸€ä»£å¤ªå¤å¤§èƒ½ï¼Œå†ç»å…«ä¸–ç£¨ç ºè€Œå½’ï¼Œä»–æƒ³ä¸æ˜ç™½ï¼Œè¿™ä¸€ä¸–ä¸ºä»€ä¹ˆé‚£ä¹ˆå¤šæ³•å®æ‰¾ä»–è®¤ä¸»ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰é‚£ä¹ˆå¤šç¾å¥³æ¥ç»™ä»–æš–åºŠï¼Œä½†æ˜¯ä»–çŸ¥é“ï¼Œä»–å°†æ‹¥ç¾å¹¶è¸©ç€æ•Œäººçš„å°¸ä½“ï¼Œèµ°ä¸Šè‡³å°Šä¹‹è·¯ï¼è§å¯»ï¼šâ€œè¿™ä¸€ä¸–ï¼Œæˆ‘è¦è®©æ‰€æœ‰äººéƒ½åœ¨æˆ‘çš„è„šä¸‹é¢¤æŠ–ï¼ç»è‰²ç¾å¥³ä»¬ï¼Œæ¥é™ªå“¥å“¥å¿«ä¹åŒä¿®ã€‚â€ &#x27;, 1, &#x27;é£èˆå¤©ä¸‹&#x27;, 566666, 525, 25342, 45326, 1, 22, 1, 51261);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (46, &#x27;2017-12-27 20:53:09&#x27;, &#x27;2017-12-27 20:53:09&#x27;, 0, &#x27;èŠ±éƒ½å°ä»™åŒ»&#x27;, &#x27; å°ä»™åŒ»æºé€ åŒ–å®å¡”ï¼Œçºµæ¨ªéƒ½å¸‚ï¼Œå®å¡”åœ¨æ‰‹ï¼Œç¾å¥³æˆ‘æœ‰ï¼èµšæœ€å¤šçš„é’±ï¼Œè¸©æœ€ç‰›çš„äººï¼Œå¨¶æœ€ç¾çš„è€å©†ï¼Œä¸“æ²»å„ç§ä¸æœã€‚ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€ŠèŠ±éƒ½å°ä»™åŒ»ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼èŠ±éƒ½å°ä»™åŒ»æœ€æ–°ç« èŠ‚,èŠ±éƒ½å°ä»™åŒ»æ— å¼¹çª—,èŠ±éƒ½å°ä»™åŒ»å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;åä¸‰åˆ€&#x27;, 542135, 2642, 3245, 26346, 1, 22, 1, 2143);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (47, &#x27;2017-12-27 20:53:09&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;å¥³ç¥æ€»è£çˆ±ä¸Šæˆ‘&#x27;, &#x27; èº«æ€€å¼‚èƒ½å´ç”˜äºå¹³æ·¡çš„é…’åº—å°ä¿å®‰ï¼Œä¸ç¾è‹¥å¤©ä»™å´å†·è‹¥å†°éœœçš„æ€»è£æœ‰äº†äº¤é›†ï¼Œå¥¹ä¸»åŠ¨æ±‚å©šä»–å´è¯´ä¸ï¼Œé¢†è¯å½“æ™šé™ªä¼´ä»–çš„å±…ç„¶æ˜¯å¦ä¸ªå¥³äººã€‚ä»æ­¤ï¼Œå„è‰²ç¾å¥³æŠ•æ€€é€æŠ±ï¼Œè¦å‘½çš„æ˜¯æ¯ä¸ªå¥³äººéƒ½å¸¦ç€ä¸€å †ç”©ä¸æ‰çš„éº»çƒ¦â€¦â€¦ &#x27;, 1, &#x27;æ„¤æ€’å°é¸Ÿ&#x27;, 111111, 62624, 52352, 6234, 1, 22, 1, 23415);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (48, &#x27;2017-12-27 20:53:09&#x27;, &#x27;2017-12-27 20:53:18&#x27;, 0, &#x27;èŒå®å°ç¥é¾™ï¼šå¦–çš‡ç››å® ä¸è‰¯å¦ƒ&#x27;, &#x27; éœ‡æƒŠï¼ç»ç¾å°‘å¥³æ£ºæäº§å­ï¼Œå„¿å­å±…ç„¶æ˜¯ä¸ªå¤´ä¸Šæœ‰çŠ„è§’çš„å¦–æ€ªã€‚å‡°æ¸…å¦¤æ¶åœ°å¤§å“­ã€‚å¥‡æ€ªï¼ä¸ºä»€ä¹ˆå¥¹éƒ½æœ‰å­©å­äº†ï¼Œè¿˜æœ‰ç”·äººçº ç¼ ä¸ä¼‘å•Šï¼Ÿå‡°æ¸…å¦¤å“­ç¬‘ä¸å¾—ã€‚æŸå¤©ï¼Œå¦–å­½ç”·å­å°†å¥¹å’šåœ¨æ ‘ä¸Šï¼Œâ€œæ’©å®Œå°±æƒ³è·‘ï¼Œä½ è¦å¯¹æˆ‘è´Ÿè´£ï¼â€å¥¹å‹¾å”‡ä¸€ç¬‘ï¼Œå°†ä»–åå‹ï¼Œâ€œæŠ±æ­‰ï¼Œæˆ‘æ›´å–œæ¬¢åœ¨ä¸Šé¢ã€‚â€ä½œä¸ºä¸€ä»£åŒ»æ¯’åŒç»çš„æ€æ‰‹å¥³ç‹ï¼Œè¯´å¥¹æ˜¯åºŸç‰©ï¼Ÿæ”¾å±ï¼Œæˆ‘æ¥å‘Šè¯‰ä½ ä»€ä¹ˆæ˜¯ç»ä¸–å¤©æ‰ï¼åªæ˜¯ä¸‡ä¸‡æ²¡æƒ³åˆ°æƒ¹ä¸Šäº†ä¸€ä¸ªæ¯”å¥¹æ›´ç»ä¸–æ›´å¦–å­½çš„ç”·äººï¼Œä»æ­¤ä½ è¿½æˆ‘é€ƒï¼Œä½ æ€äººæˆ‘é€’åˆ€ï¼Œä¸€èµ·ç§°ï¼ˆhuoï¼‰éœ¸ï¼ˆhaiï¼‰å¤©ä¸‹ã€‚ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€ŠèŒå®å°ç¥é¾™ï¼šå¦–çš‡ç››å® ä¸è‰¯å¦ƒã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼èŒå®å°ç¥é¾™ï¼šå¦–çš‡ç››å® ä¸è‰¯å¦ƒæœ€æ–°ç« èŠ‚,èŒå®å°ç¥é¾™ï¼šå¦–çš‡ç››å® ä¸è‰¯å¦ƒæ— å¼¹çª—,èŒå®å°ç¥é¾™ï¼šå¦–çš‡ç››å® ä¸è‰¯å¦ƒå…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;å§’ç³–&#x27;, 353251, 252, 24, 26345, 1, 22, 1, 4126);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (49, &#x27;2017-12-27 20:53:09&#x27;, &#x27;2018-09-14 20:54:49&#x27;, 0, &#x27;Xå¤„é¦–å¸­ç‰¹å·¥çš‡å¦ƒ&#x27;, &#x27; &#x27;, 1, &#x27;é€äº‘ä¹‹å·…&#x27;, 3521434, 262345, 2543, 6236, 1, 22, 1, 416213);INSERT INTO `book`(`id`, `create_time`, `update_time`, `status`, `name`, `intro`, `icon`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity`) VALUES (50, &#x27;2017-12-27 20:53:09&#x27;, &#x27;2017-12-27 20:53:10&#x27;, 0, &#x27;ä¹è½¬åœ£çµå†³&#x27;, &#x27; äº”ç™¾å¹´å‰ï¼Œä»–å¿ƒçˆ±çš„å¥³å­ï¼Œç«Ÿçˆ¬ä¸Šäº†è‡ªå·±åŒçˆ¶å¼‚æ¯å“¥å“¥çš„åºŠã€‚æ¯’é…’ç©¿è‚ ï¼Œä¸€ä»£å¤©éª„ï¼Œå°±æ­¤é™¨è½ã€‚äº”ç™¾å¹´åï¼Œä»–é‡ç”Ÿå½’æ¥ã€‚å´å‘ç°æ¯’å®³ä»–çš„ç‹—ç”·å¥³ã€‚å·²ç»Ÿé¢†ä¸ƒæµ·å…«å·ã€‚å·ç§°â€œå‡¤åâ€â€œé¾™å¸â€å¨éœ‡å…«æ–¹ã€‚å½“é¾™åŸå‰‘å‡ºï¼Œé›·éœ†ç ´ç©ºï¼Œéœ‡ç ´è‹ç©¹ï¼Œå±±æ²³ç ´ç¢ï¼Œæ˜Ÿè¾°é™¨è½ã€‚â€œå¾…æˆ‘é‡ä¿®30å¹´ï¼Œå¿…å°†è¸ç ´æ˜Ÿæ²³ï¼Œè¡€æ´—é‡‘éŠ®æ®¿ï¼â€â€¦â€¦â€¦ å„ä½ä¹¦å‹è¦æ˜¯è§‰å¾—ã€Šä¹è½¬åœ£çµå†³ã€‹è¿˜ä¸é”™çš„è¯è¯·ä¸è¦å¿˜è®°å‘æ‚¨QQç¾¤å’Œå¾®åšé‡Œçš„æœ‹å‹æ¨èå“¦ï¼ä¹è½¬åœ£çµå†³æœ€æ–°ç« èŠ‚,ä¹è½¬åœ£çµå†³æ— å¼¹çª—,ä¹è½¬åœ£çµå†³å…¨æ–‡é˜…è¯». &#x27;, 0, &#x27;é›¨å¢¨é£èµ·&#x27;, 511333, 2534, 2345, 6234524, 1, NULL, 1, 51262); åˆ›å»ºç´¢å¼•ä½¿ç”¨ postman ç­‰å·¥å…·åˆ›å»º es ç´¢å¼•ï¼Œå…¶ä¸­ä½¿ç”¨åˆ°äº† ik ä»¥åŠ pinyin åˆ†è¯å™¨ï¼Œå…·ä½“é…ç½®å¯ä»¥å‚è€ƒæˆ‘å‰é¢çš„æ–‡ç« ã€‚ PUT: http://192.168.200.192:9200/novel 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990&#123; &quot;settings&quot;:&#123; &quot;number_of_shards&quot;:5, &quot;number_of_replicas&quot;:1, &quot;analysis&quot;:&#123; &quot;analyzer&quot;:&#123; &quot;pinyin_analyzer&quot;:&#123; &quot;tokenizer&quot;:&quot;ik_smart&quot;, &quot;filter&quot;:[ &quot;full_pinyin_no_space&quot;, &quot;full_pinyin_with_space&quot;, &quot;first_letter_pinyin&quot; ] &#125; &#125;, &quot;filter&quot;:&#123; &quot;full_pinyin_no_space&quot;:&#123; &quot;type&quot;:&quot;pinyin&quot;, &quot;first_letter&quot;:&quot;none&quot;, &quot;padding_char&quot;:&quot;&quot; &#125;, &quot;full_pinyin_with_space&quot;:&#123; &quot;type&quot;:&quot;pinyin&quot;, &quot;first_letter&quot;:&quot;none&quot;, &quot;padding_char&quot;:&quot; &quot; &#125;, &quot;first_letter_pinyin&quot;:&#123; &quot;type&quot;:&quot;pinyin&quot;, &quot;first_letter&quot;:&quot;only&quot;, &quot;padding_char&quot;:&quot;&quot; &#125; &#125; &#125; &#125;, &quot;mappings&quot;:&#123; &quot;book&quot;:&#123; &quot;properties&quot;:&#123; &quot;id&quot;:&#123; &quot;type&quot;:&quot;integer&quot; &#125;, &quot;words&quot;:&#123; &quot;type&quot;:&quot;integer&quot; &#125;, &quot;intro&quot;:&#123; &quot;analyzer&quot;:&quot;ik_smart&quot;, &quot;search_analyzer&quot;:&quot;ik_smart&quot;, &quot;type&quot;:&quot;text&quot; &#125;, &quot;name&quot;:&#123; &quot;analyzer&quot;:&quot;pinyin_analyzer&quot;, &quot;search_analyzer&quot;:&quot;pinyin_analyzer&quot;, &quot;type&quot;:&quot;text&quot; &#125;, &quot;sort&quot;:&#123; &quot;type&quot;:&quot;integer&quot; &#125;, &quot;updatetime&quot;:&#123; &quot;type&quot;:&quot;date&quot;, &quot;format&quot;:&quot;yyyy-MM-dd HH:mm:ss&quot; &#125;, &quot;vip&quot;:&#123; &quot;type&quot;:&quot;boolean&quot; &#125;, &quot;site&quot;:&#123; &quot;type&quot;:&quot;integer&quot; &#125;, &quot;author&quot;:&#123; &quot;analyzer&quot;:&quot;pinyin_analyzer&quot;, &quot;search_analyzer&quot;:&quot;pinyin_analyzer&quot;, &quot;type&quot;:&quot;text&quot; &#125;, &quot;collection&quot;:&#123; &quot;type&quot;:&quot;integer&quot; &#125;, &quot;click&quot;:&#123; &quot;type&quot;:&quot;integer&quot; &#125;, &quot;popularity&quot;:&#123; &quot;type&quot;:&quot;integer&quot; &#125;, &quot;goods&quot;:&#123; &quot;type&quot;:&quot;integer&quot; &#125;, &quot;status&quot;:&#123; &quot;type&quot;:&quot;integer&quot; &#125; &#125; &#125; &#125;&#125; æ³¨æ„ï¼Œè¿™é‡Œç´¢å¼•çš„æ‰€æœ‰å­—æ®µéƒ½æ˜¯å°å†™çš„ï¼Œä¸è¦åŒ…å«å¤§å†™ï¼Œå¦åˆ™åç»­ä¼šå‡ºç°é—®é¢˜ã€‚ç´¢å¼•åˆ›å»ºå¥½äº†ä¹‹åï¼Œå®‰è£… logstashã€‚ å®‰è£… logstashTips: å› ä¸º logstash å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šå ç”¨è¾ƒé«˜çš„ CPU ï¼Œå»ºè®®ä¸è¦æ”¾åœ¨ es é›†ç¾¤çš„æœåŠ¡å™¨ä¸Šï¼Œæœ€å¥½æ¢ä¸€å°æœåŠ¡å™¨è¿›è¡Œå®‰è£…ã€‚ 123wget https://artifacts.elastic.co/downloads/logstash/logstash-6.4.0.tar.gztar -xvf logstash-6.4.0.tar.gz å› ä¸ºå»ºç«‹ç´¢å¼•éœ€è¦ä½¿ç”¨åˆ° logstash-input-jdbcï¼Œæ‰€ä»¥å…ˆé…ç½®è¿™ä¸ªæ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶åœ¨ logstash 5.0 ä¹‹åå°±é»˜è®¤è‡ªå¸¦äº†ï¼Œæ— éœ€å†æ¬¡å®‰è£…ã€‚ é…ç½® logstashåŒæ­¥ä¹‹å…¨é‡åŒæ­¥1234567891011121314151617181920## è¿›å…¥ logstash æ ¹ç›®å½•cd /usr/local/es/logstash-6.4.0## åˆ›å»ºå­˜æ”¾ logstash-input-jdbc ç›¸å…³é…ç½®ä»¥åŠä¾èµ–çš„ç›®å½•mkdir logstash-input-jdbccd logstash-input-jdbc## åˆ›å»ºä¸¤ä¸ªç›®å½•mkdir lib &amp; mkdir conf## ä¸‹è½½ jdbc æ‰€éœ€çš„ mysql é©±åŠ¨åˆ° lib ç›®å½•wget http://central.maven.org/maven2/mysql/mysql-connector-java/6.0.6/mysql-connector-java-6.0.6.jar -P lib/## è¿›å…¥ conf/ ç›®å½•cd conf/## åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ jdbc çš„ sqlï¼Œå¦ä¸€ä¸ªæ˜¯ logstash-input-jdbc çš„é…ç½®æ–‡ä»¶vim mysql2es.sql é¦–å…ˆç¼–å†™ sqlï¼Œ æ„é€ ç´¢å¼•æ‰€éœ€çš„æ•°æ®ã€‚ç”±äºæ˜¯ç¬¬ä¸€æ¬¡åŒæ­¥åˆ° es,æ‰€ä»¥è¿›è¡Œå…¨é‡åŒæ­¥ï¼Œä¸è¿‡è¿™é‡Œçš„å…¨é‡ä¹Ÿå¹¶éæ˜¯ä¸€æ¬¡æ€§æŠŠæŸ¥å‡ºåº“å†…æ‰€æœ‰æ•°æ®ï¼Œè€Œæ˜¯ä¼ªå…¨é‡çš„å¢é‡åŒæ­¥ã€‚ mysql2es.sql å†…å®¹ä¸º 12345678910111213141516171819SELECT `id`, IFNULL( `update_time`, &#x27;1970-01-01 08:00:00&#x27; ) AS `updatetime`, `status`, `name`, IFNULL( `intro`, &#x27;&#x27; ) AS `intro`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity` FROM book WHERE id &gt;= :sql_last_value and id &lt; :sql_last_value + 11 æ³¨æ„ä¸ºäº†é¿å…ä¸€æ¬¡æ€§æŸ¥è¯¢ï¼Œå¯¹æ•°æ®åº“é€ æˆå¤ªå¤§å‹åŠ›ï¼Œå› æ­¤è¿™é‡Œä½¿ç”¨äº†å¢é‡çš„æ–¹å¼æ¥å®Œæˆåˆå§‹åŒ–åŒæ­¥åˆ° esï¼Œè¿™é‡Œçš„ :sql_last_value æ˜¯ logstash ä¸Šä¸€æ­¥åŒæ­¥çš„æœ€åçš„å€¼ï¼Œè¿™é‡Œä¸º idï¼Œä¹Ÿå¯ä»¥æ˜¯æ—¶é—´ã€‚å› ä¸ºæ¼”ç¤ºç”¨çš„æµ‹è¯•æ•°æ®è¾ƒå°‘ï¼Œæ‰€ä»¥æ¯æ¬¡åªåŒæ­¥äº† 10 æ¡è®°å½•ï¼Œå¦‚æœå®é™…ä½¿ç”¨ï¼Œä¸€æ¬¡åŒæ­¥ 1000 æ¡æ¯”è¾ƒåˆé€‚ï¼Œå³ :sql_last_value + 1001 sql æŸ¥è¯¢å‡ºçš„å­—æ®µåè¦ä¸ç´¢å¼•å­—æ®µåç§°å¯¹åº”ä¸Šï¼Œå¦åˆ™æ— æ³•æ˜ å°„åŒæ­¥ã€‚ è¿™é‡Œçš„ mysql2es.sql å°†åœ¨ logstash-input-jdbc ä¸­ç”¨åˆ°ï¼Œåˆ›å»ºæ–‡ä»¶ mysql2es.conf 1vim mysql2es.conf mysql2es.conf çš„å†…å®¹æ˜¯ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152input &#123; stdin &#123; &#125; jdbc &#123; # æ•°æ®åº“ jdbc_connection_string =&gt; &quot;jdbc:mysql://192.168.199.192:3306/novel&quot; # ç”¨æˆ·åå¯†ç  jdbc_user =&gt; &quot;root&quot; jdbc_password =&gt; &quot;123456&quot; # jaråŒ…çš„ä½ç½® jdbc_driver_library =&gt; &quot;/usr/local/es/logstash-6.4.0/logstash-input-jdbc/lib/mysql-connector-java-6.0.6.jar&quot; # mysqlçš„Driver jdbc_driver_class =&gt; &quot;com.mysql.jdbc.Driver&quot; # è¯»å–è¿™ä¸ªsql statement_filepath =&gt; &quot;/usr/local/es/logstash-6.4.0/logstash-input-jdbc/conf/mysql2es.sql&quot; # æŒ‡å®šæ—¶åŒº jdbc_default_timezone =&gt; &quot;Asia/Shanghai&quot; # æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡åŒæ­¥(åˆ† æ—¶ å¤© æœˆ å¹´)ï¼Œæ¯”å¦‚æ¯ååˆ†é’Ÿ(*/10 * * * *) schedule =&gt; &quot;* * * * *&quot; #ç´¢å¼•çš„ç±»å‹ type =&gt; &quot;book&quot; use_column_value =&gt; &quot;true&quot; #tracking_column_type: é€’å¢å­—æ®µçš„ç±»å‹ï¼Œnumeric è¡¨ç¤ºæ•°å€¼ç±»å‹, timestamp è¡¨ç¤ºæ—¶é—´æˆ³ç±»å‹ tracking_column_type =&gt; &quot;numeric&quot; # é€’å¢å­—æ®µ tracking_column =&gt; &quot;id&quot; # ä¿å­˜æ¯æ¬¡åŒæ­¥æ—¶é€’å¢å­—æ®µçš„æœ€åä¸€ä¸ªå€¼åˆ°è¿™ä¸ªæ–‡ä»¶ last_run_metadata_path =&gt; &quot;/usr/local/es/logstash-6.4.0/logstash-input-jdbc/conf/full_sync&quot; &#125;&#125;filter &#123; json &#123; source =&gt; &quot;message&quot; remove_field =&gt; [&quot;message&quot;] &#125;&#125;output &#123; elasticsearch &#123; hosts =&gt; &quot;192.168.199.192:9200&quot; # index ç´¢å¼•å index =&gt; &quot;novel&quot; # éœ€è¦å…³è”çš„æ•°æ®åº“ä¸­æœ‰æœ‰ä¸€ä¸ªidå­—æ®µï¼Œå¯¹åº”ç´¢å¼•çš„idå· document_id =&gt; &quot;%&#123;id&#125;&quot; &#125; stdout &#123; codec =&gt; json_lines &#125;&#125; å¯åŠ¨logstashåŒæ­¥1/usr/local/es/logstash-6.4.0/bin/logstash -f /usr/local/es/logstash-6.4.0/logstash-input-jdbc/conf/mysql2es.conf å¯åŠ¨åç¨ç­‰ä¸€ä¼šå„¿ï¼Œå¦‚æœé…ç½®æ­£ç¡®ä¼šæ‰“å°å‡ºæ‰§è¡Œçš„ sql: 1SELECT `id`,IFNULL(`update_time`,&#x27;1970-01-01 08:00:00&#x27;) AS `updatetime`,`status`,`name`,IFNULL(`intro`,&#x27;&#x27;) AS `intro`,`author`,`words`,`collection`,`goods`,`click`,`site`,`sort`,`vip`,`popularity` FROM book WHERE id&gt; 0 AND id&lt; 0+11 æŸ¥çœ‹ ElasticSearchHead æ§åˆ¶å°ï¼Œå‘ç°ä¹Ÿå·²ç»æœ‰äº† 10 æ¡ç´¢å¼•æ•°æ®ã€‚ç”±äºæ¯æ¬¡åŒæ­¥ 10 æ¡ï¼Œæ¯åˆ†é’ŸåŒæ­¥ä¸€æ¬¡ï¼Œ5åˆ†é’Ÿåï¼Œæµ‹è¯•çš„ 50æ¡è®°å½•ä¹Ÿå·²ç»å…¨éƒ¨è¢«åŒæ­¥åˆ° es é‡Œäº†ã€‚ ctrl + c åœæ­¢åŒæ­¥è¿›ç¨‹ï¼ŒæŸ¥çœ‹æ–‡ä»¶ 1cat /usr/local/es/logstash-6.4.0/logstash-input-jdbc/conf/full_sync æ–‡ä»¶ä¸­çš„æ•°å­—æ­£æ˜¯ä¸Šæ¬¡æœ€ååŒæ­¥çš„ id logstashå¢é‡åŒæ­¥æ ¹æ® id è¿›è¡ŒåŒæ­¥ï¼Œå¦‚æœå¯¹æ•°æ®åº“ä¸­å·²è¢«åŒæ­¥åˆ° es çš„æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œè¿™ä¸ªæ•°æ®ä¹Ÿä¸ä¼šè¢«åŒæ­¥æ›´æ–°åˆ° es å½“ä¸­å»ã€‚ æ ¹æ® id æ¯æ¬¡åŒæ­¥ 1000 æ¡ï¼Œè¿™ç§åŒæ­¥æ–¹å¼ä¹Ÿåªé€‚åˆç¬¬ä¸€æ¬¡å…¨é‡è¿›è¡Œåˆå§‹åŒ–æ—¶å€™ä½¿ç”¨ï¼Œåç»­å¢é‡åŒæ­¥æœ€å¥½æ ¹æ®æ—¶é—´æˆ³çš„æ–¹å¼å®Œæˆã€‚ ä¿®æ”¹ mysql2es.sql 1234567891011121314151617181920SELECT `id`, IFNULL( `update_time`, &#x27;1970-01-01 08:00:00&#x27; ) AS `updatetime`, `status`, `name`, IFNULL( `intro`, &#x27;&#x27; ) AS `intro`, `author`, `words`, `collection`, `goods`, `click`, `site`, `sort`, `vip`, `popularity` FROM book WHERE update_time &gt;= convert_tz(:sql_last_value, &#x27;+00:00&#x27;,&#x27;-08:00&#x27;) order by update_time asc æ³¨æ„è¿™é‡Œä½¿ç”¨åˆ°äº† convert_tz è¿™ä¸ªå‡½æ•°ï¼ŒåŸå› æ˜¯ logstash ä¼šåœ¨åŒæ­¥æ—¶åœ¨æœ€ååŒæ­¥æ—¶é—´å¢åŠ  8 ä¸ªå°æ—¶ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨å‡½æ•°ï¼Œå‡å» 8 ä¸ªå°æ—¶æ‰æ˜¯æ­£ç¡®çš„æ—¶é—´ã€‚ å› ä¸ºlogstash è®°å½•æœ€åä¸€æ¬¡åŒæ­¥çš„å€¼æ˜¯æœ€åä¸€æ¡è®°å½•çš„ï¼Œæ‰€ä»¥ï¼Œæœ€å¥½æ ¹æ® update_time è¿›è¡Œå‡åºæ’åºï¼Œå³å–çš„å€¼æ˜¯ç¦»ç°åœ¨æœ€è¿‘çš„æ—¶é—´ã€‚ ä¿®æ”¹ mysql2es.conf 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152input &#123; stdin &#123; &#125; jdbc &#123; # æ•°æ®åº“ jdbc_connection_string =&gt; &quot;jdbc:mysql://192.168.199.192:3306/novel&quot; # ç”¨æˆ·åå¯†ç  jdbc_user =&gt; &quot;root&quot; jdbc_password =&gt; &quot;123456&quot; # jaråŒ…çš„ä½ç½® jdbc_driver_library =&gt; &quot;/usr/local/es/logstash-6.4.0/logstash-input-jdbc/lib/mysql-connector-java-6.0.6.jar&quot; # mysqlçš„Driver jdbc_driver_class =&gt; &quot;com.mysql.jdbc.Driver&quot; # è¯»å–è¿™ä¸ªsql statement_filepath =&gt; &quot;/usr/local/es/logstash-6.4.0/logstash-input-jdbc/conf/mysql2es.sql&quot; # æŒ‡å®šæ—¶åŒº jdbc_default_timezone =&gt; &quot;Asia/Shanghai&quot; # æ¯åˆ†é’Ÿ schedule =&gt; &quot;* * * * *&quot; #ç´¢å¼•çš„ç±»å‹ type =&gt; &quot;book&quot; use_column_value =&gt; &quot;true&quot; #tracking_column_type: é€’å¢å­—æ®µçš„ç±»å‹ï¼Œnumeric è¡¨ç¤ºæ•°å€¼ç±»å‹, timestamp è¡¨ç¤ºæ—¶é—´æˆ³ç±»å‹ tracking_column_type =&gt; &quot;timestamp&quot; # é€’å¢å­—æ®µ tracking_column =&gt; &quot;updatetime&quot; # ä¿å­˜æ¯æ¬¡åŒæ­¥æ—¶é€’å¢å­—æ®µçš„æœ€åä¸€ä¸ªå€¼åˆ°è¿™ä¸ªæ–‡ä»¶ last_run_metadata_path =&gt; &quot;/usr/local/es/logstash-6.4.0/logstash-input-jdbc/conf/incr_sync&quot; &#125;&#125;filter &#123; json &#123; source =&gt; &quot;message&quot; remove_field =&gt; [&quot;message&quot;] &#125;&#125;output &#123; elasticsearch &#123; hosts =&gt; &quot;192.168.199.192:9200&quot; # index ç´¢å¼•å index =&gt; &quot;novel&quot; # éœ€è¦å…³è”çš„æ•°æ®åº“ä¸­æœ‰æœ‰ä¸€ä¸ªidå­—æ®µï¼Œå¯¹åº”ç´¢å¼•çš„idå· document_id =&gt; &quot;%&#123;id&#125;&quot; &#125; stdout &#123; codec =&gt; json_lines &#125;&#125; ä¿®æ”¹å¢é‡çš„å­—æ®µä¸º updatetimeï¼Œä¸”å­—æ®µç±»å‹è®¾ç½®ä¸º timestampï¼ŒæŒ‡å®šè®°å½•æœ€ååŒæ­¥æ—¶é—´çš„æ–‡ä»¶ä¸º incr_sync ï¼ŒåŒæ—¶åœ¨ conf ç›®å½•ä¸‹åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ incr_syncï¼Œè®¾ç½®ä¸€ä¸‹åˆå§‹å€¼ï¼Œå³åŒæ­¥å¤§äºè®¾ç½®è¿™ä¸ªå€¼çš„æ•°æ®ã€‚ 123456789cd /usr/local/es/logstash-6.4.0/logstash-input-jdbc/conf/vim incr_conf# æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œè¿™é‡Œå…·ä½“æ—¶é—´æ ¹æ®ä½ çš„æƒ…å†µè‡ªè¡Œä¿®æ”¹--- !ruby/object:DateTime &#x27;2018-09-04 16:47:14.000000000 Z&#x27;## æ³¨æ„ä¿®æ”¹åªéœ€è¦æ”¹ 2018-09-04 16:47:14 è¿™ä¸€éƒ¨åˆ†ï¼Œå…¶ä»–åœ°æ–¹å°±ä¸è¦æ”¹ï¼Œæ”¹äº†æ ¼å¼å¯èƒ½ä¼šä¸å¯¹ã€‚ ä¿å­˜é€€å‡ºï¼Œæ‰§è¡ŒåŒæ­¥å‘½ä»¤ 1/usr/local/es/logstash-6.4.0/bin/logstash -f /usr/local/es/logstash-6.4.0/logstash-input-jdbc/conf/mysql2es.conf è¿‡ä¸€ä¼šå„¿ï¼Œæ­£å¸¸è¾“å‡º sql è¯­å¥ 1SELECT `id`,IFNULL(`update_time`,&#x27;1970-01-01 08:00:00&#x27;) AS `updatetime`,`status`,`name`,IFNULL(`intro`,&#x27;&#x27;) AS `intro`,`author`,`words`,`collection`,`goods`,`click`,`site`,`sort`,`vip`,`popularity` FROM book WHERE update_time&gt; &#x27;2018-09-04 16:47:14&#x27; order by update_time asc incr_sync æ–‡ä»¶ä¸­çš„å€¼ï¼Œä¼šå› ä¸ºæ¯æ¬¡åŒæ­¥åŒæ­¥å–çš„æ˜¯æœ€åä¸€æ¡è®°å½•çš„å€¼ï¼Œæ‰€ä»¥æœ€å¥½å¯¹æ—¶é—´è¿›è¡Œæ’åº é…ç½®æ–‡ä»¶ä¸­ï¼Œå½“åœ¨inputçš„jdbcä¸‹ï¼Œå¢åŠ typeå±æ€§æ—¶ï¼Œä¼šå¯¼è‡´è¯¥ç´¢å¼•ä¸‹å¢åŠ typeå­—æ®µã€‚æ‰€ä»¥sqlæŸ¥è¯¢å‡ºçš„å­—æ®µä¸è¦ç”¨typeï¼Œå¦‚æœæœ‰ï¼Œasæˆå…¶ä»–çš„åå­—ï¼Œä¸ç„¶çš„è¯ï¼Œè¿™é‡Œåˆ¤æ–­ä¼šæœ‰å¼‚å¸¸ logstash åŒæ­¥åå°è¿è¡Œä¸Šé¢çš„è¿è¡Œå‘½ä»¤å¦‚æœæ¨å‡ºç»ˆç«¯æˆ–è€…æŒ‰ä¸‹ ctrl + cï¼ŒåŒæ­¥å°±ä¼šç»ˆæ­¢ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è®©åŒæ­¥ä»»åŠ¡åœ¨åå°è¿è¡Œã€‚ 1nouhup /usr/local/es/logstash-6.4.0/bin/logstash -f /usr/local/es/logstash-6.4.0/logstash-input-jdbc/conf/mysql2es.conf &amp; ä½¿ç”¨ nohup å’Œ * å·å°†è¦æ‰§è¡Œçš„è¯­å¥åŒ…è£¹èµ·æ¥ï¼Œå°±å¯ä»¥å®ç°åå°è¿è¡Œäº†ï¼ŒåŒæ—¶ä¼šåœ¨å½“å‰æ‰§è¡Œå‘½ä»¤çš„ç›®å½•ç”Ÿæˆä¸€ä¸ª nohup.out çš„æ–‡ä»¶ï¼Œè¿™é‡Œ logstash çš„è¿è¡Œæ—¥å¿—ä¼šè¢«å†™å…¥åˆ°è¿™ä¸ªæ–‡ä»¶å½“ä¸­ã€‚ 1tail -fn300 nohup.out æœ‰ç–‘é—®?æ¬¢è¿æ¥ä¿¡ï¼Œç»™æˆ‘å†™ä¿¡ å‚è€ƒ https://www.cnblogs.com/licongyu/p/5383334.html https://blog.csdn.net/laoyang360/article/details/51747266 https://segmentfault.com/a/1190000011784259 https://wenchao.ren/archives/393#8 http://www.cnblogs.com/xuwenjin/p/8989043.html","tags":[{"name":"ElasticSearchç´¢å¼•åŒæ­¥åˆ›å»º","slug":"ElasticSearchç´¢å¼•åŒæ­¥åˆ›å»º","permalink":"http://nullpointer.pw/tags/ElasticSearch%E7%B4%A2%E5%BC%95%E5%90%8C%E6%AD%A5%E5%88%9B%E5%BB%BA/"},{"name":"logstashå…¨é‡åŒæ­¥å»ºç«‹esç´¢å¼•","slug":"logstashå…¨é‡åŒæ­¥å»ºç«‹esç´¢å¼•","permalink":"http://nullpointer.pw/tags/logstash%E5%85%A8%E9%87%8F%E5%90%8C%E6%AD%A5%E5%BB%BA%E7%AB%8Bes%E7%B4%A2%E5%BC%95/"},{"name":"logstashå¢é‡åŒæ­¥å»ºç«‹esç´¢å¼•","slug":"logstashå¢é‡åŒæ­¥å»ºç«‹esç´¢å¼•","permalink":"http://nullpointer.pw/tags/logstash%E5%A2%9E%E9%87%8F%E5%90%8C%E6%AD%A5%E5%BB%BA%E7%AB%8Bes%E7%B4%A2%E5%BC%95/"},{"name":"logstash-input-jdbcå¢é‡åŒæ­¥æ—¶é—´ä¸å¯¹","slug":"logstash-input-jdbcå¢é‡åŒæ­¥æ—¶é—´ä¸å¯¹","permalink":"http://nullpointer.pw/tags/logstash-input-jdbc%E5%A2%9E%E9%87%8F%E5%90%8C%E6%AD%A5%E6%97%B6%E9%97%B4%E4%B8%8D%E5%AF%B9/"},{"name":"logstash-input-jdbcå»ºç«‹ç´¢å¼•","slug":"logstash-input-jdbcå»ºç«‹ç´¢å¼•","permalink":"http://nullpointer.pw/tags/logstash-input-jdbc%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95/"}]},{"title":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹IKåˆ†è¯ä»¥åŠæ‹¼éŸ³åˆ†è¯","date":"2018-09-13T13:46:52.000Z","path":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹IKåˆ†è¯ä»¥åŠæ‹¼éŸ³åˆ†è¯.html","text":"elasticsearch å®˜æ–¹é»˜è®¤çš„åˆ†è¯æ’ä»¶ï¼Œå¯¹ä¸­æ–‡åˆ†è¯æ•ˆæœä¸ç†æƒ³ï¼Œå®ƒæ˜¯æŠŠä¸­æ–‡è¯è¯­åˆ†æˆäº†ä¸€ä¸ªä¸€ä¸ªçš„æ±‰å­—ã€‚æ‰€ä»¥æˆ‘ä»¬å¼•å…¥ es æ’ä»¶ es-ikã€‚åŒæ—¶ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œå¼•å…¥ es-pinyin æ’ä»¶ã€‚æœ¬æ–‡ä»‹ç»è¿™ä¸¤ä¸ª es æ’ä»¶çš„å®‰è£…ã€‚ ç¯å¢ƒæœ¬æ–‡ä»¥åŠåç»­ es ç³»åˆ—æ–‡ç« éƒ½åŸºäº 5.5.3 è¿™ä¸ªç‰ˆæœ¬çš„ elasticsearch ï¼Œè¿™ä¸ªç‰ˆæœ¬æ¯”è¾ƒç¨³å®šï¼Œå¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ ik åˆ†è¯å™¨ å’Œ pinyin åˆ†è¯å™¨åœ¨ github ä»“åº“å¯ä»¥æ‰¾åˆ°ï¼Œæ³¨æ„ç‰ˆæœ¬ä¸ elasticsearch çš„ç‰ˆæœ¬éœ€è¦å¯¹åº”ï¼Œæœ¬æ–‡ä½¿ç”¨ 5.5.3 ç‰ˆæœ¬ ik åˆ†è¯å™¨ä¸‹è½½ pinyin åˆ†è¯å™¨ä¸‹è½½ å¦‚æœ elasticsearch ä¸æˆ‘çš„ç‰ˆæœ¬ä¸åŒï¼Œå¯ä»¥å»å®˜æ–¹ github å¯¹åº”çš„ä»“åº“æŸ¥çœ‹å¯¹åº”ç‰ˆæœ¬çš„ ik ä»¥åŠ pinyin åˆ†è¯å™¨ã€‚ ç³»åˆ—æ–‡ç«  ä¸€ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearché›†ç¾¤æ­å»º äºŒã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearchå…¥é—¨ ä¸‰ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹IKåˆ†è¯ä»¥åŠæ‹¼éŸ³åˆ†è¯ å››ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹Logstashå®æ—¶åŒæ­¥å»ºç«‹ç´¢å¼• äº”ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…¥é—¨ å…­ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…³é”®è¯é«˜äº® â€¦ å®‰è£… ik åˆ†è¯å™¨å‰æ–‡ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®‰è£…äº† elasticsearchï¼Œæˆ‘ä»¬åœ¨å…¶åŸºç¡€ä¸Šå®‰è£…åˆ†è¯å™¨ 12345678910111213141516171819202122cd /usr/local/es/## ä¸‹è½½ ik åˆ†è¯å™¨wget https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v5.5.3/elasticsearch-analysis-ik-5.5.3.zip## ä½¿ç”¨ unzip è§£å‹## å¦‚æœæœªå®‰è£…ï¼Œé€šè¿‡ yum instal unzip è¿›è¡Œå®‰è£…unzip elasticsearch-analysis-ik-5.5.3.zip## åœ¨ elasticsearch å®‰è£…ç›®å½•ä¸‹çš„ plugins æ–‡ä»¶å¤¹ä¸‹åˆ›å»º ik ç›®å½•mkdir /usr/local/es/master/plugins/ik## å°†è§£å‹åçš„ ik ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ç§»åŠ¨åˆ° /usr/local/es/master/plugins/ik/mv /usr/local/es/elasticsearch/* /usr/local/es/master/plugins/ik/## é‡å¯ elasticsearch æˆ–å¯åŠ¨ master elasticsearch## æ³¨æ„å¯åŠ¨æ—¶ï¼Œéœ€è¦åˆ‡æ¢åˆ° esuser ç”¨æˆ·## å¯åŠ¨æˆåŠŸåï¼Œæ—¥å¿—é‡Œä¼šæ‰“å°æ­¤è¡Œ[2018-09-02T06:33:43,703][INFO ][o.e.p.PluginsService ] [master] loaded plugin [analysis-ik] éªŒè¯ ik åˆ†è¯å™¨æ˜¯å¦ç”Ÿæ•ˆæ‰“å¼€ Restlet Client æˆ–è€… postman å·¥å…· GET http://192.168.199.192:9200/_analyze?analyzer=ik_smart&amp;text=&quot;ä¸­åäººæ°‘å…±å’Œå›½å›½æ­Œ&quot; ç§»é™¤åä¸º ik çš„analyzerå’Œtokenizer,è¯·åˆ†åˆ«ä½¿ç”¨ ik_smart å’Œ ik_max_wordik_max_word: ä¼šå°†æ–‡æœ¬åšæœ€ç»†ç²’åº¦çš„æ‹†åˆ†ï¼Œæ¯”å¦‚ä¼šå°†â€œä¸­åäººæ°‘å…±å’Œå›½å›½æ­Œâ€æ‹†åˆ†ä¸ºâ€œä¸­åäººæ°‘å…±å’Œå›½,ä¸­åäººæ°‘,ä¸­å,åäºº,äººæ°‘å…±å’Œå›½,äººæ°‘,äºº,æ°‘,å…±å’Œå›½,å…±å’Œ,å’Œ,å›½å›½,å›½æ­Œâ€ï¼Œä¼šç©·å°½å„ç§å¯èƒ½çš„ç»„åˆï¼›ik_smart: ä¼šåšæœ€ç²—ç²’åº¦çš„æ‹†åˆ†ï¼Œæ¯”å¦‚ä¼šå°†â€œä¸­åäººæ°‘å…±å’Œå›½å›½æ­Œâ€æ‹†åˆ†ä¸ºâ€œä¸­åäººæ°‘å…±å’Œå›½,å›½æ­Œâ€ã€‚ è¿™é‡Œ analyzer å¯ä»¥æŒ‡å®šåˆ†è¯ç±»å‹ï¼Œå‘é€è¯·æ±‚è¿”å›ç»“æœï¼š 123456789101112131415161718&#123; &quot;tokens&quot;: [ &#123; &quot;token&quot;: &quot;ä¸­åäººæ°‘å…±å’Œå›½&quot;, &quot;start_offset&quot;: 1, &quot;end_offset&quot;: 8, &quot;type&quot;: &quot;CN_WORD&quot;, &quot;position&quot;: 0 &#125;, &#123; &quot;token&quot;: &quot;å›½æ­Œ&quot;, &quot;start_offset&quot;: 8, &quot;end_offset&quot;: 10, &quot;type&quot;: &quot;CN_WORD&quot;, &quot;position&quot;: 1 &#125; ]&#125; æˆ‘è¿™é‡ŒæŒ‡å®šçš„ analyzer ä¸º ik_smartï¼Œå³ç²—ç²’åº¦åˆ†è¯ï¼Œå¯ä»¥çœ‹åˆ° ik åˆ†è¯å™¨å·²ç»ç”Ÿæ•ˆäº†ã€‚æ¥ä¸‹æ¥ç»§ç»­å®‰è£… pinyin åˆ†è¯å™¨ã€‚ å®‰è£… pinyin åˆ†è¯å™¨1234567891011121314151617181920212223cd /usr/local/es/## ä¸‹è½½ pinyin åˆ†è¯å™¨wget https://github.com/medcl/elasticsearch-analysis-pinyin/releases/download/v5.5.3/elasticsearch-analysis-pinyin-5.5.3.zip## ä½¿ç”¨ unzip è§£å‹## å¦‚æœæœªå®‰è£…ï¼Œé€šè¿‡ yum instal unzip è¿›è¡Œå®‰è£…unzip elasticsearch-analysis-pinyin-5.5.3.zip## åœ¨ elasticsearch å®‰è£…ç›®å½•ä¸‹çš„ plugins æ–‡ä»¶å¤¹ä¸‹åˆ›å»º pinyin ç›®å½•mkdir /usr/local/es/master/plugins/pinyin## å°†è§£å‹åçš„ ik ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ç§»åŠ¨åˆ° /usr/local/es/master/plugins/pinyin/mv /usr/local/es/elasticsearch/* /usr/local/es/master/plugins/pinyin/## é‡å¯ elasticsearch æˆ–å¯åŠ¨ master elasticsearch## æ³¨æ„å¯åŠ¨æ—¶ï¼Œéœ€è¦åˆ‡æ¢åˆ° esuser ç”¨æˆ·## å¯åŠ¨æˆåŠŸåï¼Œæ—¥å¿—é‡Œæ‰“å°[2018-09-02T07:04:56,203][INFO ][o.e.p.PluginsService ] [master] loaded plugin [analysis-ik][2018-09-02T07:04:56,203][INFO ][o.e.p.PluginsService ] [master] loaded plugin [analysis-pinyin] éªŒè¯ pinyin åˆ†è¯å™¨æ˜¯å¦ç”Ÿæ•ˆæ‰“å¼€ Restlet Client æˆ–è€… postman å·¥å…· GET http://192.168.199.192:9200/_analyze?analyzer=pinyin&amp;text=&quot;æå°é¾™&quot; è¿™é‡Œ analyzer å¯ä»¥æŒ‡å®šåˆ†è¯ä¸º pinyinï¼Œå‘é€è¯·æ±‚è¿”å›ç»“æœï¼š 123456789101112131415161718192021222324252627282930313233&#123; &quot;tokens&quot;: [ &#123; &quot;token&quot;: &quot;li&quot;, &quot;start_offset&quot;: 1, &quot;end_offset&quot;: 2, &quot;type&quot;: &quot;word&quot;, &quot;position&quot;: 0 &#125;, &#123; &quot;token&quot;: &quot;xiao&quot;, &quot;start_offset&quot;: 2, &quot;end_offset&quot;: 3, &quot;type&quot;: &quot;word&quot;, &quot;position&quot;: 1 &#125;, &#123; &quot;token&quot;: &quot;long&quot;, &quot;start_offset&quot;: 3, &quot;end_offset&quot;: 4, &quot;type&quot;: &quot;word&quot;, &quot;position&quot;: 2 &#125;, &#123; &quot;token&quot;: &quot;lxl&quot;, &quot;start_offset&quot;: 0, &quot;end_offset&quot;: 3, &quot;type&quot;: &quot;word&quot;, &quot;position&quot;: 2 &#125; ]&#125; è§‚å¯Ÿç»“æœï¼Œè¯´æ˜ pinyin åˆ†è¯å™¨ä¹Ÿå·²ç»ç”Ÿæ•ˆäº†ã€‚ é›†ç¾¤å…¶ä»–èŠ‚ç‚¹åˆ†è¯å™¨å®‰è£…ç°åœ¨åªå¯¹ master è¿›è¡Œäº†å®‰è£…ï¼Œå…¶ä»– slave ä¹Ÿéœ€è¦å®‰è£…ï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡æ‹·è´çš„æ–¹å¼ç›´æ¥æ¥å®Œæˆå®‰è£…äº†ã€‚ 123cp -r master/plugins/ slave1/cp -r master/plugins/ slave2/ å¦‚æœå…¶ä»–èŠ‚ç‚¹åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡ scp å‘½ä»¤æ‹·è´å³å¯ã€‚ æœ‰ç–‘é—®?æ¬¢è¿æ¥ä¿¡ï¼Œç»™æˆ‘å†™ä¿¡ å‚è€ƒ https://github.com/medcl/elasticsearch-analysis-pinyin/issues/19","tags":[{"name":"ElasticSearchä¹‹IKåˆ†è¯å™¨å®‰è£…","slug":"ElasticSearchä¹‹IKåˆ†è¯å™¨å®‰è£…","permalink":"http://nullpointer.pw/tags/ElasticSearch%E4%B9%8BIK%E5%88%86%E8%AF%8D%E5%99%A8%E5%AE%89%E8%A3%85/"},{"name":"ElasticSearchä¹‹pinyinåˆ†è¯å™¨å®‰è£…","slug":"ElasticSearchä¹‹pinyinåˆ†è¯å™¨å®‰è£…","permalink":"http://nullpointer.pw/tags/ElasticSearch%E4%B9%8Bpinyin%E5%88%86%E8%AF%8D%E5%99%A8%E5%AE%89%E8%A3%85/"},{"name":"ElasticSearchä¹‹IKåˆ†è¯å™¨ä¸pinyinåˆ†è¯å™¨ä¸€èµ·ä½¿ç”¨","slug":"ElasticSearchä¹‹IKåˆ†è¯å™¨ä¸pinyinåˆ†è¯å™¨ä¸€èµ·ä½¿ç”¨","permalink":"http://nullpointer.pw/tags/ElasticSearch%E4%B9%8BIK%E5%88%86%E8%AF%8D%E5%99%A8%E4%B8%8Epinyin%E5%88%86%E8%AF%8D%E5%99%A8%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8/"}]},{"title":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearchå…¥é—¨","date":"2018-09-13T13:45:26.000Z","path":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearchå…¥é—¨.html","text":"æœ¬æ–‡ç®€å•ä»‹ç»äº†ä½¿ç”¨ Rest æ¥å£ï¼Œå¯¹ es è¿›è¡Œæ“ä½œï¼Œæ›´æ·±å…¥çš„å­¦ä¹ ï¼Œå¯ä»¥å‚è€ƒæ–‡æœ«éƒ¨åˆ†ã€‚ ç¯å¢ƒæœ¬æ–‡ä»¥åŠåç»­ es ç³»åˆ—æ–‡ç« éƒ½åŸºäº 5.5.3 è¿™ä¸ªç‰ˆæœ¬çš„ elasticsearch ï¼Œè¿™ä¸ªç‰ˆæœ¬æ¯”è¾ƒç¨³å®šï¼Œå¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ ç³»åˆ—æ–‡ç«  ä¸€ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearché›†ç¾¤æ­å»º äºŒã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearchå…¥é—¨ ä¸‰ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹IKåˆ†è¯ä»¥åŠæ‹¼éŸ³åˆ†è¯ å››ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹Logstashå®æ—¶åŒæ­¥å»ºç«‹ç´¢å¼• äº”ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…¥é—¨ å…­ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…³é”®è¯é«˜äº® â€¦ åŸºç¡€æ¦‚å¿µç´¢å¼•â€“ç›¸å½“äºæ•°æ®åº“ç±»å‹â€“ç›¸å½“äºè¡¨æ–‡æ¡£â€“ç›¸å½“äºä¸€æ¡è®°å½•åˆ†ç‰‡â€“å¯¹ç´¢å¼•è¿›è¡Œåˆ†ç‰‡ï¼Œåˆ†å¸ƒäºé›†ç¾¤å„ä¸ªèŠ‚ç‚¹ä¸Šï¼Œé™ä½å•ä¸ªèŠ‚ç‚¹çš„å‹åŠ›å¤‡ä»½â€“æ‹·è´åˆ†ç‰‡å°±å®Œæˆäº†å¤‡ä»½ åŸºæœ¬è¯­æ³• ç´¢å¼•ç´¢å¼•ç±»å‹ ç»“æ„åŒ–ç´¢å¼• ç‰¹ç‚¹ï¼šé€šè¿‡æ¥å£åˆ›å»ºï¼Œå¯ä»¥æŒ‡å®š mappings url:port/ç´¢å¼•å/ç±»å‹å/_mappings éç»“æ„åŒ–ç´¢å¼• ç‰¹ç‚¹ï¼šé€šè¿‡ elasticsearch head åˆ›å»º mapping ä¸ºç©º ä½¿ç”¨ RestClient/PostMan åˆ›å»ºç»“æ„åŒ–ç´¢å¼•åˆ›å»ºä¸€ä¸ª people çš„ç´¢å¼•ï¼ŒåŒ…å«ä¸€ä¸ªç±»å‹ man 12345678910111213141516171819202122232425&#123; &quot;settings&quot;:&#123; &quot;number_of_shards&quot;:3, &quot;number_of_replicas&quot;:1 &#125;, &quot;mappings&quot;:&#123; &quot;man&quot;:&#123; &quot;properties&quot;:&#123; &quot;name&quot;:&#123; &quot;type&quot;:&quot;text&quot; &#125;, &quot;country&quot;:&#123; &quot;type&quot;:&quot;keyword&quot; &#125;, &quot;age&quot;:&#123; &quot;type&quot;:&quot;integer&quot; &#125;, &quot;date&quot;:&#123; &quot;type&quot;:&quot;date&quot;, &quot;format&quot;:&quot;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&quot; &#125; &#125; &#125; &#125;&#125; keyword ä¸ text çš„åŒºåˆ«type ç±»å‹ä¸º keyword çš„æ—¶å€™ï¼ŒES ä¸ä¼šå¯¹å…¶è¿›è¡Œåˆ†è¯ï¼Œè€Œ text ä¼šè¢«åˆ†è¯ es é€šè¿‡ rest æ¥å£å¯¹æ•°æ®æ“ä½œæ’å…¥æ•°æ® æŒ‡å®šæ–‡æ¡£ id æ’å…¥ PUT è¯·æ±‚ï¼š ip:port/ç´¢å¼•/ç±»å‹/id è‡ªåŠ¨äº§ç”Ÿæ–‡æ¡£ id æ’å…¥ POST è¯·æ±‚ï¼š ip:port/ç´¢å¼•/ç±»å‹ ä¿®æ”¹æ•°æ® ç›´æ¥ä¿®æ”¹ POST è¯·æ±‚ï¼š ip:port/ç´¢å¼•/ç±»å‹/id/_update åˆ é™¤æ•°æ®/åˆ é™¤ç´¢å¼• åˆ é™¤æ–‡æ¡£ DELETE è¯·æ±‚ ip:ç«¯å£/ç´¢å¼•/ç±»å‹/id åˆ é™¤ç´¢å¼• DELETE è¯·æ±‚ ip:ç«¯å£/ç´¢å¼• æŸ¥è¯¢æ•°æ® ç®€å•æŸ¥è¯¢ GET è¯·æ±‚ï¼š ip:ç«¯å£/ç´¢å¼•/ç±»å‹/id æ¡ä»¶æŸ¥è¯¢ POSTè¯·æ±‚ï¼š ip:ç«¯å£/ç´¢å¼•/_search æŒ‡å®šæ¡ä»¶æŸ¥è¯¢,åˆ†é¡µä¸æ’åº 12345678910111213141516&#123; &quot;query&quot;:&#123; &quot;match&quot;:&#123; &quot;name&quot;:&quot;WeJan&quot; &#125; &#125;, &quot;sort&quot;:[ &#123; &quot;age&quot;:&#123; &quot;order&quot;:&quot;asc&quot; &#125; &#125; ], &quot;from&quot; : 0, &quot;size&quot; : 10 &#125; èšåˆæŸ¥è¯¢ POSTè¯·æ±‚ï¼š ip:ç«¯å£/ç´¢å¼•/_search åˆ†ç»„ï¼Œå¯ä»¥å¤šä¸ªåˆ†ç»„ 123456789&#123; &quot;aggs&quot;:&#123; &quot;group_by_age&quot;:&#123; &quot;terms&quot;:&#123; &quot;field&quot;:&quot;age&quot; &#125; &#125; &#125;&#125; èšåˆè®¡ç®— 123456789&#123; &quot;aggs&quot;:&#123; &quot;age_count&quot;:&#123; &quot;stats&quot;:&#123; &quot;field&quot;:&quot;age&quot; &#125; &#125; &#125;&#125; sum avg max min count é«˜çº§æŸ¥è¯¢ ä¹ è¯­åŒ¹é…ï¼ˆå…¨è¯åŒ¹é…ï¼‰ 1234567&#123; &quot;query&quot;:&#123; &quot;match_phrase&quot;:&#123; &quot;name&quot;:&quot;WeJan&quot; &#125; &#125;&#125; å¤šå­—æ®µåŒ¹é…ï¼Œå¤šä¸ªå­—æ®µåŒ…å«query 12345678&#123; &quot;query&quot;:&#123; &quot;multi_match&quot;:&#123; &quot;query&quot;:&quot;WeJan&quot;, &quot;fields&quot;:[&quot;author&quot;, &quot;title&quot;] &#125; &#125;&#125; query_string æ–‡æœ¬æŸ¥è¯¢ 1234567&#123; &quot;query&quot;:&#123; &quot;query_string&quot;:&#123; &quot;name&quot;:&quot;(WeJan AND Jan) OR å“ˆå“ˆ&quot; &#125; &#125;&#125; é’ˆå¯¹å¤šä¸ªå­—æ®µçš„æ–‡æœ¬æŸ¥è¯¢ 12345678&#123; &quot;query&quot;:&#123; &quot;query_string&quot;:&#123; &quot;name&quot;:&quot;WeJan OR å“ˆå“ˆ&quot;, &quot;fields&quot;:[&quot;author&quot;, &quot;title&quot;] &#125; &#125;&#125; å­—æ®µæŸ¥è¯¢,æ¯”å¦‚å¹´é¾„ï¼Œåˆ†ç±» 1234567&#123; &quot;query&quot;:&#123; &quot;term&quot;:&#123; &quot;age&quot;:25 &#125; &#125;&#125; èŒƒå›´æŸ¥è¯¢ï¼Œå¯ä»¥å¯¹æ—¶é—´å­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼Œç°åœ¨ä½¿ç”¨ â€œnowâ€æ›¿ä»£ 12345678910&#123; &quot;query&quot;:&#123; &quot;range&quot;:&#123; &quot;age&quot;:&#123; &quot;gte&quot;:26, &quot;lte&quot;:36 &#125; &#125; &#125;&#125; å‚è€ƒ æ…•è¯¾ç½‘ElasticSearchå…¥é—¨","tags":[{"name":"ElasticSearchè¯­æ³•å…¥é—¨","slug":"ElasticSearchè¯­æ³•å…¥é—¨","permalink":"http://nullpointer.pw/tags/ElasticSearch%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8/"}]},{"title":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearché›†ç¾¤æ­å»º","date":"2018-09-13T13:44:35.000Z","path":"å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearché›†ç¾¤æ­å»º.html","text":"æˆ‘ä»¬æ‰€å¸¸è§çš„ç”µå•†æœç´¢å¦‚äº¬ä¸œï¼Œæœç´¢é¡µé¢éƒ½ä¼šæä¾›å„ç§å„æ ·çš„ç­›é€‰æ¡ä»¶ï¼Œæ¯”å¦‚å“ç‰Œã€å°ºå¯¸ã€é€‚ç”¨å­£èŠ‚ã€ä»·æ ¼åŒºé—´ç­‰ï¼ŒåŒæ—¶æä¾›æ’åºï¼Œæ¯”å¦‚ä»·æ ¼æ’åºï¼Œä¿¡èª‰æ’åºï¼Œé”€é‡æ’åºç­‰ï¼Œæ–¹ä¾¿äº†ç”¨æˆ·å»æ‰¾åˆ°è‡ªå·±å¿ƒé‡Œç†æƒ³çš„å•†å“ã€‚ ç«™å†…æœç´¢å¯¹äºä¸€ä¸ªç½‘ç«™å‡ ä¹æ˜¯æ ‡é…ï¼Œåªæ˜¯æœç´¢çš„å¼ºå¤§ä¸å¦çš„åŒºåˆ«ï¼Œæœ‰çš„ç½‘ç«™åªæ”¯æŒå…³é”®è¯æ¨¡ç³Šæœç´¢ï¼Œè€Œæ·˜å®ï¼Œäº¬ä¸œæä¾›äº†ç²¾ç»†çš„ç­›é€‰æ¡ä»¶ï¼ŒåŒæ—¶æ”¯æŒæ‹¼éŸ³æœç´¢ç­‰æ›´æ–¹ä¾¿çš„æœç´¢æ–¹å¼ã€‚ ç”±äºç¬”è€…åœ¨ä¸€å®¶åšç½‘ç»œæ–‡å­¦çš„å…¬å¸å·¥ä½œï¼Œæ‰€ä»¥å®ç°å°±æ˜¯ä»¥å°è¯´ä¸ºå•†å“çš„æœç´¢ï¼Œå…·ä½“å¯ä»¥å‚è€ƒèµ·ç‚¹ç½‘å°è¯´çš„æœç´¢ã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œèµ·ç‚¹ç½‘çš„æœç´¢æä¾›äº†å…³é”®è¯æœç´¢å’Œæ’åºæ¡ä»¶ä»¥åŠç­›é€‰æ¡ä»¶ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å®ç°è¿™ä¸ªå§~ ç¯å¢ƒæœ¬æ–‡ä»¥åŠåç»­ es ç³»åˆ—æ–‡ç« éƒ½åŸºäº 5.5.3 è¿™ä¸ªç‰ˆæœ¬çš„ elasticsearch ï¼Œè¿™ä¸ªç‰ˆæœ¬æ¯”è¾ƒç¨³å®šï¼Œå¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ ç³»åˆ—æ–‡ç«  ä¸€ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearché›†ç¾¤æ­å»º äºŒã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹ElasticSearchå…¥é—¨ ä¸‰ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹IKåˆ†è¯ä»¥åŠæ‹¼éŸ³åˆ†è¯ å››ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹Logstashå®æ—¶åŒæ­¥å»ºç«‹ç´¢å¼• äº”ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…¥é—¨ å…­ã€å’Œæˆ‘ä¸€èµ·æ‰“é€ ä¸ªç®€å•æœç´¢ä¹‹SpringDataElasticSearchå…³é”®è¯é«˜äº® â€¦ ç¯å¢ƒå‡†å¤‡ä¹‹ ES é›†ç¾¤æ­å»ºmaster é…ç½®1234567891011121314151617181920212223242526272829303132333435## ä¸‹è½½ elasticsearchwget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.5.3.tar.gz## åˆ›å»ºç›®å½•mkdir /usr/local/es## è§£å‹æ–‡ä»¶åˆ° es ç›®å½•tar -xvf elasticsearch-5.5.3.tar.gz -C /usr/local/es## ä¿®æ”¹ es çš„é…ç½®æ–‡ä»¶cd /usr/local/es/elasticsearch-5.5.3/configvim elasticsearch.yml## åœ¨æ–‡ä»¶æœ«å°¾å¢åŠ http.cors.enabled: truehttp.cors.allow-origin: &quot;*&quot;cluster.name: es-searchnode.name: slave1node.master: truenetwork.host: 0.0.0.0## ä¿®æ”¹ es çš„ jvm è®¾ç½®ï¼Œå¦‚æœä¸è°ƒèŠ‚ï¼Œå¯èƒ½å¯åŠ¨ä¸€ä¸ª master, slave å°±æ²¡è¶³å¤Ÿå†…å­˜æ¥å¯åŠ¨äº†vim jvm.optionsä¿®æ”¹-Xms2g -Xmx2gä¸º-Xms512m-Xmx512mæ³¨æ„ï¼Œå¦‚æœæ˜¯çº¿ä¸Šï¼Œè¿™ä¸ªå†…å­˜å°±ä¸è¦ä¿®æ”¹äº†ï¼Œä½¿ç”¨é»˜è®¤çš„å†…å­˜ 2G å³å¯ã€‚ slave é…ç½®123456789101112131415161718192021222324252627282930313233343536## å‡†å¤‡æ­å»ºä¸€ä¸ªä¼ªé›†ç¾¤ 1ä¸ªmaster + 2ä¸ªslavecd /usr/local/es## å°†ç›®å½•é‡å‘½åä¸º master[root@localhost es]# mv elasticsearch-5.5.3/ master##æ‹·è´ä¸¤ä»½ä¸º slave[root@localhost es]# cp -r master/ slave1[root@localhost es]# cp -r master/ slave2## ä¿®æ”¹ä¸¤ä¸ª slave çš„é…ç½®### ä¿®æ”¹ slave1 çš„é…ç½®[root@localhost es]# vim slave1/config/elasticsearch.ymlhttp.cors.enabled: truehttp.cors.allow-origin: &quot;*&quot;cluster.name: es-searchnode.name: slave1## æ³¨æ„ http ç«¯å£ä¸è¦è®¾ç½®ä¸€æ ·ï¼Œä»¥å…å†²çªhttp.port: 8200#node.master: truenetwork.host: 0.0.0.0### ä¿®æ”¹ slave2 çš„é…ç½®[root@localhost es]# vim slave2/config/elasticsearch.ymlhttp.cors.enabled: truehttp.cors.allow-origin: &quot;*&quot;cluster.name: es-searchnode.name: slave2## æ³¨æ„ http ç«¯å£ä¸è¦è®¾ç½®ä¸€æ ·ï¼Œä»¥å…å†²çªhttp.port: 7200#node.master: truenetwork.host: 0.0.0.0 æ·»åŠ ç”¨æˆ·123456789## å¯åŠ¨ es ä¸èƒ½ä½¿ç”¨ root ç”¨æˆ·ï¼Œæ‰€ä»¥å…ˆéœ€è¦å¢åŠ æ–°çš„ç”¨æˆ·[root@localhost es]# adduser esuser[root@localhost es]# chown -R esuser /usr/local/es/## åˆ‡æ¢åˆ° esuser ç”¨æˆ·[root@localhost es]# su esuser[esuser@localhost es]$ chmod 777 /usr/local/es/ å¯åŠ¨é›†ç¾¤ä¸­çš„ master123456789101112131415161718192021222324252627282930313233343536373839404142# å…ˆæµ‹è¯•èƒ½å¦æ­£å¸¸å¯åŠ¨[esuser@localhost es]$ /usr/local/es/master/bin/elasticsearch# æŸ¥çœ‹æ‰“å°çš„æ—¥å¿—ä¿¡æ¯[2018-09-02T01:45:21,125][INFO ][o.e.g.GatewayService ] [master] recovered [0] indices into cluster_state[2018-09-02T01:45:21,138][INFO ][o.e.h.n.Netty4HttpServerTransport] [master] publish_address &#123;127.0.0.1:9200&#125;, bound_addresses &#123;127.0.0.1:9200&#125;[2018-09-02T01:45:21,138][INFO ][o.e.n.Node ] [master] started## å¯åŠ¨å¤±è´¥æç¤ºERROR: [2] bootstrap checks failed[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536][2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]## åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼Œä¿®æ”¹ç³»ç»Ÿé…ç½®su root# è¾“å…¥ç™»å½•å¯†ç vim /etc/security/limits.conf## åœ¨æ–‡ä»¶æœ«å°¾å¢åŠ ï¼Œä¸è¦å»æ‰å‰é¢çš„ * å·* soft nofile 300000* hard nofile 300000* soft nproc 102400* soft memlock unlimited* hard memlock unlimited## å¯¹ sysctl.conf æ–‡ä»¶ è¿›è¡Œä¿®æ”¹echo &quot;vm.max_map_count=262144&quot; &gt; /etc/sysctl.confsysctl -p## ä¿®æ”¹å®Œæ¯•ï¼Œåˆ‡æ¢å› esuser ç”¨æˆ·èº«ä»½su esuser## å°è¯•å¯åŠ¨[esuser@localhost es]$ /usr/local/es/master/bin/elasticsearch# æç¤ºå·²ç»å¯åŠ¨æˆåŠŸäº†[2018-09-02T02:10:14,285][INFO ][o.e.h.n.Netty4HttpServerTransport] [master] publish_address &#123;192.168.199.192:9200&#125;, bound_addresses &#123;[::]:9200&#125;[2018-09-02T02:10:14,285][INFO ][o.e.n.Node ] [master] started[2018-09-02T02:10:14,289][INFO ][o.e.g.GatewayService ] [master] recovered [0] indices into cluster_state éªŒè¯å¯åŠ¨ä½¿ç”¨æµè§ˆå™¨è®¿é—® http://ip:9200 ip æ›¿æ¢ä½ çš„ ip åœ°å€ï¼Œæˆ‘çš„æ˜¯ http://192.168.199.192:9200 æµè§ˆå™¨å“åº”å†…å®¹ 12345678910111213&#123; name: &quot;master&quot;, cluster_name: &quot;es-search&quot;, cluster_uuid: &quot;JoNUMEKFS06NHNS7p3bdWg&quot;, version: &#123; number: &quot;5.5.3&quot;, build_hash: &quot;9305a5e&quot;, build_date: &quot;2017-09-07T15:56:59.599Z&quot;, build_snapshot: false, lucene_version: &quot;6.6.0&quot; &#125;, tagline: &quot;You Know, for Search&quot;&#125; æ³¨æ„ï¼šå¦‚æœæ— æ³•è®¿é—®ï¼Œè¯·å…³é—­é˜²ç«å¢™ åå°å®ˆæŠ¤è¿›ç¨‹å¯åŠ¨ es é›†ç¾¤å‰æ–‡æ˜¯ç›´æ¥å¯åŠ¨ï¼Œå¦‚æœæŒ‰ä¸‹ ctrl + c æˆ–è€…ç»“æŸ ssh ä¼šè¯ï¼Œes ä¼šç«‹å³åœæ­¢é€€å‡ºï¼Œå› æ­¤éœ€è¦é€šè¿‡å®ˆæŠ¤è¿›ç¨‹åå°å¯åŠ¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445[esuser@localhost es]$ /usr/local/es/master/bin/elasticsearch -d## æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸps -ef | grep elasticsearch## æ­£å¸¸å¯ä»¥çœ‹åˆ°ä¸€ä¸ª elasticsearch è¿›ç¨‹## å¦‚å‰æ–‡ä¸€æ ·ï¼Œåˆ†åˆ«æµ‹è¯•ä¸¤ä¸ª slave æ˜¯å¦å¯ä»¥æ­£å¸¸å¯åŠ¨### æµ‹è¯•slave1[esuser@localhost es]$ /usr/local/es/slave1/bin/elasticsearch -d### æµè§ˆå™¨è®¿é—® http://ip:8200ï¼Œå“åº”ä¸ºï¼š&#123; &quot;name&quot;:&quot;slave1&quot;, &quot;cluster_name&quot;:&quot;es-search&quot;, &quot;cluster_uuid&quot;:&quot;JoNUMEKFS06NHNS7p3bdWg&quot;, &quot;version&quot;:&#123; &quot;number&quot;:&quot;5.5.3&quot;, &quot;build_hash&quot;:&quot;9305a5e&quot;, &quot;build_date&quot;:&quot;2017-09-07T15:56:59.599Z&quot;, &quot;build_snapshot&quot;:false, &quot;lucene_version&quot;:&quot;6.6.0&quot; &#125;, &quot;tagline&quot;:&quot;You Know, for Search&quot;&#125;### æµ‹è¯•slave2[esuser@localhost es]$ /usr/local/es/slave2/bin/elasticsearch -d### æµè§ˆå™¨è®¿é—® http://ip:8200ï¼Œå“åº”ä¸ºï¼š&#123; name: &quot;slave2&quot;, cluster_name: &quot;es-search&quot;, cluster_uuid: &quot;JoNUMEKFS06NHNS7p3bdWg&quot;, version: &#123; number: &quot;5.5.3&quot;, build_hash: &quot;9305a5e&quot;, build_date: &quot;2017-09-07T15:56:59.599Z&quot;, build_snapshot: false, lucene_version: &quot;6.6.0&quot; &#125;, tagline: &quot;You Know, for Search&quot;&#125; è‡³æ­¤å®Œæˆäº† es é›†ç¾¤(ä¼ª)çš„æ­å»ºã€‚ ç¯å¢ƒå‡†å¤‡ä¹‹ elasticsearch head å®‰è£…ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬è§‚å¯Ÿè°ƒè¯•ï¼Œå®‰è£…è¿™ä¸ª es æ’ä»¶ã€‚ å®‰è£…æ­¥éª¤å‚è€ƒå®˜æ–¹ github 1234567# æŠŠæ’ä»¶å®‰è£…åˆ° es ç›®å½•ä¸‹cd /usr/local/es/git clone git://github.com/mobz/elasticsearch-head.git cd elasticsearch-head npm installnpm run start åœ¨ npm install è¿™ä¸€æ­¥ï¼Œç”±äºå›½å†…ç½‘ç»œç¯å¢ƒçš„åŸå› ï¼Œå¯èƒ½ä¼šå¤±è´¥ï¼Œå¯ä»¥npm æ¢æºé‡è¯•ã€‚ å¯åŠ¨å®Œæˆåï¼Œæµè§ˆå™¨è®¿é—® http://ip:9100ï¼Œæˆ‘çš„æ˜¯ http://192.168.199.192:9100/ è¿™é‡Œéœ€è¦ä¿®æ”¹è¿æ¥åœ°å€ï¼Œä¸ºä½ çš„ es æ‰€åœ¨çš„ ip:9200ã€‚åé¢é›†ç¾¤å¥åº·ä¸ºç»¿è‰²ä¸ºæ­£å¸¸ã€‚ åˆ°è¿™é‡Œï¼Œæ’ä»¶ä¹Ÿå°±å®‰å¥½äº†ã€‚ åˆ†è¯å•†å“æœç´¢ï¼Œåˆ†è¯æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå¼€æºçš„ä¸­æ–‡åˆ†è¯æœ€æœ‰åçš„è«è¿‡äº IK åˆ†è¯äº†ï¼ŒåŒæ—¶ä¸ºäº†ç»™ç”¨æˆ·æä¾›æ›´å¥½çš„ä½“éªŒï¼ŒåŒæ—¶é…ç½® pinyin åˆ†è¯ï¼Œå³è¾“å…¥æ‹¼éŸ³ä¹Ÿå¯ä»¥è¿›è¡Œæœç´¢ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¯¹åº”çš„åˆ†è¯å™¨ï¼Œåœ¨ä¸‹æ–‡ä¸­æˆ‘ä»¬ä¸€èµ·æ¥é…ç½®åˆ†è¯å™¨ã€‚ æœ‰ç–‘é—®?æ¬¢è¿æ¥ä¿¡ï¼Œç»™æˆ‘å†™ä¿¡","tags":[{"name":"ElasticSearchç¯å¢ƒæ­å»º","slug":"ElasticSearchç¯å¢ƒæ­å»º","permalink":"http://nullpointer.pw/tags/ElasticSearch%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"}]},{"title":"çˆ¬è™«å…ƒç´ é€‰æ‹©æŠ€å·§","date":"2018-08-31T14:11:06.000Z","path":"çˆ¬è™«å…ƒç´ é€‰æ‹©æŠ€å·§.html","text":"å‰è¨€ä½œä¸ºä¸€ä¸ªçˆ¬è™«æ¡†æ¶ï¼ŒWebMagic æä¾›äº†å¤šç§é€‰æ‹©å™¨ä¾¿äºæˆ‘ä»¬çš„ä½¿ç”¨ã€‚ä½¿ç”¨ Selectable æ¥å¯¹å†…å®¹è¿›è¡Œé“¾å¼æŠ½å–ï¼Œå¸¸ç”¨çš„æŠ½å–æ–¹å¼æœ‰ï¼šCSS é€‰æ‹©å™¨ã€XPathï¼Œæ­£åˆ™è¡¨è¾¾å¼ï¼ŒJsonPathã€‚ä»Šå¤©å†™å†™å¦‚ä½•åˆ©ç”¨ä¸€äº›å·¥å…·ï¼Œæ¥å¿«æ·ç¼–å†™è¿™äº›é€‰æ‹©è¯­æ³•ã€‚ å·¥å…·å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œæœ‰äº†ä¸€ä»¶è¶æ‰‹çš„å…µå™¨ï¼Œå¹²èµ·æ´»æ¥ä¹Ÿåˆ©ç´¢ã€‚å·¥å…·ä¸»è¦ç”¨åˆ°äº† Chrome è°·æ­Œæµè§ˆå™¨ Chrome æ’ä»¶ XPath Helper(å¦‚æœä½ ç¿»ä¸äº† Q çš„è¯ï¼Œå¯ä»¥åœ¨è¿™é‡Œ ä¸‹è½½ æ’ä»¶) é€‰æ‹©å¯¹è±¡ä¸ºäº†æ–¹ä¾¿å®éªŒï¼Œæˆ‘é€‰æ‹©å¯¹ æ˜é‡‘ (https://juejin.im/) è¿™ä¸ªç½‘ç«™è¿›è¡Œå®éªŒã€‚ä»¥ä¸‹å†…å®¹é»˜è®¤ä½¿ç”¨çš„æ˜¯ Chromeã€‚ å®šä¹‰ä¸€ä¸ªå‡çš„éœ€æ±‚å§ï¼Œéœ€è¦å¯¹æ˜é‡‘çƒ­é—¨è¿›è¡Œçˆ¬å–ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ è¿™é‡Œæˆ‘ä»¬åªæƒ³è¦è·å–è¿™é‡Œçš„æ‰€æœ‰çš„æ ‡é¢˜ Xpath æŠ½å–å…·ä½“æ­¥éª¤ï¼š ç‚¹å‡»é¡µé¢ç©ºç™½å¤„ï¼Œä½¿ç”¨å¿«æ·é”® ctrl + shift + x è°ƒå‡º Xpath Helper å·¥å…·ï¼Œè°ƒå‡ºåï¼ŒæŒ‰ä½ shift ç§»åŠ¨é¼ æ ‡å¯ä»¥é€‰æ‹©å…ƒç´ ï¼Œå¹¶ä¸”è¯¥å…ƒç´ çš„ xpath ä¼šæ˜¾ç¤ºåœ¨ä¸Šæ–¹æ¡†å†… å¯ä»¥çœ‹åˆ°ï¼Œå·¥å…·ç”Ÿæˆçš„ XPath è·¯å¾„éå¸¸é•¿ï¼Œéœ€è¦è¿›è¡Œä¼˜åŒ–ã€‚è¿™é‡Œå¯ä»¥ä½¿ç”¨è°·æ­Œæµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·å¾ˆæ–¹ä¾¿å¾—è·å– Xpath è·¯å¾„ï¼Œæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œä½¿ç”¨å¼€å‘è€…å·¥å…·é¢æ¿ä¸Šæœ€å·¦ä¾§çš„ç®­å¤´é€‰æ‹©å·¥å…·ï¼Œé€‰æ‹©ä¸€ä¸ªæ ‡é¢˜å…ƒç´ ï¼Œå³ä¾§å°±ä¼šè‡ªåŠ¨å®šä½åˆ°è¯¥å…ƒç´ çš„æºç å¤„ï¼Œå³é”®æºç é‡Œçš„è¿™ä¸ªå…ƒç´ ï¼Œé€‰æ‹© Copy XPathã€‚ æ¸…ç©º Xpath Helper ä¸­çš„ QUERY æ¡†å†…çš„å†…å®¹ï¼Œç²˜è´´ Chrome å¼€å‘è€…å·¥å…·æ‹·è´çš„ Xpath è·¯å¾„ï¼Œå¯ä»¥æ¸…æ™°å¯¹æ¯”çœ‹åˆ°è·¯å¾„ç›¸çº¸ä¸Šä¸€æ­¥è·å–çš„è¦ç®€çŸ­å¾ˆå¤šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€ä¸Šè¿›è¡Œè¿›ä¸€æ­¥åœ°ä¼˜åŒ–ã€‚ ç”±äºæˆ‘ä»¬éœ€è¦è·å–çš„æ˜¯æ‰€æœ‰çš„æ ‡é¢˜ï¼Œæ‰€ä»¥ä¿®æ”¹ Xpathï¼ŒåŒæ—¶ Xpath Helper é«˜äº®äº†è¢«é€‰æ‹©çš„å…ƒç´ ã€‚å› ä¸ºå½“å‰æ ‡é¢˜æ˜¯åœ¨ä¸€ä¸ªåˆ—è¡¨é¡µå½“ä¸­ï¼ŒæŠŠ li[2] ä¸­çš„å€¼ä¿®æ”¹ä¸º * å°±æ˜¯é€‰æ‹©æ‰€æœ‰äº†ï¼Œ// è¡¨ç¤ºä»æ ¹å…ƒç´ æŸ¥æ‰¾ï¼Œæ›¿ä»£æ‰äº†å‰é¢å¤šä½™çš„å…ƒç´ ï¼Œ XPath åŸºç¡€è¯­æ³•å¯ä»¥ä¸Š Google æœç´¢ä¸€ä¸‹ã€‚ CSS é€‰æ‹©å™¨æœ‰çš„ç½‘ç«™çš„ HTML ç»“æ„ä¸é€‚åˆä½¿ç”¨ XPath æ¥å†™ï¼Œä¼šå†™çš„å¾ˆé•¿ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ css é€‰æ‹©å™¨æ¥å®Œæˆï¼Œè¿™é‡Œè¿˜æ˜¯å€ŸåŠ© Chrome çš„å¼€å‘è€…å·¥å…·ã€‚ åŒä¸Šä¸€æ­¥ä¸€æ ·ï¼Œé€‰æ‹©ä¸€ä¸ªå…ƒç´ åï¼Œé€‰æ‹© Copy selector å¯ä»¥åœ¨ Chrome å¼€å‘è€…å·¥å…·çš„ console é‡ŒéªŒè¯é€‰æ‹©å™¨æ˜¯å¦æ­£ç¡®,è¿™é‡Œæ­£ç¡®æ‰“å°å‡ºäº†è¿™ä¸ªå…ƒç´ ã€‚åœ¨ webmagic é‡Œé€šè¿‡ css æ–¹æ³•æˆ–è€… $ æ–¹æ³•ä¼ é€’ css é€‰æ‹©å™¨å‚æ•°ï¼Œå¾—åˆ°å¯¹è±¡. json path æ–¹å¼è¯¦è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢ æ­£åˆ™è¡¨è¾¾å¼æ–¹å¼è¿™ä¸ªå°±ä¸ç”¨å¤šè¯´äº†ï¼Œé€šè¿‡æ­£åˆ™æŠ½å–æ­£æ–‡ç¬¦åˆçš„å†…å®¹","tags":[{"name":"çˆ¬è™«æŠ€å·§","slug":"çˆ¬è™«æŠ€å·§","permalink":"http://nullpointer.pw/tags/%E7%88%AC%E8%99%AB%E6%8A%80%E5%B7%A7/"}]},{"title":"èŠèŠæˆ‘çš„è§„åˆ’","date":"2018-08-26T14:21:10.000Z","path":"èŠèŠæˆ‘çš„è§„åˆ’.html","text":"å‰è¨€å»å¹´çš„è¿™ä¸ªæ—¶å€™ï¼Œé—²ç€æ— äº‹åˆ·çŸ¥ä¹ï¼Œçœ‹åˆ°ä¸€ä¸ªé—®é¢˜è§‰å¾—å¾ˆæœ‰æ„æ€ï¼Œã€å¤©å¤©å†™ä¸šåŠ¡ä»£ç çš„ç¨‹åºå‘˜ï¼Œæ€ä¹ˆæˆä¸ºæŠ€æœ¯å¤§ç‰›ï¼Œå¼€å§‹å†™æŠ€æœ¯ä»£ç ï¼Ÿã€‘ï¼Œå½“æ—¶çš„è‡ªå·±ç¡®å®ä¹Ÿä¸€ç›´æ˜¯åœ¨å†™ä¸šåŠ¡æ–¹é¢çš„ä»£ç ï¼Œå†™çš„æ—¶é—´ä¹…äº†ï¼Œé¢å¯¹ç€æºæºä¸æ–­çš„éœ€æ±‚ï¼Œåªèƒ½ç¡¬ç€å¤´çš®å»åº”å¯¹ï¼Œå†…å¿ƒéš¾å…æœ‰æ‰€å›°æ‰°ï¼›çœ‹åˆ°æ ‡é¢˜ï¼Œæˆ‘ä¹Ÿä¸ç¦åœ¨æƒ³ï¼Œä»€ä¹ˆæ—¶å€™æˆ‘ä¹Ÿèƒ½æˆä¸ºæŠ€æœ¯å¤§ç‰›å‘¢ï¼Ÿï¼ˆå¯¹æŠ€æœ¯æœ‰æ‰€è¿½æ±‚çš„ Coder ç›®æ ‡åº”è¯¥éƒ½æ˜¯æˆä¸ºä¸€ä¸ªæŠ€æœ¯å¤§ç‰›å§ï¼‰æŠ±ç€è¿™ç§å¿ƒæ€ï¼Œæˆ‘ç‚¹è¿›äº†é—®é¢˜ã€‚ æˆ‘è¯¥æ€ä¹ˆåšï¼Ÿçœ‹äº†å‡ ä¸ªå›ç­”ï¼Œå‡ ä¹éƒ½åœ¨è®²å¤§é“ç†ï¼Œçœ‹äº†æ„Ÿè§‰æ˜¯è¿™ä¹ˆä¸€å›äº‹å¾ˆæœ‰é“ç†çš„æ ·å­ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰èµ·åˆ°ä»€ä¹ˆå®é™…ä½œç”¨ã€‚ä½†æ˜¯çœ‹åˆ°äº†æè¿åçš„å›ç­”ä¹‹åï¼Œâ€œ3D ç†è®ºâ€(Do moreã€Do betterã€Do exercise)å¯¹äºæˆ‘ï¼Œç”¨é†é†çŒé¡¶æ¥å½¢å®¹ä¹Ÿä¸ä¸ºè¿‡ï¼Œä»–çš„å›ç­”ä¸ä»…è§£ç­”äº†æˆ‘çš„ç–‘æƒ‘ï¼ŒåŒæ—¶ä¹Ÿç»™å‡ºäº†å…·ä½“çš„å®é™…æ–¹æ³•ã€‚å…´å¥‹ä¹‹ä½™ï¼Œç»“åˆè‡ªå·±çš„å·¥ä½œæƒ…å†µï¼Œå°†åŸå›ç­”ä¸­ Do more è¿›è¡Œäº†å°å°æ”¹åŠ¨ï¼Œéšååœ¨ç¬”è®°ä¸Šåšäº†ä¸€ç‚¹ç›¸å…³çš„æ€»ç»“ã€‚ æˆ‘æŠŠ â€œ3D ç†è®ºâ€ åˆ†æˆäº†ä¸¤ä¸ªåœºæ™¯ï¼Œä¸€æ˜¯åœ¨å…¬å¸ï¼Œå¦ä¸€ä¸ªæ˜¯åœ¨å®¶ã€‚å› ä¸ºåœ¨å½“å‰çš„å…¬å¸å½“ä¸­ï¼Œä¸å¯èƒ½æŠŠå¤§æŠŠçš„æ­£å¸¸å·¥ä½œæ—¶é—´ç”¨äºæ–°çš„æŠ€æœ¯å­¦ä¹ ä¹‹ä¸Šï¼Œæ‰€ä»¥ï¼Œæˆ‘è®¤ä¸ºåœ¨å…¬å¸ä¸­èƒ½åšçš„åªæœ‰ 1ï¼Œ2ï¼Œ3 è¿™ä¸‰ç‚¹ï¼Œè€Œç¬¬ 4 ç‚¹åªèƒ½åˆ©ç”¨ä½ çš„ä¸šä½™æ—¶é—´æ¥è¿›è¡Œã€‚ å½“ç„¶é™¤äº†é‚£ç§æ²¡æœ‰ä»»åŠ¡ä¹Ÿå¿…é¡»ç¡¬æ˜¯è¦å¾…åˆ° 10 ç‚¹ä»¥åæ‰èƒ½ä¸‹ç­çš„å…¬å¸é™¤å¤–ï¼Œè¿™ç§å…¬å¸ï¼Œå…¶å®æŒ¤å‡ºå‡ ä¸ªå°æ—¶ï¼Œç”¨äºè‡ªå·±çš„å­¦ä¹ åº”è¯¥ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å¦‚æœå¯ä»¥å‡†æ—¶ä¸‹ç­ï¼Œé™¤æ‰ä¸€å¤©çš„ç¡è§‰ï¼Œåƒé¥­ï¼Œå·¥ä½œï¼Œäº¤é€šçš„æ—¶é—´ï¼Œå¯ä»¥æ”¯é…çš„æ—¶é—´å…¶å®è¿˜æ˜¯æŒºå……è£•çš„ï¼Œå‰ææ˜¯ä¸ç©æ¸¸æˆä¸åˆ·å‰§ï¼Œå¦‚æœæ²‰è¿·çš„è¯å¯ä»¥æƒ³ä¸€äº›æªæ–½æ¥å¼ºåˆ¶çº¦æŸè‡ªå·±ã€‚ åè®°åˆ°ç°åœ¨ 2018 å¹´ 8 æœˆä»½ï¼Œå·²ç»è¿‡å»äº†ä¸€å¹´ã€‚å¾ˆæƒ­æ„§çš„æ˜¯ï¼Œç¬”è€…è®¤ä¸ºè‡ªå·±å¯¹äº â€œ3D ç†è®ºâ€çš„æ‰§è¡ŒåŠ›åº¦è¿˜æ˜¯è¿œè¿œä¸å¤Ÿï¼Œç†è®ºä¸­çš„ç›®å‰ä¹Ÿåªåšåˆ°äº†å…¶ä¸­ä¸€ç‚¹ï¼Œåœ¨å…¬å¸é‡Œå¯¹è‡ªå·±è´Ÿè´£çš„ä¸šåŠ¡è¿›è¡Œäº†è¾ƒå¤§çš„è°ƒæ•´ä¼˜åŒ–ï¼Œä¹Ÿè¾¾åˆ°äº†é¢„æœŸçš„å¯é ç¨³å®šã€‚ éšç€å·¥ä½œå¹´é™çš„å¢é•¿ï¼Œæˆ‘å°±è¶Šå‘è§‰å¾—ç¨‹åºå‘˜æ˜¯ä¸ªä¸å­¦ä¹ å°±ä¸€å®šä¼šè¢«æ·˜æ±°æ‰çš„èŒä¸šï¼Œç»å¸¸èƒ½çœ‹åˆ°æŸæŸå…¬å¸è¾é€€ 40 å²ä»¥ä¸Šç¨‹åºå‘˜çš„æ–°é—»ï¼Œå°±æ„ˆå‘æ„Ÿè§‰å‹åŠ›é€æ¸å˜å¤§ï¼ˆè™½ç„¶å‰å‡ å¤©æˆ‘æ‰è¿‡å®Œ 25 å²ç”Ÿæ—¥ï¼‰ï¼Œå…¶å®æ¢ä¸€ä¸ªæ€è·¯æƒ³ï¼Œå¦‚æœä¸€ä¸ªç¨‹åºå‘˜åœ¨å…¬å¸ä¸­æ˜¯éš¾ä»¥è¢«å–ä»£çš„ï¼Œé‚£ä¹ˆä¹Ÿä¸ä¼šæ˜¯è¢«è¾é€€é‚£æ³¢äººä¸­çš„ä¸€åå§ï¼ ä¹Ÿæ˜¯ä»å»å¹´çš„ 7 æœˆå¼€å§‹ï¼Œçº¦æŸè‡ªå·±æ¯æœˆè‡³å°‘è¦å†™ä¸¤ç¯‡åšå®¢çš„ç›®æ ‡ä¹Ÿè¾¾åˆ°äº†ï¼Œä¹Ÿç®—æ˜¯æ‰§è¡Œäº† â€œ3D ç†è®ºâ€ä¸­çš„ä¸€ç‚¹å§ã€‚ ç°åœ¨åœ¨å…¬å¸ä¸­ï¼Œè´Ÿè´£çš„å†…å®¹ä¹Ÿå‘ç”Ÿäº†è½¬å˜ï¼Œçº¯ä¸šåŠ¡ä»£ç å†™çš„æ¯”ä»¥å‰è¦å°‘å¾ˆå¤šï¼Œæ›´å¤šçš„æ˜¯è¦å»å…³æ³¨åŸºç¡€æœåŠ¡ç¨³å®šï¼Œå¯¹åŸæœ‰çš„é¡¹ç›®ä¼˜åŒ–ï¼ŒæœåŠ¡æ‹†åˆ†ç­‰æ–¹é¢ï¼›ä½†æ˜¯åˆæ·±è§‰è‡ªå·±çš„æŠ€æœ¯åŠŸåº•è¿˜å¾ˆæ¬ ç¼ºï¼Œå¿™ç€è¡¥å……æ–°çš„çŸ¥è¯†ï¼Œäºæ˜¯åœ¨å·¥ä½œçš„äº§å‡ºå°±ä¸æ˜¯é‚£ä¹ˆå¾—å¤šäº†ï¼Œè¿™ä¹Ÿæ˜¯è®©æˆ‘å¾ˆå¤´ç–¼çš„äº‹æƒ…ï¼Œæ¯•ç«Ÿå·¥ä½œçš„äº§å‡ºå…³ç³»åˆ°è‡ªå·±çš„ç»©æ•ˆã€‚ å¯èƒ½æ¯ä¸ªæ—¶æœŸéƒ½ä¼šå‡ºç°ä»¤æˆ‘å¤´ç–¼çš„äº‹æƒ…ï¼Œä¹Ÿè®¸è¿™ä¹Ÿæ˜¯è®©æˆ‘çªç ´è‡ªæˆ‘çš„å¥‘æœºã€‚ æŒç»­è·µè¡Œ â€œ3Dç†è®ºâ€ï¼Œåšä¸€ä¸ªè·µè¡Œçš„ç¨‹åºå‘˜ï¼Œç›®æ ‡æˆ–è®¸å·²åœ¨ä¸è¿œå¤„å•¦~","tags":[]},{"title":"WebMagicå®ç°åˆ†å¸ƒå¼æŠ“å–ä»¥åŠæ–­ç‚¹æŠ“å–","date":"2018-08-04T15:30:29.000Z","path":"WebMagicå®ç°åˆ†å¸ƒå¼æŠ“å–.html","text":"å‰è¨€ä»å»å¹´åˆ°ä»Šå¹´ï¼Œç¬”è€…ä¸»è¦è´Ÿè´£çš„æ˜¯ä¸åˆä½œæ–¹çš„å†…å®¹å¯¹æ¥ï¼Œæ–°å¢çš„åˆä½œå•†ä¸æ˜¯å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œåœ¨æˆ‘è‡ªä»å»å¹´å¼•å…¥äº† WebMagic è¿™ä¸ªçˆ¬è™«æ¡†æ¶ä¹‹åï¼ŒåŸºæœ¬å¾ˆå°‘éœ€è¦å»å…³æ³¨ç»´æŠ¤çˆ¬è™«ï¼Œåšçš„æœ€å¤šçš„æ˜¯æ–°æ¥å…¥åˆä½œå•†å»å†™å¯¹åº”çˆ¬è™«æŠ“å–æ¨¡æ¿ã€‚ å› ä¸ºåœ¨ä»£ç ä¸­å®ç°äº†å¢é‡æŠ“å–ï¼Œå•æœºä¹Ÿè¶³ä»¥æ‰¿æ‹…æ—¥å¸¸çš„æŠ“å–å·¥ä½œã€‚ åœ¨å‰ä¸¤å‘¨ï¼Œç”±äºå…¬å¸æ‹“å±•æ–°çš„ä¸šåŠ¡æ¸ é“ï¼Œéœ€è¦æ¥å…¥çš„åˆä½œå•†ç¬é—´å¢åŠ äº† 3 å€ï¼Œåˆè¢«è¦æ±‚åœ¨ 2 å¤©å†…å…¨éƒ¨æ¥å…¥ï¼Œé‚£ä¸¤å¤©å’Œå¦å¤–ä¸€ä¸ªåŒäº‹ï¼Œå‡ ä¹éƒ½åœ¨å¿™ç€é€‚é…æ¨¡æ¿ã€‚ æ€¥é€Ÿå¢åŠ åˆä½œå•†çš„åŒæ—¶ï¼ŒæœåŠ¡å™¨æ— æ³•æ‰¿å—å‹åŠ›ï¼Œé¢‘ç¹çˆ†å‡º OOM å¼‚å¸¸ï¼Œå¯¼è‡´æŠ“å–å¤§æ‰¹é‡å¤±è´¥ï¼Œå…¶ä¸­æœ€å¤šçš„ä¸€ä¸ªåˆä½œå•†æ¥å£ï¼Œéœ€è¦è§£æä¸‹è½½çš„é¡µé¢è¿‘ 500w ä¸ªï¼Œå•æœºæŠ“å–å·²æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œéœ€è¦å¤šå°æœåŠ¡å™¨åŒæ—¶æŠ“å–ã€‚ ä½†é‰´äºå½“æ—¶éœ€æ±‚ç´§ï¼Œæ²¡æœ‰æ—¶é—´å¯¹çˆ¬è™«éƒ¨åˆ†ä»£ç è¿›è¡Œé‡æ„å‡çº§ï¼Œå•æœºæŠ“å–ä¹Ÿä¸è¡Œï¼Œè€Œä¸”ä¼šå½±å“æ­£å¸¸æŠ“å–ä»»åŠ¡çš„æ‰§è¡Œï¼Œäºæ˜¯ä¸´æ—¶æƒ³äº†ä¸ªåŠæ³•åœ¨å…¶ä»–æœåŠ¡å™¨ä¸ŠæŠ“å–æŸä¸ªåˆä½œå•†ï¼Œæ‰åå·è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†è¿™ä¹Ÿå¹¶éé•¿ä¹…ä¹‹è®¡ã€‚ åˆ†å¸ƒå¼æŠ“å–åŸºç¡€å‰æä¹‹ä¸€å› ä¸ºåˆšåˆšå¼•å…¥ WebMagic è¿™ä¸ªæ¡†æ¶çš„æ—¶å€™ï¼Œè¿˜ä¸æ˜¯å¤ªç†Ÿæ‚‰ï¼Œä½¿ç”¨çš„ Scheduler æ˜¯é»˜è®¤åŸºäºå†…å­˜çš„é˜Ÿåˆ— QueueScheduler ï¼Œå½“å¾…æŠ“å–çš„ URL å¤ªå¤šæ—¶ï¼Œå†…å­˜å°±è¢«å æ»¡äº†ï¼Œä»è€Œå¯¼è‡´ OOMã€‚ å¦‚æœè¦å®ç°åˆ†å¸ƒå¼æŠ“å–ï¼Œå‰æéœ€è¦ä½¿ç”¨åŸºäº Redis çš„ RedisSchedulerã€‚ åœ¨åˆ›å»ºçˆ¬è™«çš„æ—¶å€™ï¼Œæ‰‹åŠ¨è®¾ç½® Scheduler ä¸º RedisSchedulerã€‚ 1spider.setScheduler(new RedisScheduler(jedisPool)); RedisScheduler éœ€è¦ä¼ å…¥ JedisPool å‚æ•°ã€‚ å¦‚æœä½¿ç”¨çš„æ˜¯ SpringBootï¼Œå¯ä»¥å£°æ˜ä¸€ä¸ª RedisConfig çš„é…ç½®ç±»ã€‚ 123456789101112131415161718192021222324252627282930@Configurationpublic class RedisConfig &#123; @Value(&quot;$&#123;spring.redis.host&#125;&quot;) private String host; @Value(&quot;$&#123;spring.redis.port&#125;&quot;) private int port; @Value(&quot;$&#123;spring.redis.password&#125;&quot;) private String password; @Value(&quot;$&#123;spring.redis.timeout&#125;&quot;) private int timeout; @Value(&quot;$&#123;spring.redis.jedis.pool.max-idle&#125;&quot;) private int maxIdle; @Value(&quot;$&#123;spring.redis.jedis.pool.max-wait&#125;&quot;) private long maxWaitMillis; @Bean public JedisPool redisPoolFactory() &#123; JedisPoolConfig jedisPoolConfig = new JedisPoolConfig(); jedisPoolConfig.setMaxIdle(maxIdle); jedisPoolConfig.setMaxWaitMillis(maxWaitMillis); return new JedisPool(jedisPoolConfig, host, port, timeout, password); &#125;&#125; å¦‚æœä½¿ç”¨çš„æ˜¯ Springï¼Œå¯ä»¥åœ¨ XML ä¸­é…ç½®å£°æ˜ä¸€ä¸ª Bean èŠ‚ç‚¹ã€‚ 1234567891011121314&lt;bean id=&quot;poolConfig&quot; class=&quot;redis.clients.jedis.JedisPoolConfig&quot;&gt; &lt;property name=&quot;maxActive&quot; value=&quot;3000&quot; /&gt; &lt;property name=&quot;maxIdle&quot; value=&quot;100&quot; /&gt; &lt;property name=&quot;maxWait&quot; value=&quot;1000&quot; /&gt; &lt;property name=&quot;testOnBorrow&quot; value=&quot;true&quot;/&gt;&lt;/bean&gt;&lt;bean id=&quot;jedisPool&quot; class=&quot;redis.clients.jedis.JedisPool&quot;&gt; &lt;constructor-arg index=&quot;0&quot; ref=&quot;poolConfig&quot; /&gt; &lt;constructor-arg index=&quot;1&quot; value=&quot;127.0.0.1&quot;/&gt; &lt;constructor-arg index=&quot;2&quot; value=&quot;6379&quot;/&gt; &lt;constructor-arg index=&quot;3&quot; value=&quot;60000&quot; /&gt; &lt;constructor-arg index=&quot;4&quot; value=&quot;eCii8TH3xR8&quot;/&gt;&lt;/bean&gt; å£°æ˜äº† JedisPool ä¹‹åï¼Œç›´æ¥åœ¨ä»£ç ä¸­æ³¨å…¥å³å¯ã€‚ 12@Autowiredprivate JedisPool jedisPool; åˆ†å¸ƒå¼æŠ“å–åŸºç¡€å‰æä¹‹äºŒä»…ä»…é…ç½®äº† RedisSchedulerï¼Œè¿˜æ— æ³•è¾¾æˆæˆ‘ä»¬çš„è¿›è¡Œåˆ†å¸ƒå¼æŠ“å–çš„ç›®çš„ï¼Œå¦‚æœéœ€è¦è¿›è¡Œåˆ†å¸ƒå¼æŠ“å–ï¼Œå…¶é˜Ÿåˆ—åº”è¯¥æ˜¯å…±äº«çš„ï¼Œå³å¤šå°æœåŠ¡å™¨çš„å¤šä¸ªçˆ¬è™«ä½¿ç”¨åŒä¸€ä¸ª Redis URL é˜Ÿåˆ—ï¼Œå– URL æˆ–è€…æ·»åŠ  URL éƒ½æ˜¯åŒä¸€ä¸ªã€‚ åˆå› ä¸ºæ˜¯ WebMagic åœ¨å¸®åŠ©æˆ‘ä»¬ç®¡ç† Schedulerï¼Œæ‰€ä»¥ URL çš„ç»´æŠ¤ä¹Ÿæ˜¯ WebMagic åœ¨åšã€‚ å…ˆçœ‹ä¸€æ®µ WebMagic çš„æºç  123456789101112131415161718public void run() &#123; checkRunningStat(); initComponent(); logger.info(&quot;Spider &#123;&#125; started!&quot;,getUUID()); while (!Thread.currentThread().isInterrupted() &amp;&amp; stat.get() == STAT_RUNNING) &#123; final Request request = scheduler.poll(this); if (request == null) &#123; if (threadPool.getThreadAlive() == 0 &amp;&amp; exitWhenComplete) &#123; break; &#125; // wait until new url added waitNewUrl(); &#125; else &#123; // ...... &#125; &#125; // ......&#125; å¯ä»¥çœ‹åˆ° WebMagic æŠ“å–çš„æ—¶å€™é€šè¿‡è¿™è¡Œä»£ç è·å–é˜Ÿåˆ—ä¸­å¾…æŠ“å–çš„ URL åœ°å€ã€‚ 1Request request = scheduler.poll(this); è€Œè¿™ä¸ª this æ˜¯æŒ‡å®ç°äº† Task æ¥å£çš„å¯¹è±¡ï¼Œå³æŠŠå½“å‰çš„ Spider å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚ å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº† RedisSchedulerï¼Œæ‰€ä»¥è¿›å…¥è¯¥ç±»çš„ poll() æ–¹æ³•æŸ¥çœ‹ã€‚ 1String url = jedis.lpop(getQueueKey(task)); é€šè¿‡ task çš„ UUID è·å–åˆ°é˜Ÿåˆ—çš„ keyï¼Œç„¶ååˆ©ç”¨ redis çš„ list çš„ lpop å‘½ä»¤ä»é˜Ÿåˆ—å·¦ä¾§å¼¹å‡ºä¸€ä¸ªå¸¦æŠ“å–çš„ URLï¼Œæ„é€  Request å¯¹è±¡ã€‚ åŒæ ·çš„æŸ¥çœ‹ poll ä¸Šé¢çš„ pushWhenNoDuplicate æ–¹æ³•ï¼Œæ˜¯å°†å¾…æŠ“å–è¯·æ±‚çš„ URL pushåˆ°é˜Ÿåˆ—çš„å³ä¾§ï¼Œè€Œè¿™ä¸ªé˜Ÿåˆ—ä¹Ÿæ˜¯é€šè¿‡ Spider çš„ UUID é‡Œå”¯ä¸€ç¡®å®šçš„ã€‚ 1jedis.rpush(getQueueKey(task), request.getUrl()); æ‰€ä»¥ï¼Œå¦‚æœè¦å®ç°åˆ†å¸ƒå¼åŒæ—¶æŠ“å–åŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œå°±éœ€è¦ä¿æŒ å¤šä¸ª Spider çš„ UUID æ˜¯ä¸€è‡´çš„ å®ç°åˆ†å¸ƒå¼æŠ“å–ç”¨è¿‡ WebMagic çš„äººéƒ½çŸ¥é“ï¼Œçˆ¬è™«å¯åŠ¨éœ€è¦ç»™ä»–ä¸€ä¸ªèµ·å§‹ URLï¼Œç„¶åé€šè¿‡è¿™ä¸ª URL è·å–æ–°çš„ URLï¼›æ‰€ä»¥å¦‚æœéœ€è¦è¿›è¡Œåˆ†å¸ƒå¼æŠ“å–ï¼Œè‚¯å®šçˆ¬è™«çš„èµ·å§‹ URL æ˜¯ä¸èƒ½ç›¸åŒçš„ï¼Œå› ä¸ºWebMagic ä¼šå¯¹é‡å¤çš„ URL è¿›è¡Œè‡ªåŠ¨å»é‡ã€‚ å› æ­¤çˆ¬è™«çš„æ¶æ„å›¾ä» å˜æˆäº†å¦‚ä¸‹æ¶æ„ å³ä¿è¯å¤šä¸ªçˆ¬è™«ä½¿ç”¨åŒä¸€ä¸ª Redis é˜Ÿåˆ—ã€‚å…·ä½“æ€è·¯å°±æ˜¯ç¬¬ä¸€åªé€šè¿‡èµ·å§‹ URL çˆ¬è™«å¯åŠ¨çš„æ—¶å€™ï¼Œè®°å½•å¯åŠ¨çˆ¬è™«çš„è®¾ç½®UUIDï¼Œç„¶åå¯åŠ¨å…¶ä»–çˆ¬è™«çš„æ—¶å€™ï¼Œè®¾ç½®çˆ¬è™«çš„ UUID ä¸ºè®°å½•çš„ UUID çš„å€¼ã€‚ ä»£ç ä¸­ä½“ç°çš„å°±æ˜¯å¦‚ä¸‹æ‰€ç¤ºï¼š å¯åŠ¨å…¶ä»–çˆ¬è™«çš„æ—¶å€™ï¼Œæ‰‹åŠ¨ä»é˜Ÿåˆ—ä¸­è·å– URL è®¾ç½®ä¸ºå¯åŠ¨ URL å³å¯ã€‚ åˆ†å¸ƒå¼çˆ¬è™«ä»»åŠ¡è°ƒåº¦ç¬”è€…å®ç°çš„çˆ¬è™«å¯åŠ¨æ˜¯é€šè¿‡å®šæ—¶ä»»åŠ¡å¯åŠ¨çš„ï¼Œå› ä¸ºå…¶ä»–çˆ¬è™«ä¸ç¬¬ä¸€åªçˆ¬è™«çš„å…¥å£ä¸åŒï¼Œå› æ­¤å®šä¹‰äº†ä¸¤ä¸ªä»»åŠ¡å»è°ƒåº¦ï¼Œå¹¶ä¸”ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´æœ‰ 30s çš„é—´éš”æ—¶é—´ï¼Œé˜²æ­¢ç¬¬ä¸€åªçˆ¬è™«è¿˜æœªæ·»åŠ  URL åˆ°é˜Ÿåˆ—å½“ä¸­ï¼Œè€Œé€ æˆå…¶ä»–çˆ¬è™«æ—  URL å¯æŠ“å–æƒ…å†µçš„å‘ç”Ÿã€‚ åŸºäºè¿™ä¸ªæ€è·¯ï¼Œå›  URL æ”¾åœ¨ Redis ä¹‹ä¸­ï¼Œæ‰€ä»¥åŒæ—¶ä¹Ÿå¯ä»¥å®ç° æ–­ç‚¹æŠ“å–ã€‚ ç»“è¯­WebMagic çš„æºç å¾ˆç®€æ´æ˜“æ‡‚ï¼Œå¯ä»¥å­¦ä¹ åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œå°¤å…¶æ˜¯å¤šçº¿ç¨‹ä»¥åŠé”çš„åº”ç”¨ï¼Œå¾ˆå€¼å¾—å€Ÿé‰´å­¦ä¹ ã€‚","tags":[{"name":"WebMagicåˆ†å¸ƒå¼æŠ“å–","slug":"WebMagicåˆ†å¸ƒå¼æŠ“å–","permalink":"http://nullpointer.pw/tags/WebMagic%E5%88%86%E5%B8%83%E5%BC%8F%E6%8A%93%E5%8F%96/"},{"name":"WebMagicæ–­ç‚¹æŠ“å–","slug":"WebMagicæ–­ç‚¹æŠ“å–","permalink":"http://nullpointer.pw/tags/WebMagic%E6%96%AD%E7%82%B9%E6%8A%93%E5%8F%96/"}]},{"title":"IDEAè¿œç¨‹è°ƒè¯•Tomcat","date":"2018-07-28T02:40:28.000Z","path":"IDEAè¿œç¨‹è°ƒè¯•Tomcat.html","text":"å‰è¨€å¼€å‘æ–°åŠŸèƒ½æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°åœ¨æœ¬åœ°ç¯å¢ƒè¿è¡Œæ²¡é—®é¢˜ï¼Œä½†æ˜¯éƒ¨ç½²åˆ°äº† Linux æœåŠ¡å™¨ä¸Šè·‘çš„æ—¶å€™å°±å‡ºç°é—®é¢˜è¿™ç§æƒ…å†µï¼›è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯éœ€è¦å®šä½çº¿ä¸Šé—®é¢˜ï¼Œè¿™ä¸¤ç§æƒ…å†µä»¥å‰çš„åšæ³•å°±æ˜¯åŠ  log æ—¥å¿—è¾“å‡ºï¼Œæ€»æ˜¯ä¸èƒ½ç²¾å‡†å®šä½é—®é¢˜æ‰€åœ¨ï¼Œå¦‚æœèƒ½å¤Ÿåƒæœ¬åœ°ç¯å¢ƒä¸€æ ·è°ƒè¯•ä»£ç ï¼Œé‚£è¿™ä¸ªé—®é¢˜ä¹Ÿå°±è¿åˆƒè€Œè§£äº†ã€‚ å¼€å§‹ä¹‹å‰æœ¬æ–‡ä»‹ç» IDEA ä¸ Tomcat çš„è¿œç¨‹è°ƒè¯•ï¼Œä¸”ç¬”è€…åœ¨æ—¥å¸¸å·¥ä½œå½“ä¸­ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ï¼Œç½‘ä¸Šå¾ˆå¤šéƒ½æ˜¯äº’ç›¸æŠ„è¢­ï¼Œæ²¡æœ‰ç»è¿‡éªŒè¯çš„ä¼ªåŸåˆ›ï¼Œè®©äººä¸å¿«ã€‚ ä¸€ã€æ·»åŠ è¿è¡Œé¡¹IDEA æ·»åŠ è¿œç¨‹è°ƒè¯•é¡¹ å¡«å†™æœåŠ¡å™¨ IP ï¼Œç«¯å£ä½¿ç”¨é»˜è®¤çš„å³å¯ï¼Œå¤åˆ¶ç¬¬äºŒè¡Œå‚æ•° äºŒã€ä¿®æ”¹æœåŠ¡å™¨ä¸­çš„ Tomcat é…ç½®è¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œè¿›å…¥ Tomcat æ ¹ç›®å½•ä¸‹çš„ bin ç›®å½•ï¼Œä¿®æ”¹ catalina.sh æ–‡ä»¶ å®šä½åˆ° 108 è¡Œå·¦å³ï¼Œæ‰¾åˆ° cygwin=false è¿™ä¸€è¡Œï¼Œ åœ¨è¿™ä¸€è¡Œçš„å‰ä¸€è¡Œæ·»åŠ  JAVA_OPTS=&quot;&quot; ç„¶åå°†ä» IDEA ä¸­å¤åˆ¶çš„é‚£ä¸²å‚æ•°ç²˜è´´åˆ°åŒå¼•å·ä¹‹é—´ï¼Œä¿å­˜é€€å‡ºã€‚ ç„¶åå¯åŠ¨ Tomcatï¼Œå¦‚æœ Tomcat æ˜¯å·²ç»å¯åŠ¨çš„è¯ï¼Œå¿…é¡»è¦é‡å¯ä¸€ä¸‹ã€‚ ä¸‰ã€è°ƒè¯•ç¯å¢ƒä¿®æ”¹ä¸ºäº†è°ƒè¯•æ–¹ä¾¿ï¼Œéœ€è¦æš‚æ—¶å…³é—­æ‰é˜²ç«å¢™ï¼Œå¦åˆ™å¯èƒ½æ— æ³•è¿æ¥ã€‚ 1service iptables stop å››ã€IDEA è¿œç¨‹è°ƒè¯•å›åˆ° IDEAï¼Œç‚¹å‡» Debug æŒ‰é’®ï¼Œå¯åŠ¨åˆšæ‰æ·»åŠ çš„ Remoteï¼Œå¦‚æœä»¥ä¸Šæ²¡æœ‰é…ç½®é”™ï¼Œé‚£ä¹ˆæ§åˆ¶å°å°†æ‰“å°å‡º æ­¤æ—¶å°±å’Œæœ¬åœ°è°ƒè¯•ä¸€æ ·æ‰“æ–­ç‚¹è°ƒè¯•å°±è¡Œäº† äº”ã€è§£å†³IDEA æ— æ³•è¿æ¥è¿œç¨‹ Tomcatå¦‚æœæç¤ºæ— æ³•è¿æ¥ï¼Œå¦‚ä¸‹å›¾ åˆ™æ£€æŸ¥ä»¥ä¸Šé…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç¡®è®¤éƒ½æ­£ç¡®çš„è¯ï¼Œå¯èƒ½æ˜¯æœåŠ¡å™¨é˜²ç«å¢™çš„åŸå› å¯¼è‡´ï¼Œéœ€è¦å…³é—­é˜²ç«å¢™ã€‚ å¦‚æœæœåŠ¡å™¨æ˜¯é˜¿é‡Œäº‘çš„ï¼Œè¿˜éœ€è¦é…ç½® ECS æœåŠ¡å™¨çš„å®‰å…¨ç»„ï¼Œå¼€æ”¾ 5005 è¿œç¨‹è°ƒè¯•ç«¯å£ã€‚ è¯¦è§ç¬¬å…«æ¡ å…­ã€è§£å†³æ–­ç‚¹ä¸ç”Ÿæ•ˆæ³¨æ„ï¼š å¯åŠ¨ Remote çš„ Debug ä¹‹åï¼Œéœ€è¦ç­‰å¾…æ–­ç‚¹å˜æˆå¦‚ä¸‹å›¾æ—¶ï¼Œå†å»è®¿é—®æ¥å£ï¼›å¦‚æœæ–­ç‚¹ä¸­é—´æ²¡æœ‰å‡ºç°å¯¹å·ï¼Œè¯´æ˜æ–­ç‚¹è¿˜æœªç”Ÿæ•ˆï¼Œéœ€è¦ç­‰å¾…ä¸€ä¼šå„¿ã€‚ å¦‚æœæœ‰æ—¶å€™æ­»æ´»ä¹Ÿæ²¡æ³•æ–­ç‚¹ï¼Œå°±æŠŠæœåŠ¡å™¨ä¸Šçš„ Tomcat é‡å¯ä¸€ä¸‹è¯•è¯•ï¼ ä¸ƒã€å…¶ä»–é—®é¢˜å› ä¸ºåœ¨ catalina.sh ä¸­æ·»åŠ äº†è¿œç¨‹è°ƒè¯•çš„å‚æ•°ï¼Œå¯¼è‡´ä½¿ç”¨ tomcat çš„ bin/shutdown.sh æ—¶ï¼Œå¯èƒ½æ— æ³•å®Œå…¨åœæ­¢æœåŠ¡å™¨ã€‚å¯ä»¥ç›´æ¥ kill æ‰æœåŠ¡å™¨ï¼Œå¦‚æœä¸å†è¿›è¡Œè¿œç¨‹è°ƒè¯•ï¼Œæœ€åæŠŠè¿œç¨‹è°ƒè¯•å‚æ•°æ³¨é‡Šæ‰é‡å¯ã€‚ å…«ã€é˜¿é‡Œäº‘ ECS å®‰å…¨ç»„è®¾ç½®è¿›å…¥ ECS æ§åˆ¶å°ï¼Œç‚¹å‡»å®‰å…¨ç»„ ç„¶åé€‰æ‹© åˆ›å»ºå®‰å…¨ç»„ ç„¶åé…ç½®è¯¥å®‰å…¨ç»„çš„è§„åˆ™ ç‚¹å‡»å…¬ç½‘å…¥æ ‡ç­¾ï¼Œå†ç‚¹å‡»å³ä¸Šè§’ æ·»åŠ å®‰å…¨ç»„è§„åˆ™ æˆæƒå¯¹è±¡ å¡«å†™ä½ çš„ ip åœ°å€å³å¯ã€‚ æ·»åŠ å®Œå®‰å…¨ç»„ä¹‹åï¼Œè¿›å…¥ ECS å®ä¾‹ é€‰æ‹©å³ä¾§ åŠ å…¥å®‰å…¨ç»„ï¼Œé€‰æ‹©åŠ å…¥åˆšæ‰æ·»åŠ çš„å®‰å…¨ç»„å³å¯ã€‚","tags":[{"name":"Tomcatè¿œç¨‹è°ƒè¯•","slug":"Tomcatè¿œç¨‹è°ƒè¯•","permalink":"http://nullpointer.pw/tags/Tomcat%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/"},{"name":"è§£å†³IDEAæ— æ³•è¿œç¨‹è°ƒè¯•Tomcat","slug":"è§£å†³IDEAæ— æ³•è¿œç¨‹è°ƒè¯•Tomcat","permalink":"http://nullpointer.pw/tags/%E8%A7%A3%E5%86%B3IDEA%E6%97%A0%E6%B3%95%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95Tomcat/"},{"name":"è§£å†³IDEAè¿œç¨‹è°ƒè¯•æ–­ç‚¹ä¸ç”Ÿæ•ˆ","slug":"è§£å†³IDEAè¿œç¨‹è°ƒè¯•æ–­ç‚¹ä¸ç”Ÿæ•ˆ","permalink":"http://nullpointer.pw/tags/%E8%A7%A3%E5%86%B3IDEA%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95%E6%96%AD%E7%82%B9%E4%B8%8D%E7%94%9F%E6%95%88/"}]},{"title":"å¾®ä¿¡å…¬ä¼—å·å¼ºåˆ¶å…³æ³¨","date":"2018-07-07T10:36:59.000Z","path":"å¾®ä¿¡å…¬ä¼—å·å¼ºåˆ¶å…³æ³¨çš„å®ç°.html","text":"å‰è¨€å¾®ä¿¡å®˜æ–¹è§„å®šæ˜¯ä¸å…è®¸è¯±å¯¼å…³æ³¨çš„ï¼Œæ‰€ä»¥å¼ºåˆ¶å…³æ³¨å°±æ›´åŠ ä¸å¯èƒ½çš„ï¼Œä½†æ˜¯é“é«˜ä¸€ä¸ˆé­”é«˜ä¸€ä¸ˆï¼Œæ€»æ˜¯æœ‰å„ç§å¯¹ç­–æ¥ç»•è¿‡è¿™äº›è§„å®šã€‚ æ¯”å¦‚ç¬”è€…æ‰€åœ¨çš„å…¬å¸è¡Œä¸šï¼Œæœ‰å…¬å¸å¼€å‘åŠŸèƒ½è¿›è¡Œæ¨å¹¿å°è¯´ï¼Œè®¿é—®æ¨å¹¿é“¾æ¥åï¼Œé˜…è¯»åˆ°æŸä¸€ç« æ—¶ï¼Œå¼¹å‡ºäºŒç»´ç æ‰èƒ½ç»§ç»­é˜…è¯»ï¼Œå…¶å®è¿™é‡Œå°±æ˜¯å˜ç›¸çš„å¾®ä¿¡å…¬ä¼—å·å¼ºåˆ¶å…³æ³¨äº†ã€‚å…³æ³¨ä»–çš„äºŒç»´ç ä¹‹åï¼Œå…¬ä¼—å·å°±ä¼šè‡ªåŠ¨å‘é€æ¶ˆæ¯ï¼Œç»™å‡ºç»§ç»­é˜…è¯»çš„é“¾æ¥åœ°å€ï¼Œè¯»è€…ç‚¹è¿›å»ä¹‹åæ‰å¯ä»¥æ¥ç€è¯»ã€‚ å…¶å®è¿™ä¸ªåŠŸèƒ½æˆ‘ä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡åšæ–‡ï¼ŒåŸºäºå¾®ä¿¡äº‹ä»¶äºŒç»´ç æ¨å¹¿ï¼Œå®ç°çš„åŠŸèƒ½å°±å’Œä¸Šè¿°ä¸€è‡´ï¼Œä½†æ˜¯ï¼Œç”±äºä½¿ç”¨åˆ°äº†å¾®ä¿¡äº‹ä»¶äºŒç»´ç ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨å¾®ä¿¡çš„æœåŠ¡å·ï¼Œè€Œæ™®é€šçš„è®¢é˜…å·æ²¡æœ‰è¿™ä¸ªæ¥å£æƒé™ã€‚é‚£ä¹ˆè®¢é˜…å·æ€ä¹ˆå®ç°å‘¢ï¼Ÿä¹Ÿæ˜¯è¢«æˆ‘ç”Ÿç”Ÿæƒ³å‡ºäº†ä¸ªæ³•å­ï¼Œæ¥è¾¾åˆ°ç±»ä¼¼æœåŠ¡å·ä½¿ç”¨å‚æ•°äºŒç»´ç çš„æ•ˆæœï¼Œè€Œä¸”æœåŠ¡å·ä¸è®¢é˜…å·é€šç”¨ã€‚ èƒŒæ™¯å…¬å¸æ–°å¼€å‘äº†ä¸€ä¸ªåˆ†é”€å¹³å°é¡¹ç›®ï¼Œå¯ä»¥è®©å•†æˆ·å³ä¸ªäººå…¬ä¼—å·ä¸»æ‹¥æœ‰è‡ªå·±çš„å°è¯´ç½‘ç«™ï¼Œæ”¶å…¥ä¸å…¬å¸è¿›è¡Œåˆ†æˆï¼Œä»è€Œè¾¾åˆ°äº†åŒæ”¶çš„æ•ˆæœã€‚ å•†æˆ·ä¸ºäº†å¢åŠ ç²‰ä¸æ•°é‡ï¼Œäºæ˜¯æˆ‘ä»¬å¼€å‘äº†ä¸Šè¿°éœ€æ±‚çš„åŠŸèƒ½ã€‚ä½†æ˜¯è¿™äº›å•†æˆ·åŸºæœ¬ä¸Šéƒ½ç”¨çš„æ˜¯è®¢é˜…å·ï¼Œå‰æ–‡ä¹Ÿæåˆ°ï¼Œè®¢é˜…å·æ— æ³•ä½¿ç”¨å‚æ•°äºŒç»´ç æ¥å£ï¼Œæ‰€ä»¥åªèƒ½å¦è¾Ÿè¹Šå¾„ã€‚ æµç¨‹å›¾ æµç¨‹æ¢³ç†é¦–å…ˆæˆ‘ä»¬åœ¨åå°é…ç½®å¾®ä¿¡äºŒç»´ç ï¼Œç„¶åé’ˆå¯¹æŸä¸€æœ¬å°è¯´ï¼ŒæŒ‡å®šå¼€å§‹ç« èŠ‚ä¸æ˜¾ç¤ºäºŒç»´ç ç« èŠ‚çš„ IDï¼Œç”Ÿæˆæ¨å¹¿é“¾æ¥ï¼Œå¦‚ä¸‹æ ¼å¼ï¼šhttp://m.domain.com/link?code=7788ï¼Œä»¥ä¸‹ç®€ç§° A é“¾æ¥ã€‚ç„¶åå•†æˆ·å‘æ¨æ–‡ï¼Œè®¾ç½®é˜…è¯»åŸæ–‡çš„é“¾æ¥åœ°å€ä¸º A é“¾æ¥ã€‚ å½“ç”¨æˆ·è®¿é—®è¿™ä¸ª A é“¾æ¥çš„æ—¶å€™ï¼Œè·³è½¬é˜…è¯»é¡µï¼Œå¾…å…¶é˜…è¯»åˆ°äºŒç»´ç ç« èŠ‚æ—¶ï¼Œå°†äºŒç»´ç ç« èŠ‚çš„ä¸‹ä¸€ç« èŠ‚ ID å†™å…¥ Cookie ä¹‹ä¸­ï¼ŒåŒæ—¶å¼¹å‡ºäºŒç»´ç æç¤ºå…³æ³¨ã€‚ ç”¨æˆ·å…³æ³¨ï¼Œè§¦å‘äº†å¾®ä¿¡çš„ SUBSCRIBE äº‹ä»¶ï¼Œç»™ç”¨æˆ·å‘é€ç»§ç»­é˜…è¯»çš„æ¶ˆæ¯ï¼Œå¦‚ä¸‹æ ¼å¼ï¼šhttp://m.domain.com/readingï¼Œä»¥ä¸‹ç®€ç§° B é“¾æ¥ï¼Œè¯¥é“¾æ¥æ˜¯å›ºå®šä¸å˜çš„ã€‚ å¦‚æœç”¨æˆ·ç‚¹å‡»äº†è¯¥æ¶ˆæ¯ï¼Œåˆ™æ‰“å¼€äº† B é“¾æ¥ï¼Œè¯»å–ä¹‹å‰å­˜å‚¨çš„ Cookie ä¿¡æ¯ï¼Œå¾—åˆ°ç»§ç»­é˜…è¯»çš„ç« èŠ‚ IDï¼Œç„¶åç»„è£…é˜…è¯» URLï¼Œé€šè¿‡ redirect è·³è½¬å³å¯ã€‚ï¼ˆå¦‚æœç”¨æˆ·æ˜¯æ­£å¸¸å…³æ³¨ï¼Œä¹Ÿä¼šå‘é€æ¶ˆæ¯ï¼Œå¦‚æœç‚¹å‡»ï¼Œæ‰¾ä¸åˆ°è¯¥ Cookieï¼Œè·³è½¬é¦–é¡µå³å¯ï¼‰ è¿™æ˜¯é’ˆå¯¹å…¬å¸éœ€æ±‚å¼€å‘çš„ï¼Œå…¶å®ï¼Œä¸»è¦çš„åœ°æ–¹åœ¨äºå‚æ•°çš„ä¼ é€’ã€‚é™¤äº†å…³æ³¨äº‹ä»¶ï¼Œå¾®ä¿¡è¿˜æœ‰è®¸å¤šå…¶ä»–äº‹ä»¶å¯ä¾›ä½¿ç”¨ï¼Œæ¯”å¦‚èœå•ç‚¹å‡»äº‹ä»¶ï¼Œè‡³äºæ€ä¹ˆç”¨ï¼Œå°±çœ‹ä½ çš„äº†ã€‚","tags":[{"name":"å¾®ä¿¡å…¬ä¼—å·å¼ºåˆ¶å…³æ³¨","slug":"å¾®ä¿¡å…¬ä¼—å·å¼ºåˆ¶å…³æ³¨","permalink":"http://nullpointer.pw/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%BA%E5%88%B6%E5%85%B3%E6%B3%A8/"},{"name":"è®¢é˜…å·å‚æ•°äºŒç»´ç ","slug":"è®¢é˜…å·å‚æ•°äºŒç»´ç ","permalink":"http://nullpointer.pw/tags/%E8%AE%A2%E9%98%85%E5%8F%B7%E5%8F%82%E6%95%B0%E4%BA%8C%E7%BB%B4%E7%A0%81/"}]},{"title":"Javaå®ç°æ’è¡Œæ¦œåŸºäºRedis","date":"2018-06-10T01:45:52.000Z","path":"Javaå®ç°æ’è¡Œæ¦œåŸºäºRedis.html","text":"å‰è¨€æ’è¡Œæ¦œä½œä¸ºäº’è”ç½‘åº”ç”¨ä¸­å‡ ä¹å¿…ä¸å¯å°‘çš„ä¸€ä¸ªå…ƒç´ ï¼Œå…¶èƒ½å¤Ÿå‹¾èµ·äººç±»è‡ªèº«å¯¹æ¯”çš„æ¬²æœ›ï¼Œä»è€Œæ¥å¢åŠ å•†å“çš„é”€é‡ã€‚æ’è¡Œæ¦œçš„å®ç°æ–¹å¼åŸºæœ¬å¤§åŒå°å¼‚ï¼Œå¤§éƒ¨åˆ†éƒ½åŸºäº Redis çš„æœ‰åºé›†åˆ sorted set æ¥å®ç°ã€‚ä¸ä¹…å‰ï¼Œè´Ÿè´£å¼€å‘ä¸€ä¸ªæ´»åŠ¨ï¼Œå°±æœ‰æ’è¡Œæ¦œè¿™ä¸ªéœ€æ±‚ï¼Œç¬”è€…ä¹Ÿä½¿ç”¨ Redis è¿›è¡Œäº†å®ç°ã€‚æœ¬æ–‡é€šè¿‡äº†å•†å“é”€å”®æ’è¡Œæ¦œè¿™ä¸€æ¨¡å‹ï¼Œæ¥è¿›è¡Œæ¼”ç¤ºã€‚ éœ€æ±‚ æŒ‰ç…§å•†å“é”€é‡è¿›è¡Œæ’è¡Œ å¯ä»¥è·å¾—æŒ‡å®šå•†å“çš„æ’å æ˜¾ç¤ºå®æ—¶é”€å”®åŠ¨æ€æƒ…å†µ éœ€æ±‚åˆ†æåˆ†æéœ€æ±‚ï¼Œä»¥ä¸Šè¿™äº›éƒ½å¯ä»¥é€šè¿‡ Redis çš„æœ‰åºé›†åˆç›¸å…³å‘½ä»¤è¿›è¡Œå®ç°ï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹ä½¿ç”¨åˆ°çš„å…·ä½“ Redis å‘½ä»¤ã€‚ 1234567891011121314151617181920212223242526272829303132333435redis&gt; ZADD bangdan 1 &quot;one&quot;(integer) 1# å¯¹æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸Šå¢é‡redis&gt; zadd bangdan 1 &quot;one&quot; 4 &quot;three&quot; 3 &quot;two&quot;(integer) 2# å°†ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ä»¥åŠåˆ†æ•°åŠ å…¥åˆ°æœ‰åºé›†åˆä¸­redis&gt; zrange bangdan 0 11) &quot;one&quot;2) &quot;three&quot;# æŒ‰ç…§ score å‡åºæ’åˆ— ,å–å‡ºå‰ä¸¤åredis&gt; zscore bangdan three&quot;4&quot;# è·å¾—æ¦œå•ä¸­æŒ‡å®šå…ƒç´ çš„scoreredis&gt; zrank bangdan one(integer) 0# åœ¨å‡åºæ¦œä¸­çš„åæ¬¡ ç¬¬ä¸€è¿”å›0# ç¬¬ä¸‰ä¸ªéœ€æ±‚éœ€è¦ä½¿ç”¨ Redis çš„ list æ¥è¿›è¡Œå®ç°redis&gt; LPUSH dynamic abc(integer) 1# å‘é˜Ÿåˆ—å·¦ä¾§å¤´éƒ¨ push æ•°æ®redis&gt; LINDEX dynamic 0&quot;abc&quot;# é€šè¿‡ç´¢å¼•è·å–åˆ—è¡¨ä¸­çš„å…ƒç´ redis&gt; LTRIM dynamic 0 2&quot;abc&quot;# å¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œä¿®å‰ª(trim)ï¼Œå°±æ˜¯è¯´ï¼Œè®©åˆ—è¡¨åªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼Œä¸åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ æ’è¡Œæ¦œé¢„è§ˆæŒ‰ç…§éœ€æ±‚å¼€å‘ï¼Œæœ€åçš„æ•ˆæœå¦‚ä¸‹ï¼š ä»¥ä¸‹é€šè¿‡ Java ä»£ç å®ç°ã€‚ é€šè¿‡ Java å®ç°æ’è¡Œæ¦œå¼•å…¥ä¾èµ–é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº† Redisï¼Œå› æ­¤éœ€è¦å¼•å…¥ç›¸å…³ä¾èµ–ï¼Œä¸ºäº†ç®€æ˜æ¼”ç¤ºï¼Œè¿™é‡Œæ²¡æœ‰ä½¿ç”¨ JedisPoolã€‚ 12345&lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;2.7.3&lt;/version&gt;&lt;/dependency&gt; å¼€å‘é€»è¾‘ é¡µé¢ä¸Šç‚¹å‡»ä¸€æ¬¡è´­ä¹°æŒ‰é’®ï¼Œåˆ™å¯¹è¯¥æ‰‹æœºçš„é”€é‡åŠ  1ï¼ŒåŒæ—¶å°†é”€å”®åŠ¨æ€æ·»åŠ åˆ°é˜Ÿåˆ—å½“ä¸­ 12jedis.zincrby(Constants.SALES_LIST, 1, String.valueOf(phoneId));jedis.lpush(Constants.BUY_DYNAMIC, msg); è·å¾—æ’è¡Œæ¦œ 12// æŒ‰ç…§scopeå‡åºæ’åï¼Œå–å‡ºå‰äº”jedis.zrevrangeWithScores(Constants.SALES_LIST, 0, 4); è·å¾—æŒ‡å®šæ‰‹æœºçš„æ’åæƒ…å†µ 1jedis.zrevrank(Constants.SALES_LIST, String.valueOf(phoneId)); è·å¾—é”€å”®åŠ¨æ€ï¼Œæ­¤å¤„åªå– 3 æ¡ï¼ŒåŒæ—¶é˜Ÿåˆ—åªä¿å­˜æœ€æ–°çš„ 20 æ¡åŠ¨æ€ 12345678910111213141516List&lt;DynamicVO&gt; dynamicList = new ArrayList&lt;&gt;();for (int i = 0; i &lt; 3; i++) &#123; String result = jedis.lindex(Constants.BUY_DYNAMIC, i); if (StringUtils.isEmpty(result)) &#123; break; &#125; String[] arr = result.split(Constants.separator); long time = Long.valueOf(arr[0]); String phone = arr[1]; DynamicVO vo = new DynamicVO(); vo.setPhone(phone); vo.setTime(StringUtil.showTime(new Date(time))); dynamicList.add(vo);&#125;jedis.ltrim(Constants.BUY_DYNAMIC, 0, 19); å› ä¸ºæ’è¡Œæ¦œè¿™ç§å®æ—¶æ€§æ¯”è¾ƒå¼ºçš„æ•°æ®ï¼Œæ›´æ–°æ¯”è¾ƒå¿«ï¼Œä¸ªäººè§‰å¾—æ²¡æœ‰å¿…è¦è¿›è¡ŒæŒä¹…åŒ–ï¼Œå¦‚æœ Redis çš„æ’è¡Œæ¦œæ•°æ®ä¸¢å¤±ï¼Œå¯ä»¥é€šè¿‡ä»£ç é‡æ–°è®¡ç®—æ’è¡Œï¼Œé€šè¿‡ zadd å‘½ä»¤ï¼Œé‡æ–°æ·»åŠ åˆ° Redis ä¸­å³å¯ã€‚ 12345Map&lt;String, Double&gt; map = new HashMap&lt;&gt;(); map.put(&quot;1&quot;, 4.0); map.put(&quot;2&quot;, 2.0); map.put(&quot;3&quot;, 3.0);jedis.zadd(Constants.SALES_LIST, map); æºç ä¸‹è½½ç‚¹æˆ‘ä¸‹è½½","tags":[{"name":"Redisæ’è¡Œæ¦œ","slug":"Redisæ’è¡Œæ¦œ","permalink":"http://nullpointer.pw/tags/Redis%E6%8E%92%E8%A1%8C%E6%A6%9C/"},{"name":"Javaæ’è¡Œæ¦œ","slug":"Javaæ’è¡Œæ¦œ","permalink":"http://nullpointer.pw/tags/Java%E6%8E%92%E8%A1%8C%E6%A6%9C/"}]},{"title":"Dom4jç”ŸæˆXML","date":"2018-06-04T08:50:29.000Z","path":"Dom4Jç”ŸæˆXML.html","text":"å‰è¨€åœ¨çœ‹æœ¬ç¯‡æ–‡ç« ä¹‹å‰ï¼Œå…ˆæ¢è®¨ä¸€ä¸‹å¸¸è§çš„ä¸¤ç§æ•°æ®æ ¼å¼ï¼Œä¸€ç§æ˜¯ JSONï¼Œå¦å¤–ä¸€ç§å°±æ˜¯ XMLï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­ä¸å¯é¿å…åœ°éƒ½ä¼šå¯¹è¿™ä¸¤ç§æ•°æ®æ ¼å¼è¿›è¡Œæ¥è§¦ã€‚ JSON æ ¼å¼çµæ´»ï¼Œæœ‰å¤§é‡çš„æ”¯æŒåº“ï¼Œæ“ä½œèµ·æ¥æä¸ºæ–¹ä¾¿ï¼›è€Œ XML æ“ä½œèµ·æ¥å°±ä¸æ˜¯å¾ˆé¡ºæ‰‹äº†ã€‚ JSON æ ¼å¼çµæ´»çš„å°±ä¼šå¯¼è‡´ç»“æ„ä¸å¤Ÿç»Ÿä¸€è§„èŒƒï¼Œè€Œ XML æœ‰äº† XML Schema ä»¥åŠ DTD çº¦æŸè¿›è¡Œæ ¡éªŒï¼Œä¹Ÿå‡å°‘äº†æ•°æ®æ ¼å¼ä¸è§„èŒƒçš„é—®é¢˜ã€‚ å¯¹äºä»¥ä¸Šè¿™ç‚¹ï¼Œä¸ªäººæ˜¯æ·±æœ‰ä½“ä¼šï¼Œå› ä¸ºåœ¨å·¥ä½œä¸­éœ€è¦ç»å¸¸å’Œå…¶ä»–å…¬å¸çš„æŠ€æœ¯æ‰“äº¤é“ã€‚å…¬å¸åˆä½œæœ‰å†…å®¹è¾“å‡ºä»¥åŠå†…å®¹å¼•å…¥ä¸¤ç§ï¼Œå†…å®¹å¼•å…¥å°±æ˜¯å»æŠ“å–å…¶ä»–å…¬å¸çš„æˆæƒæ¥å£å†…å®¹ï¼Œæ–‡æ¡£åˆ¶å®šçš„æ•°æ®æ ¼å¼æ˜¯ JSON çš„ï¼Œä½†æ˜¯å¯èƒ½å¯¹æ–¹å‚ç…§æˆ‘æ–¹æ–‡æ¡£è¿›è¡Œæ¥å£å¼€å‘æ—¶ï¼Œä¼šå¿½ç•¥æ‰ä¸€äº›äº‹é¡¹ï¼Œæ¯”å¦‚æ•°æ®ç±»å‹ã€æ—¶é—´æ ¼å¼ç­‰ç­‰ï¼Œé€ æˆæˆ‘æ–¹æŠ“å–ä¹‹åï¼Œå‡ºç°é”™è¯¯çš„æƒ…å†µï¼› è€Œåœ¨å’Œç™¾åº¦å†…å®¹è¾“å‡ºè¿›è¡Œæ¥å£å¯¹æ¥çš„æ—¶å€™ï¼Œç™¾åº¦éœ€è¦ XML æ ¼å¼çš„æ•°æ®ï¼Œå¦‚æœæˆ‘æ–¹æ¥å£ä¸­çš„æ•°æ®ä¸ç¬¦åˆå¯¹æ–¹çš„ XML çº¦æŸçš„è¯ï¼Œå¯¹æ–¹å°±èƒ½é©¬ä¸Šåœæ­¢æŠ“å–ï¼Œåé¦ˆé—®é¢˜ï¼Œç”±æ­¤é¿å…é”™è¯¯æƒ…å†µçš„å‘ç”Ÿã€‚ å¹³æ—¶ä¸ºäº†å›¾æ–¹ä¾¿ï¼Œå¾ˆå¤šæ¥å£éƒ½ä½¿ç”¨ JSONï¼Œå¯¹äº XML ä¹Ÿæ¯”è¾ƒç”Ÿç–ï¼Œä½†è¿˜æ˜¯ä¸å¯é¿å…æ¥è§¦åˆ°ä½¿ç”¨ï¼Œå¼€å‘è¿‡å¾®ä¿¡å…¬ä¼—å·çš„éƒ½çŸ¥é“ï¼Œå¾®ä¿¡æ¥å£åŸºæœ¬éƒ½ä½¿ç”¨çš„æ˜¯ XMLã€‚åœ¨å¼€å‘äº†å¾®ä¿¡å›¾æ–‡å›å¤ä¹‹åï¼Œéœ€è¦ç»„è£… XML å‘é€ç»™å¾®ä¿¡æœåŠ¡å™¨ï¼Œå¯èƒ½æœ‰äººè¯´ï¼Œé‚£ç”¨å­—ç¬¦ä¸²æ‹¼è£…ä¸ä¹Ÿæ˜¯å¯ä»¥çš„ä¹ˆï¼Œå¹²å˜›é‚£ä¹ˆéº»çƒ¦éè¦ç”¨ DOM4J å‘¢ï¼Ÿç¡®å®å…¬å¸ä¸­ä¸€äº›é¡¹ç›®çš„å¾®ä¿¡æ”¯ä»˜ï¼Œä¹Ÿä½¿ç”¨çš„æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ XML çš„æ–¹å¼ï¼Œä½†æ˜¯å¤šæŒæ¡ä¸€äº›æŠ€æœ¯ä¹Ÿå¹¶ä¸æ˜¯ä»€ä¹ˆåäº‹ï¼ ç¯å¢ƒå‡†å¤‡é¦–å…ˆå¼•å…¥ dom4j ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.dom4j&lt;/groupId&gt; &lt;artifactId&gt;dom4j&lt;/artifactId&gt; &lt;version&gt;2.1.0&lt;/version&gt;&lt;/dependency&gt; éœ€æ±‚æ¥åˆ°éœ€æ±‚ï¼Œè¦æ±‚ç”¨æˆ·å‘é€ä½œå“åç§°ï¼Œè‡ªåŠ¨å›¾æ–‡å›å¤æœç´¢ç›¸å…³ä½œå“ï¼Œå¾®ä¿¡çš„æ¥å£æ˜¯è¿™æ ·çš„ï¼š éœ€è¦çš„ XML æ–‡æ¡£æ ¼å¼å¦‚ä¸‹ï¼š 123456789101112131415161718192021&lt;xml&gt; &lt;ToUserName&gt;&lt;![CDATA[toUser]]&gt;&lt;/ToUserName&gt; &lt;FromUserName&gt;&lt;![CDATA[fromUser]]&gt;&lt;/FromUserName&gt; &lt;CreateTime&gt;12345678&lt;/CreateTime&gt; &lt;MsgType&gt;&lt;![CDATA[news]]&gt;&lt;/MsgType&gt; &lt;ArticleCount&gt;2&lt;/ArticleCount&gt; &lt;Articles&gt; &lt;item&gt; &lt;Title&gt;&lt;![CDATA[title]]&gt;&lt;/Title&gt; &lt;Description&gt;&lt;![CDATA[description]]&gt;&lt;/Description&gt; &lt;PicUrl&gt;&lt;![CDATA[picurl]]&gt;&lt;/PicUrl&gt; &lt;Url&gt;&lt;![CDATA[url]]&gt;&lt;/Url&gt; &lt;/item&gt; &lt;item&gt; &lt;Title&gt;&lt;![CDATA[title]]&gt;&lt;/Title&gt; &lt;Description&gt;&lt;![CDATA[description]]&gt;&lt;/Description&gt; &lt;PicUrl&gt;&lt;![CDATA[picurl]]&gt;&lt;/PicUrl&gt; &lt;Url&gt;&lt;![CDATA[url]]&gt;&lt;/Url&gt; &lt;/item&gt; &lt;/Articles&gt;&lt;/xml&gt; éœ€æ±‚å®ç°å…¶å®è¿™ä¸ªæ¥å£ä¹Ÿå°±æ˜¯ç»„è£…æ•°æ®ï¼Œç„¶åå‘é€ç»™å¾®ä¿¡å°±å¯ä»¥äº†ã€‚ 12345678910111213141516171819202122232425262728293031public static void main(String[] args) &#123; // 1. åˆ›å»ºæ–‡æ¡£å¯¹è±¡ Document doc = DocumentHelper.createDocument(); // 2. æ–°å¢æ ¹èŠ‚ç‚¹ Element rootXML = doc.addElement(&quot;xml&quot;); // 3. å‘æ ¹èŠ‚ç‚¹æ·»åŠ å­èŠ‚ç‚¹ rootXML.addElement(&quot;ToUserName&quot;).addCDATA(&quot;toUser&quot;); rootXML.addElement(&quot;FromUserName&quot;).addCDATA(&quot;fromUser&quot;); rootXML.addElement(&quot;CreateTime&quot;).setText(&quot;12345678&quot;); rootXML.addElement(&quot;MsgType&quot;).addCDATA(&quot;news&quot;); rootXML.addElement(&quot;ArticleCount&quot;).setText(&quot;2&quot;); // åˆ›å»ºèŠ‚ç‚¹ Element subElement = DocumentHelper.createElement(&quot;Articles&quot;); for (int i = 0; i &lt; 2; i++) &#123; Element itemElement = DocumentHelper.createElement(&quot;item&quot;); itemElement.addElement(&quot;Title&quot;).addCDATA(&quot;title&quot;); itemElement.addElement(&quot;Description&quot;).addCDATA(&quot;description&quot;); itemElement.addElement(&quot;PicUrl&quot;).addCDATA(&quot;picurl&quot;); itemElement.addElement(&quot;Url&quot;).addCDATA(&quot;url&quot;); subElement.add(itemElement); &#125; // å‘æ ¹èŠ‚ç‚¹è¿½åŠ èŠ‚ç‚¹ rootXML.add(subElement); // 4. è¾“å‡ºxmlå­—ç¬¦ä¸² System.out.println(rootXML.asXML());&#125; å°ç»“æœ€è¿‘åšå®¢æ–‡ç« éƒ½æ˜¯ä¸ªäººçš„æ€»ç»“æ€§æ–‡ç« ï¼Œæ²¡æœ‰æ¶‰åŠä»€ä¹ˆéš¾çš„æŠ€æœ¯ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼","tags":[{"name":"XML ç”Ÿæˆ","slug":"XML-ç”Ÿæˆ","permalink":"http://nullpointer.pw/tags/XML-%E7%94%9F%E6%88%90/"},{"name":"Dom4j","slug":"Dom4j","permalink":"http://nullpointer.pw/tags/Dom4j/"}]},{"title":"jsonpathè§£æ","date":"2018-05-19T09:46:15.000Z","path":"jsonpathè§£æ.html","text":"å‰è¨€åœ¨å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä»ä¸€ä¸² JSON ä¸­æå–ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µçš„æƒ…å†µï¼Œå¸¸ç”¨çš„åšæ³•å°±æ˜¯å°†å…¶ååºåˆ—åŒ–ä¸º JSONObject å¯¹è±¡ï¼Œç„¶åä»å¯¹è±¡ä¸­è·å–ï¼Œå¦‚æœæ˜¯ JSONArray å°±è¿›è¡Œè¿­ä»£è·å–ï¼Œæ€»ä¹‹æ¯”è¾ƒéº»çƒ¦ã€‚å¯ä»¥ä½¿ç”¨ JsonPath å¿«é€Ÿæå–æ‰€éœ€ä¿¡æ¯ã€‚ JSONPATH ç®€æ˜è¯­æ³• JsonPath æè¿° $ æ ¹èŠ‚ç‚¹ @ å½“å‰èŠ‚ç‚¹ .or[] å­èŠ‚ç‚¹ .. é€‰æ‹©æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ * æ‰€æœ‰èŠ‚ç‚¹ [] è¿­ä»£å™¨æ ‡ç¤ºï¼Œå¦‚æ•°ç»„ä¸‹æ ‡ [,] æ”¯æŒè¿­ä»£å™¨ä¸­åšå¤šé€‰ [start:end:step] æ•°ç»„åˆ‡ç‰‡è¿ç®—ç¬¦ ?() æ”¯æŒè¿‡æ»¤æ“ä½œ () æ”¯æŒè¡¨è¾¾å¼è®¡ç®— å°è¯• JsonPath å‰æå‡†å¤‡maven å·¥ç¨‹å¼•å…¥ jsonpath çš„ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt; &lt;artifactId&gt;json-path&lt;/artifactId&gt; &lt;version&gt;2.4.0&lt;/version&gt;&lt;/dependency&gt; æœ‰äººè¯´ï¼ŒFastJson è‡ªå¸¦äº† JSONPathï¼Œä¸ºä»€ä¹ˆä¸ç”¨è¦ç”¨è¿™ä¸ªå‘¢ï¼Ÿæˆ‘åªèƒ½å› FastJson ç¡®å®å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯ FastJson çš„ JsonPath æ˜¯çœŸéš¾ç”¨ï¼ JsonPath ç®€å•å…¥é—¨ç‰ˆç»™å®šä¸€ä¸² JSON å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718192021222324252627282930313233343536&#123; &quot;store&quot;: &#123; &quot;book&quot;: [ &#123; &quot;category&quot;: &quot;æ–‡å­¦&quot;, &quot;author&quot;: &quot;æ›¹é›ªèŠ¹&quot;, &quot;title&quot;: &quot;çº¢æ¥¼æ¢¦&quot;, &quot;price&quot;: 47.20 &#125;, &#123; &quot;category&quot;: &quot;å¿ƒç†&quot;, &quot;author&quot;: &quot;å‡¯åˆ©Â·éº¦æ ¼å°¼æ ¼å°”&quot;, &quot;title&quot;: &quot;è‡ªæ§åŠ›&quot;, &quot;price&quot;: 30.20 &#125;, &#123; &quot;category&quot;: &quot;åŠ±å¿—&quot;, &quot;author&quot;: &quot;å²è’‚èŠ¬Â·æŸ¯ç»´&quot;, &quot;title&quot;: &quot;é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯&quot;, &quot;isbn&quot;: &quot;7515326395&quot;, &quot;price&quot;: 51 &#125;, &#123; &quot;category&quot;: &quot;å°è¯´&quot;, &quot;author&quot;: &quot;æ¯›å§†&quot;, &quot;title&quot;: &quot;æœˆäº®ä¸å…­ä¾¿å£«&quot;, &quot;isbn&quot;: &quot;7533936027&quot;, &quot;price&quot;: 19.50 &#125; ], &quot;bicycle&quot;: &#123; &quot;color&quot;: &quot;red&quot;, &quot;price&quot;: 19.95 &#125; &#125;&#125; éœ€è¦æŒ‰ç…§æ¡ä»¶æå–ä¿¡æ¯ 123456789101112131415161718192021222324252627282930313233343536public class JsonPathExample &#123; public static void main(String[] args) throws IOException &#123; // è¯»å–ä¸Šé¢çš„é‚£ä¸² JSON File file = new File(JsonPathExample.class.getClassLoader().getResource(&quot;store.json&quot;).getPath()); String storeJson = FileUtils.readFileToString(file); // æ³¨æ„ä½¿ç”¨ JsonPath ï¼Œä¸è¦ä½¿ç”¨ FastJson çš„ JSONPath // è¾“å‡ºç¬¬ä¸€æœ¬ä¹¦çš„ä½œè€… println(JsonPath.read(storeJson, &quot;$.store.book[0].author&quot;).toString()); // è¾“å‡ºç»“æœï¼š æ›¹é›ªèŠ¹ // è¾“å‡ºæ‰€æœ‰ä¹¦çš„ä½œè€… println(JsonPath.read(storeJson, &quot;$.store.book[*].author&quot;).toString()); // è¾“å‡ºç»“æœï¼š [&quot;æ›¹é›ªèŠ¹&quot;,&quot;å‡¯åˆ©Â·éº¦æ ¼å°¼æ ¼å°”&quot;,&quot;å²è’‚èŠ¬Â·æŸ¯ç»´&quot;,&quot;æ¯›å§†&quot;] // è¾“å‡ºåˆ†ç±»ä¸ºæ–‡å­¦çš„ä¹¦ä¿¡æ¯ println(JsonPath.read(storeJson, &quot;$.store.book[?(@.category ==&#x27;æ–‡å­¦&#x27;)]&quot;).toString()); // è¾“å‡ºç»“æœï¼š [&#123;&quot;author&quot;:&quot;æ›¹é›ªèŠ¹&quot;,&quot;price&quot;:47.2,&quot;category&quot;:&quot;æ–‡å­¦&quot;,&quot;title&quot;:&quot;çº¢æ¥¼æ¢¦&quot;&#125;] // è¾“å‡ºä»·æ ¼å¤§äº 50 çš„ä¹¦ println(JsonPath.read(storeJson, &quot;$.store.book[?(@.price &gt; 50)]&quot;).toString()); // è¾“å‡ºç»“æœ: [&#123;&quot;author&quot;:&quot;å²è’‚èŠ¬Â·æŸ¯ç»´&quot;,&quot;price&quot;:51,&quot;isbn&quot;:&quot;7515326395&quot;,&quot;category&quot;:&quot;åŠ±å¿—&quot;,&quot;title&quot;:&quot;é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯&quot;&#125;] // è¾“å‡º book[*] ä¸­åŒ…å« isbn çš„ä¹¦ println(JsonPath.read(storeJson, &quot;$.store.book[?(@.isbn)]&quot;).toString()); // è¾“å‡ºç»“æœ: [&#123;&quot;author&quot;:&quot;å²è’‚èŠ¬Â·æŸ¯ç»´&quot;,&quot;price&quot;:51,&quot;isbn&quot;:&quot;7515326395&quot;,&quot;category&quot;:&quot;åŠ±å¿—&quot;,&quot;title&quot;:&quot;é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯&quot;&#125;,&#123;&quot;author&quot;:&quot;æ¯›å§†&quot;,&quot;price&quot;:19.5,&quot;isbn&quot;:&quot;7533936027&quot;,&quot;category&quot;:&quot;å°è¯´&quot;,&quot;title&quot;:&quot;æœˆäº®ä¸å…­ä¾¿å£«&quot;&#125;] // è¾“å‡º json ä¸­æ‰€æœ‰çš„ price println(JsonPath.read(storeJson, &quot;$..price&quot;).toString()); // è¾“å‡ºç»“æœ: [19.95,47.2,30.2,51,19.5] &#125; private static void println(String str) &#123; System.out.println(str); &#125;&#125; ä»¥ä¸ŠåŸºæœ¬ä¸Šï¼Œç®€å•æå–éœ€è¦ JSON ä¸­çš„ä¿¡æ¯ä¾¿å·²ç»è¶³å¤Ÿäº†ï¼Œä»¥ä¸‹ä¸ºæ‰©å±•å†…å®¹ï¼Œä¹Ÿæ˜¯æˆ‘åœ¨å·¥ä½œä¸­ä½¿ç”¨åˆ°çš„ã€‚ JsonPath å¤æ‚ç»“æ„ç‰ˆç»™å®šä¸€ä¸² JSON å¦‚ä¸‹æ‰€ç¤º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&#123; &quot;bookId&quot;: 7333, &quot;volumeDetailList&quot;: [ &#123; &quot;title&quot;: &quot;å·ä¸€ æ¢å¼˜ä¸–ç•Œ&quot;, &quot;volumeId&quot;: 28585, &quot;chapterDetailList&quot;: [ &#123; &quot;chapterId&quot;: 11719110, &quot;free&quot;: true, &quot;name&quot;: &quot;ç¬¬1ç«  ä¸Šä¹å¤©&quot;, &quot;price&quot;: 0, &quot;words&quot;: 1678, &quot;contentId&quot;: 2930434 &#125;, &#123; &quot;chapterId&quot;: 1719111, &quot;free&quot;: true, &quot;name&quot;: &quot;ç¬¬2ç« ï¼šæ½æœˆ&quot;, &quot;price&quot;: 0, &quot;words&quot;: 2390, &quot;contentId&quot;: 2930444 &#125; ] &#125;, &#123; &quot;title&quot;: &quot;å·äºŒ åœ¨äººå®¶&quot;, &quot;volumeId&quot;: 285852, &quot;chapterDetailList&quot;: [ &#123; &quot;chapterId&quot;: 1719120, &quot;free&quot;: false, &quot;name&quot;: &quot;ç¬¬3ç« ï¼šåƒå¹´åä¹‹å§‹&quot;, &quot;price&quot;: 19, &quot;words&quot;: 2989, &quot;contentId&quot;: 29540933 &#125;, &#123; &quot;chapterId&quot;: 17133111, &quot;free&quot;: false, &quot;name&quot;: &quot;ç¬¬4ç« ï¼šç ´å†°è€Œç”Ÿ&quot;, &quot;price&quot;: 30, &quot;words&quot;: 3409, &quot;contentId&quot;: 29540988 &#125; ] &#125; ]&#125; è¯»å–éœ€è¦çš„ç›¸å…³ä¿¡æ¯ 1234567891011121314151617181920212223242526public class JsonPathExample2 &#123; public static void main(String[] args) throws IOException &#123; // ç”¨äºè¯»å–ä¸Šé¢çš„é‚£ä¸² JSON File file = new File(JsonPathExample2.class.getClassLoader().getResource(&quot;chapterlist.json&quot;).getPath()); String chapterlistJson = FileUtils.readFileToString(file); // å¾—åˆ°ä¹¦çš„æ‰€æœ‰å·åç§° println(JsonPath.read(chapterlistJson, &quot;$..title&quot;).toString()); // è¾“å‡ºç»“æœ: [&quot;å·ä¸€ æ¢å¼˜ä¸–ç•Œ&quot;,&quot;å·äºŒ åœ¨äººå®¶&quot;] // å¾—åˆ°ä¹¦çš„æ‰€æœ‰ç« èŠ‚åç§° println(JsonPath.read(chapterlistJson, &quot;$..name&quot;).toString()); // è¾“å‡ºç»“æœ: [&quot;ç¬¬1ç«  ä¸Šä¹å¤©&quot;,&quot;ç¬¬2ç« ï¼šæ½æœˆ&quot;,&quot;ç¬¬3ç« ï¼šåƒå¹´åä¹‹å§‹&quot;,&quot;ç¬¬4ç« ï¼šç ´å†°è€Œç”Ÿ&quot;] // ä¸Šé¢ä¸¤ä¸ªéå¸¸ç®€å•ï¼Œä¸‹é¢è¿™ä¸ªéœ€è¦æ³¨æ„ volumeDetailList ä¸ chapterDetailList éƒ½æ˜¯æ•°ç»„ï¼Œä¸”æ˜¯æ•°ç»„åµŒå¥— // å¾—åˆ° chapterId ä¸º 17133111 çš„ contentId println(JsonPath.read(chapterlistJson, &quot;$.volumeDetailList[*].chapterDetailList[?(@.chapterId == &#x27;17133111&#x27;)].contentId&quot;).toString()); // ç®€åŒ–å†™æ³• println(JsonPath.read(chapterlistJson, &quot;$..[?(@.chapterId == &#x27;17133111&#x27;)].contentId&quot;).toString()); // è¾“å‡ºç»“æœ: 29540988 &#125; private static void println(String str) &#123; System.out.println(str); &#125;&#125; å¸¸ç”¨JsonPathåœ¨çº¿è§£æå·¥å…·ç½‘ç«™ http://jsonpath.com/ http://jsonpath.herokuapp.com/ è¿™ä¸¤ä¸ªç½‘ç«™éƒ½å¯ä»¥åœ¨çº¿å†™ JsonPath è¯­å¥ï¼Œå¯ä»¥ç”¨æ¥æ ¡éªŒå†™çš„æ˜¯å¦æ­£ç¡®è€Œä¸ç”¨å»è·‘ä»£ç ç¨‹åºï¼Œæ¯”è¾ƒæ–¹ä¾¿ å‚è€ƒæ–‡ç«  http://goessner.net/articles/JsonPath/ https://www.cnblogs.com/weilunhui/p/3857366.html å°ç»“åœ¨å·¥ä½œä¸­ä½¿ç”¨åˆ°çš„æ—¶å€™ï¼Œä¹Ÿä¸ç†Ÿæ‚‰ JsonPath çš„è¯­æ³•ï¼Œå†™å‡ºäº†æ¯”è¾ƒå¤æ‚çš„ JsonPathï¼Œä½†æ˜¯åœ¨å†™è¿™ç¯‡åšå®¢çš„æ—¶å€™ï¼Œåˆå†™äº†ä¸€èˆ¬ï¼Œå‘ç°äº†æœ‰å¾ˆå¤šè‡ªå·±å†™çš„ JsonPath è¯­å¥æ˜¯å¯ä»¥ç²¾ç®€çš„ï¼Œæ¯”å¦‚å€’æ•°ç¬¬äºŒæ¡ JsonPath è¯­å¥å¯ä»¥ç²¾ç®€ä¸ºå®ƒä¸‹é¢é‚£å¥ã€‚ åœ¨è¾“å‡ºçš„æ—¶å€™ï¼Œå¯ä»¥å‘ç°è‡ªå·±è®¤çŸ¥ä¸­ä¸è¶³ä¹‹å¤„ï¼Œå†™åšå®¢è¿˜æ˜¯èƒ½ç»™è‡ªå·±å¸¦æ¥å¾ˆå¤šå¥½å¤„çš„ï¼Œå¸Œæœ›è‡ªå·±èƒ½å¤Ÿç¬”è€•ä¸æ¯~","tags":[{"name":"JSONPathè§£æ","slug":"JSONPathè§£æ","permalink":"http://nullpointer.pw/tags/JSONPath%E8%A7%A3%E6%9E%90/"},{"name":"JSONPathåœ¨çº¿è§£æ","slug":"JSONPathåœ¨çº¿è§£æ","permalink":"http://nullpointer.pw/tags/JSONPath%E5%9C%A8%E7%BA%BF%E8%A7%A3%E6%9E%90/"},{"name":"JSONPathå¤šå±‚åµŒå¥—è§£æ","slug":"JSONPathå¤šå±‚åµŒå¥—è§£æ","permalink":"http://nullpointer.pw/tags/JSONPath%E5%A4%9A%E5%B1%82%E5%B5%8C%E5%A5%97%E8%A7%A3%E6%9E%90/"}]},{"title":"è§£å†³WebMagicæŠ“HTTPSæ—¶å‡ºç°SSLException","date":"2018-05-12T07:03:47.000Z","path":"è§£å†³WebMagicæŠ“HTTPSæ—¶å‡ºç°SSLException.html","text":"å‰è¨€åœ¨ä»Šå¹´äºŒæœˆä»½åœ¨é¡¹ç›®ä¸­å¼•å…¥äº† WebMagic æŠ€æœ¯ï¼Œç”¨æ¥æŠ“å–åˆä½œæ–¹çš„ä¹¦ç±ï¼Œè¯¦è§ä¹‹å‰æ–‡ç« ï¼šWebMagicä¹‹çˆ¬è™«ç›‘æ§ï¼Œè¿™ä¸¤å¤©æ–°æ¥å…¥äº†ä¸€ä¸ªåˆä½œå•†ï¼Œå¯¹æ–¹æ¥å£é‡‡å–çš„æ˜¯ HTTPS åè®®ï¼Œè€Œä»¥å‰åˆä½œå•†çš„æ¥å£å…¨éƒ½æ˜¯ HTTP çš„ï¼Œåœ¨æ¥å…¥è¿™å®¶åˆä½œå•†çš„æ—¶å€™ï¼Œå‘ç°äº†é—®é¢˜ï¼Œåªè¦æ˜¯ HTTPS çš„ URL å…¨éƒ¨æ— æ³•çˆ¬å–ã€‚ ä¸€ã€é—®é¢˜å¤ç°åœ¨ WebMagic-core åŒ…ä¸­ï¼Œus.codecraft.webmagic.processor.example.GithubRepoPageProcessor è¿™ä¸ªåŒ…ä¸‹é¢æ˜¯ä½œè€…æ”¾çš„ç¤ºä¾‹ä»£ç ï¼Œæ‹·è´è¿™ä¸ªç±»ä»£ç åˆ°æ–°å»ºçš„ç±»ä¸­ï¼Œå³é”®è¿è¡Œè¿™ä¸ªç±»ï¼Œè¿è¡Œåæ§åˆ¶å°æŠ¥å‡ºé”™è¯¯ï¼š[WARN ] 2018-05-12 13:28:11,828 download page https://github.com/code4craft error [us.codecraft.webmagic.downloader.HttpClientDownloader.download(HttpClientDownloader.java:91)] è¿›å…¥è¿™ä¸ªç±»ï¼Œå®šä½åˆ° HttpClientDownloader æºä»£ç  85 è¡Œ 12345678910111213141516public Page download(Request request, Task task) &#123; ...... try &#123; httpResponse = httpClient.execute(requestContext.getHttpUriRequest(), requestContext.getHttpClientContext()); page = handleResponse(request, task.getSite().getCharset(), httpResponse, task); onSuccess(request); logger.info(&quot;downloading page success &#123;&#125;&quot;, request.getUrl()); return page; &#125; catch (IOException e) &#123; logger.warn(&quot;download page &#123;&#125; error&quot;, request.getUrl(), e); onError(request); return page; &#125; finally &#123; ... &#125;&#125; åœ¨ 85 è¡Œæ­¤å¤„æ–­ç‚¹ Debug è¿è¡Œï¼Œå‘ç°æ­¤è¡ŒæŠ›å‡ºäº† SSLException å¼‚å¸¸ã€‚å¼‚å¸¸çš„å†…å®¹æ˜¯ï¼šjavax.net.ssl.SSLException: Received fatal alert: protocol_version äºŒã€è§£å†³é—®é¢˜æ–¹æ³•ï¼ˆä¸€ï¼‰å‡ºç°å¼‚å¸¸åï¼Œé€šè¿‡ Google æœç´¢äº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°äº† WebMagic ä½œè€…é»„å¤§çš„è§£å†³æ–¹å¼ï¼Œè¯¦è§ Httpsä¸‹æ— æ³•æŠ“å–åªæ”¯æŒTLS1.2çš„ç«™ç‚¹ äºæ˜¯æŒ‰ç…§é»„å¤§è¯´çš„æ–¹å¼æ¥åš é¦–å…ˆå¤åˆ¶æºç ä¸­çš„ HttpClientGenerator ä¸ HttpClientDownloader åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ã€‚ ä¿®æ”¹ HttpClientGenerator çš„ä»£ç ï¼Œåªéœ€è¦ä¿®æ”¹ buildSSLConnectionSocketFactory è¿™ä¸ªæ–¹æ³•ä¸ºå¦‚ä¸‹å³å¯ã€‚ 1234567891011121314 ...private SSLConnectionSocketFactory buildSSLConnectionSocketFactory() &#123; try &#123; return new SSLConnectionSocketFactory(createIgnoreVerifySSL(), new String[]&#123;&quot;SSLv3&quot;, &quot;TLSv1&quot;, &quot;TLSv1.1&quot;, &quot;TLSv1.2&quot;&#125;, null, new DefaultHostnameVerifier()); // ä¼˜å…ˆç»•è¿‡å®‰å…¨è¯ä¹¦ &#125; catch (KeyManagementException e) &#123; logger.error(&quot;ssl connection fail&quot;, e); &#125; catch (NoSuchAlgorithmException e) &#123; logger.error(&quot;ssl connection fail&quot;, e); &#125; return SSLConnectionSocketFactory.getSocketFactory();&#125; ... æ³¨æ„ï¼š DefaultHostnameVerifier éœ€è¦ä½¿ç”¨ **org.apache.http.conn.ssl.DefaultHostnameVerifier**ï¼Œè€Œä¸è¦ä½¿ç”¨ sun.net.www.protocol.https.DefaultHostnameVerifier ä¿®æ”¹ HttpClientDownloader ä¸­å¼•ç”¨çš„ HttpClientGenerator ä¸ºä½ ä¿®æ”¹åçš„ç±»ã€‚ è®¾ç½®çˆ¬è™« Spider çš„ Downloader ä¸º ä½ ä¿®æ”¹çš„ HttpClientDownloaderã€‚ 1Spider.create(new GithubRepoPageProcessor()).setDownloader(new HttpClientDownloader()).addUrl(&quot;https://github.com/code4craft&quot;).thread(5).run(); è¿è¡Œåï¼Œå‘ç°æ§åˆ¶å°å·²ç»å¯ä»¥æ­£å¸¸è¾“å‡ºæ‰€æŠ“å–ç½‘é¡µçš„å†…å®¹äº† ä¸‰ã€è§£å†³é—®é¢˜æ–¹æ³•ï¼ˆäºŒï¼‰æ—¢ç„¶å¯¹æ–¹æ¥å£åœ°å€æ˜¯ HTTPS çš„ï¼Œé‚£æˆ‘ä»¬è®¿é—®ä»–çš„ HTTP æ¥å£ä¸å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†ä¹ˆï¼Ÿä½†æ˜¯äº‹å®æ˜¯ï¼Œè®¿é—®å¯¹æ–¹ HTTP æ¥å£æ—¶ï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ° HTTPS ç½‘å€ï¼Œæ‰€ä»¥è¿™æ¡è·¯è¡Œä¸é€šã€‚è¿™æ—¶æˆ‘å¿½ç„¶æƒ³åˆ°ï¼Œä¹‹å‰ä½¿ç”¨ Nginx è§£å†³å‰ç«¯è·¨åŸŸçš„æ–¹æ³•ï¼Œä½¿ç”¨æˆ‘æ–¹çš„ HTTP åŸŸåï¼Œåå‘ä»£ç†åˆ°å¯¹æ–¹çš„ HTTPS ç½‘å€æ˜¯ä¸æ˜¯å°±è§£å†³äº†é—®é¢˜å‘¢ï¼Ÿäºæ˜¯å¯¹ Nginx è¿›è¡Œé…ç½®ã€‚ 123456789server &#123; listen 80; server_name partner.domain.com; location &#x2F; &#123; proxy_set_header Host github.com; proxy_pass https:&#x2F;&#x2F;github.com&#x2F;; &#125;&#125; å¯åŠ¨/é‡å¯ Nginxï¼Œå°†çˆ¬è™«çš„åœ°å€ç”± https://github.com/code4craft ä¿®æ”¹ä¸º **http://partner.domain.com/code4craft**ï¼Œä½¿ç”¨ WebMagic é»˜è®¤çš„ Downloaderï¼Œå¯åŠ¨çˆ¬è™« 123456789101112131415161718public class GithubRepoPageProcessor implements PageProcessor &#123; private Site site = Site.me().setRetryTimes(3).setSleepTime(1000).setTimeOut(10000); @Override public void process(Page page) &#123; System.out.println(page.getRawText()); &#125; @Override public Site getSite() &#123; return site; &#125; public static void main(String[] args) &#123; Spider.create(new GithubRepoPageProcessor()).addUrl(&quot;http://partner.domain.com/code4craft&quot;).thread(5).run(); &#125;&#125; å‘ç°æ§åˆ¶å°æˆåŠŸæ‰“å°å‡ºäº†é¡µé¢çš„å†…å®¹ï¼Œæµ‹è¯•ä¸­ï¼Œå¦‚æœé¡µé¢ï¼Œé¡µé¢çš„å…¶ä»–è¯·æ±‚è¿˜æ˜¯ä¼šé”™è¯¯ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªé¡µé¢æ˜¯æ­£ç¡®çš„ï¼Œå› æ­¤æ­¤æ–¹æ³•åªé€‚åˆä¸ Ajax ç±»ä¼¼çš„æ¥å£ï¼Œæˆ‘ä»¬æ˜¯è¿™æ ·å¤„ç†æŠ“å– Https é—®é¢˜çš„ï¼Œå› ä¸ºç¬¬ä¸€ç§æ–¹æ³•å¯¹äºæˆ‘ä»¬ JDK1.6 é¡¹ç›®æ— æ•ˆï¼Œç¬¬ä¸€ç§æ–¹æ³•åœ¨ JDK 1.8 æµ‹è¯•æ—¶å¯ä»¥æ­£å¸¸æŠ“å–çš„ã€‚ åè®°å¦‚æœç¬¬ä¸€ç§æ–¹æ³•è§£å†³ä¸äº†ä½ çš„é—®é¢˜ï¼Œé‚£å°±è·Ÿæˆ‘ä¸€æ ·å¼„ä¸€ä¸ªä¸´æ—¶åŸŸååå‘ä»£ç†å§ï¼ŒNginx åœ¨è¿™æ–¹é¢è¿˜æ˜¯è›®å¥½ç”¨çš„ã€‚","tags":[{"name":"WebMagicå‡ºç°SSLException","slug":"WebMagicå‡ºç°SSLException","permalink":"http://nullpointer.pw/tags/WebMagic%E5%87%BA%E7%8E%B0SSLException/"},{"name":"çˆ¬è™«å¼‚å¸¸","slug":"çˆ¬è™«å¼‚å¸¸","permalink":"http://nullpointer.pw/tags/%E7%88%AC%E8%99%AB%E5%BC%82%E5%B8%B8/"},{"name":"åå‘ä»£ç†åˆ°å…¶ä»–åŸŸå","slug":"åå‘ä»£ç†åˆ°å…¶ä»–åŸŸå","permalink":"http://nullpointer.pw/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%88%B0%E5%85%B6%E4%BB%96%E5%9F%9F%E5%90%8D/"}]},{"title":"CharlesæŠ“åŒ…å®æˆ˜è¯¦è§£","date":"2018-04-25T14:19:22.000Z","path":"CharlesæŠ“åŒ…å®æˆ˜è¯¦è§£.html","text":"å‰è¨€é€šè¿‡ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæƒ³å¿…ä½ å·²ç»æŒæ¡äº†å¦‚ä½•æ­£ç¡®å®‰è£…æŠ“åŒ…ç¥å™¨ Charlesï¼Œå¦‚æœè¿˜æ˜¯æŠ“ä¸äº†åŒ…ï¼Œå¯ä»¥å†çœ‹çœ‹ã€‚ ä»Šå¤©è¦åšæ˜¯æŠ“åŒ…å®æˆ˜ï¼Œå› ä¸ºæˆ‘åœ¨åšç½‘ç»œæ–‡å­¦çš„å…¬å¸å°±èŒï¼Œæ‰€ä»¥å°±æ‹¿ç½‘ç»œæ–‡å­¦çš„ APP æŒé˜…å¼€åˆ€å¥½äº†ï¼Œä»¥ä¸‹è¿›å…¥æŠ“åŒ…å®æˆ˜ï¼Œä½“ä¼š Charles çš„å¼ºå¤§ä¹‹å¤„ï¼ã€‚ æŒæ¡äº†ä¸‹é¢çš„æŠ“åŒ…æŠ€å·§ï¼Œå¯¹äºæŸäº›æ ¡éªŒå¹¶ä¸æ˜¯ååˆ†ä¸¥æ ¼çš„ APP æ¥è¯´ï¼Œç ´è§£ä»–ä»¬çš„æ¥å£å®åœ¨æ˜¯è½»è€Œæ˜“ä¸¾ã€‚æ¯”å¦‚ä¿®æ”¹ä¸ª isVip å‚æ•°ä¸º trueï¼Œå°±å˜èº«è¶…çº§ VIPç­‰ï¼›ä¹‹å‰ç”¨è¿™å¥—æŠ“åŒ…æŠ€å·§ï¼Œæ‰¾äº†ä¸€ä¸ªç½‘æ ¡éšä¾¿ä¿®æ”¹ï¼Œå‘ç°è¦ä»·ä¸Šåƒè‡³ä¸Šä¸‡çš„è¯¾ç¨‹ç«Ÿç„¶å¯ä»¥è·³è¿‡æ ¡éªŒç›´æ¥è¢«æˆ‘æ’­æ”¾ä¸‹è½½ï¼Œä¹Ÿæ˜¯é†‰äº†ã€‚ å¸Œæœ›å¤§å®¶æŒæ¡äº†æŠ“åŒ…ä¸è¦å¹²è¿æ³•çš„äº‹æƒ…ï¼Œæœ¬æ–‡ç›®çš„åœ¨äºè®©æŠ€æœ¯äººå‘˜äº†è§£æ¼æ´ï¼ŒåŠ å›ºæ ¡éªŒï¼Œä¸è¢«ä»–äººæœ‰æœºå¯ä¹˜ï¼Œä»¥å…é€ æˆå…¬å¸æŸå¤±ã€‚ æµ‹è¯•ç¯å¢ƒç¯å¢ƒï¼š Windows Charles iphone 7 æŒé˜… APP 7.4.2 å‰æï¼šæ‰‹æœºå·²ç»è¿æ¥ Charles ä»£ç†ï¼Œå¹¶å¯ä»¥æŠ“å– HTTPS æ•°æ®åŒ…ã€‚ ä¸€ã€Charles çš„æ–­ç‚¹åŠŸèƒ½ Breakpoints å®æˆ˜é¦–å…ˆç™»å½•æŒé˜… APP ï¼Œæ¸…ç©ºCharles çš„æŠ“åŒ…åˆ—è¡¨ï¼Œä»¥é˜²æ­¢å¹²æ‰°å®éªŒï¼Œç„¶åè¿›å…¥ APP çš„ä¸ªäººä¸­å¿ƒï¼Œå¯ä»¥çœ‹åˆ°å›¾ä¸­åœˆå‡ºçš„æ•°å€¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯¹å…¶æ•°å€¼è¿›è¡Œä¿®æ”¹ã€‚ æ­¤æ—¶çœ‹åˆ° Charles çš„è¯·æ±‚åˆ—è¡¨ä¸­å‡ºç°äº† APP çš„è¯·æ±‚ã€‚ é€šè¿‡ç®€å•åˆ†æï¼Œå¯ä»¥çŸ¥é“ä¸ªäººä¸­å¿ƒçš„é‚£äº›æ•°æ®æ˜¯ä»è¿™ä¸ªè¯·æ±‚ä¸­è·å–åˆ°çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿ä¿®æ”¹è¿™ä¸ªè¯·æ±‚ï¼Œå³é”®è¿™ä¸ªè¯·æ±‚ï¼Œé€‰æ‹© Breakpointsï¼Œè¿™æ ·å°±ç»™è¿™ä¸ªè¯·æ±‚åŠ ä¸Šäº†æ–­ç‚¹ã€‚æ­¤æ—¶åˆ‡æ¢ App åˆ° ä¹¦æ¶å†åˆ‡æ¢å›ä¸ªäººä¸­å¿ƒï¼Œä¼šå†æ¬¡å‘é€è¯¥è¯·æ±‚ï¼ŒCharles ä¼šå¼¹å‡ºè¯·æ±‚çš„æ–­ç‚¹ï¼Œå› ä¸ºè¿™é‡Œä¸éœ€è¦ä¿®æ”¹è¯·æ±‚å‚æ•°ï¼Œç›´æ¥æ”¾è¡Œå³å¯ï¼Œé€‰æ‹© Executeï¼›æ”¾è¡Œåï¼Œä¼šå†æ¬¡å¼¹å‡ºæ–­ç‚¹ï¼Œæ­¤æ—¶å°±æ˜¯å“åº”è¿”å›çš„æ–­ç‚¹äº†ï¼Œé€‰æ‹© Edit Responseï¼Œ åº•éƒ¨é€‰æ‹© JSON text å¯ä»¥ä¿®æ”¹è¿”å›å€¼ï¼Œ æˆ‘è¿™é‡ŒæŠŠ 2 ä¿®æ”¹æˆäº† 2222ï¼Œä¿®æ”¹å®Œä¹‹åï¼Œç‚¹å‡»Executeï¼Œå›åˆ° App å‘ç°å·²ç»æ›´æ”¹äº†ã€‚ æµ‹è¯•ä¸­å‘ç°ï¼ŒæŒé˜… App çš„è¯·æ±‚æ—¶é—´å¦‚æœè¿‡é•¿ï¼Œä¿®æ”¹ä¹‹åä¹Ÿä¼šä¸ç”Ÿæ•ˆã€‚è¿™å°±éœ€è¦ä½¿ç”¨ Charles çš„ä¸‹ä¸€ä¸ªç‰› X çš„åŠŸèƒ½äº†ï¼ŒMap æ˜ å°„ï¼Œè®© Charles è‡ªåŠ¨è¿”å›æˆ‘ä»¬æƒ³è¦çš„è¿”å›å€¼ã€‚ äºŒã€Charles çš„æ˜ å°„åŠŸèƒ½ Map å®æˆ˜ä¸Šä¸€ä¸ªå®éªŒè¿›è¡Œçš„æ—¶å€™ï¼Œå¦‚æœè¯·æ±‚çš„å“åº”æ—¶é—´è¿‡é•¿ï¼ŒæŒé˜…çš„ App å°±ä¼šæŠ›å¼ƒæœ¬æ¬¡è¯·æ±‚çš„ç»“æœï¼Œä¸å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ›´å¿«çš„å»ä¿®æ”¹è¿”å›å€¼ã€‚ ä»¥å‰ç”¨ Fiddler å¯¹äºè¿™ç§å“åº”æ—¶é—´æœ‰è¦æ±‚çš„ Appï¼Œåæ­£æˆ‘æ˜¯æŸæ‰‹æ— ç­–çš„ï¼ŒAPP æ€»æ˜¯æç¤ºç½‘ç»œå¼‚å¸¸ï¼Œå“åº”è¶…æ—¶ç­‰ã€‚å¦‚æœæ˜¯æ›´æ”¹ä¸€ä¸¤ä¸ªè¿”å›å€¼è¿˜å¯ä»¥ï¼Œå¦‚æœæ˜¯å¤šä¸ªï¼Œæ˜¯çœŸæ²¡è¾™äº†ï¼Œæ‰€ä»¥ Charles çš„ Map åŠŸèƒ½æ˜¯å¾ˆå¼ºå¤§çš„ã€‚ é‡å¤ä¸Šä¸€æ­¥ï¼ŒæŠ“åˆ°ä¸ªäººä¸­å¿ƒçš„æ•°æ®åŒ…ï¼Œå°±æ˜¯è¿™ä¸ªè¯·æ±‚ã€‚ å³é”®é€‰æ‹© Save Response åˆ°ä¸€ä¸ªæ–‡ä»¶å½“ä¸­å»ã€‚ å†æ¬¡å³é”®ï¼Œé€‰æ‹©è¯¥è¯·æ±‚ï¼Œä¸ºäº†ä¸å¹²æ‰°å®éªŒï¼Œå–æ¶ˆå‹¾é€‰ä¸Šä¸€æ­¥ä¸­çš„Breakpointsï¼Œç„¶åå†å³é”®è¯¥è¯·æ±‚ï¼Œé€‰æ‹©æœ€ä¸‹æ–¹ Map Localï¼Œé€‰æ‹©åˆšæ‰ä¿å­˜çš„æ–‡ä»¶ã€‚ æ³¨æ„è¿™é‡Œçš„ Queryï¼Œå› ä¸ºæŒé˜… APP åœ¨è¯·æ±‚æ—¶ï¼Œé™„å¸¦äº†ç­¾åæ—¶é—´æˆ³ç­‰å‚æ•°ï¼Œè¿™é‡Œè®¾ç½®ä¸º * ä¹‹åï¼Œå°±ä¼šå¿½ç•¥è¿™äº›å‚æ•°ã€‚è®¾ç½®å®Œæˆåï¼Œä¿®æ”¹åˆšæ‰ä¿å­˜çš„æ–‡ä»¶ï¼Œä½¿ç”¨ NotePad++ ç­‰ç¼–è¾‘å™¨æ‰“å¡ï¼Œä¿®æ”¹é‡Œé¢çš„ JSON å†…å®¹ã€‚æˆ‘æ”¹äº†éƒ¨åˆ†æ•°æ®ï¼Œé‡æ–°è¿›å…¥ä¸ªäººä¸­å¿ƒï¼ŒæŸ¥çœ‹ Charles çš„è¯·æ±‚å†…å®¹ï¼Œå‘ç°å·²ç»ä¿®æ”¹äº† åŒæ—¶çœ‹ App çš„ä¸ªäººä¸­å¿ƒä¹Ÿå·²ç»ä¿®æ”¹äº†ï¼Œå¯ä»¥æ”¹å¾ˆå¤§çš„å€¼ï¼Œç„¶åå‘ä¸æ‡‚çš„äººç‚«è€€ç‚«è€€äº†å“ˆå“ˆå“ˆ~ ä¸‰ã€Charles çš„ Rewrite å®æˆ˜Rewrite æ˜¯å¯¹äº map åŠŸèƒ½çš„ä¸€ä¸ªè¡¥å……ï¼Œå¯ä»¥è®¾ç½®è¾ƒä¸ºå¤æ‚çš„è§„åˆ™ï¼Œä¸‹é¢æ¼”ç¤ºæ›¿æ¢ Body å†…çš„ç”¨æˆ·åç§° é€‰æ‹©èœå•æ  Tools -&gt; Rewriteï¼Œé€‰æ‹©å¼€å¯ Rewrite, å¹¶æ·»åŠ ä¸€æ¡è§„åˆ™ã€‚æ›¿æ¢ Body ä½“å†…çš„ We Jan ä¸º CCTV APPå†æ¬¡å‘èµ·è¯·æ±‚ï¼Œå“åº”å¦‚ä¸‹ å‚è€ƒå…¶å®æ—¥å¸¸ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„åœ°æ–¹åŸºæœ¬ä»¥ä¸Šä¸‰ä¸ªéƒ½å¯ä»¥åŒ…å«åˆ°äº†ï¼Œå…¶ä»–æ·±å…¥å­¦ä¹ çš„ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥ã€‚ http://www.heyuan110.com/2015/08/15/Charles%E8%BE%85%E5%8A%A9%E8%B0%83%E8%AF%95%E6%8E%A5%E5%8F%A3/ http://blog.devtang.com/2015/11/14/charles-introduction/","tags":[{"name":"CharlesæŠ“åŒ…","slug":"CharlesæŠ“åŒ…","permalink":"http://nullpointer.pw/tags/Charles%E6%8A%93%E5%8C%85/"},{"name":"æŠ“åŒ…ç ´è§£","slug":"æŠ“åŒ…ç ´è§£","permalink":"http://nullpointer.pw/tags/%E6%8A%93%E5%8C%85%E7%A0%B4%E8%A7%A3/"},{"name":"æŠ“åŒ…å®æˆ˜","slug":"æŠ“åŒ…å®æˆ˜","permalink":"http://nullpointer.pw/tags/%E6%8A%93%E5%8C%85%E5%AE%9E%E6%88%98/"}]},{"title":"CharlesæŠ“åŒ…ä¹‹HTTPSæŠ“åŒ…é…ç½®","date":"2018-04-15T12:36:40.000Z","path":"CharlesæŠ“åŒ…ä¹‹HTTPSæŠ“åŒ…é…ç½®.html","text":"å‰è¨€ç”±äºå·¥ä½œä¸­ç»å¸¸éœ€è¦é…ç½®å®¢æˆ·ç«¯å¼€å‘äººå‘˜å¯¹æ¥æ¥å£ï¼Œæœ‰æ—¶å€™å¯¹æ¥åœ°ä¸å¤ªé¡ºåˆ©ï¼Œå› æ­¤éœ€è¦ç»å¸¸æ€§åœ°å¯¹å…¬å¸ APP è¿›è¡ŒæŠ“åŒ…çœ‹è¯·æ±‚ï¼Œæ‰¾å‡ºå…·ä½“çš„åŸå› ã€‚ åœ¨å…¬å¸ä¸­å¼€å‘ä½¿ç”¨çš„ Windows å°å¼ç”µè„‘ï¼ŒæŠ“åŒ…å·¥å…·é€‰æ‹©äº† Fiddlerï¼Œè¿™ä¸ªå·¥å…·åˆšå¼€å§‹å­¦ä¼šæŠ“åŒ…çš„æ—¶å€™ï¼Œè§‰å¾—çœŸä¹ƒç¥å™¨ï¼åœ¨ç»è¿‡å‡ æ¬¡å¼€å‘ç”µè„‘å‡çº§ä¹‹åï¼Œé‡æ–°å®‰è£… Fiddler åï¼Œå’Œä¹‹å‰çš„è®¾ç½®ç›¸åŒï¼Œä½†æ˜¯æ­»æ´»æŠ“ä¸äº†åŒ…ï¼Œæˆ–è€…æŠ“ä¸äº† Https çš„åŒ…ï¼Œ æ€»ä¹‹æ€»ä¼šå‡ºç°å„ç§å¥‡æ€ªçš„é—®é¢˜ï¼Œå¦‚æœå‡ºäº†é—®é¢˜ï¼Œç®€ç›´è®©äººæŠ“ç‹‚ï¼ å»å¹´å¹´åº•ï¼Œç»™è‡ªå·±æ¢äº†ä¸€å° MBPï¼Œæ—¥å¸¸å­¦ä¹ ä¸­ä¹Ÿéœ€è¦ç”¨åˆ°æŠ“åŒ…ï¼Œä¸ºäº†å’Œå…¬å¸ä¸­çš„å·¥å…·ä¿æŒä¸€è‡´ï¼Œæƒ³ä¸‹è½½ Fiddler çš„ Mac ç‰ˆï¼Œç»“æœå¹¶æ²¡æœ‰ã€‚äºæ˜¯ä¸‹è½½äº† Charles (èŠ±ç“¶)ï¼Œç”¨äº†èŠ±ç“¶ä¹‹åï¼Œå‘ç°å…¶æ¯” Fiddler æ›´åŠ å¥½ç”¨~ åœ¨ä¸€æ¬¡å—å¤Ÿäº† Fiddler çš„è«åå…¶å¦™åœ°æŠ“ä¸äº† Httpsï¼Œæ€’å¸è½½ä¹‹ï¼Œå¯»å¯»è§…è§…ï¼Œæ‰¾åˆ°äº† Win ç‰ˆçš„ Charles (ä¹‹å‰è¿˜ä»¥ä¸ºæ²¡æœ‰ Win ç‰ˆå‘¢)ï¼Œç»è¿‡ç®€å•é…ç½®ï¼Œå¼€å§‹äº†æ„‰å¿«çš„æŠ“åŒ…~ æŠ“åŒ…å‡†å¤‡ä¹‹ Charles ä¸‹è½½ä»¥åŠæ¿€æ´»Charles è½¯ä»¶ä¸‹è½½ ä¸‹è½½å®‰è£…å®Œï¼Œåœ¨å¼€å§‹èœå•ä¸­æ‰¾åˆ° Charles æ‰“å¼€ï¼Œæç¤ºæœ‰ 30 å¤©çš„è¯•ç”¨æœŸã€‚å¦‚æœ 30 å¤©åˆ°æœŸçš„è¯ï¼Œå¯ä»¥é€‰æ‹©è´­ä¹°ä¸€ä¸ª license ï¼Œ30 åˆ€ã€‚å¦‚æœä¸æƒ³ä¹°ï¼Œå¯ä»¥å‚è€ƒæ­¤æ–‡ç»§ç»­è¯•ç”¨ï¼ŒCharles Proxyä½¿ç”¨ç¬”è®°ï¼ˆæ–‡å†…æœ‰å¥½ç¤¼ï¼‰ã€‚é€‰æ‹© Help-Registered å¡«å…¥ license å³å¯æ¿€æ´»ã€‚ æŠ“åŒ…å‡†å¤‡ä¹‹ Charles é…ç½® HTTPS æŠ“åŒ…åŸºç¡€é…ç½®å¦‚ä»Š Https å¤§è¡Œå…¶é“ï¼Œè‹¹æœæ›´æ˜¯å¼ºåˆ¶è¦æ±‚ APP é€šä¿¡å¿…é¡»è¦ä½¿ç”¨ Https åè®®ï¼Œå¦‚æœåªæ˜¯æŠ“æ™®é€šçš„ HTTP è¯·æ±‚ï¼Œæ— éœ€å¤æ‚é…ç½®å³å¯æŠ“åŒ…ï¼Œè¿™ä¹Ÿè¡¨æ˜äº† HTTP çš„å®‰å…¨æ€§å¾ˆä½ã€‚ Charles é»˜è®¤ä¸å¯¹ HTTPS çš„è¯·æ±‚å¼€å¯æŠ“åŒ…ï¼Œæ‰€ä»¥ï¼Œéœ€è¦å…ˆå¼€å¯æ‰€æœ‰ HTTPS è¯·æ±‚çš„æŠ“åŒ…ã€‚ è¿›å…¥èœå• Proxy-SSL Proxying Settingsé€‰æ‹©å¼€å¯ SSL Proxyï¼Œå¹¶ Add ä¸€æ¡ Location è®°å½•ï¼ŒHost å¡«å†™ *ï¼Œä»£è¡¨åŒ¹é…æ‰€æœ‰ç½‘å€ï¼Œç«¯å£ Portï¼Œå¡«å†™443ï¼Œå³ HTTPS ç«¯å£ã€‚ é€‰æ‹©ä¿å­˜ã€‚ åŸºç¡€é…ç½®åˆ°æ­¤å°±å®Œæˆäº†ï¼Œä»¥ä¸‹æœ¬æ–‡æŒ‰ç…§ä¸¤æ–¹é¢æ¥æè¿°ï¼ŒCharles æŠ“ HTTPSã€‚ Charles æŠ“ Windows ä¸Šçš„ HTTPS è¯·æ±‚è¿›å…¥ Help ä¸­ï¼Œé€‰æ‹© SSL Proxying è®¾ç½®ï¼Œå®‰è£…æ ¹è¯ä¹¦ æ³¨æ„è¿™ä¸€æ­¥ä¸€å®šè¦å°†è¯ä¹¦å­˜å‚¨åˆ° å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„ï¼Œå¦åˆ™æŠ“åŒ… HTTPS ä¼šæç¤ºè¯ä¹¦ä¸å—ä¿¡ä»»ï¼ï¼ï¼å—¯ï¼Œæäº†å¥½ä¹…ï¼Œè¡€ä¸€èˆ¬çš„æ•™è®­ï¼ å®‰è£…æœŸé—´ä¼šæœ‰å®‰å…¨è­¦å‘Šï¼Œé€‰æ‹©æ˜¯å³å¯ã€‚ è®¿é—® https://www.baidu.comåï¼ŒæŸ¥çœ‹ Charlesï¼Œå·²ç»å¯ä»¥çœ‹åˆ° Https è¯·æ±‚ä¸‹çš„æ•°æ®äº†ã€‚ Charles æŠ“ APP çš„ HTTPS è¯·æ±‚æƒ³è¦ Charles æŠ“ HTTPS çš„æ•°æ®åŒ…ï¼Œéœ€è¦è®¾ç½®ä»£ç†å¹¶å®‰è£… Charles çš„ä¸­é—´ SSL è¯ä¹¦ã€‚ é€‰æ‹© Help-SSL Proxying ç‚¹å‡»ä¼šå¼¹å‡ºå¯¹è¯æ¡†å¦‚ä¸‹ æŒ‰ç…§æç¤ºï¼Œå°†æ‰‹æœºè¿å…¥ç”µè„‘åŒä¸€ä¸ªç½‘ç»œï¼ŒWIFI å¤„è®¾ç½®ä»£ç†ï¼Œä»£ç†çš„åœ°å€ä»¥åŠç«¯å£æŒ‰ç…§å¯¹è¯æ¡†ä¸­è¿›è¡Œè®¾ç½®ã€‚ è®¾ç½®æˆåŠŸè¿”å›ä¹‹åï¼Œæ­¤æ—¶ç”µè„‘ä¸Š Charles ä¼šè‡ªåŠ¨å¼¹å‡ºæé†’ï¼Œæç¤ºæ˜¯å¦å…è®¸è¯·æ±‚ä»£ç†é€šè¿‡ï¼Œé€‰æ‹© Allow å…è®¸å³å¯ã€‚ è¿ä¸Šä»£ç†ä¹‹åï¼Œä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦æµè§ˆå™¨( iPhone ä½¿ç”¨ Safari)è®¿é—®åœ°å€ chls.pro/sslï¼Œå¦‚æœæ˜¯ iPhone ä¼šè‡ªåŠ¨å¼¹å‡ºå®‰è£…æè¿°æ–‡ä»¶ï¼Œé€‰æ‹©å®‰è£…è¾“å…¥å¯†ç åæ— è§†è­¦å‘Šå®‰è£…å³å¯ã€‚å› ä¸ºæ‰‹è¾¹æ²¡æœ‰å®‰å“è®¾å¤‡ï¼Œä¸è¿‡æµç¨‹åº”è¯¥ç±»ä¼¼ï¼Œå°±æ˜¯å®‰è£…ä¸€ä¸ª CA è¯ä¹¦æ–‡ä»¶ã€‚ æ‰‹æœºè®¿é—® https://m.baidu.comï¼ŒæŸ¥çœ‹ Charles ï¼Œå‘ç°æ­¤æ—¶å·²ç»å¯ä»¥æ‹¿åˆ° HTTPS æ•°æ®å†…å®¹äº†ï¼Œå¦‚æœæ²¡è®¾ç½®æˆåŠŸï¼Œé‡Œé¢éƒ½å°†ä¼šæ˜¯ unknownã€‚ å¸¸è§é—®é¢˜ å¼€å¯ SSL Proxy ä»£ç†åï¼Œæç¤ºè¯ä¹¦ä¸å—ä¿¡ä»»æˆ–è€…æ— æ•ˆï¼ŒPC ç«¯ä¸€èˆ¬éƒ½æ˜¯å› ä¸ºè¯ä¹¦æ”¾é”™äº†ä½ç½®ã€‚ åœ¨ IOS11ä¸Šæµ‹è¯•æ—¶ï¼ŒæŠ“åŒ…æ˜¾ç¤ºunknown éœ€è¦è¿›å…¥é€šç”¨-å…³äºæœ¬æœº-è¯ä¹¦ä¿¡ä»»è®¾ç½®ï¼Œå°†æ–°å¢çš„è¯ä¹¦è¿›è¡Œå¼€å¯æ“ä½œã€‚ 1. å°ç±³ç³»ç»Ÿçš„æ‰‹æœºå®‰è£…è¯ä¹¦æ–¹å¼æ¯”è¾ƒç¹çï¼Œéœ€è¦è¿›å…¥å¼€å‘è€…é€‰é¡¹ä¸­ï¼Œåœ¨ä¿¡ç”¨è¯ä¹¦ä¸­è¿›è¡Œå®‰è£…ï¼ˆFiddlerå®‰è£…è¯ä¹¦æ˜¯è¿™æ ·çš„ï¼ŒCharles åº”è¯¥ä¹Ÿå·®ä¸å¤šï¼‰ æœ€åè¯´å‡ å¥å–„ç”¨æœç´¢å¼•æ“ï¼Œå› ä¸ºä½ é‡åˆ°çš„é—®é¢˜è‚¯å®šæœ‰åˆ«äººéƒ½é‡åˆ°è¿‡äº†ï¼Œå¦‚æœä½ æœä¸åˆ°ï¼Œè‚¯å®šæ˜¯ä½ çš„æœç´¢å§¿åŠ¿ä¸å¯¹~ å®åœ¨æœ‰é—®é¢˜è§£å†³ä¸äº†ï¼Œå¯ä»¥æ‰¾æˆ‘å“Ÿ! ç»™æˆ‘å†™ä¿¡","tags":[{"name":"CharlesæŠ“åŒ…","slug":"CharlesæŠ“åŒ…","permalink":"http://nullpointer.pw/tags/Charles%E6%8A%93%E5%8C%85/"},{"name":"HTTPSæŠ“åŒ…","slug":"HTTPSæŠ“åŒ…","permalink":"http://nullpointer.pw/tags/HTTPS%E6%8A%93%E5%8C%85/"},{"name":"WindowsæŠ“åŒ…","slug":"WindowsæŠ“åŒ…","permalink":"http://nullpointer.pw/tags/Windows%E6%8A%93%E5%8C%85/"},{"name":"æŠ“åŒ…æ˜¾ç¤ºunknown","slug":"æŠ“åŒ…æ˜¾ç¤ºunknown","permalink":"http://nullpointer.pw/tags/%E6%8A%93%E5%8C%85%E6%98%BE%E7%A4%BAunknown/"}]},{"title":"å¾®ä¿¡åŸŸåé˜²æ­¢å±è”½","date":"2018-03-27T13:11:17.000Z","path":"å¾®ä¿¡åŸŸåé˜²æ­¢å±è”½.html","text":"å‰è¨€è¿™å‡ æ—¥ï¼Œç”±äºé­åˆ°ä»–äººçš„æ¶æ„æŠ•è¯‰ä¸¾æŠ¥ï¼Œå¯¼è‡´äº†å¾®ä¿¡ä¸­é˜…è¯»ä¸šåŠ¡çš„æ ¹åŸŸåè¢«å±è”½ï¼Œæç¤ºå¦‚å›¾ ç”±äºæˆ‘å¸æ˜¯åšç½‘ç»œæ–‡å­¦çš„ï¼Œä½œè€…çš„å†…å®¹ä¸­ä¸å¯é¿å…åœ°ä¼šå‡ºç°äº›å¾®éœ²éª¨çš„å†…å®¹ï¼Œä½†æ˜¯è¿™äº›å†…å®¹æ˜¯ç»è¿‡äº†ç¼–è¾‘å®¡æ ¸ä¹‹åæ‰å…¬å¼€çš„ï¼Œä¹Ÿä¸è‡³äºå¤ªéœ²éª¨ï¼Œä½†ä¸¾æŠ¥å°±è¢«å°ç¦äº†ã€‚ å…¬å¸çš„ç”¨æˆ·æœ‰å¾ˆå¤šæ˜¯é€šè¿‡å¾®ä¿¡å…¬ä¼—å·è¿›è¡Œé˜…è¯»ï¼Œè¿™ä¸€å°ï¼Œå°±è®¸å¤šç”¨æˆ·è¿‡æ¥åé¦ˆäº†ã€‚ åˆ‡æ¢åŸŸåä¹‹ç—›æ—¢ç„¶æ ¹åŸŸåè¢«å°äº†ï¼Œå°±åªèƒ½åˆ‡æ¢åŸŸåäº†ï¼Œå› ä¸ºä¹‹å‰ä»£ç ä¸­æœ‰ä¸å°‘çš„åœ°æ–¹åŸŸåå†™æ­»äº†ï¼Œæ²¡æœ‰æå–æˆå…¬å…±å˜é‡ï¼Œæ”¹äº†å¥½ä¹…ï¼Œæ‰æ›¿æ¢æˆäº†æ–°çš„åŸŸåã€‚ çœ¼çœ‹å·²ç»ä¿®æ”¹å®Œäº†ï¼Œçº¿ä¸Šä¹Ÿæ­£å¸¸äº†ï¼Œéƒ½å·²ç»æ™šä¸Š9ç‚¹å¤šï¼Œå‡†å¤‡ä¸‹ç­å›å®¶äº†ã€‚å°±è¿™æ—¶å€™ï¼Œç¾¤é‡Œåˆåé¦ˆç½‘ç«™è¿›ä¸å»äº†ï¼Œæ‰“å¼€ä¸€å¼€ï¼Œåˆ**è¢«å°äº†ï¼Œå½“æ—¶çš„å¿ƒæƒ…çœŸæ˜¯æƒ³é—®å€™ä¸€ä¸‹æ¶æ„ä¸¾æŠ¥äººçš„å…¨å®¶äº†ï¼ æ²¡æ³•å­ï¼Œç»§ç»­æ¢åŸŸåï¼Œè¿˜å¥½ä¹‹å‰æå‰å¤‡æ¡ˆäº†å‡ ä¸ªåŸŸåï¼Œæ²¡æƒ³åˆ°ç°åœ¨å…¨ç”¨ä¸Šäº†ã€‚ æœ‰äº†ä¸Šä¸€æ¬¡çš„ç»éªŒï¼Œç°åœ¨ä¿®æ”¹èµ·æ¥ä¹Ÿå¿«å¤šäº†ï¼Œä¿®æ”¹ä¸Šçº¿å®Œäº‹éƒ½å·²ç» 10 ç‚¹å¤šäº†ï¼Œæ¶æ„ä¸¾æŠ¥çš„äººè¿™æ—¶å€™ä¹Ÿæ¶ˆåœäº†ä¸‹æ¥æ²¡æœ‰ç»§ç»­æŠ•è¯‰äº†ï¼Œæˆ‘ä»¬ä¹Ÿç»ˆäºå¯ä»¥ä¸‹ç­ï¼Œå®³çš„æˆ‘ä»¬å¤§å‘¨å…­çš„è¿‡æ¥åŠ äº†ä¸€å¤©çš„ç­ï¼ ç¬¬äºŒå¤©ï¼Œä¹Ÿå°±æ˜¯å‘¨æ—¥ã€‚ç¾¤é‡Œåˆååº”è¢«å°äº†ï¼ŒçœŸæ˜¯å´©æºƒã€‚æœ€å¼€å§‹çš„åŸŸåè¢«å¾®ä¿¡å°ç¦åï¼Œå…¬å¸ç¬¬ä¸€æ—¶é—´è¿›è¡Œäº†ç”³è¯‰ï¼Œæ­¤æ—¶æ”¶åˆ°é€šçŸ¥ï¼Œè¯´æ£€æµ‹åæ²¡æœ‰è¿è§„å†…å®¹ï¼Œå°±è¿›è¡Œäº†è§£å°ã€‚å¯èƒ½æ˜¯åˆ«äººæ¶æ„åˆ©ç”¨äº†å¾®ä¿¡çš„å°ç¦ç³»ç»Ÿï¼Œæ­¤æ—¶è§‰å¾—å¾®ä¿¡çš„è¿™å¥—ç³»ç»Ÿåšçš„çœŸçƒ‚ï¼äºæ˜¯æˆ‘ä»¬å¼€å‘äººå‘˜åˆæ˜¯ä¸€ç•ªæ›¿æ¢ï¼ŒæŠŠç°åœ¨è¢«å°çš„åŸŸååˆ‡æ¢äº†å›å»ã€‚ ç»è¿‡è¿™å‡ æ³¢æ“ä½œï¼Œè¿™ä¸¤å¤©ç½‘ç«™çš„æ”¶å…¥éª¤å‡ï¼Œé‚£å¸®ä½¿åçš„äººæ˜¯è¶ä½ ç—…è¦ä½ å‘½çš„èŠ‚å¥ï¼ ç—›å®šæ€è¿‡æ€»ç»“äº†ä¸€ä¸‹è¿™æ¬¡äº‹ä»¶çš„æ•™è®­ï¼Œä¸»è¦çš„åŸå› å°±æ˜¯å› ä¸ºå°è¯´çš„å†…å®¹é¡µè¢«é¢‘ç¹æ¶æ„ä¸¾æŠ¥å¯¼è‡´åŸŸåè¢«å°ã€‚ è¿™å°±å¯¼è‡´äº†å³ä½¿æ¢äº†åŸŸåï¼Œæ¯”å¦‚æ”¯ä»˜ï¼Œç™»å½•éƒ½å—åˆ°äº†å½±å“ï¼Œè€Œä¸”å¾®ä¿¡æ”¯ä»˜é™åˆ¶äº†æ¯ä¸ªæœˆä¿®æ”¹æ”¯ä»˜åŸŸåçš„æ¬¡æ•°ï¼Œä¸å¾—å·²æˆ‘ä»¬åªå¥½æ¢äº†å¦å¤–ä¸€ä¸ªæœåŠ¡å·æ‰é‡æ–°æ‰“é€šäº†æ”¯ä»˜ã€‚ æ¥ä¸‹æ¥éœ€è¦åšçš„å°±æ˜¯ï¼Œå°†å¯èƒ½è¿˜ä¼šè¢«ä¸¾æŠ¥çš„å°è¯´å†…å®¹é¡µçš„åŸŸåæ‹†åˆ†å‡ºå»ï¼Œä¸å’Œç½‘ç«™ä¸»è¦åŸŸåä¸€æ ·ã€‚ æ¯”å¦‚é¦–é¡µã€ä¸ªäººä¸­å¿ƒæ˜¯ m.aaa.com, å°†å†…å®¹é¡µçš„åŸŸåä¿®æ”¹æˆ m.bbb.comã€‚ æˆ‘ä»¬çš„é˜…è¯»é¡µ URL åœ°å€ä¸º https://m.aaa.com/book/1010545066/385773672ï¼Œåˆ™åœ¨ nginx åŒ¹é…åˆ° ^/book/([0-9]+)/([0-9]+) å°±è¿›è¡Œè·³è½¬åˆ° http://m.bbb.com/book/1010545066/385773672ï¼Œäºæ˜¯ï¼Œä¿®æ”¹ nginx çš„é…ç½®ï¼Œå¯¹ URL è¿›è¡ŒåŒ¹é…ã€‚ 1234567891011121314151617181920212223242526272829server &#123; listen 443; server_name m.aaa.com; # ... set $temp_content_host &quot;http:&#x2F;&#x2F;m.bbb.com&quot;; location ~ ^&#x2F;book&#x2F;([0-9]+)&#x2F;([0-9]+) &#123; # If WeChat browser, jump to temporary domain name if ($http_user_agent ~* (Micromessenger) ) &#123; return 301 $temp_content_host$request_uri; &#125; proxy_pass http:&#x2F;&#x2F;domainAserver; &#125; location &#x2F; &#123; proxy_pass http:&#x2F;&#x2F;domainAserver; &#125;&#125;server &#123; listen 80; server_name m.bbb.com; # ... location &#x2F; &#123; proxy_pass http:&#x2F;&#x2F;domainAserver; &#125;&#125; å› ä¸ºåªæœ‰åœ¨å¾®ä¿¡æµè§ˆå™¨å†…éƒ¨ï¼Œæ‰å­˜åœ¨è¢«å°ç¦çš„é£é™©ï¼Œè€Œåœ¨å…¶ä»–æµè§ˆå™¨å†…æ²¡æœ‰ï¼Œä¸€æ—¦è¢«å¾®ä¿¡å°ç¦ï¼Œå†…å®¹é¡µçš„åŸŸåéœ€è¦ä¸€èµ·æ›´æ¢ï¼Œè¿™æ ·å¯èƒ½ä¼šä¸åˆ©äºæœç´¢å¼•æ“çš„æ”¶å½•ï¼Œå› æ­¤åŠ äº†ä¸€ä¸ªåˆ¤æ–­æµè§ˆå™¨ UAï¼Œå¾®ä¿¡çš„ UA æ˜¯ Micromessenger å¦‚æœæ˜¯åœ¨å¾®ä¿¡æµè§ˆå™¨å†…éƒ¨ï¼Œnginx æ‰ 301 è·³è½¬åˆ° m.bbb.comï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¿æŒä¹‹å‰çš„åŸŸåä¸å˜ã€‚ è¿™æ ·å°±è§£å†³äº†é—®é¢˜ï¼Œä¸€æ—¦ m.bbb.com åŸŸåè¢«å°ç¦äº†ï¼Œå°±æ˜¯ aaa åŸŸåçš„ nginx ä¿®æ”¹ $temp_content_host è¿™ä¸ªå˜é‡çš„å€¼ä¸ºæ–°çš„åŸŸåç„¶å reload ä¸€ä¸‹ nginx å³å¯ã€‚ æ€»ç»“å¯èƒ½æ˜¯å…¬å¸æˆ˜ç•¥ä¸Šçš„é—®é¢˜ï¼Œå¤ªè¿‡äºä¾èµ–å¾®ä¿¡çš„å…¬ä¼—å·ï¼Œåœ¨å¾®ä¿¡çš„ç”Ÿæ€ä¸­ï¼Œå¾®ä¿¡æƒ³å¼„æ­»ä½ è½»è€Œæ˜“ä¸¾ï¼Œä½ å´æ— å¯å¥ˆä½•ï¼Œå°½é‡æŠŠç”¨æˆ·å¼•å¯¼åˆ°å®¢æˆ·ç«¯ä¸Šæ‰æ˜¯ä¸Šä¸Šç­–ã€‚ å‚è€ƒ http://www.ttlsa.com/nginx/how-to-block-user-agents-using-nginx/ http://lzl124631x.github.io/2016/04/08/check-wechat-user-agent.html","tags":[{"name":"å¾®ä¿¡åŸŸåå°ç¦","slug":"å¾®ä¿¡åŸŸåå°ç¦","permalink":"http://nullpointer.pw/tags/%E5%BE%AE%E4%BF%A1%E5%9F%9F%E5%90%8D%E5%B0%81%E7%A6%81/"}]},{"title":"å¾®ä¿¡åˆ†äº«è¸©å‘ä¹‹æ—…","date":"2018-03-17T08:32:52.000Z","path":"å¾®ä¿¡åˆ†äº«è¸©å‘ä¹‹æ—….html","text":"å‰è¨€ä¸‰æœˆä¼Šå§‹ï¼Œæ­¤æœˆä»»åŠ¡é‡å¿ƒåœ¨äºç”¨æˆ·çš„æ‹‰æ–°ä¸ä¼ æ’­ï¼Œè‡ªç„¶ä¹Ÿå°‘ä¸äº†æ–°å¢åŠ äº›è®¸éœ€æ±‚ã€‚ç”±æˆ‘è´Ÿè´£ç”¨æˆ·åˆ†äº«ä¼ æ’­çš„éœ€æ±‚ï¼Œä¸»è¦ä»»åŠ¡å°±æ˜¯åœ¨äºå¾®ä¿¡åˆ†äº«ã€‚åœ¨åšä¹‹å‰è§‰å¾—è¿™ä¸ªå¾ˆç®€å•ï¼Œå°±å‡ ä¸ªæ¥å£çš„äº‹æƒ…ç½¢ï¼Œå®é™…ä¸Šåšèµ·æ¥ï¼Œå´æ˜¯ä¸å¦‚æ„æ–™é‚£èˆ¬ç®€å•ï¼Œè¸©å‘é¢‡å¤šã€‚ åœ¨åšè¿™ä¸ªåˆ†äº«éœ€æ±‚ä¹‹å‰ï¼Œå’ŒåŒäº‹ä»¬ä¹Ÿå·²ç»è®¨è®ºè¿‡å¤§è‡´çš„æµç¨‹ã€‚æ— éå¸¸ç”¨çš„æ‰‹æ³•ï¼Œé’ˆå¯¹ç”¨æˆ·ç”Ÿæˆå”¯ä¸€äºŒç»´ç ï¼Œé€šè¿‡å¾®ä¿¡åˆ†äº«å‡ºå»ï¼Œç„¶åå…¶ä»–äººæ³¨å†Œå¡«å†™é‚€è¯·ç è·å–å¥–åŠ±ã€‚ åœ¨å¡«å†™é‚€è¯·ç è¿™é‡Œï¼Œæˆ‘å‚è€ƒäº†ä¸€äº›ä¸»æµ APP çš„åšæ³•ã€‚æ­£å¸¸æ˜¯å¤åˆ¶é‚€è¯·ç ç„¶åç”¨æˆ·æ‰¾åˆ°å…¥å£ç²˜è´´é‚€è¯·ç å¹¶è¿›è¡Œæ¿€æ´»ï¼Œä½†æ˜¯å‘ç°æœ‰ä¸ªåˆ«çš„ APP ä½“éªŒå¾ˆå¥½ï¼Œå¯ä»¥åšåˆ°å¤åˆ¶é‚€è¯·ç åï¼Œç›´æ¥æŠµè¾¾ APPï¼ˆç½‘æ˜“èœ—ç‰›è¯»ä¹¦ï¼‰ å†…éƒ¨ WebView ä¸­è‡ªåŠ¨å¡«å†™é‚€è¯·ç ã€‚ åœ¨å¯¹è¿™ä¸ª APP æŠ“åŒ…åˆ†æä¹‹åå‘ç°äº†å…¶ä¸­çš„å¥¥å¦™æ‰€åœ¨ï¼Œè¿™æ˜¯ä»–ä»¬åˆ†äº«é¡µé¢çš„åœ°å€ï¼š https://du.163.com/static/wechatFallback.html?openurl=nesnailreader://webview?url=https://du.163.com/invite?code=EPPEG&amp;inside=true&amp;downloadurl=https://du.163.com/download åŸæ¥ä»–ä»¬ä½¿ç”¨äº†ä¸€ç§å«åš schema çš„æŠ€æœ¯ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ APPã€‚äºæ˜¯å¼€å§‹äº†æ¨¡ä»¿ä¹‹æ—…ã€‚ çŸ¥é“äº†å…¶ä»– APP çš„åšæ³•åï¼Œä¾¿è¯¢é—®äº†å®¢æˆ·ç«¯çš„åŒäº‹ï¼Œèƒ½ä¸èƒ½å®ç°åŒæ ·çš„æ•ˆæœï¼Œä»–ä»¬éƒ½æ˜¯è¯´ä»¥å‰æ²¡æœ‰è¿™æ ·åšè¿‡ï¼Œä½†æ˜¯å¯ä»¥åšã€‚åè°ƒäº†å‰ç«¯ä¸å®¢æˆ·ç«¯åŒäº‹ï¼Œå…±åŒå¼€å‘è¿™ä¸ªçœ‹èµ·æ¥æŒºç®€å•çš„åŠŸèƒ½éœ€æ±‚ã€‚å®¢æˆ·ç«¯åŒäº‹éƒ½å¾ˆç»™åŠ›ï¼Œè™½ç„¶å‡ºç°äº†ä¸€äº›å°æ’æ›²ï¼Œä½†å¾ˆå¿«ä¾¿è°ƒé€šäº†åŠŸèƒ½ï¼Œå‰©ä¸‹äº† WAP ç‰ˆæœ¬å¾®ä¿¡åˆ†äº«ï¼Œç”±äºä¹‹å‰éƒ½æ²¡æœ‰åšè¿‡ï¼Œè¸©äº†ä¸å°‘çš„å‘ï¼Œåˆ†äº«è¿™æ¬¡è¸©å‘ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ–‡é‡å¿ƒæ‰€åœ¨ã€‚ å‘ä¸€åå°ä»£ç å¼€å‘ä¸å¿…å¤šè¯´ï¼Œè·Ÿç€æ–‡æ¡£å¼€å‘ï¼Œå› ä¸ºéœ€è¦è·å– å¾®ä¿¡å…¬ä¼—å·çš„ AccessToken æ‰€æœ‰éœ€è¦åœ¨å¾®ä¿¡åå¤©ç™½åå•å¤„æ·»åŠ æœ¬æœº IP ã€‚ åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œè°ƒè¯•å¾®ä¿¡ JSSDK æ—¶ï¼Œå‘ç° JS-SDK æç¤ºç­¾åé”™è¯¯ï½›errmsgï¼šconfig: invalid signatureï½ï¼Œä½†æ˜¯é€šè¿‡ å¾®ä¿¡ JS æ¥å£ç­¾åæ ¡éªŒå·¥å…· æäº¤ç›¸å…³å‚æ•°è¿›è¡Œæ ¡éªŒåï¼Œå‘ç°ç¨‹åºç”Ÿæˆçš„å’Œå¾®ä¿¡ç½‘é¡µç”Ÿæˆçš„ç­¾åæ˜¯ä¸€æ ·çš„,ä½†æ˜¯è¿™é‡Œå°±ä¸€ç›´æç¤ºæ˜¯æ— æ•ˆçš„ç­¾åã€‚ æˆ‘æŸ¥çœ‹äº† JS-SDK ä¸‹æ³¨å†Œ config ä¿¡æ¯å¤„çš„è¾“å…¥å‚æ•°ï¼Œå‘ç°æœ¬è¯¥æäº¤äº”ä¸ªå‚æ•°ï¼Œä½†æ˜¯åªæäº¤äº†å››ä¸ªï¼Œæ¼æäº¤äº†nonceStr å‚æ•°ï¼Œå¦‚æœä½ å‘ç°ç¨‹åºç”Ÿæˆçš„å’Œå¾®ä¿¡ç½‘é¡µç”Ÿæˆçš„ç­¾åæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æç¤ºæ— æ•ˆç­¾åï¼ŒåŠ¡å¿…æ£€æŸ¥æ˜¯å¦æ˜¯è¿™é‡Œçš„é—®é¢˜ã€‚è¿˜æœ‰æäº¤äº†äº”ä¸ªå‚æ•°ï¼Œä½†æ˜¯å‚æ•°çš„å¤§å°å†™ä¸æ­£ç¡®çš„çš„ï¼Œæ¯”å¦‚ nonceStr å†™æˆäº† nonceStr ä¹Ÿæ˜¯ä¸è¡Œçš„ã€‚å¯ä»¥å¯¹æ¯”ä¸‹å›¾è¿›è¡Œæ ¡éªŒã€‚ å‘äºŒå‘ä¸€ç§æåˆ°äº† AccessTokenï¼Œä½¿ç”¨ JSSDK æ—¶è¿˜éœ€è¦å¦å¤–ä¸€ä¸ª ticketï¼Œè¿™äºŒè€…éƒ½æœ‰è¶…æ—¶æ—¶é—´çš„é™åˆ¶ï¼Œå¦‚æœè¿‡æœŸäº†ï¼Œé‚£ä¹ˆ config æ˜¯æ— è®ºå¦‚ä½•ä¹Ÿä¸ä¼šåˆå§‹åŒ–æˆåŠŸçš„ã€‚ å‘ä¸‰è¸©äº†å‰ä¸¤ä¸ªå‘ä¹‹å¤–ï¼Œå…¶å® WAP ç‰ˆçš„å¼€å‘ä¹Ÿéƒ½å·®ä¸å¤šè°ƒé€šäº†ï¼Œä½†æ˜¯åˆ†äº«ä¹‹åï¼Œåˆ†äº«äººè¿›å…¥åˆ†äº«çš„é“¾æ¥åï¼ŒäºŒæ¬¡åˆ†äº«æ—¶ï¼Œä¾¿åˆå‡ºç°äº†æ— æ•ˆç­¾åçš„æƒ…å†µï¼Œä»”ç»†æ’æŸ¥ä¹‹åï¼Œå‘ç°æ˜¯åˆ†äº«åï¼Œå¾®ä¿¡ä¼šåœ¨åˆ†äº«çš„é“¾æ¥åé¢è‡ªåŠ¨åŠ ä¸Šäº†ä¸€äº›å‚æ•°ï¼Œæ­£æ˜¯å› ä¸ºè¿™äº›å‚æ•°çš„å­˜åœ¨ï¼Œå¯¼è‡´ç­¾åå¤±è´¥ã€‚ åˆšå¼€å§‹æ²¡æœ‰ç»†çœ‹æ–‡æ¡£ï¼Œå› æ­¤åˆ†äº« URL çš„åœ°å€å°±æ²¡æœ‰è¿›è¡ŒåŠ¨æ€ä¼ é€’åˆ°åå°è¿›è¡Œç­¾åï¼Œæ‰€ä»¥å¯¼è‡´äº†äºŒæ¬¡åˆ†äº«å‡ºç°äº†é—®é¢˜ï¼Œäºæ˜¯ä¿®æ”¹ä¸ºäº†åŠ¨æ€ä¼ é€’å½“å‰ URL åˆ°åå°è¿›è¡Œç­¾åï¼Œæ‰è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå½“å‰çš„ URL ä¸­åŒ…å«äº†ä¸­æ–‡ï¼Œéœ€è¦è¿›è¡Œ encodeURIComponent åä¼ é€’ï¼Œå†åœ¨åå°è¿›è¡Œ URL è§£ç å¤„ç†ã€‚å¦å¤–ç¼–ç ä¹‹åæœ€å¥½å†å°†å‚æ•°ä¸­çš„ &amp; ä¸´æ—¶æ›¿æ¢ä¸º %26ï¼Œåå°å†æ›¿æ¢ä¸º **&amp;**ï¼Œå¦‚æœç›´æ¥ä¼ åˆ°åå°ï¼Œå­˜åœ¨å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œåå°å°†åªä¼šæ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ å°æ’æ›² å®‰å“å®¢æˆ·ç«¯è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œå‡ºç°äº†å¾ˆå¥‡æ€ªçš„çŠ¶å†µï¼Œå°±æ˜¯åœ¨ WebView é‡Œé¢æ— æ³•è·å–å½“å‰ APP ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå³ WebView å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œå‘ç°è·å–ä¸åˆ° Cookie ä¸­ç™»å½•ç”¨æˆ·ä¿¡æ¯çš„å€¼ï¼Œè€Œ IOS å®¢æˆ·ç«¯ä¾¿æ²¡æœ‰å‡ºç°è¿™ç§æƒ…å†µã€‚ ä¹‹å‰å®‰å“åœ¨åšç­¾åˆ°åŠŸèƒ½çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ä½¿ç”¨çš„ WebViewï¼Œè´Ÿè´£ç­¾åˆ°åå°å¼€å‘çš„åŒäº‹ä¹Ÿé‡åˆ°äº†è¿™ç§æƒ…å†µï¼Œå½“æ—¶æ²¡æœ‰å½»åº•è§£å†³è¿™ç§é—®é¢˜ï¼Œä½¿ç”¨äº†ä¸€ç§æŠ˜ä¸­çš„æ–¹æ³•æ¥å®ç°ï¼Œè®©å®‰å“å®¢æˆ·ç«¯ä¼ é€’ä¸€ä¸²åŒ…å«ç”¨æˆ·ä¿¡æ¯çš„åŠ å¯†ä¸²å‚æ•°ï¼Œåå°è§£æè¿™ä¸ªå‚æ•°åˆ¤æ–­ç”¨æˆ·ã€‚ è°·æ­ŒæŸ¥æ‰¾è¿™ç§æƒ…å†µä¹‹åï¼Œå‘ç°å®‰å“éœ€è¦å°† Cookie åŒæ­¥åˆ° WebView ä¸­ï¼Œè¯¢é—®å®‰å“åŒäº‹ä¹‹åï¼Œä»–è¯´åŒæ­¥è¿‡äº†å•Šï¼Œè¿™å°±å¾ˆå¥‡æ€ªäº†ï¼ ç»§ç»­ä¸‡èƒ½è°·æ­ŒæŸ¥æ‰¾ï¼Œç„¶åçœ‹äº†ä¸€ä¸‹åŒäº‹çš„å®¢æˆ·ç«¯ä»£ç ï¼Œå‘ç°ä»–åŒæ­¥ Cookie åˆ° WebView éƒ¨åˆ†çš„ä»£ç å¹¶æ²¡æœ‰è®¾ç½® Cookie çš„ domain ä¸ pathï¼Œè€Œåå°è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œåªå»è·å–æŒ‡å®šåŸŸåæŒ‡å®šè·¯å¾„ä¸‹çš„ Cookie å€¼ï¼Œè‡ªç„¶æ˜¯è·å–ä¸åˆ° WebView é‡Œç™»å½•ç”¨æˆ·ä¿¡æ¯çš„å€¼äº†ã€‚ çŸ¥é“äº†é—®é¢˜ï¼Œè§£å†³èµ·æ¥å°±ç®€å•å¤šäº†ï¼Œåªè¦å°†éœ€è¦åŒæ­¥çš„æ¯ä¸€æ¡ Cookie ä¿¡æ¯è®¾ç½® Domain ä¸ Path å³å¯ï¼Œåå°ä¹Ÿå°±å¯ä»¥æ‹¿åˆ°åŒæ­¥çš„ Cookie ä¿¡æ¯äº†ã€‚ 1234public static boolean syncCookie(String url, String cookie) &#123; cookie += &quot;;Max-Age=3600&quot; + &quot;;Domain=.cctv.com&quot; + &quot;;Path = /&quot; cookieManager.setCookie(url, cookie);&#125;","tags":[{"name":"å¾®ä¿¡åˆ†äº«","slug":"å¾®ä¿¡åˆ†äº«","permalink":"http://nullpointer.pw/tags/%E5%BE%AE%E4%BF%A1%E5%88%86%E4%BA%AB/"},{"name":"WebViewåŒæ­¥Cookieé—®é¢˜","slug":"WebViewåŒæ­¥Cookieé—®é¢˜","permalink":"http://nullpointer.pw/tags/WebView%E5%90%8C%E6%AD%A5Cookie%E9%97%AE%E9%A2%98/"}]},{"title":"SpringBootä¸WebSocketé›†æˆ","date":"2018-02-28T14:17:09.000Z","path":"SpringBootä¸WebSocketé›†æˆ.html","text":"å‰è¨€ç›®å‰ï¼Œå…¬å¸çš„é¡¹ç›®éƒ¨ç½²æ–¹å¼è¿˜æ˜¯ä½¿ç”¨çš„åŸå§‹çš„æ–¹å¼ï¼Œé€šè¿‡æ‰‹åŠ¨è¿è¡Œè„šæœ¬å»éƒ¨ç½²ã€‚æ¯æ¬¡å…¨éƒ¨æœåŠ¡å™¨éƒ¨ç½²ä¸€éï¼Œéœ€è¦è€—è´¹çš„æ—¶é—´å¾ˆé•¿ï¼Œå¦‚æœé‡åˆ°é”™è¯¯ï¼Œä¹Ÿä¸èƒ½ç«‹åˆ»è¿›è¡Œå›æ»šï¼Œåªèƒ½å°†é”™è¯¯è§£å†³æäº¤æˆ–è€…å°†å¤‡ä»½ä»£ç è¿›è¡Œè¿˜åŸã€‚ åœ¨æŒç»­é›†æˆå¤§è¡Œå…¶é“çš„ä»Šå¤©ï¼Œè¿™ç§åŸå§‹çš„æ–¹å¼å®åœ¨æ˜¯ä¸åº”è¯¥å†ä½¿ç”¨äº†ï¼åœ¨è°ƒç ”äº† Jekins ç­‰å¼€æºæŒç»­é›†æˆå·¥å…·ä¹‹åï¼Œå‘ç°å¯¹äºæˆ‘ä»¬å…¬å¸è€Œè¨€ï¼Œæ¯”å¦‚ Jekins çš„ä¸Šæ‰‹éš¾åº¦è¿˜æ˜¯è¾ƒé«˜çš„ï¼Œé…ç½®ä¹Ÿæ¯”è¾ƒå¤æ‚ç¹çï¼Œä¹Ÿå°±æ²¡æœ‰é‡‡ç”¨ã€‚ äºæ˜¯æƒ³ç€è‡ªå·±èƒ½ä¸èƒ½ä¹Ÿæä¸€ä¸ªç®€åŒ–ç‰ˆé€‚ç”¨äºå…¬å¸çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ç³»ç»Ÿå‘¢ï¼Ÿäºæ˜¯åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†æœ¬æ–‡çš„é—®é¢˜ï¼Œä¸ºäº†å®æ—¶å±•ç¤ºæœåŠ¡å™¨å‘½ä»¤è¾“å‡ºæƒ…å†µï¼Œæˆ‘ä½¿ç”¨äº† WebSocket æŠ€æœ¯æ¥å®ç°ï¼ŒåŒæ—¶ä½¿ç”¨ SpringBoot æ¡†æ¶è¿›è¡Œå¿«é€Ÿæ­å»ºé¡¹ç›®ï¼Œè¯¥éƒ¨ç½²ç³»ç»Ÿç›®å‰æœªå¼€å‘å®Œæˆï¼Œå§‘ä¸”ä½œä¸ºä¸€ä¸ªç»ƒæ‰‹é¡¹ç›®ã€‚ WebSocket ä»‹ç»å¯¹äº WebSocket å°±ä¸å¤šè¯´ä»€ä¹ˆäº†ï¼Œç›´æ¥å¼•ç”¨ç»´åŸºç™¾ç§‘çš„è§£é‡Šã€‚ WebSocketæ˜¯HTML5å¼€å§‹æä¾›çš„ä¸€ç§æµè§ˆå™¨ä¸æœåŠ¡å™¨é—´è¿›è¡Œå…¨åŒå·¥é€šè®¯çš„ç½‘ç»œæŠ€æœ¯ã€‚ WebSocketé€šä¿¡åè®®äº2011å¹´è¢«IETFå®šä¸ºæ ‡å‡†RFC 6455ï¼ŒWebSocketAPIè¢«W3Cå®šä¸ºæ ‡å‡†ã€‚ åœ¨WebSocket APIä¸­ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œç„¶åï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å°±å½¢æˆäº†ä¸€æ¡å¿«é€Ÿé€šé“ã€‚ä¸¤è€…ä¹‹é—´å°±ç›´æ¥å¯ä»¥æ•°æ®äº’ç›¸ä¼ é€ã€‚ æ˜“äºç†è§£çš„ç‰ˆæœ¬ï¼Œå¯ä»¥çœ‹çœ‹é˜®ä¸€å³°çš„ WebSocket æ•™ç¨‹ ä¸‹é¢è®²è§£ WebSocket ä¸ SpringBoot çš„é›†æˆä½¿ç”¨ã€‚ æœåŠ¡ç«¯ç¯å¢ƒå‡†å¤‡ SpringBoot é¡¹ç›®å¼•å…¥ WebSocket ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;&lt;/dependency&gt; æ–°å»º WebSocketHandlerï¼Œ ç”¨äºå¤„ç†è¯·æ±‚ï¼Œä»¥åŠå‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ 1234567891011121314151617181920212223242526272829303132@Componentpublic class WebSocketHandler extends AbstractWebSocketHandler &#123; private static CopyOnWriteArraySet&lt;WebSocketSession&gt; webSocketSet = new CopyOnWriteArraySet&lt;&gt;(); @Override public void afterConnectionEstablished(WebSocketSession session) throws Exception &#123; // æ¥æ”¶åˆ°WebSocketä¼šè§¦å‘ System.out.println(session.getUri().getQuery()); webSocketSet.add(session); session.sendMessage(new TextMessage(&quot;æ¬¢è¿ï¼ï¼ï¼&quot;)); &#125; @Override public void afterConnectionClosed(WebSocketSession session, CloseStatus closeStatus) throws Exception &#123; // å…³é—­WebSocketä¼šè§¦å‘ System.out.println(&quot;å…³é—­WebSocketä¼šè§¦å‘&quot;); &#125; @Override public void handleTransportError(WebSocketSession session, Throwable exception) throws Exception &#123; exception.printStackTrace(); &#125; /** * å¹¿æ’­æ¶ˆæ¯ */ public void sendMessage() throws IOException &#123; for (WebSocketSession session : webSocketSet) &#123; session.sendMessage(new TextMessage(&quot;æ¬¢è¿ä½ æ¥å•¦ï¼&quot;)); &#125; &#125;&#125; æ–°å»º Config ç±»ï¼Œç”¨äºæ¥æ”¶ WebSocket è¯·æ±‚ 123456789101112@Configuration@EnableWebSocketpublic class WebSocketConfig implements WebSocketConfigurer &#123; @Autowired private WebSocketHandler webSocketHandler; @Override public void registerWebSocketHandlers(WebSocketHandlerRegistry webSocketHandlerRegistry) &#123; webSocketHandlerRegistry.addHandler(webSocketHandler,&quot;/webSocket&quot;); &#125;&#125; å®¢æˆ·ç«¯ç¯å¢ƒå‡†å¤‡ æ–°å»ºé¡µé¢ 1234567891011121314151617181920212223242526272829&lt;!DOCTYPE html&gt; &lt;!--æ ‡å‡†HTML5--&gt;&lt;html lang=&quot;zh-CN&quot;&gt;&lt;body&gt;&lt;h1&gt;Hello World!&lt;/h1&gt;&lt;/body&gt;&lt;script type=&quot;text/javascript&quot;&gt; var websocket = null; if(&#x27;WebSocket&#x27; in window) &#123; websocket = new WebSocket(&#x27;ws://localhost:8080/webSocket?code=abcd&#x27;); &lt;!--æ­¤å¤„çš„åœ°å€å³ç¬¬äºŒæ­¥æŒ‡å®šçš„æ¥å£åœ°å€ï¼Œå¯ä»¥ä¼ é€’å‚æ•°--&gt; &#125;else &#123; alert(&#x27;è¯¥æµè§ˆå™¨ä¸æ”¯æŒwebsocket!&#x27;); &#125; websocket.onopen = function (event) &#123; alert(&#x27;å»ºç«‹è¿æ¥&#x27;); &#125; websocket.onclose = function (event) &#123; alert(&#x27;è¿æ¥å…³é—­&#x27;); &#125; websocket.onmessage = function (event) &#123; alert(&#x27;æ”¶åˆ°æ¶ˆæ¯:&#x27; + event.data) &#125; websocket.onerror = function () &#123; alert(&#x27;websocketé€šä¿¡å‘ç”Ÿé”™è¯¯ï¼&#x27;); &#125; window.onbeforeunload = function () &#123; websocket.close(); &#125;&lt;/script&gt; æ³¨æ„ï¼šå¦‚æœwebsocket çš„ urlå†™çš„æ˜¯localhost:8080ï¼Œåˆ™å½“å‰é¡µé¢çš„åœ°å€ä¹Ÿåº”æ˜¯localhost:8080åŸŸåä¸‹ï¼Œä¸å¯ä»¥æ˜¯127.0.0.1:8080 ï¼Œå¦åˆ™ä¼šæç¤º 403ï¼Œå¦‚æœç”¨çœŸå®åŸŸåä¹ŸåŒç†ã€‚ æ–°å»º Controller è·³è½¬åˆ°è¯¥é¡µé¢ 12345678@Controllerpublic class HomeController &#123; @GetMapping(value = &quot;/home&quot;) public ModelAndView home() &#123; return new ModelAndView(&quot;home&quot;); &#125;&#125; è¿›è¡Œæµ‹è¯• å¯åŠ¨é¡¹ç›® è®¿é—® http://localhost:8080/home æµè§ˆå™¨æ§åˆ¶å°æ‰“å°ç»“æœï¼š åº”ç”¨ æœåŠ¡å™¨å‘æµè§ˆå™¨å‘é€é€šçŸ¥å¯ä»¥ä½¿ç”¨ WebSocket èŠå¤©å®¤ èµ„æºä¸‹è½½ ç‚¹æˆ‘ä¸‹è½½ç¤ºä¾‹æºç  å‚è€ƒ http://www.ruanyifeng.com/blog/2017/05/websocket.html","tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://nullpointer.pw/tags/SpringBoot/"},{"name":"WebSocket","slug":"WebSocket","permalink":"http://nullpointer.pw/tags/WebSocket/"}]},{"title":"WebMagicä¹‹çˆ¬è™«ç›‘æ§","date":"2018-02-26T22:16:05.000Z","path":"WebMagicä¹‹çˆ¬è™«ç›‘æ§.html","text":"å‰è¨€å¹´å‰é—²ç€æ— èŠï¼Œç ”ç©¶äº†ä¸€é˜µå­çˆ¬è™«æŠ€æœ¯ï¼Œæ¥è§¦åˆ°çˆ¬è™«æ¡†æ¶ WebMagicï¼Œæ„Ÿè§‰å¾ˆå¥½ç”¨ã€‚åœ¨ä¹‹åçš„å·¥ä½œä¸­ï¼Œæ¥æ‰‹äº†æ–°ç«™ä¸ç¬¬ä¸‰æ–¹æ¥å£å¯¹æ¥çš„å·¥ä½œï¼Œä¸»è¦çš„å·¥ä½œæ˜¯å»æŠ“å–å¯¹æ–¹æ¥å£çš„å†…å®¹ï¼›åˆå§‹çš„æ—¶å€™ï¼Œä¹‹å‰è´Ÿè´£è¯¥å·¥ä½œçš„åŒäº‹ï¼Œæ˜¯æ‰‹åŠ¨ä½¿ç”¨å¤šçº¿ç¨‹å»æŠ“å–ï¼Œåœ¨åº”ç”¨çš„è¿‡ç¨‹å½“ä¸­æš´éœ²äº†ä¸å°‘é—®é¢˜ã€‚æ¯”å¦‚å¯¹äºæ¥å£å†…å®¹è¶…çº§å¤šçš„æ—¶å€™ï¼Œè™½ç„¶ä½¿ç”¨äº†å¤šçº¿ç¨‹ï¼Œä½†æ˜¯æŠ“å–çš„æ•ˆç‡å¾ˆä½ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰å®ç°å¢é‡æŠ“å–ï¼Œæ¯æ¬¡éƒ½éœ€è¦å»å…¨é‡æŠ“å–ï¼Œè·‘ä¸€æ¬¡åŸºæœ¬éœ€è¦å¥½å‡ å¤©-.-ï¼›å°è¯´æ˜¯è¿è½½çš„æƒ…å†µä¸‹ï¼Œè¿™ç§é—®é¢˜æ˜¯äºŸéœ€è§£å†³çš„ã€‚ è¶ç€ç†Ÿæ‚‰äº†æ–°å…µå™¨ WebMagic, æœæ–­åœ¨é¡¹ç›®ä¸­è¿›è¡Œå¼•å…¥ï¼Œè§£å†³ä»¥ä¸Šé—®é¢˜ã€‚åŠŸèƒ½ä¸Šçº¿åï¼Œæ›¿æ¢äº†åŸæœ‰çš„å¤šçº¿ç¨‹æŠ“å–ï¼Œç›®å‰å·²ç»ååˆ†ç¨³å®šï¼Œ åŸºæœ¬ä¸Šé…ç½®å¥½ä»»åŠ¡ä¹‹åï¼Œå°±æ— éœ€å†äººå·¥å¹²é¢„äº†ã€‚ ä»¥ä¸‹ï¼Œæ­£æ–‡æ˜¯åŸºäºæˆ‘å­¦ä¹  WebMagic æ—¶ç»ƒæ‰‹é¡¹ç›®ï¼ŒåŠŸèƒ½å’Œåœ¨å…¬å¸å¼€å‘çš„å·®ä¸å¤šï¼Œåªä¸è¿‡æˆ‘æœ¬åœ°å¼€å‘çš„æ˜¯å»æŠ“å–ç›—ç‰ˆç½‘ç«™çš„å†…å®¹ã€‚ é¡¹ç›®é¢„è§ˆ èœå•ç®¡ç† çˆ¬è™«ä»»åŠ¡ç®¡ç† å®ç°äº†çˆ¬è™«çš„çŠ¶æ€ç›‘æ§ï¼Œä»¥åŠå¯è§†åŒ–å¯åœ åˆå…¥æ‰‹å…µå™¨-åŸºæœ¬ä½¿ç”¨ çˆ¬è™«å¥—è·¯åˆ†æå…ˆçœ‹å®˜æ–¹æ–‡æ¡£çš„æ€»ä½“æ¶æ„å›¾ å¤§éƒ¨åˆ†æ¨¡å—WebMagicå·²ç»æä¾›äº†é»˜è®¤å®ç°ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹äºç¼–å†™ä¸€ä¸ªçˆ¬è™«ï¼ŒPageProcessoræ˜¯éœ€è¦ç¼–å†™çš„éƒ¨åˆ†ï¼Œè€ŒSpideråˆ™æ˜¯åˆ›å»ºå’Œæ§åˆ¶çˆ¬è™«çš„å…¥å£ã€‚ å¾—ç›Šäº WebMagic æ¡†æ¶çš„è‰¯å¥½å°è£…ï¼Œå¯¹äºæ¡†æ¶çš„ä½¿ç”¨è€…æ¥è¯´ï¼Œæ‰€éœ€è¦ç¼–å†™çš„ä»£ç å‡ ä¹åªæœ‰çˆ¬è™«çš„é€»è¾‘ä»£ç ï¼Œè€Œå¯¹äºæ€ä¹ˆçˆ¬ï¼Œç»´æŠ¤ä»»åŠ¡é˜Ÿåˆ—çš„äº‹æƒ…ï¼ŒWebMagic éƒ½å¯ä»¥æ›¿æˆ‘ä»¬åšå¥½ã€‚å¼€å§‹æˆ‘ä»¬çš„çˆ¬è™«ä¹‹æ—…å§ï¼ å¼•å…¥ä¾èµ–æœ¬æ–‡ä¸­æ‰€ä½¿ç”¨åˆ°çš„é¡¹ç›®æ˜¯åŸºäº Maven çš„ SSM é¡¹ç›®ï¼Œåœ¨ pom.xml ä¸­å¼•å…¥ WebMagic çš„ä¾èµ–ã€‚ 12345678910&lt;dependency&gt; &lt;groupId&gt;us.codecraft&lt;/groupId&gt; &lt;artifactId&gt;webmagic-core&lt;/artifactId&gt; &lt;version&gt;0.7.3&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;us.codecraft&lt;/groupId&gt; &lt;artifactId&gt;webmagic-extension&lt;/artifactId&gt; &lt;version&gt;0.7.3&lt;/version&gt;&lt;/dependency&gt; åŸºæœ¬ç±»å›¾ å…ˆå°†å¯¹åº”çš„å¤„ç†ç±»è¿›è¡ŒæŠ½è±¡å‡ºæ¥ï¼Œæ–¹ä¾¿ç»Ÿä¸€å¤„ç†ã€‚ æ¯ä¸ªçˆ¬è™«éƒ½æœ‰å…¶å¯¹åº”çš„é…ç½®ä¿¡æ¯ Site æ˜¯ æŠ“å–ç½‘ç«™çš„ç›¸å…³é…ç½®ï¼ŒåŒ…æ‹¬ç¼–ç ã€æŠ“å–é—´éš”ã€é‡è¯•æ¬¡æ•° å¯¹åº”çš„å®ç°ç±»é‡å†™ process æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­å®ç°å¯¹åº”çš„çˆ¬è™«é€»è¾‘å¤„ç† å¯åŠ¨çˆ¬è™« çˆ¬è™«çš„ä½¿ç”¨å°±ç®€å•å¸¦è¿‡ï¼Œå…·ä½“å¯ä»¥å°†æœ¬æ–‡ä¸å®˜æ–¹æ–‡æ¡£ç»“åˆä½¿ç”¨ï¼Œå®˜æ–¹æ–‡æ¡£çš„ç¤ºä¾‹åªæ˜¯åŸºäº main æ–¹æ³•ã€‚ çˆ¬è™«ç›‘æ§ æ‰©å±•æºç  ä¸ºäº†å®ç°é¡¹ç›®é¢„è§ˆçš„æ•ˆæœï¼Œå®ç°çˆ¬è™«çš„çŠ¶æ€ç›‘æ§ï¼Œéœ€è¦å¯¹çˆ¬è™«è¿›è¡Œæ‰©å±•ã€‚å› ä¸ºå®˜ç½‘æä¾›çš„æ–¹å¼åŠŸèƒ½ä¸è¶³ä»¥è¾¾åˆ°åœ¨é¡µé¢å±•ç¤ºçš„æ•ˆæœã€‚ æ·»åŠ ç›‘æ§éå¸¸ç®€å•ï¼Œè·å–ä¸€ä¸ª SpiderMonitor çš„å•ä¾‹ SpiderMonitor.instance()ï¼Œå¹¶å°†ä½ æƒ³è¦ç›‘æ§çš„ Spider æ³¨å†Œè¿›å»å³å¯ã€‚ä½ å¯ä»¥æ³¨å†Œå¤šä¸ª Spider åˆ° SpiderMonitor ä¸­ã€‚ æŸ¥çœ‹ SpiderMonitor æºä»£ç åï¼Œå¦‚æœè°ƒç”¨çš„æ˜¯ è·å–ä¸€ä¸ª SpiderMonitor çš„å•ä¾‹ SpiderMonitor çš„ æ³¨å†Œæ–¹æ³•ï¼Œå‘ç° WebMagic å°†æ¯åªçˆ¬è™«çš„çŠ¶æ€å¯¹è±¡ SpiderStatusMXBean å…¨éƒ¨æ·»åŠ åˆ°ä¸€ä¸ª List é›†åˆå½“ä¸­å»ï¼Œè¿™æ ·å°±éš¾ä»¥åŒºåˆ†å…·ä½“æ˜¯å“ªä¸€åªçˆ¬è™«çš„çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ SpiderMonitor è¿›è¡Œæ‰©å±•ã€‚ å°† SpiderMonitor ä¸­çš„ private List&lt;SpiderStatusMXBean&gt; spiderStatuses = new ArrayList&lt;SpiderStatusMXBean&gt;(); ä¿®æ”¹ä¸º Map é›†åˆï¼Œkey é€‰æ‹© Spider çš„ UUID ä½œä¸ºå”¯ä¸€åŒºåˆ†çˆ¬è™«çš„æ ‡è®°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596@Experimentalpublic class MySpiderMonitor &#123; private static MySpiderMonitor INSTANCE = new MySpiderMonitor(); private AtomicBoolean started = new AtomicBoolean(false); private Logger logger = LoggerFactory.getLogger(getClass()); private MBeanServer mbeanServer; private String jmxServerName; private Map&lt;String,MySpiderStatus&gt; spiderStatuses = new HashMap&lt;String,MySpiderStatus&gt;(); protected MySpiderMonitor() &#123; jmxServerName = &quot;WebMagic&quot;; mbeanServer = ManagementFactory.getPlatformMBeanServer(); &#125; public Map&lt;String,MySpiderStatus&gt; getSpiderStatuses() &#123; return spiderStatuses; &#125; /** * Register spider for monitor. * * @param spiders spiders * @return this */ public synchronized MySpiderMonitor register(Spider... spiders) throws JMException &#123; for (Spider spider : spiders) &#123; MyMonitorSpiderListener monitorSpiderListener = new MyMonitorSpiderListener(); if (spider.getSpiderListeners() == null) &#123; List&lt;SpiderListener&gt; spiderListeners = new ArrayList&lt;SpiderListener&gt;(); spiderListeners.add(monitorSpiderListener); spider.setSpiderListeners(spiderListeners); &#125; else &#123; spider.getSpiderListeners().add(monitorSpiderListener); &#125; MySpiderStatus spiderStatusMBean = getSpiderStatusMBean(spider, monitorSpiderListener); registerMBean(spiderStatusMBean); spiderStatuses.put(spider.getUUID(),spiderStatusMBean); &#125; return this; &#125; protected MySpiderStatus getSpiderStatusMBean(Spider spider, MyMonitorSpiderListener monitorSpiderListener) &#123; return new MySpiderStatus(spider, monitorSpiderListener); &#125; public static MySpiderMonitor instance() &#123; return INSTANCE; &#125; public class MyMonitorSpiderListener implements SpiderListener &#123; private final AtomicInteger successCount = new AtomicInteger(0); private final AtomicInteger errorCount = new AtomicInteger(0); private List&lt;String&gt; errorUrls = Collections.synchronizedList(new ArrayList&lt;String&gt;()); @Override public void onSuccess(Request request) &#123; successCount.incrementAndGet(); &#125; @Override public void onError(Request request) &#123; errorUrls.add(request.getUrl()); errorCount.incrementAndGet(); &#125; public AtomicInteger getSuccessCount() &#123; return successCount; &#125; public AtomicInteger getErrorCount() &#123; return errorCount; &#125; public List&lt;String&gt; getErrorUrls() &#123; return errorUrls; &#125; &#125; protected void registerMBean(SpiderStatusMXBean spiderStatus) throws MalformedObjectNameException, InstanceAlreadyExistsException, MBeanRegistrationException, NotCompliantMBeanException &#123; ObjectName objName = new ObjectName(jmxServerName + &quot;:name=&quot; + spiderStatus.getName()); if(mbeanServer.isRegistered(objName)==false) &#123; mbeanServer.registerMBean(spiderStatus, objName); &#125; &#125;&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSpiderMonitor ä¸­ä½¿ç”¨çš„ SpiderStatus ä¹Ÿéœ€è¦è¿›è¡Œä¸€åŒæ‰©å±•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182public class MySpiderStatus implements SpiderStatusMXBean &#123; protected final Spider spider; protected Logger logger = LoggerFactory.getLogger(getClass()); protected final MySpiderMonitor.MyMonitorSpiderListener monitorSpiderListener; public MySpiderStatus(Spider spider, MySpiderMonitor.MyMonitorSpiderListener monitorSpiderListener) &#123; this.spider = spider; this.monitorSpiderListener = monitorSpiderListener; &#125; public Spider getSpider() &#123; return this.spider; &#125; public String getName() &#123; return spider.getUUID(); &#125; public int getLeftPageCount() &#123; if (spider.getScheduler() instanceof MonitorableScheduler) &#123; return ((MonitorableScheduler) spider.getScheduler()).getLeftRequestsCount(spider); &#125; logger.warn(&quot;Get leftPageCount fail, try to use a Scheduler implement MonitorableScheduler for monitor count!&quot;); return -1; &#125; public int getTotalPageCount() &#123; if (spider.getScheduler() instanceof MonitorableScheduler) &#123; return ((MonitorableScheduler) spider.getScheduler()).getTotalRequestsCount(spider); &#125; logger.warn(&quot;Get totalPageCount fail, try to use a Scheduler implement MonitorableScheduler for monitor count!&quot;); return -1; &#125; @Override public int getSuccessPageCount() &#123; return monitorSpiderListener.getSuccessCount().get(); &#125; @Override public int getErrorPageCount() &#123; return monitorSpiderListener.getErrorCount().get(); &#125; public List&lt;String&gt; getErrorPages() &#123; return monitorSpiderListener.getErrorUrls(); &#125; @Override public String getStatus() &#123; return spider.getStatus().name(); &#125; @Override public int getThread() &#123; return spider.getThreadAlive(); &#125; public void start() &#123; spider.start(); &#125; public void stop() &#123; spider.stop(); &#125; @Override public Date getStartTime() &#123; return spider.getStartTime(); &#125; @Override public int getPagePerSecond() &#123; int runSeconds = (int) (System.currentTimeMillis() - getStartTime().getTime()) / 1000; return getSuccessPageCount() / runSeconds; &#125;&#125; é‡å†™çˆ¬è™«å¯åŠ¨å¤„ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677@Servicepublic class WebMagicService &#123; @Resource private ApplicationContext context; @Resource private TaskService taskService; public void run(TaskDTO taskDTO, boolean runAsync) throws Exception &#123; MySpiderMonitor spiderMonitor = MySpiderMonitor.instance(); String ruleJson = taskDTO.getTaskRuleJson(); WebMagicConfig config = JSONObject.parseObject(ruleJson, WebMagicConfig.class); SpiderConfig spiderConfig = config.getSpider(); AbstractPageProcess pageProcess = context.getBean(spiderConfig.getProcesser(), AbstractPageProcess.class); pageProcess.init(config); pageProcess.setUuid(taskDTO.getSpiderUUID()); Spider spider = Spider.create(pageProcess).thread(spiderConfig.getThread()); spider.setUUID(taskDTO.getSpiderUUID()); List&lt;String&gt; pipelines = spiderConfig.getPipeline(); for (String pipeline : pipelines) &#123; Pipeline bean = context.getBean(pipeline, Pipeline.class); if (bean != null) &#123; spider.addPipeline(bean); &#125; &#125; // è®¾ç½®Downloader // è®¾ç½®Scheduler // æ³¨å†Œçˆ¬è™« spiderMonitor.register(spider); spider.addUrl(spiderConfig.getStartUrl()); if (runAsync) &#123; spider.runAsync(); &#125; else &#123; spider.run(); &#125; &#125; /** * çˆ¬è™«çŠ¶æ€ç›‘æ§ * @return */ public List&lt;TaskDTO&gt; runTaskList() &#123; MySpiderMonitor spiderMonitor = MySpiderMonitor.instance(); Map&lt;String, MySpiderStatus&gt; spiderStatuses = spiderMonitor.getSpiderStatuses(); List&lt;TaskDTO&gt; taskDTOList = taskService.findAll(); for (TaskDTO taskDTO : taskDTOList) &#123; MySpiderStatus spiderStatus = spiderStatuses.get(taskDTO.getSpiderUUID()); if (spiderStatus == null) &#123; taskDTO.setRunState(Spider.Status.Stopped.name()); &#125; else &#123; taskDTO.setRunState(spiderStatus.getStatus()); &#125; &#125; return taskDTOList; &#125; public TaskDTO stop(TaskDTO taskDTO) &#123; MySpiderMonitor spiderMonitor = MySpiderMonitor.instance(); Map&lt;String, MySpiderStatus&gt; spiderStatuses = spiderMonitor.getSpiderStatuses(); MySpiderStatus spiderStatus = spiderStatuses.get(taskDTO.getSpiderUUID()); if (spiderStatus != null) &#123; spiderStatus.stop(); spiderStatus.getSpider().close(); &#125; return taskDTO; &#125;&#125; åˆ›å»ºçˆ¬è™«æ—¶ï¼Œå°†çˆ¬è™«æ³¨å†Œåˆ° MySpiderMonitor ä¸­ï¼Œä¹‹åé€šè¿‡ getSpiderStatuses æ–¹æ³•å³å¯è·å–æ‰€æœ‰çˆ¬è™«çš„çŠ¶æ€äº†ã€‚ èµ„æºä¸‹è½½ ç‚¹æˆ‘ä¸‹è½½æºç ","tags":[{"name":"webmagic","slug":"webmagic","permalink":"http://nullpointer.pw/tags/webmagic/"},{"name":"çˆ¬è™«ç›‘æ§","slug":"çˆ¬è™«ç›‘æ§","permalink":"http://nullpointer.pw/tags/%E7%88%AC%E8%99%AB%E7%9B%91%E6%8E%A7/"}]},{"title":"SpringDataJPAå¿«é€Ÿå…¥é—¨","date":"2018-01-27T13:02:48.000Z","path":"SpringDataJPAå¿«é€Ÿå…¥é—¨.html","text":"å‰è¨€ä¹‹å‰åœ¨å­¦ä¹  SpringBoot æ¡†æ¶çš„æ—¶å€™ï¼Œä½¿ç”¨åˆ°äº† SpringData JPAï¼Œä½†æ˜¯å½“æ—¶åªæ˜¯ç®€å•çš„æŸ¥è¯¢ï¼Œæ²¡æœ‰ç”¨åˆ°ç¨å¾®å¤æ‚çš„æŸ¥è¯¢ã€‚ JPA çš„ JPQL è¯­æ³•è§„åˆ™å¯¹äºç®€å•çš„æŸ¥è¯¢å®å±åˆ©å™¨ï¼Œå¤§å¤§åŠ å¿«äº†å¼€å‘é€Ÿåº¦ã€‚ä¸ä¹…å‰ï¼Œåœ¨å…¬å¸å°†ç”¨æˆ·æ¨èåŠŸèƒ½å•ç‹¬æŠ½å–å‡ºä¸ºä¸€ä¸ªç‹¬ç«‹é¡¹ç›®ï¼Œç”±äºå…¬å¸ä¸€ç›´æ²¿ç”¨çš„åº•å±‚æ¡†æ¶å¤ªè€ï¼Œåªèƒ½ä½¿ç”¨ JDK1.6ï¼ŒJDK 1.9éƒ½å‡ºæ¥äº†ï¼Œå®åœ¨ä¸èƒ½å¿ğŸ˜…ï¼Œæœæ–­å¼•å…¥äº† SpringData JPAã€‚ ç„¶åæœ€è¿‘å…¬å¸å…¶ä»–åŒäº‹æ¥æ‰‹äº†è¯¥é¡¹ç›®ï¼Œä½†æ˜¯ä¸å¤ªäº†è§£ SpringData JPA çš„ä½¿ç”¨ï¼Œäºæ˜¯æœ‰äº†æ­¤æ–‡ï¼Œä¸ä¼šå°±å¯ä»¥ç›´æ¥è®©ä»–çœ‹æœ¬ç¯‡åšå®¢äº†å“ˆå“ˆã€‚ ç¯å¢ƒå‡†å¤‡è¿™é‡Œä¸è®²è§£ SpringData JPA ä¸æ¡†æ¶çš„æ•´åˆï¼Œåªè®²è§£ JPA è¯­æ³•çš„ä½¿ç”¨ Entity å®ä½“ç±»1234567891011121314@Entity // è¡¨ç¤ºä¸ºä¸€ä¸ªå®ä½“ç±»@Table(&quot;employee&quot;) // è¡¨åpublic class Employee &#123; @Id //ä¸»é”®æ ‡è¯†æ³¨è§£ @GeneratedValue // ä¸»é”®ç”Ÿæˆæ–¹å¼ private Integer id; private String name; private Integer age; //Getter/Setterçœç•¥&#125; Repository æ¥å£1234// ç»§æ‰¿ JpaRepository æ¥å£ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŸ¥è¯¢çš„å®ä½“ç±»ï¼Œç¬¬äºŒä¸ªä¸ºå®ä½“ç±»çš„ä¸»é”®æ•°æ®ç±»å‹public interface EmployeeRepository extends JpaRepository&lt;Employee, Integer&gt;&#123;&#125; æ’å…¥æµ‹è¯•æ•°æ®123456789@Testpublic void testAdd() throws Exception &#123; for (int i = 0; i &lt; 100; i++) &#123; Employee employee = new Employee(); employee.setAge(i); employee.setName(&quot;test&quot; + i); employeeRepository.save(employee); &#125;&#125; JPA æŸ¥è¯¢è¯­æ³•è®²è§£ä½¿ç”¨ JPQL è¿›è¡ŒæŸ¥è¯¢123456789101112131415161718192021222324252627282930313233343536373839404142// æ–°å¢employeeRepository.save(employee);// where name = ?1employeeRepository.findByName(&quot;test1&quot;)// where name = ?1 and age = ?2employeeRepository.findByNameAndAge(&quot;test1&quot;, 20);// where age between ?1 and ?2 ã€åŒ…å«å¤´å°¾ã€‘List&lt;Employee&gt; byAgeBetween = employeeRepository.findByAgeBetween(10, 16);// where age &lt; ?1List&lt;Employee&gt; list = employeeRepository.findByAgeLessThan(10);// where age &gt; ?1List&lt;Employee&gt; list = employeeRepository.findByAgeGreaterThan(90);// where name is null ã€ä¸åŒ…å«ä¸ºç©ºå­—ç¬¦ä¸²çš„æ•°æ®ã€‘List&lt;Employee&gt; list = employeeRepository.findByNameIsNull();// where name like &quot;test9%&quot; ä»¥test9ä¸ºå¼€å¤´çš„nameList&lt;Employee&gt; list = employeeRepository.findByNameLike(&quot;test9%&quot;);æˆ–è€…List&lt;Employee&gt; employees = employeeRepository.findByNameStartingWith(&quot;test&quot;)// where name like &quot;test_&quot; ä»¥testå¼€å¤´ï¼Œä¸”åé¢åªæ¨¡ç³ŠåŒ¹é…ä¸€ä½List&lt;Employee&gt; list2 = employeeRepository.findByNameLike(&quot;test_&quot;);// where name like &quot;%6&quot; æ¨¡ç³ŠåŒ¹é…ä»¥6ç»“å°¾çš„List&lt;Employee&gt; employees = employeeRepository.findByNameEndingWith(6)// where name in (?1, ?2)List&lt;String&gt; names = Arrays.asList(&quot;test1&quot;, &quot;test2&quot;);List&lt;Employee&gt; employees = employeeRepository.findByNameIn(names);// where age &lt;&gt; ?1List&lt;Employee&gt; employees = employeeRepository.findByAgeNot(99);// where name = ?1 order by age desc List&lt;Employee&gt; findByNameOrderByAgeDesc(&quot;test&quot;); ä½¿ç”¨è‡ªå®šä¹‰ Sql ä»¥åŠ åŸç”Ÿ Sql æŸ¥è¯¢1234567891011121314/** EmployeeRepository.java æ·»åŠ æ–¹æ³• */// æ ¹æ®å§“åä¸å¹´é¾„æŸ¥æ‰¾ï¼Œ[é€šè¿‡å ä½ç¬¦è·å–å‚æ•°å€¼]@Query(&quot;select o from Employee o where name = ?1 and age = ?2&quot;)List&lt;Employee&gt; queryEmployeeByParams(String name, Integer age);// æ ¹æ®å§“åä¸å¹´é¾„æŸ¥æ‰¾ï¼Œ[é€šè¿‡å‘½åå‚æ•°è·å–å‚æ•°å€¼]ï¼Œå¿…é¡»ä½¿ç”¨ @Param æ³¨è§£@Query(&quot;select o from Employee o where name = :name and age = :age&quot;)List&lt;Employee&gt; queryEmployeeByParams2(@Param(&quot;name&quot;) String name, @Param(&quot;age&quot;) Integer age);// åŸç”ŸSQLï¼Œä¸ä¸Šé¢ä¸åŒçš„æ˜¯ï¼Œä¸Šé¢ä½¿ç”¨çš„æ˜¯å¯¹è±¡åç§°ä»¥åŠå¯¹è±¡å±æ€§åç§°ï¼ŒNative SQLä½¿ç”¨æ•°æ®åº“è¡¨åä»¥åŠå­—æ®µå@Query(nativeQuery = true, value = &quot;select * from employee where name = :name and age = :age&quot;)List&lt;Employee&gt; queryEmployeeByParams3(@Param(&quot;name&quot;) String name, @Param(&quot;age&quot;) Integer age); JPA æ›´æ–°æ“ä½œ123456/** éœ€è¦æ­é…ä½¿ç”¨ @Query ä¸ @Modifying å’Œ @Transactional æ³¨è§£ä½¿ç”¨*/@Modifying@Query(&quot;update Employee o set o.age = ?2 where o.id = ?1&quot;)Integer updateAge(Integer id, Integer age); åœ¨ Service å±‚è°ƒç”¨ 1234567@Autowiredprivate EmployeeRepository employeeRepository;@Transactional // å¿…é¡»å¼€å¯äº‹åŠ¡public void update(Integer id, Integer age) &#123; employeeRepository.update(id, age);&#125; åˆ†é¡µæŸ¥è¯¢1234567891011121314151617181920212223242526// EmployeeRepository æ¥å£å®šä¹‰Page&lt;Employee&gt; findByNameStartingWith(String name, Pageable pageable);// æµ‹è¯•ç±» EmployeeRepositoryTest.java// æ™®é€šåˆ†é¡µæŸ¥è¯¢@Testpublic void testFindByNameStartingWith() &#123; // æ³¨æ„ page ä» 0 å¼€å§‹ Pageable request = new PageRequest(0, 10); Page&lt;Employee&gt; result = employeeRepository.findByNameStartingWith(&quot;test&quot;, request); for (Employee employee : result.getContent()) &#123; System.out.println(employee); &#125;&#125;// å¸¦æ’åºæ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢@Testpublic void testFindByNameStartingWith() &#123; Sort.Order order = new Sort.Order(Sort.Direction.DESC, &quot;id&quot;); Sort sort = new Sort(order); Pageable request = new PageRequest(0, 10, sort); Page&lt;Employee&gt; result = employeeRepository.findByNameStartingWith(&quot;test&quot;, request); for (Employee employee : result.getContent()) &#123; System.out.println(employee); &#125;&#125; åŠ¨æ€ SQL æŸ¥è¯¢åœ¨ Java å¼€å‘ä¸­ï¼ŒåŠ¨æ€ SQL æ˜¯å¿…ä¸å¯å°‘çš„ï¼ŒJPA ä¹Ÿå¯ä»¥å®ç°ï¼ŒRepository å¤šç»§æ‰¿ä¸€ä¸ªæ¥å£ JpaSpecificationExecutor å³å¯ã€‚ 123456789101112131415// ä¿®æ”¹ä¹‹å‰çš„ EmployeeRepository, ä½¿å…¶å¤šç»§æ‰¿ JpaSpecificationExecutor æ¥å£public interface EmployeeRepository extends JpaRepository&lt;Employee, Integer&gt;, JpaSpecificationExecutor&lt;Employee&gt;&#123; // ......&#125;Pageable request = new PageRequest(0, 10);Specification&lt;Employee&gt; specification = new Specification&lt;Employee&gt;() &#123;public Predicate toPredicate(Root&lt;Employee&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb) &#123; Path&lt;Integer&gt; path = root.get(&quot;age&quot;); return cb.gt(path, 50); &#125; &#125;;Page&lt;Employee&gt; all = employeeRepository.findAll(specification, request); åè®°è¿™é‡Œæ„Ÿè°¢ä¸€ä¸‹æ…•è¯¾ç½‘ï¼Œå¿«é€Ÿå…¥é—¨å¤šäºäº† imooc ä¸Šçš„è¯¾ç¨‹ã€‚ å‚è€ƒè¯¾ç¨‹ï¼š https://www.imooc.com/learn/821","tags":[{"name":"JPA","slug":"JPA","permalink":"http://nullpointer.pw/tags/JPA/"}]},{"title":"Macä¸‹VMwareFusionå®‰è£…CentOSå¹¶è®¾ç½®é™æ€IP","date":"2018-01-21T09:03:09.000Z","path":"Macä¸‹VMwareFusionå®‰è£…CentOSå¹¶è®¾ç½®é™æ€IP.html","text":"å‰è¨€MACä¸‹VMwareFusionå®‰è£…CentOSåŠè®¾ç½®å›ºå®šIPä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œå…³äºè™šæ‹Ÿæœºçš„å¿«é€Ÿå®‰è£…çš„æ•™ç¨‹ CentOSå¿«é€Ÿå®‰è£…ï¼Œå½“æ—¶æ˜¯å­¦ä¹ ä¸­ç”¨åˆ°äº† Linux ç¯å¢ƒï¼Œä¸ºäº†ä»¥åæ— éœ€é‡å¤è¿›è¡Œè™šæ‹Ÿæœºç¹æ‚é…ç½®ï¼Œæ¯”å¦‚é…ç½®ç½‘ç»œè¿æ¥å¤–ç½‘ï¼Œæ‰åˆ¶ä½œçš„é•œåƒã€‚ä¸ºäº†å¼€å‘è°ƒè¯•æ–¹ä¾¿ï¼Œé•œåƒè®¾ç½®ä¸ºäº†å›ºå®š IPï¼Œæ‰€ä»¥å¯¼å…¥è¯¥é•œåƒçš„æ—¶å€™ï¼Œéœ€è¦ç®€å•è®¾ç½®ä»¥ä¸‹å³å¯ è®¿é—®å¤–ç½‘ç¯å¢ƒã€‚å½“æ—¶ä½¿ç”¨çš„æ˜¯ Windows ç¯å¢ƒï¼Œå‰ä¸ä¹…å…¥æ‰‹äº† MBPï¼Œä¹Ÿéœ€è¦ç”¨åˆ°è™šæ‹Ÿæœºç¯å¢ƒï¼Œä½†æ˜¯ MAC ç¯å¢ƒä¸‹å¹¶æ²¡æœ‰ è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨,æ‰€ä»¥è®¾ç½®é™æ€ IP è´¹äº†å¥½ä¸€èˆ¬åŠŸå¤«ã€‚æœ¬æ–‡ä»‹ç»è™šæ‹Ÿæœºå¿«é€Ÿå¯¼å…¥é•œåƒï¼Œä¿®æ”¹é™æ€IPã€‚ ç¯å¢ƒå‡†å¤‡ VMware Fusion CentOS é•œåƒ(é“¾æ¥ï¼šhttp://pan.baidu.com/s/1nuKxhpf å¯†ç ï¼š8dt8) å¯¼å…¥è™šæ‹Ÿæœºé•œåƒä¸‹è½½é•œåƒåè§£å‹ï¼Œæ‰“å¼€ Vmware Fusion è½¯ä»¶ï¼Œé€‰æ‹©å¯¼å…¥ é€‰æ‹©é•œåƒæ–‡ä»¶ï¼Œé€‰æ‹© ovf æ–‡ä»¶åæ‰“å¼€ã€‚ å¯¼å…¥è¿‡ç¨‹ä¸å†èµ˜è¿°ã€‚ ä¸ºé™æ€IPåšå‡†å¤‡æ‰“å¼€ VMware Fusion è®¾ç½®ã€‚ è¿›å…¥ç½‘ç»œé€‰é¡¹å¡ï¼Œæ·»åŠ ä¸€ä¸ªç½‘å¡ã€‚ æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š 1234cd /Library/Preferences/VMware\\ Fusion/sudo vim networking çº¢è‰²åœˆå†…æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„åœ°æ–¹,ä¿®æ”¹å®Œä¹‹åä¿å­˜é€€å‡ºã€‚ å†ä¿®æ”¹å¦å¤–ä¸€ä¸ªæ–‡ä»¶ã€‚ 12cd /Library/Preferences/VMware\\ Fusion/vmnet2sudo vim nat.conf ä½¿ç½‘ç»œé…ç½®ç”Ÿæ•ˆé‡æ–°æ‰“å¼€VMwareçš„ç½‘ç»œé…ç½®ï¼Œä¸ºäº†ä½¿åˆšæ‰çš„ä¿®æ”¹ç”Ÿæ•ˆï¼Œæˆ‘ä»¬é‡æ–°è®¾ç½®ä¿å­˜ä¸€ä¸‹ã€‚æ­¥éª¤æ˜¯ï¼Œå…ˆå–æ¶ˆå‹¾é€‰å°† Mac ä¸»æœºè¿æ¥åˆ°è¯¥ç½‘ç»œ ç‚¹å‡»åº”ç”¨ï¼›å†å‹¾é€‰ä¸Š å°† Mac ä¸»æœºè¿æ¥åˆ°è¯¥ç½‘ç»œï¼Œç‚¹å‡»åº”ç”¨ã€‚ ä¿®æ”¹è™šæ‹Ÿæœºçš„é™æ€ IPæ‰“å¼€è™šæ‹Ÿæœº 12è´¦å·: rootå¯†ç : 123456 ä¿®æ”¹ç¬¬ä¸€ä¸ªæ–‡ä»¶ 1vi /etc/sysconfig/network-scripts/ifcfg-eth0 ä¿®æ”¹ DEVICE ä¸º eth1;ä¿®æ”¹ IPADDR åœ°å€ä¸º 192.168.200.3 ~ 192.168.200.254 ä¹‹é—´çš„å€¼;ä¿®æ”¹ GATEWAY ä¸º nat.conf ä¸­é…ç½®çš„ ip åœ°å€ 192.168.200.2 ä¿®æ”¹å¦å¤–ä¸€ä¸ªæ–‡ä»¶ 1vi /etc/udev/rules.d/70-persistent-net.rules 12345æ³¨é‡Šæ‰ eth0 æ‰€åœ¨è¡Œï¼Œç»“æœæ˜¯# PCI device 0x8086:0x100f (e1000)#SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;00:0c:29:30:a4:b5&quot;, ATTR&#123;type&#125;==&quot;1&quot;, KERNEL==&quot;eth*&quot;, NAME=&quot;eth0&quot;# PCI device 0x8086:0x100f (e1000)SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;00:0c:29:cd:05:ea&quot;, ATTR&#123;type&#125;==&quot;1&quot;, KERNEL==&quot;eth*&quot;, NAME=&quot;eth1&quot; é‡å¯ è™šæ‹Ÿæœº 1reboot é‡å¯æˆåŠŸåï¼Œè¾“å…¥ ifconfig æç¤ºï¼š æ­¤æ—¶å·²ç»ä¹Ÿå¯ä»¥ ping é€šå¤–ç½‘äº†ï¼Œåœ¨ mac çš„ç»ˆç«¯ä¸­ä¹Ÿå¯ä»¥ ping é€šè™šæ‹Ÿæœºã€‚ åè®°ä¸ºäº†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè™šæ‹Ÿæœºç¯å¢ƒè¢«æŠ˜è…¾åï¼Œå¯ä»¥åšä¸€ä¸‹å¿«ç…§ã€‚åˆ°æ—¶å€™å¯ä»¥ç›´æ¥æ¢å¤åˆ°æ­¤å¿«ç…§ï¼Œå…å»å†æ¬¡å®‰è£…çš„æ­¥éª¤ã€‚ å‚è€ƒ http://blog.csdn.net/zhishengqianjun/article/details/77046796","tags":[{"name":"VMware Fusion","slug":"VMware-Fusion","permalink":"http://nullpointer.pw/tags/VMware-Fusion/"},{"name":"é™æ€IP","slug":"é™æ€IP","permalink":"http://nullpointer.pw/tags/%E9%9D%99%E6%80%81IP/"},{"name":"mac","slug":"mac","permalink":"http://nullpointer.pw/tags/mac/"}]},{"title":"åŸºäºå¾®ä¿¡äº‹ä»¶äºŒç»´ç æ¨å¹¿","date":"2018-01-06T11:53:36.000Z","path":"åŸºäºå¾®ä¿¡äº‹ä»¶äºŒç»´ç æ¨å¹¿.html","text":"å‰è¨€ä¹‹å‰å†™äº†ä¸€ç¯‡å…³äºæ¨å¹¿ç³»ç»Ÿè®¾è®¡çš„åšå®¢ï¼Œåœ¨é‚£ç¯‡åšå®¢ä¸­ä»‹ç»äº†ç»Ÿä¸€çš„æ¨å¹¿åœ°å€ç”Ÿæˆçš„æ–¹æ³•ï¼Œåªä¸¾ä¾‹è¯´æ˜äº†ä¸€ç§æ¨å¹¿çš„æ–¹å¼ï¼Œæœ¬ç¯‡åšå®¢è®²è§£å¦å¤–ä¸€ç§æ¨å¹¿æ–¹å¼ï¼ŒåŸºäºå¾®ä¿¡äº‹ä»¶äºŒç»´ç çš„æ–¹å¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œäº‹ä»¶äºŒç»´ç åªæœ‰æœåŠ¡å·æœ‰æ­¤æ¥å£æƒé™ï¼Œè®¢é˜…å·æ˜¯æ²¡æœ‰è¯¥æ¥å£æƒé™çš„ï¼Œå½“ç„¶å¦‚æœæ²¡æœ‰æœåŠ¡å·çš„è¯ï¼Œæƒ³å­¦ä¹ ä¸€ä¸‹æ¥å£çš„ä½¿ç”¨ï¼Œå¾®ä¿¡å®˜æ–¹æä¾›çš„æµ‹è¯•å·å¯ä»¥ä½¿ç”¨è¯¥æ¥å£ã€‚ è°ˆè°ˆäº‹ä»¶äºŒç»´ç äºŒç»´ç çš„ä¾¿åˆ©æ€§æ¯‹åº¸ç½®ç–‘ï¼Œå°¤å…¶æ˜¯åœ¨å¾®ä¿¡ä¸­å¯ä»¥é€šè¿‡é•¿æŒ‰è¯†åˆ«çš„æ–¹å¼è¯†åˆ«äºŒç»´ç ï¼Œè®©äºŒç»´ç çš„ä½¿ç”¨æ›´åŠ ä¾¿æ·é¢‘ç¹ã€‚å¾®ä¿¡æ¨å‡ºçš„äº‹ä»¶äºŒç»´ç å¤§å¤§æé«˜äºŒç»´ç çš„äº¤äº’èƒ½åŠ›ï¼Œä»¥ä¸‹å†…å®¹æ‘˜è‡ªå®˜ç½‘ä»‹ç»ã€‚ ä¸ºäº†æ»¡è¶³ç”¨æˆ·æ¸ é“æ¨å¹¿åˆ†æå’Œç”¨æˆ·å¸å·ç»‘å®šç­‰åœºæ™¯çš„éœ€è¦ï¼Œå…¬ä¼—å¹³å°æä¾›äº†ç”Ÿæˆå¸¦å‚æ•°äºŒç»´ç çš„æ¥å£ã€‚ä½¿ç”¨è¯¥æ¥å£å¯ä»¥è·å¾—å¤šä¸ªå¸¦ä¸åŒåœºæ™¯å€¼çš„äºŒç»´ç ï¼Œç”¨æˆ·æ‰«æåï¼Œå…¬ä¼—å·å¯ä»¥æ¥æ”¶åˆ°äº‹ä»¶æ¨é€ã€‚ äº‹ä»¶äºŒç»´ç å¯ä»¥äº§ç”Ÿäº‹ä»¶ï¼Œå¹¶ä¸”äºŒç»´ç æ˜¯å¯ä»¥æºå¸¦å‚æ•°çš„ï¼Œè¿™å°±å¯ä»¥ç”¨ä½œæ¨å¹¿ã€‚æ¯”å¦‚æˆ‘å¸ï¼Œé’ˆå¯¹æŸä¸€æœ¬ä¹¦çš„æŸä¸€ç« èŠ‚ç”Ÿæˆäº‹ä»¶äºŒç»´ç ï¼Œç”¨æˆ·æ‰«æäºŒç»´ç åï¼Œå¦‚æœæœªå…³æ³¨å…¬ä¼—å·ï¼Œä¼šè¿›å…¥å…³æ³¨å…¬ä¼—å·é¡µé¢ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œå…³æ³¨ï¼Œå…³æ³¨åï¼Œåå°æ¥æ”¶åˆ°å¾®ä¿¡çš„äº‹ä»¶æ¨é€ï¼Œå¾—åˆ°äº†å­˜å‚¨çš„ä¹¦ä¸ç« èŠ‚çš„ä¿¡æ¯ï¼Œåˆ™å¯ä»¥ç›´æ¥å‘é€æ¶ˆæ¯ï¼Œå¼•å¯¼ç”¨æˆ·è¿›å…¥æ¨å¹¿çš„ç« èŠ‚é¡µé¢ï¼Œä»¥ä¸‹ä¸ºæˆ‘å¸å¾®ä¿¡æ¨å¹¿çš„æµç¨‹å›¾ã€‚ åˆ›å»ºäº‹ä»¶äºŒç»´ç ä¸ºäº†ä¾¿äºæ¼”ç¤ºï¼Œæˆ‘çš„é¡¹ç›®æ˜¯åŸºäº SpringBoot æ­å»ºã€‚æœ¬é¡¹ç›®ä½¿ç”¨çš„æ˜¯å¾®ä¿¡æµ‹è¯•å·ï¼Œå¯ä»¥åœ¨æ­¤å¤„è¿›è¡Œç”³è¯· **å¾®ä¿¡æµ‹è¯•å·**ã€‚appID ä¸ appsecret åœ¨å¾®ä¿¡æµ‹è¯•å·ä¸­å¯ä»¥å¾—åˆ°ã€‚ ä¹‹å‰åœ¨å…¬å¸å†™è¿™å¥—æ¨å¹¿ç³»ç»Ÿçš„æ—¶å€™ï¼Œéƒ½æ˜¯è‡ªå·±çœ‹å¾®ä¿¡å…¬ä¼—å¹³å°æ–‡æ¡£ï¼Œè‡ªå·±å†™çš„åŸºç¡€ä»£ç ï¼Œæ¯”å¦‚å°è£…è¯·æ±‚å‚æ•°ï¼Œå‚æ•°æ‹¼æ¥ï¼Œæœ€è¿‘åœ¨ Github ä¸Šå‘ç°äº†ä¸€ä¸ªå°è£…å¾—ä¸é”™çš„ å¾®ä¿¡å¼€å‘ SDKï¼Œå¯¹å¾®ä¿¡çš„å¼€æ”¾å¹³å°ã€å…¬ä¼—å¹³å°ã€å°ç¨‹åºéƒ½æœ‰å¯¹åº”çš„å­é¡¹ç›®ã€‚ç§‰ç€ä¸é‡å¤é€ è½®å­çš„åŸåˆ™ï¼Œæˆ‘ä»¬å¼•å…¥è¿™å¥— SDKï¼Œä¹Ÿå°±æ— éœ€è‡ªå·±å†è¿›è¡Œå°è£…äº†ï¼Œè¿˜å¯ä»¥å­¦ä¹ å°è£…çš„æºä»£ç ã€‚ é¦–å…ˆæ·»åŠ  Maven ä¾èµ–ï¼Œè¿™é‡Œå¼•å…¥æ“ä½œå¾®ä¿¡å…¬ä¼—å·çš„ SDK 12345&lt;dependency&gt; &lt;groupId&gt;com.github.binarywang&lt;/groupId&gt; &lt;artifactId&gt;weixin-java-mp&lt;/artifactId&gt; &lt;version&gt;2.8.0&lt;/version&gt;&lt;/dependency&gt; ç„¶åé…ç½®å¾®ä¿¡å…¬ä¼—å¹³å°å‚æ•° appID ä¸ appsecretï¼Œæ–°å»ºå¾®ä¿¡å¹³å°é…ç½®ä¿¡æ¯ Properties 123456789101112131415import lombok.Data;import org.springframework.boot.context.properties.ConfigurationProperties;import org.springframework.stereotype.Component;@Data@Component@ConfigurationProperties(prefix = &quot;wechat&quot;)public class WechatProperties &#123; private String appId; private String seecret; private String token;&#125; application.yml ä¸­æ·»åŠ  appID ä¸ appsecret 1234wechat: appId: wx1234567890 seecret: c912345678900987654321 token: QAnEo9760zDywWMvTKCxx åˆ›å»ºå¾®ä¿¡é…ç½®ç±»ï¼Œå£°æ˜ä¸¤ä¸ª Beanã€‚ 12345678910111213141516171819202122@Componentpublic class WeChatConfig &#123; @Resource private WechatProperties wechatProperties; @Bean public WxMpService wxMpService() &#123; WxMpService wxMpService = new WxMpServiceImpl(); wxMpService.setWxMpConfigStorage(wxMpConfigStorage()); return wxMpService; &#125; @Bean public WxMpConfigStorage wxMpConfigStorage() &#123; WxMpInMemoryConfigStorage wxMpConfigStorage = new WxMpInMemoryConfigStorage(); wxMpConfigStorage.setAppId(wechatProperties.getAppId()); wxMpConfigStorage.setSecret(wechatProperties.getSeecret()); wxMpConfigStorage.setToken(wechatProperties.getToken()); return wxMpConfigStorage; &#125;&#125; åˆ›å»º WechaptService ä»¥åŠå…¶å®ç°ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647@Servicepublic class WechapServiceImpl implements WechatService &#123; @Resource private WxMpService wxMpService; /** * åˆ›å»ºæ°¸ä¹…äº‹ä»¶äºŒç»´ç  * @param param é™„åŠ çš„å‚æ•° * @param needShortUrl æ˜¯å¦è½¬æ¢ä¸ºçŸ­é“¾æ¥ * @return å¾®ä¿¡äºŒç»´ç åœ°å€ */ @Override public String createQrCode(String param, boolean needShortUrl) &#123; WxMpQrcodeService qrService = wxMpService.getQrcodeService(); try &#123; WxMpQrCodeTicket ticket = qrService.qrCodeCreateLastTicket(param); String url = qrService.qrCodePictureUrl(ticket.getTicket(), needShortUrl); return url; &#125; catch (WxErrorException e) &#123; e.printStackTrace(); &#125; return null; &#125; /** * åˆ›å»ºä¸´æ—¶äº‹ä»¶äºŒç»´ç  * @param param é™„åŠ çš„å‚æ•° * @param expireSeconds æœ‰æ•ˆæ—¶é—´ å•ä½ä¸ºç§’ï¼Œæœ€å¤§2592000ï¼ˆå³30å¤©ï¼‰ * @param needShortUrl æ˜¯å¦è½¬æ¢ä¸ºçŸ­é“¾æ¥ * @return å¾®ä¿¡äºŒç»´ç åœ°å€ */ @Override public String createTempQrCode(String param, Integer expireSeconds, boolean needShortUrl) &#123; WxMpQrcodeService qrService = wxMpService.getQrcodeService(); try &#123; WxMpQrCodeTicket ticket = qrService.qrCodeCreateTmpTicket(param, expireSeconds); String url = qrService.qrCodePictureUrl(ticket.getTicket(), needShortUrl); return url; &#125; catch (WxErrorException e) &#123; e.printStackTrace(); &#125; return null; &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œç®€å•çš„å‡ è¡Œè¯­å¥å°±å¯ä»¥ç”Ÿæˆäº‹ä»¶äºŒç»´ç äº†ã€‚è¿™é‡Œçš„å‚æ•° param å°±æ˜¯é™„åŠ åˆ°äºŒç»´ç ä¸­çš„å‚æ•°ï¼ˆå¯ä»¥æ”¾å…¥æ¨å¹¿ç›¸å…³å‚æ•°ï¼Œå¦‚æ¨å¹¿é“¾æ¥IDï¼‰ï¼Œç”¨æˆ·æ‰«æåï¼Œå¾®ä¿¡æœåŠ¡å™¨ä¼šæ¨é€ç›¸åº”çš„äº‹ä»¶ï¼Œå¯ä»¥åœ¨äº‹ä»¶å‚æ•°ä¸­å¯ä»¥è·å¾— paramã€‚ åˆ›å»º Spring Junit æµ‹è¯•è¯¥æ–¹æ³•ï¼Œç”Ÿæˆäº‹ä»¶äºŒç»´ç  123456789101112@RunWith(SpringRunner.class)@SpringBootTestpublic class WechapServiceImplTest &#123; @Resource private WechatService wechatService; @Test public void createQrCode() throws Exception &#123; String url = wechatService.createQrCode(&quot;hello wechat&quot;, true); System.out.println(url); &#125;&#125; æ‰“å¼€ç”Ÿæˆçš„äºŒç»´ç é“¾æ¥ï¼ŒçŸ­é“¾æ¥ URL æ ¼å¼å¦‚ï¼š https://w.url.cn/s/xxxxx ä½¿ç”¨å¾®ä¿¡è¿›è¡Œæ‰«æï¼Œä¼šè¿›å…¥æç¤ºå…³æ³¨çš„é¡µé¢ã€‚ æ¥æ”¶å¾®ä¿¡äº‹ä»¶æ¨é€å‚æ•°äºŒç»´ç å·²ç»ç”Ÿæˆäº†ï¼Œä½†æ˜¯ä½ å‘ç°æ‰«æå…³æ³¨ä¹‹åï¼Œç¥é©¬äº‹æƒ…ä¹Ÿæ²¡æœ‰å‘ç”Ÿï¼Œè¯´å¥½çš„å‘é€æ¶ˆæ¯å‘¢ï¼è¿™æ˜¯å› ä¸ºä½ æ²¡æœ‰æ¥æ”¶å¾®ä¿¡çš„æ‰«ç å…³æ³¨äº‹ä»¶æ¨é€å’Œå¯¹å…¶è¿›è¡Œå¤„ç†å‘¢ã€‚ åˆ›å»º Controller ç”¨äºå¾®ä¿¡æ¥å£è¯·æ±‚æ ¡éªŒï¼Œç„¶åå¯åŠ¨é¡¹ç›® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788@Controller@RequestMapping(value = &quot;/wechat/auth&quot;)public class WeChatController &#123; @Autowired private WxMpService wxService; @Autowired private WxMpMessageRouter router; @GetMapping(produces = &quot;text/plain;charset=utf-8&quot;) public void authGet( @RequestParam(name = &quot;signature&quot;, required = false) String signature, @RequestParam(name = &quot;timestamp&quot;, required = false) String timestamp, @RequestParam(name = &quot;nonce&quot;, required = false) String nonce, @RequestParam(name = &quot;echostr&quot;, required = false) String echostr, HttpServletResponse response) &#123; if (StringUtils.isAnyBlank(signature, timestamp, nonce, echostr)) &#123; throw new IllegalArgumentException(&quot;è¯·æ±‚å‚æ•°éæ³•ï¼Œè¯·æ ¸å®!&quot;); &#125; if (this.wxService.checkSignature(timestamp, nonce, signature)) &#123; try &#123; response.getWriter().print(echostr); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; else &#123; return; &#125; System.out.println(1111); &#125; @PostMapping(produces = &quot;application/xml; charset=UTF-8&quot;) @ResponseBody public String post(@RequestBody String requestBody, @RequestParam(&quot;signature&quot;) String signature, @RequestParam(&quot;timestamp&quot;) String timestamp, @RequestParam(&quot;nonce&quot;) String nonce, @RequestParam(name = &quot;encrypt_type&quot;, required = false) String encType, @RequestParam(name = &quot;msg_signature&quot;, required = false) String msgSignature) &#123; if (!this.wxService.checkSignature(timestamp, nonce, signature)) &#123; throw new IllegalArgumentException(&quot;éæ³•è¯·æ±‚ï¼Œå¯èƒ½å±äºä¼ªé€ çš„è¯·æ±‚ï¼&quot;); &#125; String out = null; if (encType == null) &#123; // æ˜æ–‡ä¼ è¾“çš„æ¶ˆæ¯ WxMpXmlMessage inMessage = WxMpXmlMessage.fromXml(requestBody); WxMpXmlOutMessage outMessage = this.route(inMessage); if (outMessage == null) &#123; return &quot;&quot;; &#125; out = outMessage.toXml(); &#125; else if (&quot;aes&quot;.equals(encType)) &#123; // aesåŠ å¯†çš„æ¶ˆæ¯ /*WxMpXmlMessage inMessage = WxMpXmlMessage.fromEncryptedXml( requestBody, this.wxService.getWxMpConfigStorage(), timestamp, nonce, msgSignature); WxMpXmlOutMessage outMessage = this.route(inMessage); if (outMessage == null) &#123; return &quot;&quot;; &#125; out = outMessage .toEncryptedXml(this.wxService.getWxMpConfigStorage());*/ &#125; return out; &#125; private WxMpXmlOutMessage route(WxMpXmlMessage message) &#123; try &#123; return this.router.route(message); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return null; &#125;&#125; è®¾ç½®å¾®ä¿¡æ¶ˆæ¯æ¨é€æ¥å£ï¼Œç”¨äºæ¥æ”¶å¾®ä¿¡æ¨é€çš„è¯·æ±‚ï¼Œè¿™é‡Œéœ€è¦å¡«å†™å¤–ç½‘åŸŸåï¼Œå¦‚æœä½ æœ‰è‡ªå·±çš„æœåŠ¡å™¨å’ŒåŸŸåï¼Œå¯ä»¥ç›´æ¥å¡«å…¥ï¼›å¦‚æœä½ æ²¡æœ‰ï¼Œå¯ä»¥ä½¿ç”¨ ngrok è¿›è¡Œå†…ç½‘ç©¿é€ï¼Œå¾—åˆ°ä¸€ä¸ªå¤–ç½‘åŸŸåã€‚æ¯”å¦‚æˆ‘çš„å¾®ä¿¡è¯·æ±‚æ ¡éªŒåœ°å€ä¸º 127.0.0.1:8080/wechat/authï¼Œ é€šè¿‡å†…ç½‘æ˜ å°„è½¬å‘åå¾—åˆ°çš„å¤–ç½‘åœ°å€ä¸º http://vcmq.free.ngrok.cc/wechat/authï¼Œå¡«å†™è¿™ä¸ªåŸŸåï¼Œ Token ç”¨äºæ ¡éªŒæœåŠ¡å™¨ï¼Œä¹‹å‰çš„ yml æ–‡ä»¶ä¸­å·²æŒ‡å®šäº† token çš„å€¼ï¼Œå¡«å†™è¯¥å€¼å³å¯ï¼Œç‚¹å‡»ç¡®è®¤ã€‚ å¾®ä¿¡æ‰«æäº‹ä»¶äºŒç»´ç ï¼Œå¾®ä¿¡æœåŠ¡å™¨æ¨é€è¯·æ±‚åˆ° post æ–¹æ³•ï¼Œè°ƒç”¨ route æ–¹æ³•ï¼Œè¿›è¡Œå¤„ç†ã€‚äº‹ä»¶äºŒç»´ç æ–‡æ¡£åœ°å€ äº‹ä»¶KEYå€¼ï¼Œqrscene_ä¸ºå‰ç¼€ï¼Œåé¢ä¸ºäºŒç»´ç çš„å‚æ•°å€¼ã€‚ å¯ä»¥é’ˆå¯¹è¿™ç§æƒ…å†µçš„è¿›è¡Œå¤„ç†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263@Componentpublic class SubscribeHandler extends AbstractHandler &#123; @Override public WxMpXmlOutMessage handle(WxMpXmlMessage wxMessage, Map&lt;String, Object&gt; context, WxMpService weixinService, WxSessionManager sessionManager) throws WxErrorException &#123; this.logger.info(&quot;æ–°å…³æ³¨ç”¨æˆ· OPENID: &quot; + wxMessage.getFromUser()); /*// è·å–å¾®ä¿¡ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ WxMpUser userWxInfo = weixinService.getUserService() .userInfo(wxMessage.getFromUser(), null); if (userWxInfo != null) &#123; // TODO å¯ä»¥æ·»åŠ å…³æ³¨ç”¨æˆ·åˆ°æœ¬åœ° &#125;*/ WxMpXmlOutMessage responseResult = null; try &#123; responseResult = handleSpecial(wxMessage); &#125; catch (Exception e) &#123; this.logger.error(e.getMessage(), e); &#125; if (responseResult != null) &#123; return responseResult; &#125; try &#123; return new TextBuilder().build(&quot;æ„Ÿè°¢å…³æ³¨&quot;, wxMessage, weixinService); &#125; catch (Exception e) &#123; this.logger.error(e.getMessage(), e); &#125; return null; &#125; /** * å¤„ç†ç‰¹æ®Šè¯·æ±‚ï¼Œæ¯”å¦‚å¦‚æœæ˜¯æ‰«ç è¿›æ¥çš„ï¼Œå¯ä»¥åšç›¸åº”å¤„ç† */ private WxMpXmlOutMessage handleSpecial(WxMpXmlMessage wxMessage) throws Exception &#123; /* å¾®ä¿¡è¿”å›æ•°æ®ç¤ºä¾‹ &#123; &quot;createTime&quot;: 1515235853, &quot;event&quot;: &quot;subscribe&quot;, &quot;eventKey&quot;: &quot;qrscene_hello wechat&quot;, &quot;fromUser&quot;: &quot;onbpEv3umpi7ihx381D-vpw1SEwE&quot;, &quot;msgType&quot;: &quot;event&quot;, &quot;ticket&quot;: &quot;gQA&quot;, &quot;toUser&quot;: &quot;gh_96fd4ea38axx&quot; &#125;*/ // å¦‚æœæ˜¯æ‰«æ if (wxMessage.getEventKey().startsWith(&quot;qrscene_&quot;)) &#123; // åœ¨æ­¤å¤„è¿›è¡Œç»‘å®šæ“ä½œ System.out.println(); &#125; System.out.println(JSONObject.toJSONString(wxMessage)); return null; &#125;&#125; èµ„æºä¸‹è½½ç¤ºä¾‹å·¥ç¨‹ä¸‹è½½ å‚è€ƒ https://github.com/Wechat-Group/weixin-java-tools/blob/master/demo.md","tags":[{"name":"æ¨å¹¿ç³»ç»Ÿ","slug":"æ¨å¹¿ç³»ç»Ÿ","permalink":"http://nullpointer.pw/tags/%E6%8E%A8%E5%B9%BF%E7%B3%BB%E7%BB%9F/"},{"name":"æ¨å¹¿","slug":"æ¨å¹¿","permalink":"http://nullpointer.pw/tags/%E6%8E%A8%E5%B9%BF/"}]},{"title":"2017å¹´ç»ˆæ€»ç»“","date":"2017-12-30T10:02:57.000Z","path":"2017å¹´ç»ˆæ€»ç»“.html","text":"å‰è¨€ä¸€å¹´æ—¶é—´å€ç„¶è€Œé€ï¼Œä»Šæ—¥å·²æ˜¯å¹´ç»ˆå²å°¾çŸ£ï¼ æ€»æ˜¯æ„Ÿè§‰ä»Šå¹´è¿‡å¾—å¤ªå¿«äº†ï¼Œå¾ˆå¤šæ¬¡ä¸‹ç­çš„æ—¶å€™ï¼ŒåŒäº‹è¯´ï¼šâ€œæ˜å¤©å‘¨äº”äº†â€ï¼Œè€Œæˆ‘çš„ååº”å°±æ˜¯ï¼šâ€œè¯¶ï¼Ÿåˆè¦æ”¾å‡äº†å—ï¼Ÿæˆ‘æ€ä¹ˆæ„Ÿè§‰å‰å¤©æ‰ä¸Šç­çš„å•Šâ€ã€‚ä»¥å‰è¿˜åœ¨ä¸Šå­¦çš„æ—¶å€™ï¼Œæ€»æ˜¯æ„Ÿå¹ï¼Œè¿™ä¸€å¤©å¤©ä¸ºä½•å¦‚æ­¤æ¼«é•¿å‘¢ï¼éšç€å¹´é¾„çš„å¢é•¿ï¼Œä»¿ä½›æ—¶é—´çš„æµé€Ÿä¹ŸåŒæ—¶åŠ å¿«äº†ä¸€èˆ¬ï¼Œæ¯å¤©æ€»æ˜¯è§‰å¾—æ˜¯åœ¨å’Œæ—¶é—´èµ›è·‘ï¼Œè®©æˆ‘æœ‰äº›ç„¦è™‘ã€‚ ä»Šå¹´è¿‡çš„è®©æˆ‘æ„Ÿè§‰å¾ˆå¿«ï¼Œä½†æ˜¯è§‰å¾—æ¯”ä»¥å‰å……å®ï¼Œå› ä¸ºåšåˆ°çš„äº‹æƒ…æ¯”ä»¥å‰å¤šå¾ˆå¤šã€‚ 2017 æˆ‘åšäº†å“ªäº›äº‹ è®°å½• 2017 æ•´å¹´æ”¶æ”¯ä» 2017 å¹´å¼€å§‹ï¼Œæ¯”è¾ƒè®¤çœŸçš„è®°å½•äº†è‡ªå·±çš„æ—¥å¸¸å¼€æ”¯æƒ…å†µï¼Œè®°è´¦ APP æ˜¾ç¤ºå·²ç»åšæŒ è®°è´¦ 575 å¤©äº†ã€‚æˆ‘ä¸ªäººè®°è´¦å°±æ˜¯ä¸ºäº†é˜²æ­¢è‡ªå·±è¿‡åº¦æ¶ˆè´¹ï¼Œæ¯•ç«Ÿç§»åŠ¨æ”¯ä»˜åœ¨ä¸­å›½è¿™ä¹ˆå‘è¾¾ï¼Œé’±å·²ç»å˜æˆäº†ä¸€ä¸²æ•°å­—ï¼Œä¸æ³¨æ„å°±å…¨èŠ±å…‰äº†ã€‚ä¸Šä¸ªæœˆä¹°äº†ä¸€å° MBPï¼Œç”¨äºæ—¥å¸¸å­¦ä¹ ï¼Œä¹‹å‰çš„æ—§ç”µè„‘å·²ç»å¸¦ä¸åŠ¨ IDE äº†ï¼Œç´¢æ€§æ¢äº†ï¼ŒçœŸçš„æ˜¯è¡€è´µï¼Œä¸è¿‡å†™ä»£ç çœŸçˆ½ï¼æœ‰çš„æ”¯å‡ºå°±æ˜¯æ— æ³•é¿å…ï¼Œèƒ½åšçš„å°±æ˜¯å‡å°‘ä¸å¿…è¦çš„æ”¯å‡ºï¼›è®°è´¦è¿™ä»¶äº‹æƒ…ä¸Šï¼Œåšçš„ä¸å¤ªå¥½çš„æ˜¯è™½ç„¶è®°å½•çš„æ¯”è¾ƒè¯¦å°½ï¼Œä½†æ˜¯ç¼ºå°‘æ€»ç»“ï¼›æ¥å¹´éœ€è¦åšé˜¶æ®µæ€§çš„æ€»ç»“ï¼Œæ¯”å¦‚æ¯ä¸ªæœˆæ€»ç»“ä¸€æ¬¡ï¼Œæ‰¾å‡ºä¸å¿…è¦æ”¯å‡ºï¼Œä¸‹æ¬¡å°½é‡é¿å…ï¼ŒåŠªåŠ›å®è¡Œâ€œå¼€æºèŠ‚æµâ€ã€‚ å¼€å§‹åŸºé‡‘å®šæŠ•å¹´åˆçš„æ—¶å€™ï¼Œçœ‹äº†ä¸€äº›ç†è´¢çš„å…¥é—¨ä¹¦ç±ï¼ŒåŸºæœ¬çš„ç†è´¢æŠ€èƒ½è¿˜æ˜¯éœ€è¦æŒæ¡çš„ï¼Œäºæ˜¯ä»å››æœˆä»½å¼€å§‹èµ°ä¸Šäº†å…»åŸºä¹‹è·¯ï¼Œç›®å‰ä¸ºæ­¢åªå®šæŠ•äº†ä¸€åªè‚¡åŸºï¼Œæ”¶ç›Šå°šå¯ï¼Œåšçš„ä¸å¤ªå¥½çš„åœ°æ–¹å°±æ˜¯æŠŠé¸¡è›‹éƒ½æ”¾åœ¨äº†åŒä¸€ä¸ªç¯®å­é‡Œï¼Œæ˜å¹´è¦ç€æ‰‹äºåˆ†æ•£æŠ•èµ„ã€‚ è®°å½• 2017 æ•´å¹´æ—¶é—´å»å¹´çœ‹äº†ã€Šå¥‡ç‰¹çš„ä¸€ç”Ÿã€‹è¿™æœ¬ä¹¦ï¼Œæ„Ÿè§‰æ—¶é—´ä¸å¤Ÿç”¨çš„æˆ‘ï¼Œå°è¯•å­¦ä¹  æŸ³æ¯”æ­‡å¤« çš„æ—¶é—´ç»Ÿè®¡æ³•ï¼Œè®°å½•è‡ªå·±æ¯å¤©çš„æ—¶é—´æ¸…å•ï¼Œç”¨çš„æ˜¯ IOS ä¸Šçš„ APPï¼šã€Œæ—¶é—´å—ã€é€šè¿‡è½¯ä»¶çš„ç»Ÿè®¡åŠŸèƒ½ï¼Œæ¯”è¾ƒç›´è§‚äº†åæ˜ äº†æˆ‘çš„æ—¶é—´éƒ½å»å“ªå„¿äº†ã€‚è‡ªæˆ‘æ„Ÿè§‰æ¯”å¾€å¹´ç”¨åœ¨å­¦ä¹ ä¸Šçš„æ—¶é—´è¦å¤šå¾ˆå¤šï¼Œä½†æ˜¯é¢„æ–™ä¸åŠçš„æ˜¯æˆ‘åœ¨ç©ï¼ˆæ¸¸æˆã€åŠ¨æ¼«ã€å‡ºå¤–æ¸¸ç©ç­‰èŠ±è´¹çš„æ—¶é—´ï¼‰ä¸Šçš„æŠ•å…¥æ—¶é—´å’Œè¹‰è·çš„æ—¶é—´ï¼ˆå¦‚æ¼«æ— ç›®çš„åœ°ä¸Šç½‘æµè§ˆã€åšæ— ä»»ä½•æ„ä¹‰äº‹æƒ…çš„æ—¶é—´ï¼‰ä¹‹å’Œï¼Œç«Ÿç„¶ç‹‚ç”©å­¦ä¹ æ—¶é—´å‡ æ¡è¡—ï¼Œè¯´æ˜è‡ªå·±å¯¹äºæ—¶é—´çš„åˆ©ç”¨è¿˜æ˜¯å¤ªä½å¤ªä½ã€‚æœ€è®©æˆ‘éœ‡æƒŠçš„æ˜¯ç”¨äºäº¤é€š(åè½¦ï¼Œæ­¥è¡Œï¼Œç­‰è½¦ç­‰)çš„æ—¶é—´ï¼Œå±…ç„¶è¾¾åˆ°äº†è¿‘ 850 å°æ—¶ï¼ä¸€å¹´åäºŒä¸ªæœˆ,å…¶ä¸­çš„ä¸€ä¸ªæœˆå…¨æ˜¯åœ¨è½¦ä¸Šåº¦è¿‡ï¼æ…æ€ææï¼æŸ³æ¯”æ­‡å¤«åœ¨æ¯å¤©æ¯ä¸ªå‘¨æœ«æ¯ä¸ªæœˆæ¯ä¸ªå­£åº¦æ¯å¹´ä»–éƒ½ä¼šæ±‡æ€»ç»Ÿè®¡è‡ªå·±çš„æ—¶é—´æ”¯å‡ºï¼Œæ ¸ç®—æœ‰æ•ˆæ—¶é—´å¹¶åŠ ä»¥æ€»ç»“ï¼Œè¿™ä¸€ç‚¹æˆ‘ç¡®å®æ˜¯æ²¡åšåˆ°ä»–è¿™ä¹ˆæè‡´ï¼Œä¹Ÿæ˜¯è‡ªå·±éœ€è¦è¿›è¡Œæ”¹è¿›çš„åœ°æ–¹ï¼Œæ¯”å¦‚ä»¥åæ¯ä¸ªæœˆæ€»ç»“ä¸€æ¬¡æ—¶é—´çš„æ¶ˆè´¹ï¼Œçœ‹çœ‹è‡ªå·±æœ‰æ²¡æœ‰åˆ©ç”¨å¥½è¿™ä¸ªæœˆã€‚ å¼€å§‹æ—©èµ·åœ¨è®°å½•äº†åŠå¹´çš„æ—¶é—´æ¶ˆè´¹åï¼Œçœ‹äº†ç»Ÿè®¡åï¼Œæ·±è§‰æ—¶é—´çœŸçš„ä¸å¤Ÿç”¨ï¼Œäºæ˜¯ä»å…­æœˆä»½å¼€å§‹æ—©èµ·ï¼Œå·¥ä½œæ—¥åŸºæœ¬æ¯å¤© 5 ç‚¹èµ·åºŠã€‚ä¸è¶³çš„åœ°æ–¹å°±æ˜¯æ—©èµ·åï¼Œåˆ°7ç‚¹æ´—æ¼±åƒé¥­å»ä¸Šç­ä¹‹å‰çš„è¿™æ®µæ—¶é—´ï¼Œæ—¶é—´çš„åˆ©ç”¨ä¸æ˜¯å¾ˆæœ‰æ•ˆç‡ï¼Œè¿˜æœ‰å°±æ˜¯å‘¨æœ«æœ‰æ—¶å€™å˜å¾—å¾ˆæ‡’ï¼Œç»å¸¸å¿«æ‹–åˆ° 8 ç‚¹å¤šæ‰èµ·åºŠï¼Œæ˜å¹´åŠªåŠ›ç»™è‡ªå·±æ‰¾äº‹æƒ…ï¼Œæé«˜æ—¶é—´çš„åˆ©ç”¨æ•ˆç‡ï¼Œå‘¨æœ«ç£ä¿ƒè‡ªå·±æ—©èµ·ã€‚ å¼€å§‹è®¤çœŸå¯¹å¾…åšå®¢å…¶å®ä» 2016 å¹´ï¼Œä¾¿å¼€å§‹ç”¨ Hexo æ­å»ºäº†åšå®¢ï¼Œå¹¶å¼€å§‹å†™åšå®¢ï¼Œä½†æ˜¯å½“æ—¶åªæ˜¯å¥½å¥‡å¿ƒçš„é©±ä½¿ï¼Œéšä¾¿å†™å†™è§‰å¾—æœ‰è¶£ï¼Œæ‰€ä»¥å†™çš„å¾ˆæ°´ï¼Œä½†æ˜¯ä» 2017 å¹´å¼€å§‹ï¼Œå°±çº¦æŸè‡ªå·±è¦è®¤çœŸç‚¹å†™ï¼Œå¯¹è‡ªå·±å†™åšå®¢ä»˜å‡ºçš„æ—¶é—´è¿›è¡Œè´Ÿè´£ã€‚æˆ‘è®¤ä¸ºå¯¹äºåšæŠ€æœ¯çš„äººè€Œè¨€ï¼Œå†™ä¸å†™åšå®¢æ˜¯ä¸¤ç§äººï¼Œå†™çš„åšå®¢å¥½ä¸å¥½ä¹Ÿæ˜¯ä¸¤ç§äººã€‚ä¸è¶³ä¹‹å¤„å°±æ˜¯æ€»çš„åšå®¢æ–‡ç« ä¸å¤Ÿå¤šï¼Œå¤§å¤šä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ·±åº¦ï¼›æ˜å¹´å¤šå¤šå†™åšå®¢ï¼Œæå‡æŠ€æœ¯èƒ½åŠ›ï¼ŒæœŸæœ›å¯ä»¥å†™ä¸€äº›æ¯”è¾ƒæœ‰æ·±åº¦çš„åšå®¢ã€‚ è‡ªå­¦æ–°çš„æŠ€æœ¯æŠ€æœ¯çš„æ›´è¿­é€Ÿåº¦å¾ˆå¿«ï¼Œä¸ºäº†ä¸è¢«æ·˜æ±°ï¼Œåªæœ‰é€šè¿‡ä¸æ–­å­¦ä¹ ï¼Œæ¥æé«˜æŠ€æœ¯èƒ½åŠ›ã€‚ç›®å‰æ‰€åœ¨çš„å…¬å¸æ˜¯ä¸€å®¶ä»¥ä¸šåŠ¡é©±åŠ¨çš„å…¬å¸ï¼Œæ‰€ä»¥å¹³æ—¶å†™çš„ä¸šåŠ¡ä»£ç æ¯”è¾ƒå¤šä¸€äº›ï¼Œå¯¹äºæ–°çš„æŠ€æœ¯æ¥è§¦çš„æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯é¢†å¯¼æ¯”è¾ƒé¼“åŠ±æˆ‘ä»¬å­¦ä¹ æ–°çš„æŠ€æœ¯ç”¨äºå·¥ä½œä¸­ã€‚å…¬å¸çš„æŠ€æœ¯ä¸€æˆä¸å˜å¾€å¾€ä¸æ˜¯å…¬å¸çš„é—®é¢˜ï¼Œè€Œæ˜¯æˆ‘ä»¬åšæŠ€æœ¯çš„é—®é¢˜ï¼Œå°±ç®—å…¬å¸æƒ³ç”¨æ–°çš„æŠ€æœ¯ï¼Œä½†æ˜¯æ²¡æœ‰äººä¼šï¼Œè¿™ç§æŠ€æœ¯ä¹Ÿå°±ä¸ä¼šè¢«å¼•å…¥ï¼Œå› ä¸ºä½¿ç”¨æˆæœ¬å¤ªé«˜ï¼›ä½†æ˜¯è‹¥è¿™é¡¹æŠ€æœ¯ï¼Œæˆ‘ä»¬éƒ½ä¼šï¼Œè€Œä¸”åˆå¾ˆæœ‰åˆ©äºå…¬å¸ï¼Œç›¸ä¿¡ä¸€å®šä¼šå¾—åˆ°å…¬å¸æ¨è¡Œã€‚ä¸ºäº†ä¿æŒè¿›æ­¥ï¼Œè‡ªå­¦æ–°å…´çš„æŠ€æœ¯ï¼Œå¯¹äºè‡ªå­¦æ–°æŠ€æœ¯ï¼Œå‚ç›´æ•™è‚²ç½‘ç«™(ç¼–ç¨‹) æ…•è¯¾ç½‘ å¾ˆä¸é”™ï¼å­¦ä¹ äº†æ–°çš„æŠ€æœ¯ï¼Œåœ¨æ°å½“çš„æ—¶æœºåˆé€‚çš„é¡¹ç›®è¿›è¡Œå¼•å…¥ï¼Œä¹Ÿæ˜¯å¯¹è‡ªå·±å­¦ä¹ æˆæœçš„ä¸€ç§å®è·µï¼ ä¹° Kindle çœ‹ä¹¦å¹´åˆä¹°äº† Kindle ç”¨äºçœ‹ä¹¦ï¼Œå¼ºåˆ¶è‡ªå·±çœ‹ä¹¦ï¼›çœ‹ä¹¦çš„è¿‡ç¨‹ä¸­ï¼Œè¶Šå‘è§‰å¾—è‡ªå·±çš„é˜…è¯»èƒ½åŠ›å®åœ¨æ˜¯å¤ªå·®äº†ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½è¯»ä¸æ‡‚ï¼Œè¿™ä¹Ÿåšå®šäº†æˆ‘è¦åšæŒçœ‹ä¹¦çš„æƒ³æ³•ã€‚ä»Šå¹´çœ‹äº† 25 æœ¬å·¦å³çš„ä¹¦ï¼Œä½†æ˜¯ç²¾è¯»çš„å¤ªå°‘ï¼Œå¾ˆå¤šéƒ½æ˜¯å›«å›µåæ£ï¼Œçº ç»“äºè¯»ä¹¦çš„æ•°é‡ï¼Œè€Œä¸æ˜¯è´¨é‡ï¼Œæ¥å¹´å°½é‡æé«˜é˜…è¯»çš„è´¨é‡ã€‚ 2017 åšçš„ä¸å¥½çš„åœ°æ–¹ é™¤äº†ä¸Šé¢æå‡ºçš„é—®é¢˜ï¼Œèº«ä¸Šè¿˜æœ‰ä¸€å †ç­‰ç€æˆ‘å»å…‹æœçš„ç¼ºç‚¹ã€‚ ä¸‹åŠå¹´çš„æ—¶å€™ï¼Œæäº†ä¸ªæœåŠ¡å™¨ï¼Œç»™ç”µè„‘è£…ä¸Šäº† SS çš„å®¢æˆ·ç«¯ï¼Œå¾—ä»¥éšæ—¶å¯ä»¥è®¿é—®è¢«å¢™çš„ Google ã€‚äºæ˜¯åœ¨ä¾¿åˆ©æŸ¥æ‰¾é—®é¢˜çš„ç¯å¢ƒä¸‹ï¼Œå‡ºç°äº†è¦åšä»€ä¹ˆå·¥ä½œçš„æ—¶å€™ï¼Œä¸å»æ€è€ƒï¼Œè€Œæ˜¯å…ˆå»è¿›è¡Œ Google æœç´¢ä¸€ç•ªçš„æƒ…å†µï¼Œå¤ªè¿‡ä¾èµ– Google ï¼Œéšæ—¶ç•ªç¾½å¢™å¯¹äºæˆ‘ä¹Ÿä¸æ˜¯ä¸€ä»¶å¥½äº‹ã€‚æ¥å¹´å¸Œæœ›å¯ä»¥å…»æˆä¸‡äº‹å…ˆç‹¬ç«‹æ€è€ƒçš„ä¹ æƒ¯ï¼Œä¸è¦æˆä¸ºä¸€ååªä¼š Google ä»£ç çš„ç å†œã€‚ å¿˜äº†ä»å‡ æœˆä»½å¼€å§‹ï¼Œç‹è€…è£è€€ç«äº†ï¼Œæˆ‘ä¹Ÿä¸å‡ºæ„å¤–åœ°é™·äº†è¿›å»ï¼Œå¤§æ¦‚ç©äº†ä¸¤ä¸‰ä¸ªæœˆï¼Œä¹‹åæ„è¯†åˆ°è‡ªå·±çš„åšæ³•ä¸å¯¹ï¼Œæ–¹æ‰å¸è½½äº†æ¸¸æˆã€‚å¤šäºäº†å®šåŠ›çš„å¢é•¿ï¼Œå¦åˆ™è¿˜å¯èƒ½æ²‰è¿·å…¶ä¸­ä¸å¯è‡ªæ‹”ï¼Œä»¥åå°±å°½é‡ä¸ç©æ¸¸æˆäº†å§ï¼Œæ¯•ç«Ÿè¿˜è¦é‚£ä¹ˆå¤šçš„çŸ¥è¯†ç­‰å¾…ç€æˆ‘å»å­¦å‘¢ï¼ æ¯å¹´éƒ½ä¼šçœ‹åˆ°ç¨‹åºå‘˜çŒæ­»çš„æ–°é—»ï¼Œè¿™ä¸ªè¡Œä¸šæœ‰çš„å…¬å¸é«˜å¼ºåº¦æ— ä¼‘æ­¢çš„åŠ ç­ï¼ŒåŠ ä¸Šç²¾ç¥å‹åŠ›ï¼Œä»¥åŠä¸ç»å¸¸é”»ç‚¼èº«ä½“çš„ä¹ æƒ¯ï¼Œå¯¼è‡´æ‚²å‰§çš„å‘ç”Ÿã€‚åœ¨å”å˜˜çš„åŒæ—¶ï¼Œå´æ²¡æœ‰æƒ³åˆ°è‡ªå·±ä¹Ÿæ²¡æœ‰é”»ç‚¼èº«ä½“çš„ä¹ æƒ¯ï¼Œå¹¸è¿çš„æ˜¯å…¬å¸ä¸åŠ ç­ã€‚ä¹Ÿæ›¾ç»åšæŒè·‘æ­¥é”»ç‚¼äº†ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯æ²¡æœ‰åšæŒä¸‹æ¥ï¼Œè¿˜æ˜¯è¦åˆ¶å®šä¸€ä¸ªé”»ç‚¼çš„è®¡åˆ’ã€‚ 2018 æˆ‘æƒ³è¦åšçš„äº‹ é”»ç‚¼èº«ä½“ï¼Œèº«ä½“å¥½æ˜¯ä¸€åˆ‡æ´»åŠ¨çš„å‰æ å¤šå†™åšå®¢ï¼Œå¤šç²¾è¯»ä¹¦ï¼Œå¤šå†™è¯»ä¹¦ç¬”è®° ç‹¬ç«‹æ€è€ƒï¼Œå¤šæ€»ç»“ï¼Œäº‰å–åšä¸€ä¸ªç²¾è¿›çš„äºº é‡æ–°å­¦ä¹ è‹±è¯­ï¼Œè‹±è¯­èƒ½åŠ›å¤ªå·®äº†ï¼Œå¤šå­¦ç‚¹è‹±è¯­ æ‹¾èµ·æ—¥è¯­çš„å­¦ä¹  ç»“è¯­èµ„æºè¶Šå¤šè¶Šæµªè´¹ï¼Œèµ„æºè¶Šå°‘è¶Šçè´µï¼Œæ—¶é—´äº¦æ˜¯ï¼Œå‘¨æœ«æ—¶é—´å¾ˆå¤šä½†æ˜¯åˆ©ç”¨æ•ˆç‡å´ä½çš„å¯æ€•ï¼Œæ¯å¤©æ—©èµ·ä¸€ä¸ªå¤šå°æ—¶ï¼Œèƒ½å®Œæˆå‘¨æœ«å¥½å‡ ä¸ªå°æ—¶èƒ½å®Œæˆçš„äº‹æƒ…ã€‚æ¯æ¯æµªè´¹äº†å…‰é˜´ï¼Œåœ¨ä½™ä¸‹ä¸å¤šçš„æ—¶é—´é‡Œæƒ³è¦å¼€å§‹è®¤çœŸæ—¶ï¼Œå´æ€»æ˜¯åœ¨æ—¶é—´ä¸å¤Ÿç”¨çš„æŠ±æ€¨å£°é‡Œï¼Œè‰è‰ç»“æŸäº†æœ¬æ¬¡å‘¨æœ«ï¼Œæ‰€ä»¥ï¼Œæ—¶é—´éƒ½å»å“ªå„¿å‘¢ï¼Ÿ","tags":[{"name":"å¹´ç»ˆæ€»ç»“","slug":"å¹´ç»ˆæ€»ç»“","permalink":"http://nullpointer.pw/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"}]},{"title":"macç¼–è¯‘å®‰è£…Nginx","date":"2017-12-06T22:50:18.000Z","path":"macç¼–è¯‘å®‰è£…nginx.html","text":"å‰è¨€è™½ç„¶åç®€å•çš„æ–¹å¼å®‰è£…Nginxï¼Œä½†æ˜¯ä¹ æƒ¯äº†åœ¨linux ä¸Šçš„æ“ä½œï¼Œä¸ºäº†ä¿æŒä¸€è‡´ï¼Œå› æ­¤ä¹Ÿä½¿ç”¨ç¼–è¯‘å®‰è£…çš„æ–¹æ³•è¿›è¡Œå®‰è£…Nginxã€‚ èµ„æºä¸‹è½½ nginx: http://nginx.org/download/nginx-1.12.2.tar.gz zlib: http://zlib.net/zlib-1.2.11.tar.gz pcre: https://ftp.pcre.org/pub/pcre/pcre-8.38.tar.gz openssl: https://www.openssl.org/source/openssl-1.1.0g.tar.gz è¿™äº›éƒ½æ˜¯ Nginx ç¼–è¯‘éœ€è¦çš„ä¾èµ–ï¼Œä¸‹è½½ååˆ†åˆ«è§£å‹ï¼Œ æ³¨æ„è§£å‹çš„æ–‡ä»¶è¦åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹é¢ 1234567tar -zxvf nginx-1.12.2.tar.gztar -zxvf zlib-1.2.11.tar.gztar -zxvf pcre-8.38.tar.gztar -zxvf openssl-1.1.0g.tar.gz è¿›å…¥nginxç›®å½•åæ‰§è¡Œ 12345678./configure --prefix=/usr/local/nginx --with-zlib=../zlib-1.2.11 --with-pcre=../pcre-8.38 --with-openssl=../openssl-1.1.0g// ä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤makesudo make install ä»¥ä¸Šæ‰§è¡Œå®Œæ¯•åï¼Œ nginx å°±è¢«å®‰è£…åˆ° /usr/local/nginx ç›®å½•ä¸‹ Nginxçš„å¯åœåœ¨ mac ä¸Šéšä¾¿ä¿®æ”¹ç‚¹ä¸œè¥¿ï¼Œå°±æç¤ºæ²¡æœ‰æƒé™ä¹Ÿæ˜¯é†‰äº†ï¼Œåªå¥½æ¯ä¸ªå‘½ä»¤å‰é¢éƒ½åŠ ä¸Š sudo äº† å¯åŠ¨sudo /usr/local/nginx/sbin/nginx å…³é—­sudo /usr/local/nginx/sbin/nginx -s stop é‡å¯sudo /usr/local/nginx/sbin/nginx -s reload å‚è€ƒ http://blog.csdn.net/tulies/article/details/77611409","tags":[{"name":"nginxå®‰è£…","slug":"nginxå®‰è£…","permalink":"http://nullpointer.pw/tags/nginx%E5%AE%89%E8%A3%85/"}]},{"title":"åˆ©ç”¨nginxè§£å†³è·¨åŸŸé—®é¢˜","date":"2017-12-06T22:31:02.000Z","path":"åˆ©ç”¨nginxè§£å†³è·¨åŸŸé—®é¢˜.html","text":"å‰è¨€æœ€è¿‘é‡åˆ°äº†è·¨åŸŸé—®é¢˜ï¼Œç»“åˆä¹‹å‰ã€å¾®ä¿¡æ”¯ä»˜å¼€å‘æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥å›è°ƒã€‘çš„ç»éªŒï¼Œåˆ©ç”¨ Nginx å®ç°äº†è·¨åŸŸã€‚ å…¬å¸ä¹‹å‰ä¸ºäº†è§£å†³è·¨åŸŸé—®é¢˜ï¼Œç”¨çš„æ˜¯ iFrameï¼Œåæ­£å¯¹äºåªåšåç«¯çš„æˆ‘è€Œè¨€ï¼Œè§‰å¾—å¾ˆå¤æ‚ï¼Œä½†æ˜¯ç°åœ¨åˆ©ç”¨ nginx å¦‚æ­¤ç®€å•å°±å®ç°äº†è·¨åŸŸï¼Œæ„Ÿè§‰è¿˜æŒºæœ‰æˆå°±æ„Ÿï¼Œå“ˆå“ˆï¼ ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸé—®é¢˜ï¼Ÿå‰äººå·²ç»æ€»ç»“å¾—å¾ˆå¥½äº†ï¼Œå°±å€Ÿé‰´ä¸€ä¸‹å§ï¼ å›¾ç‰‡æ¥æºåœ°å€ï¼š http://www.cnblogs.com/gabrielchen/p/5066120.html æˆ‘ä»¬åœ¨å¼€å‘é¡¹ç›®ä¸­é‡åˆ°çš„è·¨åŸŸé—®é¢˜å…·ä½“æ˜¯è¿™æ ·çš„ï¼Œå…¬å¸çš„åŸŸåè‹¥æ˜¯ www.domain.comï¼Œé‚£ä¹ˆå¦‚æœæ˜¯å‘é€çš„ Ajax è¯·æ±‚å°±ä¸é€šè¿‡è¿™ä¸ªåŸŸåèµ°äº†ï¼Œè€Œæ˜¯é€šè¿‡ a.domain.comï¼Œäºæ˜¯ä¾¿å‡ºç°äº†è·¨åŸŸé—®é¢˜ã€‚ æ¯”å¦‚åœ¨ www.domain.com é¦–é¡µä¸­éœ€è¦é€šè¿‡ Ajax è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯ã€‚ å‡†å¤‡å·¥ä½œä¸‹è½½æ¼”ç¤ºé¡¹ç›®ä¸ºäº†æ¼”ç¤ºè¿™ä¸ªè·¨åŸŸé—®é¢˜ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ª SpringBoot é¡¹ç›®ï¼Œä¾¿äºæ¼”ç¤ºï¼Œå¦‚æœä¸ä¼š SpringBoot ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºé‡ç‚¹åœ¨äº Nginx é…ç½®ä¸Šé¢ã€‚ ã€ç‚¹æˆ‘ä¸‹è½½ã€‘ æå–å¯†ç : 8e68 å¯åŠ¨æ¼”ç¤ºé¡¹ç›®å› ä¸ºæ˜¯SpringBoot é¡¹ç›®ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ java -jar çš„æ–¹å¼ç›´æ¥å¯åŠ¨ï¼Œä¸ºäº†æ¼”ç¤ºè·¨åŸŸï¼Œå› æ­¤éœ€è¦å¯åŠ¨ä¸¤ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªç«¯å£æ¥åˆ†åˆ«å¯åŠ¨é¡¹ç›®ã€‚ 12345## A é¡¹ç›®ï¼Œç«¯å£è®¾ç½®ä¸º8080java -jar -Dserver.port=8080 demo.jar## B é¡¹ç›®ï¼Œç«¯å£è®¾ç½®ä¸º8090java -jar -Dserver.port=8090 demo.jar é…ç½®æœ¬åœ° Hostä¸ºäº†æ¼”ç¤ºè¿˜éœ€è¦ä¸¤ä¸ªåŸŸåï¼Œä¸ç”¨çœŸæ­£çš„åŸŸåï¼Œä¿®æ”¹æœ¬åœ°çš„ Host å³å¯ï¼Œå°†ä¸¤ä¸ªåŸŸåçš„ Host éƒ½æ‰§è¡Œæœ¬åœ°ã€‚å¯ä»¥ä½¿ç”¨ SwitchHosts æ¥æ–¹ä¾¿åˆ‡æ¢ã€‚ 12127.0.0.1 www.domain.com127.0.0.1 a.domain.com é…ç½®Nginxç¼–è¯‘å®‰è£… Nginxåï¼Œ ä¿®æ”¹ nginx.conf é…ç½®æ–‡ä»¶ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#user nobody;worker_processes 1;#error_log logs/error.log;#error_log logs/error.log notice;#error_log logs/error.log info;#pid logs/nginx.pid;events &#123; worker_connections 1024;&#125;http &#123; include mime.types; default_type application/octet-stream; #log_format main &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27; # &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27; # &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;; #access_log logs/access.log main; sendfile on; keepalive_timeout 65; #gzip on; upstream webServer &#123; server 127.0.0.1:8080; &#125; upstream ajaxServer &#123; server 127.0.0.1:8090; &#125; server &#123; listen 80; server_name a.domain.com; location / &#123; proxy_pass http://ajaxServer; &#125; &#125; server &#123; listen 80; server_name www.domain.com; location / &#123; proxy_pass http://webServer; &#125; &#125;&#125; è¿™é‡Œæ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹è¿™é‡Œçš„é…ç½®ï¼Œa.domain.com ä»£ç†åˆ° ajaxServerï¼Œå³ç«¯å£è®¾ç½®ä¸º 8090 çš„ B é¡¹ç›®ï¼› 12345678server &#123; listen 80; server_name a.domain.com; location / &#123; proxy_pass http://ajaxServer; &#125;&#125; å†çœ‹çœ‹ www.domain.com çš„é…ç½®ï¼Œåå‘ä»£ç†åˆ° webServer , å³ç«¯å£è®¾ç½®ä¸º 8080 çš„ A é¡¹ç›®ã€‚ 12345678server &#123; listen 80; server_name www.domain.com; location / &#123; proxy_pass http://webServer; &#125;&#125; æµ‹è¯•è®¿é—®é¡¹ç›®åœ°å€ http://www.domain.com/pageï¼Œ è¿›å…¥ä»¥ä¸‹é¡µé¢ï¼š å½“è¾“å…¥æ¡†ä¸è¾“å…¥æˆ–è€…è¾“å…¥çš„æ˜¯å½“å‰åŸŸå http://www.domain.com æ—¶ï¼Œå¯ä»¥æ­£å¸¸æäº¤ï¼Œä¸ä¼šé‡åˆ°è·¨åŸŸé—®é¢˜ã€‚ å½“è¾“å…¥ http://a.domain.com æ—¶ï¼Œç‚¹å‡»æŒ‰é’®è¿›è¡Œæäº¤ï¼Œä¼šå‡ºç°è·¨åŸŸé—®é¢˜ã€‚ ä¿®æ”¹ Nginx é…ç½®æ–‡ä»¶ä¿®æ”¹ www.domain.com çš„é…ç½® 12345678910111213server &#123; listen 80; server_name www.domain.com; location /proxy/ &#123; proxy_set_header Host a.domain.com; proxy_pass http://ajaxServer/; &#125; location / &#123; proxy_pass http://webServer; &#125;&#125; å…¶ä¸­è¿™é‡Œè¿™å¤„é…ç½®æ˜¯è¿™ç¯‡æ–‡ç« çš„å…³é”®ç‚¹ã€‚æ„æ€æ˜¯ http://www.domain.com/proxy/ å¼€å¤´çš„è¯·æ±‚å°†ä¼šè¢«åå‘ä»£ç†åˆ° B é¡¹ç›® å³ http://a.domain.com åŸŸåï¼Œproxy_set_header Host è¿™ä¸€è¡Œæ˜¯å¿…é¡»çš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤è¡Œçš„åŸŸåéœ€è¦ä¿æŒä¸€è‡´ï¼Œ**ä¸”ç¬¬äºŒè¡Œåé¢å¿…é¡»è¦æœ‰ä¸€ä¸ª /**ï¼Œè‡³äºåŸå› ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  proxy_passåçš„urlåŠ ä¸åŠ /çš„åŒºåˆ« 1234location /proxy/ &#123; proxy_set_header Host a.domain.com; proxy_pass http://ajaxServer/;&#125; ä¿®æ”¹ä¹‹åä¿å­˜é…ç½®æ–‡ä»¶ï¼Œé‡å¯ Nginx 1./nginx -s reload å†æ¬¡æµ‹è¯•ä¿®æ”¹æäº¤ URL ä¸º http://www.domain.com/proxy ç‚¹å‡»æŒ‰é’®è¿›è¡Œæäº¤ï¼Œå‘ç°æ­¤æ—¶æ²¡æœ‰å‡ºç°è·¨åŸŸé—®é¢˜ã€‚è™½ç„¶æäº¤çš„URL åŸŸåæ˜¯ http://www.domain.comï¼Œè€Œè¯·æ±‚ç»è¿‡ Nginx çš„åå‘ä»£ç†ä¹‹åï¼Œå®é™…ä¸Šæäº¤åˆ°äº† B é¡¹ç›®ï¼Œå³ http://a.domain.comï¼Œ ä¹Ÿå¯ä»¥çœ‹åˆ° B é¡¹ç›®æ‰“å°äº†è¾“å‡ºè¯­å¥ userId: 12ï¼Œç”±æ­¤ä¾¿è§£å†³äº†è·¨åŸŸé—®é¢˜ã€‚ èµ„æºä¸‹è½½æ–‡ç« æ¶‰åŠçš„jaræ–‡ä»¶æˆ‘æ‰“æˆä¸€ä¸ªå‹ç¼©åŒ…ï¼Œå¯ä»¥è‡ªå·±ä¸‹è½½å°è¯•ä¸€ä¸‹ã€‚ ã€ç‚¹æˆ‘ä¸‹è½½ã€‘ æå–å¯†ç : 8e68","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"è·¨åŸŸé—®é¢˜","slug":"è·¨åŸŸé—®é¢˜","permalink":"http://nullpointer.pw/tags/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/"},{"name":"åå‘ä»£ç†","slug":"åå‘ä»£ç†","permalink":"http://nullpointer.pw/tags/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"}]},{"title":"javaæ¨å¹¿ç³»ç»Ÿè®¾è®¡","date":"2017-12-03T08:06:26.000Z","path":"javaæ¨å¹¿ç³»ç»Ÿè®¾è®¡.html","text":"å‰è¨€å…¬å¸æ–°ç«™ç”±äºè¿è¥éœ€æ±‚ï¼Œéœ€è¦å¼€å‘ä¸€å¥—æ¨å¹¿ç³»ç»Ÿï¼Œç”¨äºç½‘ç«™ç”¨æˆ·å¼•æµï¼Œè¡ç”Ÿå‡ºçš„æ¨å¹¿å¥—è·¯ç›®å‰ä¾¿å·²ç»æœ‰å››ç§ï¼Œä¸ºäº†é™ä½è¿è¥ä¸Šæ‰‹æ¨å¹¿ç³»ç»Ÿçš„éš¾åº¦ï¼Œå› æ­¤æ¨å¹¿ç³»ç»ŸåŠ¡å¿…è¦ä¾¿äºä½¿ç”¨ï¼Œæ‰€ä»¥æ¯ç§æ¨å¹¿æ–¹å¼çš„é…ç½®éœ€è¦ä¿æŒè¶³å¤Ÿæ˜äº†ç®€å•ã€‚ èŠèŠæ¨å¹¿å¸¸è§çš„æ¨å¹¿å¥—è·¯å°±æ˜¯é’ˆå¯¹ä¸€ä¸ªæ¨å¹¿å‘˜ç”Ÿæˆæ¨å¹¿é“¾æ¥ï¼Œæ¨å¹¿å‘˜ç„¶åå…¶ä»–ç”¨æˆ·é€šè¿‡æ¨å¹¿é“¾æ¥ç‚¹å‡»è¿›æ¥æ³¨å†Œï¼Œä½†æ˜¯ä¸å¯èƒ½æ¨å¹¿çš„é¡µé¢æ˜¯æ³¨å†Œé¡µé¢ï¼Œæ‰€ä»¥éœ€è¦å…ˆè®°å½•ä¸‹ç”¨æˆ·çš„æ¥æºã€‚æ³¨å†ŒæˆåŠŸçš„åŒæ—¶ï¼Œç»‘å®šç”¨æˆ·ä¸æ¨å¹¿å‘˜çš„å…³ç³»ï¼Œä¾¿äºæ—¥åé€šè¿‡ç”¨æˆ·çš„å……å€¼æ¶ˆè´¹ç»Ÿè®¡æ¨å¹¿å‘˜çš„æ¨å¹¿è´¹ç”¨ï¼Œä»¥ä¸‹ä¸ºæ¨å¹¿çš„ç®€å•æµç¨‹å›¾ã€‚ æ¨å¹¿ç³»ç»Ÿå®ç°æ¨å¹¿é“¾æ¥çš„ç”Ÿæˆæ•´ä¸ªæ¨å¹¿æµç¨‹æœ€ä¸»è¦çš„åœ°æ–¹å°±æ˜¯æ¨å¹¿é“¾æ¥çš„ç”Ÿæˆä¸ä½¿ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿æ¨å¹¿é“¾æ¥çš„ç®¡ç†ï¼Œéœ€è¦å°†ç”Ÿæˆçš„æ¨å¹¿é“¾æ¥è¿›è¡Œä¿å­˜ã€‚é¦–å…ˆè¿›è¡Œæ¨å¹¿é“¾æ¥è¡¨çš„è®¾è®¡ã€‚æœ€åæä¾›ç»™æ¨å¹¿å‘˜çš„æ¨å¹¿é“¾æ¥æ ¼å¼å¦‚ï¼šhttp://m.domain.com/cp?code=xxï¼Œå…¶ä¸­ code çš„å€¼ä¸ºæ¨å¹¿é“¾æ¥çš„ IDã€‚ å­—æ®µåç§° å­—æ®µç±»å‹ å­—æ®µæè¿° id int æ¨å¹¿é“¾æ¥è‡ªå¢ä¸»é”® title varcahr æ¨å¹¿æ ‡é¢˜ partner_id int æ¨å¹¿å‘˜ID params text æ¨å¹¿å‚æ•° type tinyint æ¨å¹¿ç±»å‹ url_type tinyint URLç±»å‹ create_time timestamp åˆ›å»ºæ—¶é—´ update_time timestamp æ›´æ–°æ—¶é—´ status tinyint å¯ç”¨çŠ¶æ€ å­—æ®µè§£è¯»ï¼š æˆ‘è¿™é‡Œçš„ id ç›´æ¥è®¾ç½®ä¸ºäº†è‡ªå¢ä¸»é”®çš„å€¼ï¼Œå½“ç„¶ä¸ºäº†å®‰å…¨ç‚¹ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå…¶ä»–çš„å€¼ï¼Œæ¯”å¦‚ UUIDï¼› title å¯¹äºåŒä¸€ä¸ªæ¨å¹¿å‘˜ï¼Œå¯èƒ½ä¼šç”Ÿæˆå¤šæ¡æ¨å¹¿é“¾æ¥ï¼Œç”¨äºåŒºåˆ«ã€‚ partner_id è¿™ä¸ªå°±ä¸å¿…å¤šè¯´ï¼Œè¡¨æ˜æ¨å¹¿é“¾æ¥å±äºå“ªä¸€ä¸ªæ¨å¹¿å‘˜ params æ³¨æ„è¿™ä¸ªå‚æ•°ç±»å‹ä¸º textï¼Œ å› ä¸ºä¸ºäº†æ–¹ä¾¿æ‰©å±•ä¸šåŠ¡å‚æ•°ï¼Œå› æ­¤æ­¤å­—æ®µå­˜å‚¨çš„æ˜¯ä¸€æ®µ JSONï¼Œè‹¥ä½¿ç”¨ varchar é•¿åº¦ä¼šä¸å¤Ÿç”¨ã€‚ä¸šåŠ¡å‚æ•°åœ¨æˆ‘å¸ï¼Œå¯ä»¥æ˜¯ï¼šèµ é€ VIP å¤©æ•°ï¼Œèµ é€é˜…è¯»åˆ¸æ•°é‡ï¼Œæ¨å¹¿è´¹ç”¨ç­‰ã€‚è¿™ä¸ªå­—æ®µå¯ä»¥è‡ªç”±å‘æŒ¥ï¼Œåœ¨ç»‘å®šç”¨æˆ·çš„æ—¶å€™è·å–è¯¥å­—æ®µï¼Œè§£ææˆ JSON å¯¹è±¡ï¼Œè¯»å–å¯¹åº”çš„ä¸šåŠ¡å‚æ•°ï¼Œè¿›è¡Œç›¸å¯¹åº”çš„è®¾ç½®ã€‚ å› ä¸ºè¿è¥åŒå­¦çš„è„‘æ´ä¸€èˆ¬éƒ½å¾ˆå¤§ï¼Œå› æ­¤æ¨å¹¿æ–¹å¼ä¼šæœ‰å¾ˆå¤šç§ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ—¥ååˆ†ææ¨å¹¿æ•ˆæœï¼Œå› æ­¤åŠ ä¸Š type å­—æ®µç”¨äºåŒºåˆ†æ¨å¹¿ç±»å‹ï¼Œæ¨å¹¿ç±»å‹æœ‰æ¯”å¦‚ï¼š CPSæ¨å¹¿ã€å¾®ä¿¡å…¬ä¼—æ¨å¹¿ç­‰ï¼› url_type ç”¨äºåŒºåˆ†éœ€è¦æ¨å¹¿çš„é¡µé¢æ˜¯ç›¸å¯¹è·¯å¾„è¿˜æ˜¯ç»å¯¹è·¯å¾„ã€‚ status ç”¨äºæ ‡è®°æ­¤æ¨å¹¿é“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼Œæ¯”å¦‚ç»ˆæ­¢æ¨å¹¿åˆä½œï¼Œå°±å¯ä»¥è®¾ç½®ä¸ºå…³é—­ï¼Œä¸å†å°†ç”¨æˆ·ç»‘å®šåˆ°æ­¤é“¾æ¥ã€‚ åå°æ¨å¹¿é“¾æ¥ç”Ÿæˆé¡µé¢å‚è€ƒï¼š æ¨å¹¿é“¾æ¥çš„è·³è½¬é¦–å…ˆå†çœ‹çœ‹æ¨å¹¿çš„æµç¨‹ é¦–å…ˆç”¨æˆ·é€šè¿‡ç‚¹å‡»æ¨å¹¿é“¾æ¥ï¼Œè¿›å…¥äº†æ¨å¹¿çš„é¡µé¢ï¼Œæˆ‘å¸å°±æ˜¯å°è¯´çš„æŸä¸€å…è´¹ç« èŠ‚çš„é˜…è¯»é¡µé¢ï¼Œä¹‹ååˆ°æ”¶è´¹ç« èŠ‚çš„æ—¶å€™ï¼Œå°±ä¼šæç¤ºç”¨æˆ·è¿›è¡Œç™»å½•ã€‚æ³¨å†Œçš„ç”¨æˆ·ï¼Œå¦‚ä½•çŸ¥é“æ˜¯ä»å“ªä¸€ä¸ªé“¾æ¥è¿‡æ¥çš„å‘¢ï¼Ÿè¿™å°±éœ€è¦åœ¨ç”¨æˆ·æ³¨å†Œä¹‹å‰å°±å°†æ¨å¹¿é“¾æ¥çš„æ ‡è®°è¿›è¡Œå­˜å‚¨ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯å†™å…¥ Cookieã€‚ä¹‹å‰å…¬å¸é¡¹ç›®å†™ Cookie æ˜¯åœ¨å‰ç«¯è¿›è¡Œï¼Œä½†æ˜¯è¿è¡Œä¹‹åï¼Œå‘ç°ä¸å¤ªå¯é ï¼Œå› æ­¤æˆ‘ä»¬å°†å†™ Cookie çš„æ“ä½œæ”¾åœ¨åç«¯è¿›è¡Œã€‚ æ¨å¹¿é“¾æ¥åœ°å€æ˜¯ http://m.domain.com/cp?code=xxï¼Œè®¿é—®å¦‚ä¸‹æ¥å£ï¼š 12345678910111213141516171819202122232425262728293031323334/** * ç”¨äºæ¨å¹¿é“¾æ¥çš„ç»Ÿä¸€è·³è½¬ */@RequestMapping (value = &quot;/cp&quot;, method = RequestMethod.GET)public String companionRedirect(String code, HttpServletRequest request, Model m, HttpServletResponse response) &#123; try &#123; int id = Integer.parseInt(code); // æŸ¥è¯¢å‡ºæ¨å¹¿é“¾æ¥è®°å½• CompanionLink link = companionService.getCompanionLink(id); if (link != null &amp;&amp; link.getStatus() != Constants.STATUS_DELETE) &#123; JSONObject obj = JSONObject.parseObject(link.getParams()); // è·å–æ¨å¹¿é¡µé¢çš„åœ°å€ String url = obj.getString(&quot;url&quot;); // å°† code å€¼å³æ¨å¹¿é“¾æ¥çš„ id å†™å…¥Cookie ä¸­ï¼Œ EXPä¸ºæœ‰æ•ˆæœŸ 3 å¤© CookieUtil.setCookie(request, response, Constants.COMPANION_COOKIE_NAME, code, EXP); // è·³è½¬åˆ°æ¨å¹¿é¡µé¢ if (link.getUrlType() == Constants.ABS) &#123; // ç»å¯¹è·¯å¾„ç›´æ¥è·³è½¬ return &quot;redirect:&quot; + url; &#125;else &#123; // ç›¸å¯¹è·¯å¾„æ‹¼æ¥åŸŸååè·³è½¬ return &quot;redirect:&quot; + Constants.MOBILE_SERVER_DOMAIN + url; &#125; &#125; &#125; catch (NumberFormatException e) &#123; &#125; // å‡ºç°å¼‚å¸¸ï¼Œè·³è½¬åˆ°é¦–é¡µ return &quot;redirect:&quot; + Constants.MOBILE_SERVER_DOMAIN;&#125; å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œå‘ç°ä¹‹å‰è®¾è®¡æ¨å¹¿é“¾æ¥çš„æ—¶å€™æœ‰æ‰€ç–æ¼ï¼Œæœ‰çš„æ¨å¹¿æ–¹å¼æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œè€Œæœ‰çš„æ˜¯ç»å¯¹è·¯å¾„ã€‚è€Œæˆ‘åœ¨ä»£ç ä¸­æ˜¯é€šè¿‡ String çš„ Containsæ–¹æ³•æ˜¯å¦åŒ…å«åŸŸåæ¥åˆ¤æ–­æ˜¯ç›¸å¯¹çš„è¿˜æ˜¯ç»å¯¹çš„è·¯å¾„ï¼Œå…¶å®æ²¡æœ‰å¿…è¦ï¼Œå®Œå…¨å¯ä»¥æ·»åŠ ä¸€ä¸ªæ¨å¹¿é“¾æ¥çš„ url çš„è·¯å¾„ç±»å‹ã€‚åˆ¤æ–­ç±»å‹å³å¯ï¼Œå¦‚æœæ˜¯ç»å¯¹è·¯å¾„ç›´æ¥è·³è½¬ï¼Œå¦åˆ™æ‹¼æ¥åŸŸååè·³è½¬ã€‚ æ¨å¹¿å…³ç³»çš„ç»‘å®šç”¨æˆ·æµè§ˆå™¨çš„ Cookie ä¸­å·²ç»ä¿å­˜å¥½äº†æ¨å¹¿é“¾æ¥çš„ code å€¼ï¼Œç»‘å®šå…³ç³»å°±å¥½åŠäº†ï¼Œå¯ä»¥åœ¨ç”¨æˆ·æ³¨å†Œçš„æ—¶å€™ï¼Œè¯»å–æµè§ˆå™¨çš„ Cookieï¼Œè·å–è¿™ä¸ª Cookieï¼Œå¾—åˆ°æ¨å¹¿é“¾æ¥çš„ id, å°†ç”¨æˆ·çš„ id ä¸æ¨å¹¿çš„ partner_id è¿›è¡Œç»‘å®šï¼Œä¿å­˜åˆ°ç»‘å®šå…³ç³»çš„è¡¨ä¸­å³å¯ï¼Œæ¯”å¦‚æˆ‘å¸çš„èµ é€æ“ä½œä¹Ÿä¸€åœ¨ç»‘å®šåæ‰§è¡Œã€‚ è‡³äºç»‘å®šå…³ç³»çš„è¡¨è®¾è®¡ï¼Œä¸»è¦å°† partner_id ä¸ user_id ä½œä¸ºè”åˆä¸»é”®ä¿å­˜ï¼Œå…¶ä»–å­—æ®µå¦‚ç»‘å®šæ—¶é—´å°±ä¸ç”¨å¤šè¯´äº†å§ã€‚ åè®°å¦‚æœä½ çœ‹å®Œè§‰å¾—æœ‰ä»€ä¹ˆç–‘é—®ï¼Œå¯ä»¥ç•™è¨€è¯„è®ºï¼Œæœ‰éœ€è¦æ”¹è¿›çš„åœ°æ–¹ä¹Ÿè¯·æå‡ºï¼Œå…±åŒè¿›æ­¥ï¼","tags":[{"name":"æ¨å¹¿ç³»ç»Ÿ","slug":"æ¨å¹¿ç³»ç»Ÿ","permalink":"http://nullpointer.pw/tags/%E6%8E%A8%E5%B9%BF%E7%B3%BB%E7%BB%9F/"},{"name":"æ¨å¹¿","slug":"æ¨å¹¿","permalink":"http://nullpointer.pw/tags/%E6%8E%A8%E5%B9%BF/"},{"name":"é“¾æ¥æ¨å¹¿","slug":"é“¾æ¥æ¨å¹¿","permalink":"http://nullpointer.pw/tags/%E9%93%BE%E6%8E%A5%E6%8E%A8%E5%B9%BF/"}]},{"title":"Maven ç§æœä¸Šä¼ jaråŒ…","date":"2017-11-30T13:09:28.000Z","path":"Maven ç§æœä¸Šä¼ jaråŒ….html","text":"å‰è¨€å‰æ®µæ—¶é—´ï¼Œå…¬å¸å¼€äº†æ–°ç«™ï¼Œä¸»è¦ç”±æˆ‘æ¥è´Ÿè´£æ–°ç«™çš„æ­å»ºå·¥ä½œï¼ŒåŸºç¡€çš„ç³»ç»Ÿæ¯”å¦‚ç™»å½•ç³»ç»Ÿï¼Œæ”¯ä»˜ç³»ç»Ÿçš„æ­å»ºã€‚ ä»Šå¤©åœ¨11æœˆæœ«å°¾è¡¥ä¸Šè¿™ä¸€ç¯‡æ–‡ç« ï¼Œä¸ç„¶æ”¾å‡ºå»çš„è¯åšä¸åˆ°å°±ä¸å¥½äº†ï¼ˆä¸€ä¸ªæœˆè‡³å°‘ä¸¤ç¯‡åšå®¢ï¼‰ åœ¨æ¥å…¥æ”¯ä»˜å®æ”¯ä»˜çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚ æˆ‘ä»¬å…¬å¸çš„ä¹‹å‰é¡¹ç›®æ¥å…¥çš„æ˜¯æ”¯ä»˜å® mapi æ”¯ä»˜ï¼Œè¿™æ˜¯æ¯”è¾ƒæ—©çš„æ”¯ä»˜æ¥å£ï¼Œå‰ä¸€é˜µå­ï¼Œè¯¥æ¥å£çš„æˆæƒä¹Ÿåˆ°æœŸäº†ï¼Œæˆ‘ä¹Ÿè´Ÿè´£åç»­æ¥å£çš„å‡çº§ã€‚ æ¥å£å‡çº§åï¼Œæ”¯ä»˜å®å¯¹å…¶ SDK ä¹Ÿè¿›è¡Œäº†å‡çº§ï¼ŒæŒ‰ç…§ç½‘ç«™æ–‡æ¡£ç¼–å†™ä»£ç å‘ç°æœ‰äº›æ–¹æ³•ä¸å­˜åœ¨ï¼Œæ‰çŸ¥é“æ˜¯ç”±äº é¡¹ç›®ä¸­ SDK çš„ç‰ˆæœ¬è¿‡ä½å¯¼è‡´çš„ã€‚æ—¢ç„¶çŸ¥é“äº†é—®é¢˜ï¼Œå°±è¦è§£å†³é—®é¢˜ï¼Œäºæ˜¯åœ¨å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆçš„ SDKã€‚ æˆ‘ä»¬å…¬å¸çš„é¡¹ç›®å…¨éƒ¨åŸºäº Maven è¿›è¡Œæ„å»ºï¼Œä½†æ˜¯å®˜ç½‘çš„ SDK åªæ˜¯ JAR åŒ…ï¼Œåœ¨ä¸­å¤®ä»“åº“æ˜¯æ²¡æœ‰çš„ï¼Œå› æ­¤ä½¿ç”¨çš„è¯éœ€è¦ä¸Šä¼ åˆ°å…¬å¸çš„ Maven ç§æœä¸Šã€‚ ç¯å¢ƒå‡†å¤‡ éœ€è¦ä¸Šä¼ çš„ Jar åŒ…ï¼Œæˆ‘è¿™é‡Œæ˜¯æ”¯ä»˜å®çš„ SDK çš„ Jar åŒ… ç§æœç¯å¢ƒï¼š Artifactory æˆ‘ä»¬å…¬å¸çš„ maven ç§æœå°±æ˜¯è¿™è´§å•¦ ä¸Šä¼  Jar åŒ…åˆ° Mavené€‰æ‹©ä¸Šä¼  Jar åŒ…ç™»å½• Artifactory åï¼Œé€‰æ‹© Deployï¼Œé€‰æ‹©è¦ä¸Šä¼ çš„ Jar åŒ…ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©ä¸Šä¼ æ”¯ä»˜å®çš„ SDK çš„ Jar åŒ…ã€‚ è®¾ç½®ä¸Šä¼  Jar åŒ…ä¿¡æ¯åœ¨è¿™é‡Œé€‰æ‹©è¦ä¸Šä¼ çš„ä»“åº“ï¼Œä»¥åŠè®¾ç½® â€œGAVâ€ å‚æ•° ç”±äºæ”¯ä»˜å®çš„ Jar åŒ…åç§°å¤ªé•¿äº†ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œç²¾ç®€äº†ä¸å¿…è¦çš„ä¿¡æ¯ã€‚ è®¾ç½®å®Œä¹‹åï¼Œç‚¹å‡»å®Œæˆå³å¯ã€‚ æŸ¥æ‰¾ä¸Šä¼  Jar çš„ Maven åæ ‡æ‰¾åˆ°åˆšæ‰ä¿å­˜çš„åº“ï¼Œæ‰¾åˆ°ä¸Šä¼ çš„ Jar åŒ… ç‚¹å‡» å¯¹åº”çš„ pom æ–‡ä»¶ï¼ŒæŸ¥çœ‹ Maven åæ ‡ å°†æ­¤åæ ‡å†™å…¥ pom.xml ä¸­å³å¯ï¼Œéœ€è¦å…ˆå°†ç§æœçš„åœ°å€å†™åˆ° pom.xml æ–‡ä»¶ä¸­ã€‚ 123456&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;repos&lt;/id&gt; &lt;url&gt;http://192.168.1.222:8088/artifactory/repos&lt;/url&gt; &lt;/repository&gt;&lt;/repositories&gt; ä¸Šä¼ æºç  Jar åŒ…åˆ°ç§æœä»“åº“æƒ³è¦åœ¨å¼€å‘æ—¶çœ‹å¯ä»¥æŸ¥çœ‹æºç çš„æ—¶å€™ï¼Œéœ€è¦å°†å¯¹åº”çš„æºç  Jar åŒ…ä¸€èµ·ä¸Šä¼ åˆ°ç§æœä¸­å»ï¼Œä¸å‰é¢æ­¥éª¤ç›¸åŒï¼Œæ­¤æ—¶é€‰æ‹©å¯¹åº”çš„æºç çš„ Jar åŒ…ã€‚ éœ€è¦æ³¨æ„è¿™é‡Œçš„ ç›®æ ‡ä»“åº“ä¸ GAV å‚æ•°ä¿æŒä¸ä¸Šé¢ä¸Šä¼ å¯¹åº”çš„ Jar åŒ…ä¿æŒä¸€è‡´ã€‚å”¯ä¸€ä¸åŒçš„åœ°æ–¹æ˜¯ Classifier ä¸º sourcesã€‚ ä¸Šä¼ æˆåŠŸåå¦‚å›¾ï¼Œæºç åŒ…ä¸å·¥ç¨‹åŒ…åœ¨åŒä¸€çº§ç›®å½•ä¸­ã€‚æ­¤æ—¶åœ¨é¡¹ç›®ä¸­å¯ä»¥åˆ·æ–° pom.xml æ–‡ä»¶åï¼Œå¯¹åº”çš„æºç å°±ä¼šä¸€åŒä¸‹è½½ä¸‹è½½ä¸‹æ¥äº†ï¼Œå¯ä»¥æ„‰å¿«çš„çœ‹æºç äº†ã€‚ End.","tags":[{"name":"Mavenç§æœ","slug":"Mavenç§æœ","permalink":"http://nullpointer.pw/tags/Maven%E7%A7%81%E6%9C%8D/"},{"name":"jaråŒ…ä¸Šä¼ ","slug":"jaråŒ…ä¸Šä¼ ","permalink":"http://nullpointer.pw/tags/jar%E5%8C%85%E4%B8%8A%E4%BC%A0/"}]},{"title":"å¾®ä¿¡æ”¯ä»˜å¼€å‘æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥å›è°ƒã€å®æˆ˜ã€‘","date":"2017-11-08T14:18:34.000Z","path":"å¾®ä¿¡æ”¯ä»˜å¼€å‘æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥å›è°ƒã€å®æˆ˜ã€‘.html","text":"å‰è¨€æœ€è¿‘åœ¨è°ƒè¯•å¾®ä¿¡ç›¸å…³çš„æ¥å£ï¼Œä½†æ˜¯ç”±äºå¾®ä¿¡å®˜æ–¹å‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œå¯¹äºè°ƒç”¨æ¥å£çš„åŸŸåæœ‰é™åˆ¶ã€‚å¾®ä¿¡æˆæƒä¸å¾®ä¿¡æ”¯ä»˜ç»Ÿä¸€ä¸‹å•æ¥å£åœ¨æœ¬åœ°å¯ä»¥é€šè¿‡æ›´æ”¹ host çš„æ–¹å¼æ¥è°ƒè¯•ï¼Œå¾®ä¿¡æœåŠ¡å™¨ä¹Ÿèƒ½è·³è½¬å›æ¥ï¼Œä½†æ˜¯å¾®ä¿¡æ”¯ä»˜å¼‚æ­¥é€šçŸ¥è¿™é‡Œï¼›å¾®ä¿¡å®˜æ–¹å¼ºåˆ¶è®©è®¾ç½®æ”¯ä»˜æˆæƒç›®å½•ï¼Œä¸”æ˜¯é€šè¿‡ ICP å¤‡æ¡ˆçš„åŸŸåï¼Œå› æ­¤ä¸é‡‡å–ç‰¹æ®Šæ‰‹æ®µï¼Œæœ¬åœ°æ˜¯æ— æ³•æ¥æ”¶åˆ°å¾®ä¿¡çš„å¼‚æ­¥é€šçŸ¥å›è°ƒè¯·æ±‚çš„ï¼Œåªèƒ½éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒæµ‹è¯•ã€‚ å‰ç½®æ¡ä»¶ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŠ˜è…¾äº†å¥½å‡ å¤©ï¼Œæ‰æå‡ºæ¥äº†ï¼Œç©¶å…¶æ ¹æœ¬åŸå› ï¼Œè¿˜æ˜¯å¯¹äº Nginx ä¸å¤ªç†Ÿæ‚‰ã€‚æ‰€ä»¥åœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚ å†…ç½‘è½¬å‘å¦‚æœæƒ³æœ¬åœ°è¿›è¡Œè°ƒè¯•ï¼Œå¹¶ä¸”æƒ³è®©å¾®ä¿¡æœåŠ¡å™¨è¯·æ±‚å›è°ƒå›æ¥ï¼Œåˆ™æœ¬åœ°å¿…é¡»è¦æœ‰ä¸€ä¸ªå¤–ç½‘åŸŸåï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯ç”¨ Ngrokå†…ç½‘è½¬å‘ æ¥å®ç°ï¼›Ngrok çš„é…ç½®å°±æ˜¯å°†æœ¬åœ°é¡¹ç›®çš„ç«¯å£æ˜ å°„åˆ°åˆ†é…çš„å¤–ç½‘åŸŸåï¼Œå…·ä½“é…ç½®å‚è€ƒå®˜ç½‘æ•™ç¨‹æ–‡æ¡£ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚ æˆ‘çš„é…ç½®æ˜¯ï¼š 1http://vcmq.free.ngrok.cc -&gt; 127.0.0.1:8080 é…ç½®æµ‹è¯•æ”¯ä»˜ç›®å½•å‰é¢æåˆ°äº†ï¼Œå¾®ä¿¡æ”¯ä»˜å¼‚æ­¥é€šçŸ¥ä¼šå¯¹æ”¯ä»˜åŸŸåç›®å½•æœ‰è¦æ±‚ï¼Œå› æ­¤ï¼Œæ”¯ä»˜æ—¶çš„åŸŸåå¿…é¡»è¦åœ¨è®¾ç½®çš„æ”¯ä»˜åŸŸåç›®å½•ä¸‹ã€‚ é¦–å…ˆéœ€è¦åœ¨ å¾®ä¿¡å•†æˆ·å¹³å° ä¸­é…ç½® å•†æˆ·ç§˜é’¥ï¼Œæ”¯ä»˜æˆæƒç›®å½•ã€‚ è¿™é‡Œæ”¯ä»˜æˆæƒç›®å½•é…ç½®çš„æ˜¯ä»¥åçº¿ä¸Šçš„æ”¯ä»˜æˆæƒç›®å½• 1http://pay.domain.com/wechat/public/ ç„¶åå†åŠ ä¸€æ¡æœ¬åœ°æµ‹è¯•æ”¯ä»˜çš„ä¸´æ—¶æˆæƒç›®å½•ï¼Œè¿™ä¸ªç›®å½•æœ€å¥½åœ¨æœ¬åœ°æµ‹è¯•å®Œæˆåï¼Œè¿›è¡Œåˆ é™¤ã€‚ 1http://pay.domain.com/testpay/ å¿…çŸ¥çš„ Nginx è¯­æ³•proxy_pass åçš„ url åŠ ä¸åŠ  / çš„åŒºåˆ«è¿™é‡Œåˆ—ä¸¾ nginx çš„ proxy_pass è¯­æ³•ï¼Œæ˜¯ä¸ºäº†ä¸‹ä¸€æ­¥é’ˆå¯¹ nginx çš„é…ç½®è¿›è¡Œä¿®æ”¹ã€‚ è¿™é‡Œè®¿é—® http://127.0.0.1/proxy/test.html æµ‹è¯• proxy_pass åé¢çš„ url åŠ ä¸ä¸åŠ  / çš„åŒºåˆ« 12345678server &#123; listen 80; server_name 127.0.0.1; location /proxy/ &#123; proxy_pass http://192.168.0.100/; &#125;&#125; ä»¥ä¸Š location ä¼šä»£ç†åˆ° http://192.168.0.100/test.html å³ç›¸å½“äºæ˜¯ç»å¯¹æ ¹è·¯å¾„ï¼Œåˆ™ Nginx ä¸ä¼šæŠŠ location ä¸­çš„è·¯å¾„éƒ¨åˆ†ä»£ç†èµ°ã€‚ 12345678server &#123; listen 80; server_name 127.0.0.1; location /proxy/ &#123; proxy_pass http://192.168.0.100; &#125;&#125; ä»¥ä¸Š location ä¼šä»£ç†åˆ° http://192.168.0.100/proxy/test.html å³ç›¸å½“äºç›¸å¯¹è·¯å¾„ã€‚ ä»£ç†æ”¯ä»˜åŸŸååˆ°ç¬¬ä¸‰æ–¹åŸŸåçŸ¥é“ä¸Šä¸€æ­¥ proxy_pass å / çš„ä½œç”¨åï¼Œå°±å¼€å§‹æ¥é…ç½®æ”¯ä»˜åŸŸåæŒ‡å‘çš„æœåŠ¡å™¨ä¸Šçš„ nginx çš„é…ç½®æ–‡ä»¶ã€‚ 1234567891011121314server &#123; listen 80; server_name pay.domain.com; location /testpay/ &#123; proxy_set_header Host vcmq.free.ngrok.cc; proxy_pass http://vcmq.free.ngrok.cc/wide/; &#125; location / &#123; proxy_pass http://payServer; &#125;&#125; é…ç½®ä¸­çš„ wide æ˜¯æˆ‘é¡¹ç›®çš„åç§°ï¼›æ³¨æ„ï¼šè¿™é‡Œçš„ proxy_set_header Host å¿…é¡»é…ç½®ï¼Œå¦åˆ™è¿›å…¥ location å—åï¼Œä¼šæç¤º tunnel pay.domain.com not foundã€‚ å½“è®¿é—® pay.domain.com/testpay/create å¾®ä¿¡ç»Ÿä¸€ä¸‹å•æ¥å£æ—¶ï¼Œ ä¼šä»£ç†åˆ° http://vcmq.free.ngrok.cc/wide/createï¼› éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç»Ÿä¸€ä¸‹å•æ¥å£ï¼Œè®¾ç½® notify_url çš„å€¼è¦ä¸ºé…ç½®çš„æ”¯ä»˜æˆæƒç›®å½•ï¼Œæ¯”å¦‚æˆ‘çš„ http://pay.domain.com/testpay/notifyï¼Œè¿™ä¸ªå¼‚æ­¥é€šçŸ¥å›è°ƒ URL é™å®šæ˜¯ POST è¯·æ±‚ï¼Œå¯ä»¥åœ¨å¼‚æ­¥å›è°ƒæ–¹æ³•æ‰“æ–­ç‚¹ï¼Œç„¶åé€šè¿‡ postman å·¥å…·å‘é€ post è¯·æ±‚åˆ° http://pay.domain.com/testpay/notifyï¼Œçœ‹æ˜¯å¦å¯ä»¥æ­£å¸¸è¿›å…¥æ–­ç‚¹ï¼Œå¦‚æœæ­£å¸¸è¿›å…¥æ–­ç‚¹ï¼Œæ­å–œä½ é…ç½®å¥½äº† Nginx å›è°ƒè¿™ä¸€å—ã€‚ æ³¨æ„ï¼š ç»Ÿä¸€ä¸‹å•æ¥å£å‚æ•°ä¸­æäº¤çš„å‚æ•° notify_url ï¼Œå¦‚æœé“¾æ¥æ— æ³•è®¿é—®ï¼Œå•†æˆ·å°†æ— æ³•æ¥æ”¶åˆ°å¾®ä¿¡é€šçŸ¥ã€‚é€šçŸ¥ url å¿…é¡»ä¸ºç›´æ¥å¯è®¿é—®çš„ url ï¼Œä¸èƒ½æºå¸¦å‚æ•°ã€‚ç¤ºä¾‹ï¼šnotify_urlï¼šâ€œhttps://pay.weixin.qq.com/wxpay/pay.actionâ€ å¦å¤–è¦æ³¨æ„ï¼Œå¦‚æœæ”¯ä»˜ç›®å½•ä¸­é…ç½®çš„æ˜¯ https çš„ï¼Œé‚£ä¹ˆ notify_url ä¹Ÿä¸€å®šè¦ä¿æŒä¸€è‡´æ˜¯ https çš„ã€‚ ç»Ÿä¸€ä¸‹å•å¹¶å®Œæˆæ”¯ä»˜å®Œæˆåï¼Œå¾®ä¿¡æœåŠ¡å™¨ä¼šè¯·æ±‚ç»Ÿä¸€ä¸‹å•æ¥å£ä¸­çš„ notify_urlï¼Œç»è¿‡æœåŠ¡å™¨ nginx è¿›è¡Œä»£ç†åï¼Œä¼šä»£ç†åˆ° æœ¬åœ°çš„å†…ç½‘è½¬å‘åŸŸåå¼‚æ­¥é€šçŸ¥å›è°ƒæ¥å£ http://vcmq.free.ngrok.cc/wide/notifyï¼Œ ä»è€Œè¾¾åˆ°äº†æœ¬åœ°æ¥æ”¶å¾®ä¿¡æ”¯ä»˜å¼‚æ­¥é€šçŸ¥å›è°ƒè¯·æ±‚çš„ç›®çš„ã€‚ å¦‚æœåœ°å€ä¸åœ¨æ”¯ä»˜æˆæƒç›®å½•ä¸‹ï¼Œä¼šæç¤ºå½“å‰ Url æœªæ³¨å†Œã€‚å› ä¸ºæ˜¯ä»£ç†è¿‡å»ï¼Œå› æ­¤åœ°å€æ çš„åœ°å€ä¸ä¼šæ”¹å˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸èƒ½ç®€å•ä½¿ç”¨ nginx çš„ rewrite çš„åŸå› ã€‚ å¦‚æœ‰ç–‘é—®ï¼Œå¯ä»¥è”ç³»æˆ‘ã€‚ å‚è€ƒ nginx proxy_passåçš„urlåŠ ä¸åŠ /çš„åŒºåˆ« è·³è½¬ç¬¬ä¸‰æ–¹åŸŸå","tags":[{"name":"å®æˆ˜","slug":"å®æˆ˜","permalink":"http://nullpointer.pw/tags/%E5%AE%9E%E6%88%98/"},{"name":"nginxè½¬å‘","slug":"nginxè½¬å‘","permalink":"http://nullpointer.pw/tags/nginx%E8%BD%AC%E5%8F%91/"},{"name":"proxy_pass","slug":"proxy-pass","permalink":"http://nullpointer.pw/tags/proxy-pass/"},{"name":"æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥","slug":"æœ¬åœ°æ¥æ”¶å¼‚æ­¥é€šçŸ¥","permalink":"http://nullpointer.pw/tags/%E6%9C%AC%E5%9C%B0%E6%8E%A5%E6%94%B6%E5%BC%82%E6%AD%A5%E9%80%9A%E7%9F%A5/"}]},{"title":"Nginxå›¾ç‰‡é˜²ç›—é“¾ã€å®æˆ˜ã€‘","date":"2017-10-29T06:28:46.000Z","path":"Nginxå›¾ç‰‡é˜²ç›—é“¾ã€å®æˆ˜ã€‘.html","text":"å‰è¨€åšä¸»ç›®å‰åœ¨ä¸€å®¶åŸåˆ›å°è¯´ç½‘ç«™å…¬å¸å·¥ä½œï¼Œç”±äºç«™å†…çš„ä½œå“å…¨éƒ¨æ˜¯åŸåˆ›ï¼Œäºæ˜¯ä¹ä¸å¯é¿å…åœ°ä¼šè¢«ä¸€äº›ç›—ç‰ˆç½‘ç«™çˆ¬å–ç›—ç‰ˆï¼Œå¯¹äºé˜²ç›—ç‰ˆä¸€ç›´æ²¡æœ‰å¾ˆå¥½çš„å¯¹ç­–ï¼Œè®©å…¬å¸å¾ˆæ˜¯è‹¦æ¼ã€‚æœ€è¿‘å»ä¸€äº›ç›—ç‰ˆç½‘ç«™ä¸Šæœç´¢æˆ‘ä»¬ç½‘ç«™ä½œå“æ—¶ï¼Œå‘ç°ä»–ä»¬æ‰€ç”¨çš„å°é¢å›¾ç‰‡çš„æ¥æºæ˜¯æˆ‘ä»¬ç½‘ç«™çš„åœ°å€ï¼Œå³æ‰€è°“çš„ç›—é“¾ï¼Œè¿™å¯¹äºæˆ‘ä»¬ç½‘ç«™æœåŠ¡å™¨çš„å¸¦å®½æ˜¯ä¸€ç§æŸå¤±ï¼Œå› æ­¤éœ€è¦é‡‡å–å¯¹åº”çš„æ‰‹æ®µåº”å¯¹ã€‚ ç¯å¢ƒå‡†å¤‡è¿™é‡Œæˆ‘ä½¿ç”¨ä¸¤å°è™šæ‹Ÿæœº è™šæ‹Ÿæœºçš„å¿«é€Ÿå®‰è£…å¯ä»¥å‚è€ƒæˆ‘å¦å¤–ä¸€ç¯‡åšæ–‡ CentOSå¿«é€Ÿå®‰è£… æœåŠ¡å™¨ Aï¼š192.168.200.130 æœåŠ¡å™¨ Bï¼š192.168.200.131 Nginx å®‰è£…å‚è€ƒåšæ–‡ Nginxç¼“å­˜é…ç½® çš„ Nginx ç¯å¢ƒæ­å»ºéƒ¨åˆ†ã€‚ Nginx é˜²ç›—é“¾è®¾ç½®ä¸€ã€é…ç½® Nginx çš„é˜²ç›—é“¾12345678910111213141516171819202122# ä¿®æ”¹ nginx.conf é…ç½®æ–‡ä»¶vim /usr/local/nginx/conf/nginx.conf# æ·»åŠ  server èŠ‚ç‚¹server &#123; listen 80; server_name www.vcmq.com; #access_log logs/host.access.log main; location ~* \\.(jpg|png|gif)$ &#123; root /home/resources; valid_referers none server_names *.test1.com ~\\.test2\\.; if ($invalid_referer)&#123; rewrite ^/ https://cdn.jsdelivr.net/gh/Mosiki/blog-imgs/blog/20171028/214345352.png; &#125; &#125; location / &#123; root html; index index.html index.htm; &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘æ–°å¢çš„ server çš„åœ°å€æ˜¯ www.vcmq.comã€‚ 1location ~* \\.(jpg|png|gif)$ æ­¤è¡Œé…ç½®çš„ä½œç”¨æ˜¯åŒ¹é…ä»¥ jpg/png/gif ç»“å°¾çš„æ–‡ä»¶è¯·æ±‚ï¼Œ å¦‚æœåŒ¹é…å°±æ‰§è¡Œ æ‹¬å·å†…çš„ä»£ç ã€‚ 1234valid_referers none server_names *.test1.com ~\\.test2\\.;if ($invalid_referer)&#123; rewrite ^/ https://cdn.jsdelivr.net/gh/Mosiki/blog-imgs/blog/20171028/214345352.png;&#125; é¦–å…ˆçœ‹ç¬¬ä¸€è¡Œï¼Œè¿™è¡Œçš„ä½œç”¨æ˜¯é…ç½®å¯ä»¥è¯†åˆ« referï¼Œå³å¯ä»¥æ­£å¸¸è·å–èµ„æºæ–‡ä»¶çš„è¯·æ±‚ï¼Œåœ¨è¿™é‡Œé…ç½®åŠ å…¥ç™½åå•çš„è¯·æ±‚ refer åŸŸåã€‚å‚æ•°è¯´æ˜ï¼š none ä»£è¡¨è¯·æ±‚çš„ refer ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯ç›´æ¥è®¿é—®ï¼Œæ¯”å¦‚åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®å›¾ç‰‡ www.vcmq.com/test1.pngï¼Œç›´æ¥è®¿é—®æ—¶ï¼Œrefer ä¼šä¸ºç©ºã€‚ blocked refer æ¥æºä¸ä¸ºç©ºï¼Œä½†æ˜¯é‡Œé¢çš„å€¼è¢«ä»£ç†æˆ–è€…é˜²ç«å¢™åˆ é™¤äº† server_names refer æ¥æºåŒ…å«å½“å‰çš„ server_names å³ location çš„çˆ¶èŠ‚ç‚¹ server èŠ‚ç‚¹çš„ server_name çš„å€¼ã€‚ å­—ç¬¦ä¸² å®šä¹‰æœåŠ¡å™¨åç§°ï¼Œæ¯”å¦‚ *.test1.comï¼Œé…ç½®åï¼Œæ¥æºæ˜¯ä» test1.com å°±ä¼šè¢«è®¤ä¸ºæ˜¯åˆæ³•çš„è¯·æ±‚ã€‚ æ­£åˆ™è¡¨è¾¾å¼ åŒ¹é…åˆæ³•è¯·æ±‚æ¥æºï¼Œ å¦‚ ~\\.test2\\. å½“è¯·æ±‚çš„ refer æ˜¯åˆæ³•çš„ï¼Œå³å¯ä»¥è¢«åé¢ä»»ä¸€å‚æ•°æ‰€åŒ¹é…ï¼Œ $invalid_referer çš„å€¼ä¸º0ï¼Œ è‹¥ä¸åŒ¹é…åˆ™å€¼ä¸º 1ï¼Œ è¿›å…¥ if çš„ä»£ç ä¸­ã€‚æˆ‘è¿™é‡Œçš„è®¾ç½®æ˜¯ï¼Œå¦‚æœæ˜¯ä¸åˆæ³•çš„è¯·æ±‚ï¼Œå°±ç»Ÿä¸€è¿”å›ä¸€å¼ å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿”å› 403ã€‚ äºŒã€é…ç½® html æ–‡ä»¶1.åœ¨ /home ç›®å½•ä¸‹åˆ›å»ºç›®å½• resources ,åœ¨ /home/resources ç›®å½•ä¸‹æ”¾å…¥ä¸€å¼ å›¾ç‰‡ test.pngã€‚ 2.ä¿®æ”¹ nginx å®‰è£…ç›®å½•ä¸‹ html ä¸­çš„ index.html æ–‡ä»¶ã€‚æ·»åŠ ä¸€ä¸ª img æ ‡ç­¾ï¼Œsrc è®¿é—®ä¸Šä¸€æ­¥ä¸­çš„å›¾ç‰‡æ–‡ä»¶ 1&lt;img src=&quot;http://www.vcmq.com/test.png&quot; /&gt; 3.å¯åŠ¨ nginx 1/usr/local/nginx/sbin/nginx 4.ä»¥ä¸Šæ‰€æœ‰é…ç½®æ˜¯å¯¹äºæœåŠ¡å™¨ A çš„é…ç½®ï¼Œä»¥ä¸‹è®²è§£æœåŠ¡å™¨ B çš„é…ç½® æœåŠ¡å™¨ B å’Œ æœåŠ¡å™¨ Aä¸€æ ·å®‰è£…å¥½ nginx ä¿®æ”¹ nginx.conf é…ç½®æ–‡ä»¶, æ·»åŠ ä¸¤ä¸ª server12345678910111213141516171819server &#123; listen 80; server_name www.test1.com; #charset koi8-r; #access_log logs/host.access.log main; location / &#123; root html; index index.html index.htm; &#125;&#125; server &#123; listen 80; server_name www.test2.com; location / &#123; root html; index index.html index.htm; &#125;&#125; ä¿®æ”¹æœåŠ¡å™¨ B Nginx å®‰è£…ç›®å½•ä¸‹ html ç›®å½•ä¸­çš„ index.html æ–‡ä»¶,åŒæ ·æ·»åŠ  img æ ‡ç­¾ã€‚1&lt;img src=&quot;http://www.vcmq.com/test.png&quot; /&gt; å¯åŠ¨ æœåŠ¡å™¨ B çš„ Nginx é…ç½®æ³¨æ„äº‹é¡¹ é…ç½®èµ„æºçš„ location éœ€è¦åœ¨ location / ä¹‹å‰ã€‚ å¦‚æœåœ¨ location æˆ–è€…å…¶çˆ¶èŠ‚ç‚¹ server ä¸­æ²¡æœ‰é…ç½® root çš„å€¼ï¼Œ å½“è¯·æ±‚æ—¶åˆæ³•çš„æ—¶å€™ï¼Œä¼š 404 æ‰¾ä¸åˆ°èµ„æºæ–‡ä»¶ï¼Œå› æ­¤éœ€è¦åœ¨ location æˆ–è€… server èŠ‚ç‚¹è®¾ç½® root çš„å€¼ æ³¨æ„è°ƒè¯•çš„æ—¶å€™ï¼ŒåŠ¡å¿…ä½¿ç”¨ Ctrl + F5 è¿›è¡Œåˆ·æ–°ç½‘é¡µï¼Œå› ä¸º nginx ä¼šç¼“å­˜å›¾ç‰‡ï¼ æµ‹è¯•æˆ‘ä¸Šé¢é…ç½®çš„ server_name é…ç½®çš„åŸŸåæ˜¯ www.vcmq.com ï¼Œå› æ­¤æµ‹è¯•æ—¶ï¼Œéœ€è¦å°†æˆ‘ç”µè„‘çš„ host æŒ‡å‘è™šæ‹Ÿæœºçš„ ip, å¯ä»¥ä½¿ç”¨ SwitchHosts æ¥ä¾¿æ·åˆ‡æ¢ã€‚ 12345# æŒ‡å‘æœåŠ¡å™¨A192.168.200.130 www.vcmq.com# æŒ‡å‘æœåŠ¡å™¨B192.168.200.131 www.test1.com www.test2.com æµè§ˆå™¨è®¿é—® www.vcmq.comï¼Œå›¾ç‰‡æ­£å¸¸åŠ è½½ æµè§ˆå™¨è®¿é—® www.test1.com ä¸ www.test2.com è¿˜æœ‰ç›´æ¥è®¿é—®å›¾ç‰‡ http://www.vcmq.com/test.png éƒ½æ­£å¸¸åŠ è½½ ä¿®æ”¹ æœåŠ¡å™¨ A çš„ nginx.conf é…ç½®æ–‡ä»¶ 1valid_referers none server_names *.test1.com ~\\.test2\\.; å°†æ­¤è¡Œä¿®æ”¹ä¸º 1valid_referers none server_names; å³åªå…è®¸å½“å‰ server_name ä¸ æ—  refer çš„è¯·æ±‚ï¼Œå…¶ä»–è¯·æ±‚éƒ½è¿”å› rewrite çš„å›¾ç‰‡, ç„¶åé‡å¯ nginx 1/usr/local/nginx/sbin/nginx -s reload å†æ¬¡åˆ†åˆ«è®¿é—® ,æ³¨æ„éœ€è¦ä½¿ç”¨ ctrl+F5 åˆ·æ–°ä¸€ä¸‹ç¼“å­˜ www.vcmq.comã€www.test1.comã€www.test2.comã€http://www.vcmq.com/test.pngã€‚ å‘ç°åªæœ‰ www.vcmq.com ä¸ http://www.vcmq.com/test.png æ­£å¸¸æ˜¾ç¤ºï¼Œå…¶ä»–è¯·æ±‚çš†è¿”å› rewrite çš„å›¾ç‰‡ åŒç†å†æ¬¡ä¿®æ”¹ nginx.conf æ–‡ä»¶, å…è®¸æ¥è‡ª test1 çš„è®¿é—®è¯·æ±‚ 1valid_referers none server_names *.test1.com; ç»“æœå‘ç°www.test1.comå¯ä»¥è·å–æ­£å¸¸å›¾ç‰‡ï¼Œè€Œwww.test2.comè¿˜æ˜¯ rewrite ä¹‹åçš„å›¾ç‰‡ è‡³æ­¤ï¼Œå·²ç»å®ç°äº†åŸºäº Nginx çš„ç®€å•å›¾ç‰‡é˜²ç›—é“¾ã€‚ å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥è®¾ç½®å…è®¸æ¥è‡ªå…¬å¸ä¸‹çš„åŸŸåä¸ç©º refer çš„è¯·æ±‚é€šè¿‡ã€‚ è¿™é‡Œå…è®¸ ç©º refer çš„è¯·æ±‚é€šè¿‡çš„åŸå› æ˜¯ï¼Œæœ‰äº›åˆæ³•çš„è¯·æ±‚å¯èƒ½ä¼šæ²¡æœ‰å¸¦ä¸Š referã€‚ èµ„æºä¸‹è½½ æ–‡ç« æ¶‰åŠé…ç½®æ–‡ä»¶ä¸‹è½½ å‚è€ƒæ–‡ç«  https://www.bbsmax.com/A/xl56LLwxzr/","tags":[{"name":"å®æˆ˜","slug":"å®æˆ˜","permalink":"http://nullpointer.pw/tags/%E5%AE%9E%E6%88%98/"},{"name":"å›¾ç‰‡é˜²ç›—é“¾","slug":"å›¾ç‰‡é˜²ç›—é“¾","permalink":"http://nullpointer.pw/tags/%E5%9B%BE%E7%89%87%E9%98%B2%E7%9B%97%E9%93%BE/"},{"name":"é˜²ç›—é“¾","slug":"é˜²ç›—é“¾","permalink":"http://nullpointer.pw/tags/%E9%98%B2%E7%9B%97%E9%93%BE/"}]},{"title":"Nginxé…ç½®èµ„æºä¸‹è½½ç›®å½•","date":"2017-10-26T22:25:24.000Z","path":"Nginxé…ç½®èµ„æºä¸‹è½½ç›®å½•.html","text":"ä¹‹å‰åœ¨ç½‘ä¸Šæ‰¾ CentOs çš„é•œåƒçš„æ—¶å€™ï¼Œå‘ç°äº†é˜¿é‡Œäº‘çš„è¿™ä¸ªé•œåƒæºï¼Œé€Ÿåº¦è›®å¿«çš„ã€‚ä»Šå¤©ä¹Ÿæ¥æ­å»ºä¸€ä¸ªç±»ä¼¼çš„ç«™ï¼Œä½¿ç”¨ nginx ä½œä¸ºèµ„æºä¸‹è½½æœåŠ¡å™¨ã€‚ å›¾ç‰‡è¯¦æƒ…ï¼š å®‰è£… Nginxå‚è€ƒè¿™ç¯‡æ•™ç¨‹çš„ Nginx ç¯å¢ƒæ­å»ºéƒ¨åˆ† è®¾ç½®èµ„æºå­˜å‚¨è·¯å¾„1ã€ èµ„æºå‡†å¤‡ åœ¨ home çš„ç”¨æˆ·ç›®å½•ä¸‹ï¼Œå»ºç«‹æ–‡ä»¶å¤¹ï¼Œå¦‚ softs ,åœ¨ softs ç›®å½•ä¸­æ”¾å…¥æ–‡ä»¶å†…å®¹ã€‚ ä¿®æ”¹é…ç½®æ–‡ä»¶2ã€ ä¿®æ”¹ Nginx é…ç½®æ–‡ä»¶ 1vim conf/nginx.conf æ·»åŠ  server 123456789101112server &#123; listen 80; server_name down.vcmq.com; #sendfile on; location / &#123; alias /home/softs/; sendfile on; autoindex on; autoindex_exact_size off; autoindex_localtime on; &#125;&#125; alias è®¾ç½®ä¸ºç¬¬ä¸€æ­¥ä¸­çš„èµ„æºç›®å½•ï¼Œæˆ‘è¿™é‡Œæ˜¯ /home/softs/ 3ã€ è®¿é—®æµ‹è¯•å°†æœ¬æœº hosts æŒ‡å‘æœåŠ¡å™¨ï¼Œè®¿é—®åœ°å€ down.vcmq.com æ˜¾ç¤ºç›®å½•åˆ—è¡¨ æ³¨æ„ä¸èƒ½æ˜¯/root ç›®å½•ä¸‹çš„æ–‡ä»¶è·¯å¾„ ï¼Œä¼šæ˜¾ç¤º403æ— æƒé™","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"èµ„æºä¸‹è½½","slug":"èµ„æºä¸‹è½½","permalink":"http://nullpointer.pw/tags/%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD/"}]},{"title":"å¦‚ä½•åšç¬”è®°ï¼Ÿ","date":"2017-10-26T14:10:02.000Z","path":"å¦‚ä½•è®°ç¬”è®°ï¼Ÿ.html","text":"æœ€è¿‘åœ¨å…¬å¸å¼€ä¼šï¼Œæˆ‘åˆ†äº«äº†ä¸€äº›ä¸ªäººæ—¥å¸¸å…³äºå¦‚ä½•è®°ç¬”è®°çš„å¿ƒå¾—ï¼Œç»“åˆåœ¨ç½‘ä¸Šçœ‹çš„ç›¸å…³æ–‡ç« ï¼Œæ•´ç†ä¸€ä¸‹ï¼Œç„¶ååšäº†ä¸€äº›è¡¥å……ï¼Œå†™å‡ºè¿™ç¯‡åšæ–‡ï¼Œæ–‡ç« æ¶‰åŠå·¥å…·çš„é€‰æ‹©å’Œè®°ç¬”è®°çš„æ­¥éª¤ä»¥åŠè®°ç¬”è®°çš„æŠ€å·§ä¸æ³¨æ„äº‹é¡¹ï¼Œæ¬¢è¿ç•™è¨€æ¢è®¨ã€‚ å·¥å…·çš„é€‰æ‹©å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œé¦–å…ˆè¯´è¯´å·¥å…·çš„é€‰æ‹©ï¼Œå¥½çš„å·¥å…·ä¼šè®©ä½ è®°ç¬”è®°å¾—å¿ƒåº”æ‰‹ï¼Œæ‹¥æœ‰è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œä¸å¥½çš„å·¥å…·åˆ™åšä¸åˆ°è¿™ç‚¹ï¼Œè¾¾ä¸åˆ°è®°ç¬”è®°çš„ç›®çš„ã€‚ å¸¸è§çš„ä¸»æµäº‘ç¬”è®°æœ‰ï¼š æœ‰é“äº‘ç¬”è®° OneNote ä¸ºçŸ¥ç¬”è®° å°è±¡ç¬”è®° å…ˆè¯´è¯´æˆ‘æœ€ç†Ÿæ‚‰çš„ä¸ºçŸ¥ç¬”è®°ï¼Œåœ¨ä¸€å¹´ä»¥å‰ï¼Œä¸€ç›´ç”¨çš„æ˜¯ä¸ºçŸ¥ç¬”è®°ï¼Œè®°äº†ä¸Šåƒçš„ç¬”è®°ï¼Œç”¨çš„å¾ˆä¸é”™ï¼Œé€¢äººæ¨èé‚£ç§ï¼›ä½†æ˜¯æœ‰ä¸€å¤©ï¼Œä¸ºçŸ¥ç¬”è®°çªç„¶å°±å®£å¸ƒå¿…é¡»è¦ä»˜è´¹æ‰èƒ½ç»§ç»­ä½¿ç”¨ï¼Œå¦åˆ™çš„è¯ï¼Œç¬”è®°å°†ä¸èƒ½åŒæ­¥ï¼å¯¹åº”ä¸€ä¸ªäº‘ç¬”è®°äº§å“æ¥è¯´ï¼Œæ²¡æœ‰äº†æœ€æœ€åŸºç¡€çš„åŒæ­¥åŠŸèƒ½ï¼Œå’Œåœ¨æœ¬åœ°æ–‡æ¡£é‡Œå†™æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæ²¡æœ‰åˆé€‚çš„å˜ç°æ–¹å¼ï¼Œå°±å®Œå…¨æŠ›å¼ƒäº†å…è´¹ç”¨æˆ·ï¼Œç»™æˆ‘æ„Ÿè§‰è¿™å®¶å…¬å¸ä¸å¤ªé è°±ï¼Œæ‰€ä»¥æˆ‘å°±è½¬æˆ˜ä½¿ç”¨æœ‰é“äº‘ç¬”è®°ã€‚ä½†æ˜¯ä¹‹å‰çš„ç¬”è®°è¿˜åœ¨ä¸ºçŸ¥ç¬”è®°é‡Œï¼Œæ‡’å¾—å»è½¬ç§»äº†ã€‚æ‰€ä»¥é€‰æ‹©ç¬”è®°è½¯ä»¶çš„æ—¶å€™ä¹Ÿè¦è€ƒè™‘è½¬ç§»æˆæœ¬ï¼Œä¸‡ä¸€ä¸€ä¸å°å¿ƒäº§å“å°±é»„äº†å‘¢ï¼å› æ­¤å°½é‡é€‰æ‹©å¤§å…¬å¸çš„æˆç†Ÿç¬”è®°äº§å“ã€‚ å†è¯´è¯´ç°åœ¨ç”¨çš„æœ‰é“äº‘ç¬”è®°ï¼Œç”¨ä¸€ä¸ªè¯æ¥å½¢å®¹å°±æ˜¯å¾ˆé¸¡è´¼ï¼Œä»¥å‰å¯ä»¥å¯¼å‡ºç¬”è®°ä¸ºå…¶ä»–ç¬”è®°è½¯ä»¶è¯†åˆ«çš„æ ¼å¼ï¼Œç°åœ¨åªèƒ½å¯¼å‡ºæœ‰é“èƒ½è¯†åˆ«çš„æ ¼å¼ã€‚å‡å¦‚æ˜¯é‡åº¦ç”¨æˆ·ï¼Œæƒ³è½¬ç§»ç¬”è®°ï¼Œå¾ˆå›°éš¾ã€‚å¥½åœ¨æœ‰é“äº‘ç¬”è®°æ”¯æŒ MarkDown ç¬”è®°ï¼Œæ‰€ä»¥æˆ‘ç°åœ¨å°½é‡å†™çš„ç¬”è®°éƒ½ç”¨ MarkDown æ–¹å¼ï¼Œå› ä¸º MarkDown æ ¼å¼çš„ç›´æ¥åœ¨ç¬”è®°ä¸­å°±èƒ½ç›´æ¥å¤åˆ¶èµ°ï¼Œè½¬ç§»ç¬”è®°å¾ˆè½»æ¾ã€‚MarkDownï¼Œè¯­æ³•å¾ˆç®€å•ï¼Œå¯ä»¥å­¦ä¹ ä¸€ä¸‹ï¼Œè½»æ¾æ’ç‰ˆï¼Œè¯­æ³•å¯ä»¥å‚è€ƒæœ‰é“äº‘çš„æ–‡æ¡£ï¼Œ è®°ç¬”è®°ä¸éœ€è¦å»å­¦ä¹ å¤ªå¤æ‚çš„è¯­æ³•, çœ‹ä¸‹é¢é“¾æ¥çš„ç¬¬äºŒç‚¹å°±å¯ä»¥ã€‚ æœ‰é“äº‘ç¬”è®°Markdownç®€æ˜ç‰ˆ ç„¶åè¯´è¯´å°è±¡ç¬”è®°ï¼Œæ˜¯å›½å¤– EverNote çš„å¤§é™†ç‰ˆæœ¬ï¼Œå…¶å…è´¹ç‰ˆåªèƒ½æä¾›ä¸¤ä¸ªç»ˆç«¯åŒæ­¥ï¼Œå‡å¦‚ä½ å…¬å¸ç™»é™†ä¸€ä¸ªï¼Œå®¶é‡Œç™»é™†ä¸€ä¸ªï¼Œè¿˜æƒ³è¦åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šç™»å½•å°±éœ€è¦ä»˜è´¹ï¼Œè¿˜æœ‰æ¯æœˆä¸Šä¼ 60Mæµé‡çš„é™åˆ¶ï¼Œä»˜è´¹ç‰ˆä¸€å¹´ä¸€ç™¾å¤šï¼Œæƒ³è¦æœ€ç¨³å®šçš„å¯ä»¥è€ƒè™‘ä½¿ç”¨ã€‚ æœ€åè¯´è¯´ OneNote, å·¨ç¡¬å‡ºå“ï¼Œä½†æ˜¯å›½å†… GFW çš„å­˜åœ¨ï¼ŒåŒæ­¥å¾ˆæ…¢ï¼Œç„¶åä¹Ÿæ²¡å¤ªå¼„æ¸…æ¥šæ˜¯æ€ä¹ˆç”¨çš„ï¼Œå’Œä¸Šé¢ä»‹ç»çš„ç¬”è®°äº§å“ç»„ç»‡æ ¼å¼ä¸åŒï¼Œä¹Ÿæ²¡æ€ä¹ˆä¼šç”¨ï¼Œå°±ä¸ç½®ç‚¹è¯„äº†ã€‚ æˆ‘æ¨èä½¿ç”¨æœ‰é“äº‘ç¬”è®°å’Œå°è±¡ç¬”è®°(æˆ–EverNote) è®°ç¬”è®°çš„ä½œç”¨æœ€å¤§çš„ä½œç”¨å°±æ˜¯å¯¹æŠ—é—å¿˜ï¼Œç”¨å¥½äº†ç¬”è®°ï¼Œç¬”è®°å°±æ˜¯ä½ çš„ç¬¬äºŒå¤§è„‘ï¼Œäººçš„è®°å¿†åŠ›æœ‰é™ï¼Œæˆ‘ä»¬é€šè¿‡è®°ç¬”è®°æ¥æ‹“å±•ã€‚ è®°ç¬”è®°ä¸‰æ­¥èµ°ï¼š æ”¶é›† æ•´ç† è¾“å‡º ä»¥ä¸‹è¿›è¡Œè¯¦ç»†æ­¥éª¤å™è¿°ï¼š è®°ç¬”è®°çš„æ­¥éª¤æ”¶é›†ç¬¬ä¸€æ­¥æ˜¯ç¡®å®šæ‰€è¦å†™çš„ç¬”è®°å†…å®¹ï¼Œå³æ”¶é›†ï¼Œæ”¶é›†è¿™é‡Œæˆ‘åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚ æ”¶é›†ä»–äººçš„å†…å®¹ä»–äººçš„å†…å®¹æŒ‡çš„æ˜¯ä»–äººæ‰€äº§ç”Ÿçš„å†…å®¹ï¼Œæ¯”å¦‚åˆ«äººå†™çš„ä¹¦ï¼Œåšå®¢æ–‡ç« ï¼Œå…¬ä¼—å·æ–‡ç« ç­‰ç­‰ï¼Œå½“ä½ é‡åˆ°äº†æ¯”å¦‚ä¸€ç¯‡ä½ è§‰å¾—å†™çš„å¾ˆæœ‰é“ç†æˆ–è€…å¯¹ä½ æœ‰ç”¨çš„æ–‡ç« ï¼Œè§‰å¾—æœ‰ä¿å­˜ä¸‹æ¥çš„ä»·å€¼ï¼Œä½ å¯ä»¥å°†å…¶çº³å…¥ä½ çš„ç¬”è®°å½“ä¸­å»ã€‚ æ”¶é›†è‡ªå·±çš„å†…å®¹è‡ªå·±çš„å†…å®¹æŒ‡çš„æ˜¯è‡ªå·±æ‰€äº§ç”Ÿçš„å†…å®¹ï¼Œæ¯”å¦‚çªå‘çš„çµå…‰ä¸€ç°ï¼Œå¦‚æœä¸ç«‹å³è®°å½•ä¸‹æ¥ï¼Œå¯èƒ½å°±å¿˜æ‰äº†ï¼Œç„¶åå†æƒ³çš„æ—¶å€™æ— è®ºå¦‚ä½•ä¹Ÿè®°ä¸èµ·æ¥äº†ï¼Œå°±æ„Ÿè§‰è‡ªå·±é”™è¿‡äº†ä¸€ä¸ªäº¿ã€‚æ‰€ä»¥è¦è¶ç€ä½ çš„æƒ³æ³•è¿˜æ²¡æœ‰æ¶ˆå¤±ä¹‹å‰ï¼Œç«‹å³è®°å½•åˆ°ç¬”è®°å½“ä¸­å»ã€‚ç°åœ¨äººæ‰‹éƒ½æœ‰ä¸€å‰¯æ‰‹æœºï¼Œè€Œäº‘ç¬”è®°éƒ½æœ‰å…¶å¯¹åº”çš„ç§»åŠ¨ç«¯ï¼Œè®°å½•èµ·æ¥å¾ˆæ–¹ä¾¿ã€‚ æ”¶é›†çš„è¯€çªæœ‰æ—¶å€™åœ¨æŸä¸ªç½‘ç«™çœ‹åˆ°ä¸€ç¯‡æ–‡ç« æƒ³è¦ä¿å­˜ä¸‹æ¥æ—¶å€™ï¼Œä¸€èˆ¬äººçš„åšæ³•æ˜¯è®²æ–‡ç« é€‰æ‹©æ‹·è´åˆ°ç¬”è®°å½“ä¸­å»ï¼Œè¿™ä¹ˆåšæ˜¯å¯è¡Œï¼Œä½†æ˜¯ä¼šå®Œå…¨æ²¡æœ‰äº†æ’ç‰ˆï¼Œçœ‹èµ·æ¥ä¹±ç³Ÿç³Ÿçš„ä¸€ç‰‡ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ©æµè§ˆå™¨æ’ä»¶æˆ–è€…åˆ†äº«åŠŸèƒ½æ¥å®ç°å¿«é€Ÿç¾è§‚åœ°ä¿å­˜ã€‚æœ‰é“äº‘ç¬”è®°çš„è°·æ­Œæµè§ˆå™¨æ’ä»¶å°±å¾ˆå¥½ç”¨ï¼Œåœ¨æ‰‹æœºä¸Šå¯ä»¥å…³æ³¨å…¬ä¼—å·ï¼Œåˆ†äº«åˆ°å…¬ä¼—å·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ†äº«åˆ°å¯¹åº”çš„ç¬”è®° App ä¸­ï¼Œä»è€Œå®ç°å¿«é€Ÿæ”¶é›†ã€‚ æ•´ç†æ”¶é›†å®Œçš„å†…å®¹ï¼Œåªæ˜¯å †å åˆ°äº†ä½ çš„ç¬”è®°å½“ä¸­ï¼Œå¦‚æœä¸åŠ ä»¥æ•´ç†æ€»ç»“ï¼Œå…¶å®å’Œæ•£å¸ƒåœ¨ç½‘ç»œä¸Šçš„æ–‡ç« æ¯«æ— åŒºåˆ«ï¼Œå¯¹ä½ æ²¡æœ‰ä»»ä½•çš„æ„ä¹‰ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•çš„ä»·å€¼ï¼›ä¹Ÿè®¸ä½ æƒ³æ‰¾ç¬”è®°é‡Œé¢æŸä¸€ç¯‡æ–‡ç« ï¼Œä½†æ˜¯ä½ å´æ­»æ´»ä¹Ÿæ‰¾ä¸åˆ°ï¼Œè¿™ç§æƒ…å†µä¸‹è®°ä¸ä¸è®°éƒ½ä¸€æ ·ï¼›æ­£å¦‚å»ä¸€åº§å›¾ä¹¦é¦†çœ‹ä¹¦ï¼Œä½†æ˜¯å›¾ä¹¦é¦†å´æ²¡æœ‰å›¾ä¹¦æŸ¥é˜…ç³»ç»Ÿï¼Œåœ¨æµ©æ¸ºä¹¦æµ·ä¸­æƒ³æ‰¾åˆ°ä¸€æœ¬ä¹¦çš„å›°éš¾ç¨‹åº¦å¯æƒ³è€ŒçŸ¥ï¼å› æ­¤æ”¶é›†åçš„æ•´ç†ååˆ†é‡è¦ã€‚ æ•´ç†åˆ†ä¸ºé‡æ–°æ’ç‰ˆä¸åˆ†ç±»ä»¥åŠåŠ æ ‡ç­¾ï¼ˆåœ¨ä¸‹æ–‡è¯¦è°ˆåˆ†ç±»ä¸æ ‡ç­¾ï¼‰ï¼š é€šè¿‡æµè§ˆå™¨æ’ä»¶ç­‰å·¥å…·æŠ“å–ä¿å­˜çš„å†…å®¹å¯èƒ½ä¼šä¸åŸæ–‡ä¸­çš„å†…å®¹æ’ç‰ˆç›¸å·®ç”šè¿œï¼Œæ¯”å¦‚æœ‰é“äº‘ç¬”è®°å¯¹äºä»£ç å—çš„æŠ“å–æ’ç‰ˆæ”¯æŒå°±å¾ˆå·®ï¼ˆå…¶ä»–å¾ˆä¸é”™ï¼‰ï¼Œè¿™ç§æƒ…å†µï¼Œå°±éœ€è¦æˆ‘ä»¬è‡ªå·±å¯¹å†…å®¹é‡æ–°æ’ç‰ˆï¼Œä¾¿äºä»¥åè‡ªå·±æŸ¥çœ‹ã€‚ä¸ªäººä¸€èˆ¬æ˜¯æ–°å»ºç«‹ä¸€ä¸ª Markdown ç¬”è®°ï¼Œæ‹·è´åŸæ–‡è¿›è¡Œç¼–æ’ï¼Œå¹¶åœ¨æ–‡æœ«æ ‡æ³¨æ–‡ç« æ¥æºé“¾æ¥ã€‚ è‰¯å¥½çš„ç¬”è®°åˆ†ç±»æœ‰åˆ©äºå¿«é€Ÿå‡†ç¡®åœ°å®šä½ç¬”è®°ï¼Œæå‡æ•ˆç‡ã€‚ ä¸€ç¯‡ç¬”è®°åªèƒ½æ”¾åœ¨ä¸€ä¸ªåˆ†ç±»ä¸­ï¼ˆå¯¹åº”ç¬”è®°çš„æ–‡ä»¶å¤¹)ï¼Œä½†æ˜¯å´èƒ½å¤Ÿæ·»åŠ å¤šä¸ªæ ‡ç­¾ï¼Œæˆ‘è®¤ä¸ºæ ‡ç­¾æ˜¯å¯¹åˆ†ç±»çš„ä¸€ç§è¡¥å……ã€‚å½“åˆ†ç±»ä¸è¶³ä»¥å‡†ç¡®å®šä½ç¬”è®°ï¼Œæ­¤æ—¶éœ€è¦é€šè¿‡æ·»åŠ æ ‡ç­¾æ¥å¼¥è¡¥ã€‚ è¾“å‡ºå•å•åªæ˜¯å°†å†…å®¹æ”¶é›†ï¼Œå½’ç±»åŠ æ ‡ç­¾ï¼Œå¹¶ä¸èƒ½å¤Ÿå¯¹è‡ªå·±äº§ç”Ÿå¾ˆå¤§çš„ç”¨å¤„ï¼Œæœ€å¤šçš„æ˜¯è‡ªå·±æƒ³èµ·æ¥å°±å»ç¬”è®°ä¸­å¯»æ‰¾ï¼Œæ­¤æ—¶ç¬”è®°çš„ä½œç”¨æœ€å¤šæ˜¯å……å½“å¤‡å¿˜å½•çš„ä½œç”¨ã€‚è€ŒçœŸæ­£æƒ³è¦åˆ©ç”¨å¥½ç¬”è®°ï¼Œå°±æ˜¯éœ€è¦æˆ‘ä»¬æ¥å¯¹ç¬”è®°è¿›è¡Œæ€»ç»“æ€è€ƒï¼Œæ¥è¾¾åˆ°åœ¨å¤´è„‘ä¸­æ·±åŒ–è¯¥ç¯‡ç¬”è®°çš„ä½œç”¨ã€‚ ä¸¾ä¾‹è€Œè¨€ï¼Œç°åœ¨ä½ å†™äº†ä¸€ç¯‡ã€Šæ‹†æ‰æ€ç»´é‡Œçš„å¢™ã€‹çš„è¯»ä¹¦ç¬”è®°ï¼Œä½†ç¬”è®°çš„å†…å®¹åªæœ‰å¯¹äºä¹¦ä¸­åŸæ–‡çš„éƒ¨åˆ†æ‘˜æŠ„ï¼›å…¶å®è¿™æ ·çš„ç¬”è®°ä½œç”¨ä¸å¤§ï¼Œæ—¶é—´é•¿äº†ï¼Œä½ ç”šè‡³ä¸è®°å¾—ä½ æ›¾ç»è¯»è¿‡è¿™æœ¬ä¹¦å¹¶å†™è¿‡è¯»ä¹¦ç¬”è®°ã€‚ä½†æ˜¯ä½ å¯¹æ–‡ç« è¿›è¡Œäº†æ€è€ƒï¼Œæ¦‚æ‹¬ä¹¦çš„ä¸»è¦ä¸­å¿ƒæ€æƒ³ï¼Œå†™äº†è‡ªå·±çš„æ„Ÿå—ï¼Œåœ¨è±†ç“£ä¸Šç•™ä¸‹äº†ä¹¦è¯„ï¼Œå°±ç®—æ—¶é—´ä¹…äº†ï¼Œç¿»çœ‹ç¬”è®°ä¹Ÿèƒ½å¤Ÿå›æƒ³èµ·å½“æ—¶è‡ªå·±çš„æƒ³æ³•ï¼Œè¿™ä¹¦ä¹Ÿå°±æ²¡æœ‰ç™½è¯»ï¼Œç¬”è®°ä¹Ÿå°±æ²¡æœ‰ç™½å†™ã€‚ ä¸Šæ–‡æåˆ°äº†åœ¨è±†ç“£ä¸­å†™ä¹¦è¯„ï¼Œè¿™å’Œå†™ç¬”è®°è¿›è¡Œæ€»ç»“æ€è€ƒä¸€æ ·éƒ½æ˜¯å¯¹äºçŸ¥è¯†çš„ä¸€ç§è¾“å‡ºã€‚è¾“å‡ºçš„æ–¹å¼è¿˜æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚åœ¨ç®€ä¹¦ä¸Šã€ä¸ªäººåšå®¢ä¸Šã€CSDNã€åšå®¢å›­ç­‰åœ°æ–¹å‘è¡¨æ–‡ç« ã€‚ å½“ç„¶ï¼Œä¹Ÿå¹¶éæ‰€æœ‰çš„åˆ†ç±»ä¸‹é¢éƒ½éœ€è¦è¿›è¡Œè¿™ä¸‰æ­¥ã€‚ ç»†è°ˆç¬”è®°åˆ†ç±»ä¸æ ‡ç­¾åˆ†ç±»æŒ‰ç…§ä¸ªäººçš„ä¹ æƒ¯ä¸ç»éªŒï¼Œæˆ‘å°†ç¬”è®°åˆ†ä¸ºäº†äº”å¤§ç±»ï¼Œå¦‚å›¾ï¼š 1ã€ æ”¶é›†ï¼ˆæŒ‡çš„æ˜¯ä¸Šå›¾ä¸­çš„æˆ‘çš„èµ„æºæ–‡ä»¶å¤¹ï¼Œå› ä¸ºæ˜¯æœ‰é“äº‘ç¬”è®°è‡ªåŠ¨åˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼Œæ”¹åå­—ä¹‹åä»–è¿˜ä¼šåˆ›å»ºè¿™ä¸ªï¼Œæ‰€ä»¥å°±æ²¡æœ‰æ”¹åå­—ï¼‰æ”¶é›†ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„åˆ†ç±»ï¼Œç”¨äºå­˜æ”¾æœªè¿›è¡Œæ•´ç†çš„æ”¶é›†ï¼Œæœ‰é“äº‘ç¬”è®°ç”Ÿæˆçš„æˆ‘çš„èµ„æºè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œä¼šæ ¹æ®ä½ ä½¿ç”¨çš„æ’ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹åº”æ¥æºçš„å­æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚æ¥è‡ªç½‘é¡µå‰ªæŠ¥ã€å¾®ä¿¡æ”¶è—ç­‰ï¼Œæˆ‘æ–°å»ºäº†ä¸€ä¸ª æ€ç»ªä¸‡åƒ æ–‡ä»¶å¤¹ï¼Œç”¨äºä¿å­˜çªå‘çš„æƒ³æ³•ã€‚ 2ã€ å¤‡å¿˜ é¡¾åæ€ä¹‰ï¼Œå¤‡å¿˜åˆ†ç±»ç”¨äºä¸€äº›éœ€è¦æŸ¥æ‰¾ä½¿ç”¨ï¼Œä½†åˆä¸éœ€è¦å®Œå…¨è®°å¿†çš„å†…å®¹ï¼Œæ¯”å¦‚å¾…åŠäº‹é¡¹ï¼Œå¾…è¯»ä¹¦å•ï¼Œè¿˜æœ‰ä¸€äº›çç¢çš„æ–‡æœ¬æ•°æ®å¤‡ä»½ç­‰ã€‚ 3ã€ å·¥ä½œ å·¥ä½œåˆ†ç±»ä¸‹é¢ä¸»è¦æ˜¯è®°å½•ä¸€äº›ä¸šåŠ¡éœ€æ±‚ï¼Œå·¥ä½œéš¾ç‚¹ä»¥åŠå·¥ä½œæŠ€å·§ã€‚ 4ã€ å­¦ä¹  ä¸»è¦æ˜¯ä¸€äº›å…³äºç¼–ç¨‹ç›¸å…³çš„å­åˆ†ç±»æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œå’Œå·¥ä½œåˆ†ç±»éƒ½å› äººè€Œå¼‚ã€‚ 5ã€ ç”Ÿæ´» ç”Ÿæ´»åˆ†ç±»ä¸»è¦æ”¾ä¸€äº›ç”Ÿæ´»ä¸­å­¦ä¹ çš„å†…å®¹ï¼Œæ¯”å¦‚è¯»ä¹¦ç¬”è®°ã€æŠ•èµ„æŒ‡å—ï¼Œä¿é™©ç›¸å…³çš„çŸ¥è¯†ã€‚å…¶å®è¿™ä¸ªåˆ†ç±»å’Œå­¦ä¹ åˆ†ç±»å¾ˆåƒï¼Œå› ä¸ºæˆ‘å…³äºä»£ç çš„ç¬”è®°æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å°†å…¶ä»–å’Œä»£ç ä¸ç›¸å…³çš„ç¬”è®°æ”¾åœ¨ç”Ÿæ´»åˆ†ç±»å½“ä¸­ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ†ç±»çš„å±‚çº§ä¸å®œåµŒå¥—å¤ªæ·±ï¼Œæœ€å¥½ä¿æŒåœ¨ä¸‰å±‚ä»¥å†…ï¼Œè¶…è¿‡åä¸åˆ©äºæŸ¥æ‰¾ã€‚(æ‰€ä»¥æˆ‘æŠŠä¸ä»£ç ä¸ç›¸å…³çš„æ”¾åˆ°ç”Ÿæ´»åˆ†ç±»ä¸‹) æ ‡ç­¾å†è°ˆç¬”è®°çš„æ ‡ç­¾ï¼Œæ—¢ç„¶æ ‡ç­¾æ˜¯å¯¹åˆ†ç±»çš„ä¸€ç§è¡¥å……ï¼Œå› æ­¤æ˜¯éå¿…è¦çš„ï¼ŒåŒæ—¶æ ‡ç­¾ä¸èƒ½å’Œåˆ†ç±»é‡å¤ï¼Œå‚è€ƒæ·»åŠ è¿™äº›æ ‡ç­¾ã€‚ æ–‡ç« æ¥æº ï¼ˆçŸ¥ä¹ã€ç®€ä¹¦ã€CSDNç­‰ï¼‰ å…³é”®è¯ ï¼ˆç¬”è®°çš„å…³é”®ç‚¹ï¼Œå¯ä»¥æå–å‡ ä¸ªè¯è¯­å‡ºæ¥ä½œä¸ºæ ‡ç­¾ï¼‰ ä¸è¦å¤ªå…·ä½“ ï¼ˆå¤ªå…·ä½“å°±ä¼šå¯¼è‡´æ ‡ç­¾è¿‡å¤šï¼Œåè€Œä¸åˆ©äºæ ‡ç­¾çš„ä½¿ç”¨ï¼‰ åè¨€æœ€åè¯´è¯´è®°ç¬”è®°çš„åŸåˆ™ è®°ç¬”è®°æ˜¯ä¸ºäº†ç”¨ï¼Œä¸ç”¨çš„ç¬”è®°æ²¡æœ‰ä»»ä½•ä»·å€¼ ä¸èƒ½åªæ”¶é›†ä¸å­¦ä¹  å®šæœŸå›é¡¾ï¼Œæ•´ç†ä¸å½’æ¡£ï¼ˆå®šæœŸå›é¡¾æœ‰åˆ©äºç¬”è®°å†…å®¹çš„è®°å¿†ï¼‰ è®°ç¬”è®°ä¼šé‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Ÿ å¼ºè¿«ç—‡çŠ¯äº†ï¼Œä¸çŸ¥é“è¯¥æ”¾åœ¨å“ªä¸ªåˆ†ç±»ä¸‹é¢ï¼Œ åŸåˆ™æ˜¯ç”¨ï¼Œä½ è®¤ä¸ºæ”¾åœ¨å“ªä¸ªåˆ†ç±»ä¸‹é¢æœ€å¯èƒ½è¢«ç”¨åˆ°ï¼Œå°±æ”¾åœ¨é‚£ä¸ªåˆ†ç±»ä¸‹é¢ã€‚ Nullpointerçš„åšå®¢ å‚è€ƒ https://www.zhihu.com/search?type=content&amp;q=%E7%AC%94%E8%AE%B0","tags":[{"name":"è¯»ä¹¦","slug":"è¯»ä¹¦","permalink":"http://nullpointer.pw/tags/%E8%AF%BB%E4%B9%A6/"}]},{"title":"Mysqlè¡Œè½¬åˆ—è¾“å‡ºã€å®æˆ˜ã€‘","date":"2017-10-09T14:44:58.000Z","path":"Mysqlè¡Œè½¬åˆ—è¾“å‡ºã€å®æˆ˜ã€‘.html","text":"åœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œéœ€è¦å°†ä¸€è¡Œä¸€è¡Œçš„æ•°æ®è½¬æ¢æˆä¸€åˆ—æ•°æ®ã€‚æ¯”å¦‚æ¯ä¸ªäººçš„æ¯ä¸ªç§‘ç›®éƒ½æœ‰ä¸€ä¸ªåˆ†æ•°ï¼Œå¹¶åˆ†åˆ«å¯¹åº”ä¸€ä¸ªåˆ†æ•°ï¼Œä½†æ˜¯ä¸ºäº†æ›´åŠ ç›´è§‚åœ°çœ‹åˆ°ä¸€ä¸ªäººçš„æ‰€æœ‰ç§‘ç›®æˆç»©ï¼Œæ‰€ä»¥éœ€è¦å°†æ¯ä¸ªç§‘ç›®æˆç»©ç”±è¡Œè½¬æ¢æˆåˆ—ã€‚ åŸå§‹æ•°æ® id stuid name subject score 1 110 xiaoA è¯­æ–‡ 99 2 110 xiaoA æ•°å­¦ 88 3 112 xiaoB è¯­æ–‡ 69 4 112 xiaoB æ•°å­¦ 100 è¡Œæ•°æ®è½¬æ¢æˆåˆ—æ•°æ®ä¹‹å stuid name è¯­æ–‡ æ•°å­¦ 110 xiaoA 99 88 112 xiaoB 69 100 1234SELECT stuid, `name`, MAX(CASE `subject` WHEN &#x27;C001&#x27; THEN score ELSE 0 END) as &#x27;è¯­æ–‡&#x27;, MAX(CASE `subject` WHEN &#x27;C002&#x27; THEN score ELSE 0 END) as &#x27;æ•°å­¦&#x27;FROM `sys_user` GROUP BY stuid; ä»¥ä¸‹é€šè¿‡ä¸¤ä¸ªåœ¨å·¥ä½œä¸­é‡åˆ°çš„å®ä¾‹ï¼Œæ¥ä½¿ç”¨ Mysql çš„è¡Œè½¬åˆ—ã€‚ å®ä¾‹å®ä¾‹ä¸€ç½‘ç«™è¿›è¡Œæ¨å¹¿ï¼Œæ¯ä¸ªæ¨å¹¿å‘˜éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€ ID å³ pidï¼Œç°åœ¨è¦ç»Ÿè®¡æ¯ä¸ªæ¨å¹¿å‘˜çš„æ¨å¹¿æ•°æ®ï¼›éœ€è¦ç»Ÿè®¡æ¨å¹¿è¿‡æ¥çš„æ–°å¢ç”¨æˆ·ï¼Œä»¥åŠæ–°å¢ç”¨æˆ·çš„å……å€¼ä»¥åŠæ¶ˆè´¹æ•°æ®ã€‚è¿™é‡Œç®€åŒ–äº†æ•°æ®ï¼Œä¾¿äºç†è§£ã€‚ æ•°æ®è¯´æ˜ï¼š create_timeï¼š æ•°æ®ç”Ÿæˆæ—¶é—´ pidï¼š æ¨å¹¿å‘˜å”¯ä¸€ID typeï¼š æ•°æ®ç±»å‹ 1ï¼š æ–°å¢ç”¨æˆ· 2ï¼š æ–°å¢å……å€¼ 3ï¼š æ–°å¢æ¶ˆè´¹ valueï¼š å¯¹åº”çš„æ•°æ®å€¼ éœ€æ±‚ç»“æœæ ·å¼ï¼š SQL æŸ¥è¯¢ï¼š 1234567SELECT create_time,MAX(CASE type WHEN 1 THEN value ELSE 0 END) &#x27;æ–°å¢ç”¨æˆ·&#x27;,MAX(CASE type WHEN 2 THEN value ELSE 0 END) &#x27;æ–°å¢å……å€¼&#x27;,MAX(CASE type WHEN 3 THEN value ELSE 0 END) &#x27;æ–°å¢è®¢é˜…&#x27;FROM wings_companion_analytics GROUP BY create_time å®ä¾‹äºŒç»Ÿè®¡ç½‘ç«™å•æœ¬ä¹¦çš„è´­ä¹°æ¬¡æ•°ä»¥åŠè´­ä¹°é‡‘é¢ æ•°æ®è¯´æ˜ï¼š idï¼š ä¸»é”® bookIdï¼š ä¹¦çš„ ID task_idï¼š æ•°æ®ç±»å‹ 706ï¼š è´­ä¹°æ¬¡æ•° 707ï¼š è´­ä¹°é‡‘é¢ timeï¼š æ•°æ®ç”Ÿæˆæ—¶é—´ valueï¼š å¯¹åº”çš„æ•°æ®å€¼ éœ€æ±‚ç»“æœæ ·å¼ï¼š SQL æŸ¥è¯¢ï¼š 12345678SELECT bookId as &#x27;ä½œå“ID&#x27;, DATE_FORMAT(time,&#x27;%Y-%m-%d&#x27;) as &#x27;æ—¥æœŸ&#x27;, MAX(CASE task_id WHEN 706 THEN `value` ELSE 0 END) AS &#x27;è´­ä¹°æ¬¡æ•°&#x27;, MAX(CASE task_id WHEN 707 THEN `value` ELSE 0 END) AS &#x27;è´­ä¹°é‡‘é¢&#x27;from `t_task_result_day`WHERE task_id IN (706, 707)GROUP BY time, bookIdORDER BY bookId, time; èµ„æºä¸‹è½½ ç‚¹æˆ‘ä¸‹è½½å®ä¾‹æ‰€ç”¨æ•°æ® å‚è€ƒ http://blog.csdn.net/wulantian/article/details/52687640 http://blog.csdn.net/u013938484/article/details/50552747","tags":[{"name":"mysql","slug":"mysql","permalink":"http://nullpointer.pw/tags/mysql/"},{"name":"è¡Œè½¬åˆ—","slug":"è¡Œè½¬åˆ—","permalink":"http://nullpointer.pw/tags/%E8%A1%8C%E8%BD%AC%E5%88%97/"},{"name":"å®æˆ˜","slug":"å®æˆ˜","permalink":"http://nullpointer.pw/tags/%E5%AE%9E%E6%88%98/"}]},{"title":"Nginxç¼“å­˜é…ç½®ä¹‹æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜","date":"2017-09-10T22:15:36.000Z","path":"Nginxç¼“å­˜é…ç½®ä¹‹æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜.html","text":"å‰è¨€ å‰æ–‡ä»‹ç»äº†åˆ©ç”¨ nginx çš„ nginx_ngx_cache_purge æ¨¡å—æ¥å®ç°ç¼“å­˜åŠŸèƒ½ï¼Œå¹¶è®¾ç½®äº†ç¼“å­˜æ—¶é—´ä¸ºä¸€å¤©ã€‚ ä½†æ˜¯å¦‚æœå‰ç«¯ä¿®æ”¹äº†é¡µé¢ï¼Œæ¯”å¦‚é¦–é¡µï¼Œç”±äº Nginx ç¼“å­˜çš„å­˜åœ¨ï¼Œç½‘ç«™é¦–é¡µå¹¶ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œè€Œæ˜¯è¦ç­‰åˆ°ç¼“å­˜è¿‡æœŸã€‚è¿™æ ·æ˜æ˜¾ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œæ‰‹åŠ¨ä½¿ Nginx ç¼“å­˜å¤±æ•ˆã€‚ä»¥ä¸‹ä¸ºæ“ä½œè¯¦è§£ã€‚ åŸºç¡€ç¯å¢ƒ å·²ç»è®¾ç½®ç¼“å­˜çš„ Nginx æœåŠ¡å™¨ï¼Œ å‚ç…§æˆ‘ä¹‹å‰åšæ–‡ Nginxç¼“å­˜é…ç½® Nginx é…ç½®æ–‡ä»¶æ‹†åˆ†åœ¨ä¼ä¸š Nginx åº”ç”¨ä¸­ï¼ŒNginx é…ç½®æ–‡ä»¶åº”è¯¥æ ¹æ®åŸŸåä¸åŒæ¥è¿›è¡Œæ‹†åˆ†ï¼Œç„¶ååœ¨ nginx.confä¸­è¿›è¡Œincludeå¼•å…¥ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ä¾¿äºç®¡ç†é…ç½®æ–‡ä»¶ï¼Œä¾¿äºä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œ è€Œ nginx.conf æ–‡ä»¶ä¸­åªä¿ç•™ upstream ä»¥åŠå…¶ä»–é€šç”¨é…ç½®ä¿¡æ¯ã€‚ åœ¨ Nginx çš„ conf ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ includeï¼Œ ç”¨äºä¿å­˜æ‹†åˆ†çš„é…ç½®æ–‡ä»¶ã€‚ 1mkdir include æ‹†åˆ†çš„è§„åˆ™å¯ä»¥å¦‚ä¸‹ï¼š æ¡Œé¢ç‰ˆï¼ˆWEBï¼‰çš„ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘½åä¸º nginx_web.conf æ‰‹æœºç‰ˆï¼ˆWAPï¼‰çš„ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘½åä¸º nginx_wap.conf å®‰å“çš„ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘½åä¸º nginx_apk.conf è‹¹æœçš„ Nginx é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘½åä¸º nginx_ios.conf æ¸…é™¤ç¼“å­˜çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘½åä¸º purge.conf åœ¨ /usr/local/nginx/conf/nginx.conf ä¸­å¼•å…¥æ‹†åˆ†çš„é…ç½®æ–‡ä»¶ï¼Œ åœ¨é…ç½®æ–‡ä»¶ä¸­çš„ http èŠ‚ç‚¹ä¸‹è¿›è¡Œå¼•å…¥ 123456789101112http&#123; #...... # æ³¨æ„ purge.conf å¿…é¡»è¦ç¬¬ä¸€ä¸ªå¼•ç”¨ï¼ï¼ï¼ include include/purge.conf; # å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶ include include/nginx_web.conf; #include include/nginx_wap.conf; #include include/nginx_apk.conf; #include include/nginx_ios.conf;&#125; é…ç½®ç¼“å­˜æ¸…é™¤12345678910111213141516171819cd /usr/local/nginx/conf/includevi purge.conf#purge.conf æ–‡ä»¶å†…å®¹ä¸ºï¼šserver &#123; listen 80; server_name 192.168.200.129;# æ­¤å¤„æˆ‘é…ç½®çš„æ˜¯æœ¬æœºip charset utf8; location ~ /purge(/.*) &#123; allow all;# è®¿é—®æ­¤æ¥å£çš„ç™½åå•ï¼Œallä»£è¡¨æ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—®è¯¥è·¯å¾„ # tmpcache ä¸ºå‰æ–‡ä¸­ proxy_cache_path é‡Œé…ç½®çš„ keys_zone çš„å€¼ # www.domain.com$1$is_args$args è¡¨ç¤ºç¼“å­˜keyçš„åç§°ï¼Œæ¸…é™¤æŸä¸€åŸŸåä¸‹çš„ç¼“å­˜,å¯ä»¥æŒ‡å®šå‚æ•° # $1 ä»£è¡¨æ­£åˆ™åŒ¹é…ä¸­çš„ç¬¬ä¸€ç»„ proxy_cache_purge cachefile www.domain.com$1$is_args$args; &#125;&#125;# ä¿å­˜ purge.conf æ–‡ä»¶ æµ‹è¯•æ¸…é™¤ç¼“å­˜å¦‚æœè¦è¿›è¡Œç¼“å­˜æ¸…é™¤ï¼Œé¦–å…ˆéœ€è¦æœ‰ç¼“å­˜æ–‡ä»¶ï¼Œæ­¤å¤„å‚ç…§å‰æ–‡ Nginxç¼“å­˜é…ç½® ä¸­ï¼Œè®¿é—® www.domain.com/testpage2 ï¼Œåˆ·æ–°é¡µé¢ï¼Œç›´åˆ°ç¼“å­˜å·²ç»ç”Ÿæˆï¼Œå³ X-Cache çš„çŠ¶æ€ä¸º HITã€‚ è¿›å…¥ cd /tmp/cache/ ï¼ŒæŸ¥çœ‹å·²ç»ç”Ÿæˆäº†ç¼“å­˜æ–‡ä»¶ 123456# æµ‹è¯• nginx é…ç½®æ˜¯å¦æ­£ç¡®/usr/local/nginx/sbin/nginx -t# å¦‚æœæç¤º is okï¼Œè¯´æ˜é…ç½®æ²¡æœ‰é—®é¢˜ï¼Œå¦åˆ™éœ€è¦ä¿®æ”¹# é‡å¯ Nginx/usr/local/nginx/sbin/nginx -s reload æµè§ˆå™¨è®¿é—®ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡ curl å‘½ä»¤æ¥è®¿é—®ï¼‰ï¼š 1234# æ¸…é™¤keyä¸º www.domain.com/ çš„ç¼“å­˜192.168.200.129/purge/ # æ¸…é™¤ key ä¸º www.domain.com/testpage2 é¡µé¢ç¼“å­˜192.168.200.129/purge/testpage2 å¦‚æœè¿”å› åˆ™è¡¨ç¤ºæ¸…é™¤æˆåŠŸã€‚ èµ„æºä¸‹è½½ç¤ºä¾‹nginxé…ç½®æ–‡ä»¶","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"ç¼“å­˜","slug":"ç¼“å­˜","permalink":"http://nullpointer.pw/tags/%E7%BC%93%E5%AD%98/"}]},{"title":"ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šæ„Ÿè§‰åˆ°å€¦æ€ ?","date":"2017-09-04T14:14:00.000Z","path":"ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šæ„Ÿè§‰åˆ°å€¦æ€ ï¼Ÿ.html","text":"ä¸ºä»€ä¹ˆäº§ç”Ÿå€¦æ€ ï¼Ÿåˆšå¼€å§‹ æ¥æ‰‹æ–°é¡¹ç›®ã€å­¦ä¹ æ–°æŠ€èƒ½æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯å…´å¥‹ä¸å·²ã€è¸Œèº‡æ»¡å¿—ã€è¿«ä¸åŠå¾…åœ°æƒ³å¤§å±•èº«æ‰‹ã€‚ä½†æ˜¯è¿‡äº†ä¸ä¹…ï¼Œæ–°é²œæ„Ÿé€€å´åï¼Œå¤§éƒ¨åˆ†çƒ­æƒ…å°±ä¼šæ¶ˆé€€ï¼Œæœ€ç»ˆå°±ä¼šå…´è¶£ç´¢ç„¶ï¼Œç§¯ææ€§ä½ï¼Œè¿›å±•ç¼“æ…¢æˆ–è€…æ¯«æ— è¿›å±•ã€‚ è¿™æ ·çš„äº‹æƒ…å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š åˆšå¼€å§‹å­¦ä¹ é©¾é©¶ï¼Œæ˜¯ä¸æ˜¯å¾ˆå…´å¥‹ï¼Ÿè¿‡äº†å¤šä¹…ä¹‹åï¼Œå°±ä¸å†çœŸæ­£å…³å¿ƒä½ çš„è½¦äº†ï¼Ÿå¤šä¹…ä»¥åï¼Œä½ å·²ç»è§‰å¾—å®ƒå·²ç»â€œè€â€äº†ï¼Ÿ é›„å¿ƒå‹ƒå‹ƒåœ°æƒ³é”»ç‚¼å‡ºä¸€å‰¯å¥½èº«æï¼ŒåŠäº†å¥èº«å¡åï¼Œå»äº†å‡ æ¬¡ä¹‹åå°±å†æ²¡å»è¿‡äº†ï¼Ÿ â€¦â€¦ æˆ‘ä»¬å½“å¼€å§‹å€¦æ€ ï¼Œäºæ˜¯æˆ‘ä»¬åŠé€”è€ŒåºŸï¼ŒåŠªåŠ›å¯»æ‰¾æ–°äº‹ç‰©ï¼Œæ‰¾å›è‡ªå·±çœŸæ­£çš„æ¿€æƒ…ã€‚ å¼€å§‹çš„æ—¶å€™æˆ‘ä»¬çš„å…´è¶£æœ€é«˜ï¼Œè€ŒåŠ¨æœºåœ¨å¼€å§‹é˜¶æ®µå¯èƒ½ä¸é«˜ï¼Œä½†æ˜¯éšç€å–å¾—è¿›å±•ï¼Œæˆ‘ä»¬çš„åŠ¨æœºæ°´å¹³å¼€å§‹ä¸Šå‡ã€‚æ—©æœŸçš„æˆåŠŸè®©ä½ æ„Ÿè§‰åˆ°æœ‰åŠ¨åŠ›ï¼Œå†²é‡åˆ™æ¨åŠ¨ä½ å‰è¿›ã€‚ ä½†æ˜¯éšç€æ—¶é—´çš„æ¨ç§»ï¼Œç¼“æ…¢çš„æˆæœè¿›å±•åœ¨ä¸æ–­æ¶ˆè€—ä½ çš„åŠ¨æœºï¼Œæœ€ç»ˆä¼šå‘ç°åŠ¨æœºå’Œå…´è¶£éƒ½æ¿’ä¸´è°·åº•ï¼Œè¿™å°±æ˜¯é‚£å µå¢™ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ„Ÿè§‰å€¦æ€ çš„åŸå› ã€‚ ä½†æ˜¯å¦‚æœæˆ‘ä»¬ç©¿è¿‡äº†è¿™é“å¢™ï¼Œæˆ‘ä»¬çš„åŠ¨æœºã€å…´è¶£ä¼šéšç€æˆæœçš„ä¸æ–­å–å¾—è€Œä¸æ–­ä¸Šå‡åŠ å¼ºï¼Œæœ€ç»ˆæˆ‘ä»¬è·å¾—äº†æœ€å¤§çš„å›æŠ¥ï¼Œåªæ˜¯èƒ½å¤Ÿç©¿è¿‡è¿™é“å¢™çš„äººå¾ˆå°‘ã€‚ å¦‚ä½•ç©¿è¿‡è¿™é“å¢™ï¼Ÿåˆ¶å®šä¸€ä¸ªç›®æ ‡æˆ–è®¡åˆ’ï¼Œé‡‡å–â€œå®šé¢å·¥ä½œæ³•â€ï¼Œå¹¶åšå†³æŒ‰ç…§è®¡åˆ’å®Œæˆå®šé¢å·¥ä½œã€‚ é¦–å…ˆéœ€è¦ç¡®ç«‹ä¸€ä¸ªç›®æ ‡ï¼Œè§„å®šè‡ªå·±è¦åœ¨é¢„å®šç¡®å®šçš„æ—¶é—´æ®µå†…éœ€è¦å–å¾—å¤šå¤§çš„è¿›å±•ã€‚ æ¯”å¦‚ï¼š æ¯å‘¨è·‘æ­¥ 3 æ¬¡ æ¯å‘¨å†™ä¸€ç¯‡åšå®¢ æ¯å¤©çœ‹åŠå°æ—¶çš„ä¹¦ æ¯å¤©å¼¹åŠå°æ—¶çš„å‰ä»– å°†æ‰€æœ‰é‡å¤æ€§å·¥ä½œçš„é¢‘ç‡è¿›è¡Œé‡åŒ–ï¼Œæœ‰çš„ä¸€æœˆä¸€æ¬¡ï¼Œæœ‰çš„ä¸€å‘¨3æ¬¡ï¼Œæœ‰çš„åˆ™æ˜¯æ¯å¤©ä¸¤æ¬¡ã€‚å¹¶æ‰¿è¯ºå®Œæˆï¼Œæ— è®ºåˆ®é£ä¸‹é›¨ã€‚ æ‰¿è¯ºæ˜¯å®šé¢å·¥ä½œæ³•çš„æ ¸å¿ƒï¼Œé™¤äº†æƒ³æ–¹è®¾æ³•å®Œæˆè‡ªå·±çš„å·¥ä½œï¼Œä¸ç»™è‡ªå·±ç•™ä¸‹ä»»ä½•å…¶ä»–çš„é€‰æ‹©ã€‚ å¤±è´¥ä¸èƒ½è¢«æ¥å—ï¼Œå› ä¸ºä½ è®©è‡ªå·±å¤±ä¿¡ä¸€æ¬¡ï¼Œå°±ä¼šæœ‰ç¬¬äºŒæ¬¡ï¼Œå¾ˆå¿«å®šé¢åœ¨ä½ çœ¼ä¸­å°±ä¼šå˜å¾—ä¸€æ–‡ä¸å€¼ã€‚ å®šé¢å·¥ä½œæ³•çš„ä¼˜ç‚¹è¿˜å¯ä»¥å¸®ä½ å…‹æœæ„å¿—åŠ›è–„å¼±çš„é—®é¢˜ã€‚é€šè¿‡é¢„å…ˆè®¾å®šå¥½çš„å¿…é¡»è¦éµå¾ªçš„è¿‡ç¨‹ï¼Œæ¶ˆé™¤éœ€è¦ä½œå‡ºå†³ç­–çš„éƒ¨åˆ†ã€‚ å³ä¸éœ€è¦åšåˆ¤æ–­â€”â€”ä½ çŸ¥é“å¿…é¡»è¦åšï¼Œåªéœ€è¦éµä»å‘½ä»¤ï¼Œé¿å…äº†æ„å¿—åŠ›è€—å°½çš„é—®é¢˜ã€‚","tags":[{"name":"è¯»ä¹¦","slug":"è¯»ä¹¦","permalink":"http://nullpointer.pw/tags/%E8%AF%BB%E4%B9%A6/"}]},{"title":"Nginxç¼“å­˜é…ç½®","date":"2017-08-20T08:09:08.000Z","path":"Nginxç¼“å­˜é…ç½®.html","text":"å‰è¨€ æœ¬æ–‡ä»‹ç»åˆ©ç”¨ nginx çš„ nginx_ngx_cache_purge æ¨¡å—æ¥å®ç°ç¼“å­˜åŠŸèƒ½ï¼Œå‰å‡ ç¯‡æ–‡ç« ä»‹ç»äº† Nginx çš„åŠ¨é™åˆ†ç¦»ä»¥åŠ CDN æŠ€æœ¯ï¼Œåœ¨å…¶åŸºç¡€ä¸Šï¼Œå†å¯¹æ•´ä¸ªé¡µé¢è¿›è¡Œç¼“å­˜ï¼Œå°†å¤§å¤§æé«˜æœåŠ¡å™¨çš„è´Ÿè½½èƒ½åŠ›ã€‚ åŸºç¡€ç¯å¢ƒ CentOS 6.8 minimal Nginx 1.12.1 ngx_cache_purge-2.3 ç¯å¢ƒæ­å»ºNginx ä¸ nginx_ngx_cache_purge ä¸‹è½½è§£å‹ å®‰è£… wget 1yum install wget ä¸‹è½½ Nginx 1wget http://nginx.org/download/nginx-1.12.1.tar.gz è§£å‹ Nginx åˆ° /usr/local/src/ ç›®å½• 1tar -zxvf nginx-1.8.1.tar.gz -C /usr/local/src/ ä¸‹è½½ ngx_cache_purge 1wget http://labs.frickle.com/files/ngx_cache_purge-2.3.tar.gz è§£å‹åˆ° Nginx åŒä¸€çº§ç›®å½• 1tar -zxvf ngx_cache_purge-2.3.tar.gz -C /usr/local/src/ ç›®å½•ç»“æ„ä¸º 123---/usr/local/src --nginx-1.8.1 --ngx_cache_purge-2.3 è¿›å…¥ Nginx è§£å‹ç›®å½• 1cd nginx-1.8.1 å®‰è£…å¿…è¦ä¾èµ– 1yum -y install gcc pcre-devel openssl openssl-devel æ£€æŸ¥å®‰è£…ç¯å¢ƒ,å¹¶æŒ‡å®šå°†æ¥è¦å®‰è£…çš„è·¯å¾„å’Œè¦å®‰è£…çš„æ’ä»¶ 1./configure --prefix=/usr/local/nginx/ --with-http_realip_module --add-module=../ngx_cache_purge-2.3 å‚æ•°è¯´æ˜ï¼šâ€“prefixï¼š å°† nginx å®‰è£…åˆ°æ­¤ç›®å½•â€“with-http_realip_module å¯ç”¨è·å–ç”¨æˆ·çœŸå® IP æ¨¡å—â€“add-module=../ngx_cache_purge-2.3 æ·»åŠ  ngx_cache_purge æ¨¡å—ï¼Œç”¨äºç¼“å­˜ è¿›è¡Œç¼–è¯‘å®‰è£… 1make &amp;&amp; make install ç¼–è¯‘å®Œæˆåï¼Œæ²¡æœ‰å‡ºç° error ä¸ºç¼–è¯‘å®‰è£…æˆåŠŸ è®¾ç½® Nginx ç¼“å­˜ç¼–è¾‘ nginx.conf é…ç½®æ–‡ä»¶ 1vi /usr/local/nginx/conf/nginx.conf æ·»åŠ å¦‚ä¸‹é…ç½® 12345678910111213141516171819202122232425262728293031# éœ€è¦åœ¨ /tmp ç›®å½•ä¸‹åˆ›å»º cache æ–‡ä»¶å¤¹ï¼#è®¾ç½®ç¼“å­˜åŒºçš„åç§°ä¸º tmpcacheï¼Œå†…å­˜ç¼“å­˜ç©ºé—´å¤§å°ä¸º 200MBï¼Œ1 å¤©æ²¡æœ‰è¢«è®¿é—®çš„å†…å®¹è‡ªåŠ¨æ¸…é™¤ï¼Œç¡¬ç›˜ç¼“å­˜ç©ºé—´å¤§å°ä¸º 5GBï¼Œ å¦‚æœè®¿é—®é¢‘ç‡ä¸é«˜çš„è¯ï¼Œ inactive æ—¶é—´å¯ä»¥è®¾ç½®é•¿ä¸€äº›ã€‚proxy_cache_path /tmp/cache levels=1:2 keys_zone=tmpcache:200m inactive=1d max_size=5g;server &#123; listen 80; server_name www.domain.com;#ä½ çš„åŸŸå charset utf8; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Up-Calling-Line-Id $http_x_up_calling_line_id; proxy_ignore_headers X-Accel-Expires Expires Cache-Control Set-Cookie; access_log logs/access.log main; location / &#123; proxy_pass http://127.0.0.1:8080; #proxy_cache çš„å€¼æ˜¯ proxy_cache_path ä¸­çš„ keys_zone çš„å€¼ proxy_cache tmpcache; #ç¼“å­˜ key çš„å€¼ proxy_cache_key $host$uri$is_args$args; proxy_cache_valid 200 301 5m; proxy_cache_use_stale updating error timeout invalid_header http_500 http_502 http_503 http_504; expires 1m; # å°†ç¼“å­˜çš„çŠ¶æ€æ·»åŠ åˆ° Header ä¸­ add_header X-Cache &#x27;$upstream_cache_status&#x27;; &#125;&#125; å¯åŠ¨ Nginx1/usr/local/nginx/sbin/nginx å¯åŠ¨ Tomcatå¯ä»¥ä½¿ç”¨è‡ªå·±çš„é¡¹ç›®ï¼Œæˆ–è€…ä½¿ç”¨æˆ‘æä¾›çš„é¡¹ç›®æ¥è¿›è¡Œæµ‹è¯•ã€‚ 1wget https://cdn.jsdelivr.net/gh/Mosiki/blog-imgs/SpringDemo.war å°†ä¸‹è½½çš„ war åŒ…æ”¾åˆ° Tomcat çš„ webapps ç›®å½•ä¸‹ï¼Œä¿®æ”¹ war åŒ…åç§°ä¸º ROOT.war ï¼Œå¯åŠ¨ Tomcatã€‚ æµ‹è¯• Nginx ç¼“å­˜ç¼“å­˜ä¹‹å‰ æŸ¥çœ‹ /tmp/cache ç›®å½•ï¼Œ ç›®å½•ä¸‹é¢æ²¡æœ‰ä»»ä½•æ–‡ä»¶ ä¿®æ”¹æœ¬æœºï¼ˆwindowsï¼‰çš„ hosts æ–‡ä»¶ï¼Œå°†é…ç½®çš„åŸŸåæŒ‡å‘æœåŠ¡å™¨ IP 1192.168.200.129 www.domain.com æ‰“å¼€æµè§ˆå™¨è®¿é—® www.domain.com/testpage1 å‘ç° X-Cache çš„çŠ¶æ€ä¸º MISS ï¼Œè¯´æ˜æ²¡æœ‰ç¼“å­˜ã€‚ å†æ¬¡åˆ·æ–°é¡µé¢å X-Cache çš„çŠ¶æ€å·²ç»å˜æˆäº† HIT åŒæ—¶åœ¨æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹ /tmp/cache ç›®å½• cd /tmp/cache/ å‘ç°è¯¥ç›®å½•ä¸‹é¢å·²ç»å¤šäº†æ–‡ä»¶ç›®å½•ï¼Œè¿›å»ä¹‹åæ‰“å¼€æ–‡ä»¶ï¼Œå‘ç°æ­£æ˜¯åˆšåˆšè®¿é—®é¡µé¢çš„æºç ï¼Œè¯´æ˜ Nginx çš„ç¼“å­˜å·²ç»é…ç½®æˆåŠŸäº†ã€‚åªè¦æ˜¯é…ç½®çš„åŸŸåä¸‹é¢çš„é¡µé¢ï¼Œ å¦‚æœæ²¡æœ‰è¿›è¡Œè¿‡æ»¤ï¼Œéƒ½ä¼šç¼“å­˜åˆ°æœåŠ¡å™¨ã€‚å½“ç¬¬äºŒæ¬¡è®¿é—®çš„æ—¶å€™ï¼Œè¯·æ±‚ç»è¿‡ Nginx æœåŠ¡å™¨æ—¶ï¼ŒNginx ç›´æ¥è¿”å›å·²ç»ç¼“å­˜çš„é™æ€é¡µé¢ï¼Œè¿™æ ·å°†å¤§å¤§é™ä½åº”ç”¨æœåŠ¡å™¨ Tomcat çš„è´Ÿè½½ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¹¶ä¸æ˜¯è¯¥åŸŸåä¸‹çš„æ‰€æœ‰é¡µé¢éƒ½éœ€è¦è¿›è¡Œç¼“å­˜ï¼Œå¦‚æœç¼“å­˜æœ‰è¯¯ï¼Œä¼šå‡ºç°å¾ˆä¸¥é‡çš„é—®é¢˜ã€‚æ¯”å¦‚ä¸æ­£ç¡®çš„å°†åŸŸåä¸‹çš„ç”¨æˆ·ä¸­å¿ƒè¿›è¡Œäº†ç¼“å­˜ï¼Œå½“å…¶ä»–ç”¨æˆ·ä¹Ÿè¿›å…¥é¡µé¢çš„æ—¶å€™ï¼Œæ˜¾ç¤ºçš„å…¨éƒ¨éƒ½æ˜¯ç¬¬ä¸€ä¸ªè¿›å…¥è¯¥é¡µé¢ç”¨æˆ·çš„ä¿¡æ¯ã€‚å› æ­¤å»ºè®®åšç¼“å­˜æ—¶ï¼Œæœ€å¥½æ ¹æ®åŸŸåæ¥åšï¼Œ æ ¹æ®ç”¨æˆ·ä¸åŒæ˜¾ç¤ºä¸åŒçš„é¡µé¢çš„åœ°å€å°±ä¸è¦åšç¼“å­˜ã€‚å½“ç„¶ï¼Œå¦‚æœæ¥å£åœ°å€è§„èŒƒï¼Œäº¦å¯ä»¥é€šè¿‡ Nginx æ­£åˆ™åŒ¹é…è·¯å¾„çš„æ–¹å¼ï¼Œåªå°†æŸäº›åŒ¹é…çš„è·¯å¾„åšç¼“å­˜ã€‚","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"ç¼“å­˜","slug":"ç¼“å­˜","permalink":"http://nullpointer.pw/tags/%E7%BC%93%E5%AD%98/"}]},{"title":"é˜¿é‡Œäº‘CDNå®ç°ç½‘ç«™æ–‡ä»¶åŠ¨é™åˆ†ç¦»","date":"2017-08-19T23:21:04.000Z","path":"é˜¿é‡Œäº‘CDNå®ç°ç½‘ç«™æ–‡ä»¶åŠ¨é™åˆ†ç¦».html","text":"å‰è¨€ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº†å¦‚ä½•åˆ©ç”¨ Nginx æ¥å®ç°é™æ€èµ„æºè¯·æ±‚ä¸åŠ¨æ€è¯·æ±‚çš„åˆ†ç¦»ï¼Œè™½ç„¶ä¸æ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½å‹åˆ° Tomcat åº”ç”¨æœåŠ¡å™¨ï¼Œä½†æ˜¯é™æ€èµ„æºè¯·æ±‚è¿˜æ˜¯éƒ½ä¼šåˆ° ä¸»æœºä¸Šç»™ä¸»æœºå¸¦æ¥å‹åŠ›ï¼Œå› æ­¤æœ¬æ–‡é€šè¿‡åˆ©ç”¨é˜¿é‡Œäº‘çš„ CDN æŠ€æœ¯æ¥æ›´åŠ å½»åº•åœ°é™ä½åº”ç”¨è®¿é—®çš„è´Ÿè½½ã€‚ é…ç½®é™æ€èµ„æºåŸŸåå»ºç«‹ä¸€ä¸ªåªç”¨äºè¯·æ±‚é™æ€èµ„æºæ–‡ä»¶çš„äºŒçº§åŸŸåï¼Œå°†åŠ¨æ€è¯·æ±‚ä¸é™æ€è¯·æ±‚åˆ†ç¦»å¼€ã€‚ æ¯”å¦‚é™æ€èµ„æºè¯·æ±‚çš„åŸŸåæ˜¯ res.domain.com ï¼Œ åŠ¨æ€è¯·æ±‚çš„åŸŸåæ˜¯ www.domain.com é…ç½® Nginx é™æ€èµ„æºè®¾ç½®å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç«  NginxåŠ¨é™åˆ†ç¦» é˜¿é‡Œäº‘ CDN é…ç½®ç™»å½•é˜¿é‡Œäº‘ CDN æ§åˆ¶å°ï¼Œæ·»åŠ åŸŸåã€‚ éœ€è¦æ³¨æ„çš„æ˜¯èµ„æºæ–‡ä»¶åªéœ€è¦æ”¾åˆ°ä¸€å°ä¸»æœºä¸Šå³å¯ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚ æ·»åŠ  CDN åŸŸåæˆåŠŸåï¼Œå›åˆ°åŸŸåç®¡ç†é¡µé¢ï¼Œ åœ¨åŸŸååˆ—è¡¨ä¸­æ‰¾åˆ°æ–°åŠ çš„åŸŸåï¼Œå…‰æ ‡æ‚¬æµ®åˆ°è¯¥åŸŸåä¸Šï¼Œä¼šå‡ºç°ä¸€ä¸ª å¤åˆ¶ CNAME çš„æŒ‰é’®ï¼Œé€‰æ‹©å¤åˆ¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç±»ä¼¼äº res.domain.com.w.kunlunle.com çš„åŸŸåã€‚ DNS é…ç½®è¿›å…¥ä½ çš„åŸŸåçš„ DNS æœåŠ¡æä¾›å•†æ§åˆ¶å°ï¼Œæˆ‘è¿™é‡Œæ˜¯ DNSPOD ï¼Œ æ‰¾åˆ°é™æ€èµ„æºåŸŸåï¼Œæˆ‘çš„æ˜¯ res.domain.com ä¿®æ”¹è®°å½•ç±»å‹ä¸º CNAME ï¼Œè®°å½•å€¼ä¿®æ”¹ä¸ºä¸Šä¸€æ­¥å¤åˆ¶çš„ åŸŸåï¼Œå¦‚ res.domain.com.w.kunlunle.comã€‚ é€‰æ‹©ä¿å­˜ï¼Œç­‰å¾…å‡ åˆ†é’Ÿ DNS ç”Ÿæ•ˆåï¼Œè®¿é—®åŸŸåè¯•è¯•å§ï¼ æ¯”å¦‚æˆ‘çš„ res.domain.com/_res/a.jpg ï¼ˆéœ€è¦äº‹å…ˆåœ¨èµ„æºæœåŠ¡å™¨ä¸Šäº‹å…ˆæ”¾ç½®è¯¥é™æ€æ–‡ä»¶ï¼‰ å¦‚æœè®¿é—®ä¸åˆ°è¯´æ˜é…ç½®æœ‰è¯¯æˆ–è€…ç¼“å­˜è¿˜æœªç”Ÿæ•ˆã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå‘å°±æ˜¯ï¼Œè‡ªå·±çš„ç”µè„‘æœ‰å¯èƒ½å› ä¸ºç¼“å­˜æ²¡åˆ·æ–°è®¿é—®ä¸åˆ°è¯¥è·¯å¾„é™æ€èµ„æºï¼Œè€Œåˆ«äººçš„ç”µè„‘å¯ä»¥ï¼Œå¯ä»¥æ¢ä¸€å°ç”µè„‘å°è¯•è®¿é—®ï¼Œæˆ–è€…é€šè¿‡æ‰‹æœºæµè§ˆå™¨è®¿é—®å°è¯•ã€‚ Endã€‚","tags":[{"name":"åŠ¨é™åˆ†ç¦»","slug":"åŠ¨é™åˆ†ç¦»","permalink":"http://nullpointer.pw/tags/%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/"}]},{"title":"NginxåŠ¨é™åˆ†ç¦»","date":"2017-08-19T09:44:23.000Z","path":"NginxåŠ¨é™åˆ†ç¦».html","text":"å‰è¨€æœ€æ–°å…¬å¸æ–°å¼€äº†ä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®ç”±æˆ‘æ¥é…ç½®åŸºç¡€ç¯å¢ƒï¼Œä¼šå†™ä¸€ç³»åˆ—çš„æ•™ç¨‹æ¥å±•ç¤ºï¼Œä¸€ä¸ªç½‘ç«™ä»é›¶åˆ°ä¸Šçº¿çš„æ•´ä¸ªè¿‡ç¨‹ã€‚é¦–å…ˆæœ¬æ–‡ä»‹ç»èµ„æºæ–‡ä»¶çš„éš”ç¦»ã€‚ ä¸ºä»€ä¹ˆè¦å®ç°åŠ¨é™åˆ†ç¦»ä¸ºä»€ä¹ˆè¦å°†é™æ€èµ„æºæ–‡ä»¶ä¸åŠ¨æ€è¯·æ±‚è¿›è¡Œåˆ†ç¦»ï¼Ÿ ä¸ºäº†é™ä½ Tomcat æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œå¯ä»¥é€šè¿‡æœ¬æ–‡è®¾ç½®å¹¶ç»“åˆ CDN æ¥å®ç°æ¥æ›´å½»åº•åœ°é™ä½æœåŠ¡å™¨çš„è´Ÿè½½ã€‚ å¦‚å›¾æ‰€ç¤ºï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½å‹åˆ°äº†åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œ æ— è®ºé™æ€è¿˜æ˜¯åŠ¨æ€çš„è¯·æ±‚ï¼Œè¿™æ ·æµé‡å¤§çš„è¯åŠ¿å¿…ä¼šé€ æˆæœåŠ¡å™¨çš„è´Ÿè½½è¿‡é«˜ï¼Œå› ä¸ºåŠ¨é™åˆ†ç¦»æ˜¯å¿…ä¸å¯å°‘çš„ã€‚ ç¯å¢ƒä»‹ç»é¦–å…ˆè¿™æ˜¯æˆ‘ä»¬é¡¹ç›®çš„ç›®å½•ç»“æ„ï¼Œ resource ç›®å½•å’Œ _res ç›®å½•ä¸­éƒ½æ˜¯é™æ€èµ„æºæ–‡ä»¶ï¼Œå­˜æ”¾æ¯”å¦‚ js/css/img ç­‰èµ„æºã€‚è¿™ä¸¤ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æœ‰æ‰€ä¸åŒï¼Œ_res ç›®å½•ä¸‹é¢æ˜¯å‹ç¼©ç‰ˆæœ¬çš„ï¼Œæ¯”å¦‚å‹ç¼©çš„js/cssã€‚é€šè¿‡ Git æˆ–è€… SVN å°†é¡¹ç›®ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šåï¼Œé…ç½® Nginx æ¥å®Œæˆé™æ€èµ„æºçš„åˆ†ç¦»ã€‚ é¦–å…ˆçœ‹ä¸€å¼ å›¾(å›¾çš„æ¥æºæ˜¯ï¼šhttp://www.cnblogs.com/xiaoblog/p/4241086.html) å½“è¯·æ±‚ç»è¿‡ Nginx æ—¶ï¼Œå¦‚æœæ˜¯é™æ€èµ„æºçš„è¯·æ±‚ï¼Œå°±ç›´æ¥è¿”å›ä¸»æœºä¸Šé™æ€èµ„æºå³å¯ï¼Œ å¦‚æœæ˜¯åŠ¨æ€è¯·æ±‚ï¼Œåˆ™å»è¯·æ±‚ Tomcat æœåŠ¡å™¨åå†è¿”å›ã€‚å¦‚æœæµé‡ä¸æ˜¯å¾ˆå¤§ï¼Œé™æ€èµ„æºå¯ä»¥å’Œ Tomcat æœåŠ¡å™¨æ”¾åœ¨åŒä¸€å°ä¸»æœºä¸Šï¼Œå¦åˆ™éœ€è¦å°†é™æ€èµ„æºä¸ Tomcat æœåŠ¡å™¨åˆ†å¼€ã€‚ æˆ‘å¸å¯¹äºèµ„æºæ–‡ä»¶çš„åšæ³•æ˜¯æ–°å»ºä¸€ä¸ªäºŒçº§åŸŸåï¼Œè¯¥åŸŸååªç”¨äºåŠ è½½é™æ€èµ„æºæ–‡ä»¶ã€‚å¦‚ res.domain.comï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ç®€åŒ–äº†åœ¨ Nginx çš„ é…ç½®ã€‚ é…ç½® Nginxé¦–å…ˆéœ€è¦å®‰è£… Nginxï¼Œ å¯ä»¥å‚è€ƒæˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç«  Nginxå®ç°Tomcaté›†ç¾¤ã€‚è¿™é‡Œåªéœ€è¦å‚è€ƒåˆ°å®‰è£… Nginx å³å¯ã€‚ Nginx é™æ€èµ„æºé…ç½® æ‰“å¼€ Nginx é…ç½®æ–‡ä»¶ vim /usr/local/nginx/conf/nginx.conf æ·»åŠ  server 1234567891011121314151617181920212223242526272829303132333435server &#123; # åªæ¥æ”¶é™æ€èµ„æºè¯·æ±‚ listen 80; server_name res.domain.com; charset utf8; default_type text/plain; add_header Access-Control-Allow-Origin *; #access_log logs/heiyan.image.access.log click; location ~* \\.(zip|rar|gz|tar.gz|gz|exe)$ &#123; return 500; &#125; location / &#123; #èµ„æºæ–‡ä»¶çš„ç›®å½• root /home/resources; index index.html; expires 30d; default_type text/plain; &#125;&#125;server &#123; # æ¥æ”¶åŠ¨æ€è¯·æ±‚ listen 80; server_name www.domain.com; charset utf8; access_log logs/access.log main; location / &#123; proxy_pass http://127.0.0.1:8080; &#125;&#125; æ‹·è´é¡¹ç›®ä¸­èµ„æºæ–‡ä»¶åˆ°æŒ‡å®šçš„èµ„æºç›®å½•åœ¨ Nginx çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šäº†èµ„æºæ–‡ä»¶çš„ç›®å½•ä¸º /home/resources ï¼Œæ‰€ä»¥éœ€è¦å°†èµ„æºæ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ï¼Œè¿›å…¥ä¸Šæ–‡ä¸‹è½½çš„é¡¹ç›®çš„ç›®å½•ä¸­ï¼Œå°†èµ„æºç›®å½•ï¼ˆæˆ‘è¿™é‡Œæ˜¯_resç›®å½•)æ‹·è´åˆ° /home/resourcesç›®å½•ä¸‹é¢ã€‚ cp -rf _res /home/resources æ‹·è´å®Œæˆåçš„ç›®å½•åº”è¯¥æ˜¯ï¼š /home/resources/_res åœ¨ /home/resources/_res ç›®å½•ä¸‹æ”¾ä¸€å¼ å›¾ç‰‡ a.jpg ï¼Œç”¨äºæµ‹è¯•ã€‚ æµ‹è¯•é™æ€èµ„æºè·å–å¯åŠ¨ Nginx æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š http://res.domain.com/_res/a.jpg å¦‚æœæ˜¯åŠ¨æ€è¯·æ±‚ï¼Œåˆ™ä½¿ç”¨ http://www.domain.com åŸŸå è¿”å›ç»“æœï¼š å› ä¸ºé™æ€èµ„æºæ–‡ä»¶åŒ…å« css/js ç­‰æ–‡ä»¶ï¼Œä¿®æ”¹æäº¤åéœ€è¦æ‹·è´å¢é‡ä¸ä¿®æ”¹çš„æ–‡ä»¶åˆ° /home/resources ç›®å½•ä¸‹ï¼Œå¦‚æœå«Œéº»çƒ¦ï¼Œå¯ä»¥ç›´æ¥åœ¨ Nginx é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½® è·¯å¾„ä¸ºé¡¹ç›®çš„èµ„æºæ–‡ä»¶å¤¹æ ¹è·¯å¾„ï¼Œæ¯”å¦‚ /home/wide-api/src/main/java/resources/_resï¼Œ è¿™ç§åœ¨æ›´æ–°ä»£ç ä¹‹åï¼Œå¯ä»¥ç›´æ¥è¯·æ±‚åˆ°æ–°çš„èµ„æºæ–‡ä»¶ã€‚ä¹‹åä¼šå†™ä¸€ç¯‡é€šè¿‡é˜¿é‡Œäº‘CDNæ¥å®Œæˆé™æ€åˆ†ç¦»ã€‚ æ³¨ï¼š ç”±äºæˆ‘çš„æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šçš„ Nginx è¿›è¡Œæµ‹è¯•ï¼Œä¹Ÿæ²¡æœ‰åŸŸåï¼Œä¸”æ˜¯minimalç‰ˆæœ¬ç³»ç»Ÿï¼Œæ²¡æœ‰æ¡Œé¢ç¯å¢ƒï¼Œæ‰€ä»¥éœ€è¦é…ç½®å®¿ä¸»æœºçš„hostsï¼Œ åœ¨å®¿ä¸»æœºçš„æµè§ˆå™¨ä¸­è®¿é—®ã€‚åœ¨çœŸå®æœåŠ¡å™¨ä¸”æœ‰è‡ªå·±ç»‘å®šåˆ°æœåŠ¡å™¨ä¸ŠåŸŸåçš„å°±ç›´æ¥æµ‹è¯•å³å¯ã€‚ ä½¿ç”¨ SwitchHosts è½¯ä»¶ é…ç½® hostsï¼Œæˆ‘çš„è™šæ‹Ÿæœº ip ä¸º192.168.200.129 1192.168.200.129 www.domain.com res.domain.com","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"åŠ¨é™åˆ†ç¦»","slug":"åŠ¨é™åˆ†ç¦»","permalink":"http://nullpointer.pw/tags/%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB/"}]},{"title":"CentOSå¿«é€Ÿå®‰è£…","date":"2017-08-18T23:40:27.000Z","path":"CentOSå¿«é€Ÿå®‰è£….html","text":"å‰è¨€æœ€è¿‘å­¦ä¹ è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨åˆ° Linux ç³»ç»Ÿï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æœåŠ¡å™¨ï¼Œå› æ­¤é€šè¿‡è™šæ‹Ÿæœºæ¥å®Œæˆã€‚æœ¬æ–‡ä¸ä»å¤´å¼€å§‹ä»‹ç»è™šæ‹Ÿæœºçš„å®‰è£…ï¼Œåªè®²è§£ è™šæ‹Ÿæœºè‡ªåˆ¶é•œåƒ å¤‡ä»½çš„å¿«é€Ÿè¿˜åŸï¼Œå¦‚æœä½ éœ€è¦ä»å¤´å¼€å§‹å®‰è£…çš„ï¼Œè¯·å¦å¯»æ•™ç¨‹ã€‚æœ¬æ–‡ä¸­æ¶‰åŠçš„é•œåƒä¼šæä¾›ä¸‹è½½åœ°å€ï¼Œä»¥ä¾›å‚è€ƒã€‚ å­¦ä¹ è¿‡ç¨‹ä¸­å®‰è£…è™šæ‹Ÿæœºæ—¶æ€»æ˜¯ä¼šé‡åˆ°ä¸€äº›éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´æ‰èƒ½è§£å†³çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸èƒ½è”ç½‘ã€æ•°æ®åº“è¿æ¥ä¸ä¸Šã€ssh è¿æ¥ä¸äº†ç­‰é—®é¢˜ï¼Œä¸ºäº†ä¾¿äºå­¦ä¹ ï¼Œæœ¬äººå°†å®‰è£…å¥½çš„ç³»ç»Ÿå¯¼å‡ºä¸ºé•œåƒæ–‡ä»¶ï¼Œä»¥åå¦‚æœéœ€è¦æ·»åŠ è™šæ‹Ÿæœºæ—¶ï¼Œç›´æ¥è¿˜åŸé•œåƒä¿®æ”¹éƒ¨åˆ†é…ç½®å³å¯ï¼Œä»¥ä¸‹ä¸ºæ•™ç¨‹ã€‚ ç¯å¢ƒå‡†å¤‡ è™šæ‹Ÿæœºè½¯ä»¶ VMware Workstation 11 ç³»ç»Ÿé•œåƒç‰ˆæœ¬ CentOS 6.8 minimal (å‘½ä»¤è¡Œç‰ˆæœ¬ï¼Œæ— æ¡Œé¢) è‡ªå®šä¹‰é•œåƒä»¥åŠVMwareä¸‹è½½ é“¾æ¥ï¼šhttp://pan.baidu.com/s/1nuKxhpf å¯†ç ï¼š8dt8è‹¥é“¾æ¥å¤±æ•ˆï¼Œå‘é‚®ä»¶ç»™æˆ‘è¡¥é“¾æ¥ è”ç³»æˆ‘ VMware é…ç½®éœ€è¦å®‰è£…çš„è™šæ‹Ÿæœºé‡‡å– NAT æ–¹å¼è”ç½‘ï¼Œå› æ­¤ éœ€è¦åœ¨ VMware ä¸­é…ç½®ç½‘å…³åœ°å€ã€‚ æ‰“å¼€è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ï¼Œè®¾ç½®å­ç½‘ IP ç‚¹å‡» NAT è®¾ç½®ï¼Œè®¾ç½®ç½‘å…³åœ°å€IP ï¼ˆç½‘å…³ç›¸å½“äºä¸€ä¸ªè·¯ç”±å™¨ï¼‰ï¼Œæ³¨æ„ç½‘å…³ IP è¦å’Œå­ç½‘ IP å¤„äºåŒä¸€ä¸ªç½‘æ®µã€‚å¦‚192.168.200.x å¯¼å…¥é•œåƒæ–‡ä»¶ä¾æ¬¡é€‰æ‹©èœå•ï¼Œ æ–‡ä»¶â€“&gt;æ‰“å¼€â€“&gt; æ‰¾åˆ°ä¸‹è½½é•œåƒè§£å‹çš„æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©192.168.200.129.ovf æ–‡ä»¶ è®¾ç½®è™šæ‹Ÿæœºåç§°å’Œè™šæ‹Ÿæœºä¿å­˜è·¯å¾„ï¼Œé€‰æ‹©å¯¼å…¥ã€‚ ç¨ç­‰ä¸€ä¼šå„¿å¯¼å…¥æˆåŠŸåï¼Œå¼€å¯è™šæ‹Ÿæœºã€‚ è™šæ‹Ÿæœºç½‘ç»œé…ç½®ç™»å½•è´¦å·ï¼šroot å¯†ç ï¼š123456 åˆšå®‰è£…å®Œæ˜¯æ— æ³• ping é€šå¤–ç½‘çš„ï¼Œéœ€è¦ä¿®æ”¹ç½‘ç»œé…ç½®ï¼Œ å½“å‰é•œåƒå·²ç»è®¾ç½®äº†é™æ€ ipï¼Œä¾¿äºä½¿ç”¨ã€‚ ä¿®æ”¹ 70-persistent-net.rules æ–‡ä»¶ vi /etc/udev/rules.d/70-persistent-net.rules æ³¨é‡Šæ‰ eth0 æ‰€åœ¨è¡Œï¼Œç»“æœåº”è¯¥ä¸ºï¼š 1234# PCI device 0x8086:0x100f (e1000)#SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;00:0c:29:30:a4:b5&quot;, ATTR&#123;type&#125;==&quot;1&quot;, KERNEL==&quot;eth*&quot;, NAME=&quot;eth0&quot;# PCI device 0x8086:0x100f (e1000)SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;00:0c:29:cd:05:ea&quot;, ATTR&#123;type&#125;==&quot;1&quot;, KERNEL==&quot;eth*&quot;, NAME=&quot;eth1&quot; ä¿®æ”¹ç½‘ç»œé…ç½®æ–‡ä»¶ï¼Œè®¾ç½®é™æ€IPåœ°å€å’Œç½‘å…³åœ°å€vi /etc/sysconfig/network-scripts/ifcfg-eth0 1234567891011DEVICE=eth1 # ä¿®æ”¹eth0 ä¸ºeth1TYPE=EthernetONBOOT=yesNM_CONTROLLED=yesBOOTPROTO=staticIPADDR=192.168.200.132 # ä¿®æ”¹ä¸ºæƒ³è¦çš„é™æ€ipåœ°å€ï¼Œ å¦‚æœç½‘å…³åœ°å€ä¸º192.168.100.2 åˆ™ipåœ°å€ä¸º 192.168.100.x xä¸º1-254ï¼Œä¸”ä¸ä¸ç½‘å…³åœ°å€é‡å¤GATEWAY=192.168.200.2 # ä¿®æ”¹ä¸ºä½ è™šæ‹Ÿæœºçš„ç½‘å…³åœ°å€ IPNAME=&quot;System eth0&quot;NETMASK=255.255.255.0DNS1=8.8.8.8DNS2=4.4.4.4 é‡å¯è™šæ‹Ÿæœº reboot è¿™æ˜¯å¿…é¡»çš„æ­¥éª¤ï¼ æ£€éªŒæ˜¯å¦ä¿®æ”¹ç”Ÿæ•ˆ é‡å¯ç™»å½•æˆåŠŸåï¼Œ è¾“å…¥ ip addrï¼Œ å¦‚æœä½ æ˜¾ç¤ºçš„å’Œæˆ‘ä¸€è‡´ï¼Œåˆ™æ˜¯æ­£ç¡®çš„ã€‚ å¦‚æœä½ çš„å‡ºç°äº†ä¸¤æ¡ inetï¼Œ è¯´æ˜ç¬¬ 1 æ­¥ï¼Œ å’Œç¬¬ 2 æ­¥æ²¡æœ‰é…ç½®æ­£ç¡®ã€‚æ­¤æ—¶ ping ä¸€ä¸‹ç™¾åº¦ï¼Œå‘ç°å·²ç»å¯ä»¥ ping é€šäº†ã€‚ è‡³æ­¤ï¼Œè™šæ‹Ÿæœºå·²ç»é…ç½®å¥½äº†ã€‚å¯ä»¥é€šè¿‡ SSH è½¯ä»¶è¿›è¡Œè¿æ¥äº†ã€‚ å»ºè®®ï¼šè™šæ‹Ÿæœºå®‰è£…å®Œæˆåï¼Œå¯¹å…¶è¿›è¡Œå¿«ç…§ï¼Œé˜²æ­¢å¼„åäº†è¿˜éœ€è¦é‡æ–°å®‰è£…ã€‚ åœ¨å¿«ç…§ç®¡ç†å™¨ä¸­ï¼Œå¯ä»¥é€‰æ‹©ä¿å­˜çš„å¿«ç…§ï¼Œè¿˜åŸåˆ°å¿«ç…§æ—¶çš„ç³»ç»Ÿã€‚","tags":[{"name":"centos","slug":"centos","permalink":"http://nullpointer.pw/tags/centos/"},{"name":"è™šæ‹Ÿæœº","slug":"è™šæ‹Ÿæœº","permalink":"http://nullpointer.pw/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"}]},{"title":"Javaä¹‹wordå¯¼å‡ºä¸‹è½½","date":"2017-07-27T14:12:07.000Z","path":"Javaä¹‹wordå¯¼å‡ºä¸‹è½½.html","text":"å‰è¨€æœ€è¿‘é‡åˆ°é¡¹ç›®éœ€æ±‚éœ€è¦å°†æ•°æ®åº“ä¸­çš„éƒ¨åˆ†æ•°æ®å¯¼å‡ºåˆ° word ä¸­ï¼Œå…·ä½“æ˜¯åœ¨ä¸€ä¸ªæ–°é—»åˆ—è¡¨ä¸­å°†é€‰ä¸­çš„æ–°é—»å¯¼å‡ºåˆ°ä¸€ä¸ª word ä¸­ã€‚å‚è€ƒäº†ç½‘ä¸Šä¸€äº›æ•™ç¨‹ï¼Œå®ç°äº†è¯¥åŠŸèƒ½ï¼Œåœ¨æ­¤è®°å½•ä¸‹æ¥ã€‚ å¯¼å‡ºç»“æœå¦‚ä¸‹ï¼š å›¾ä¸­ä¸ºå¯¼å‡ºçš„å…¶ä¸­ä¸¤æ¡æ–°é—»ã€‚ æœç´¢ç½‘ä¸Šå¯¼å‡º word çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œä½†æ˜¯å¾ˆå¤šéƒ½æ˜¯ä¸€ç¬”å¸¦è¿‡ï¼Œæœ‰ç¤ºä¾‹ä»£ç çš„åªæ‰¾åˆ°äº† POI å¯¼å‡ºï¼Œå’Œé€šè¿‡ FreeMarker æ–¹å¼å¯¼å‡ºï¼Œä½†æ˜¯åªæ˜¯å…·æœ‰å‚è€ƒæ„ä¹‰ã€‚æœ¬æ–‡é‡‡å–ä½¿ç”¨ FreeMark æ–¹å¼ã€‚ å®ç°æ­¥éª¤ Maven å·¥ç¨‹å¼•å…¥FreeMarker çš„ä¾èµ–ï¼Œé Maven å·¥ç¨‹æ·»åŠ  jar åŒ… 12345&lt;dependency&gt; &lt;groupId&gt;org.freemarker&lt;/groupId&gt; &lt;artifactId&gt;freemarker&lt;/artifactId&gt; &lt;version&gt;2.3.26-incubating&lt;/version&gt;&lt;/dependency&gt; åˆ›å»º word æ¨¡æ¿ æ–°å»º word æ›¿æ¢å†…å®¹ä¸ºå ä½ç¬¦ å¦å­˜æ¨¡æ¿ä¸º XML æ–‡ä»¶ ä½¿ç”¨ NotePad++ æ‰“å¼€ xml æ–‡ä»¶ é€‰ä¸­å…¨éƒ¨å†…å®¹ï¼Œåˆ°è¿™é‡Œè¿›è¡Œæ ¼å¼åŒ– å°†åŸå†…å®¹æ›¿æ¢ä¸ºæ ¼å¼åŒ–åçš„å†…å®¹ å› ä¸ºæˆ‘çš„ word çš„å†…å®¹æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ ä¸€ä¸ª freemarer æ ‡ç­¾æ ‡è¯† æ‰¾åˆ° &lt;w:document&gt; å…ƒç´ ä¸‹é¢çš„ &lt;w:body&gt; å…ƒç´ ï¼Œæ·»åŠ  &lt;#list newsList news&gt; ï¼Œ å¹¶åœ¨&lt;/w:body&gt;ç»“æŸæ ‡ç­¾ä¹‹å‰é—­åˆ &lt;/#list&gt;ï¼Œ æ­¤å¤„çš„ newsList ä¸ºåå°è¯»å–æ¨¡æ¿æ—¶éœ€è¦éœ€è¦æ¸²æŸ“æ•°æ®mapé›†åˆçš„keyï¼Œ å…¶æ‰€å¯¹åº”çš„æ˜¯ä¸€ä¸ªlisté›†åˆã€‚ æ›¿æ¢æ¨¡æ¿ä¸­çš„å ä½ç¬¦ &lt;w:t&gt;$&#123;news.title&#125;&lt;/w:t&gt; ä¸ &lt;w:t&gt;$&#123;news.content&#125;&lt;/w:t&gt; ä¸ºéå†é›†åˆçš„å€¼ï¼Œè¿™é‡Œçš„ FreeMarker è¯­æ³•å¯ä»¥å‚è€ƒç½‘ä¸Šçš„æ•™ç¨‹ã€‚ ä¿å­˜ä¸º FreeMarker çš„æ¨¡æ¿æ–‡ä»¶ï¼Œåç¼€ä¸º ftl æ ¼å¼ï¼Œæ‹·è´åˆ°é¡¹ç›®ä¸­ ç¼–å†™ä»£ç  ä»æ•°æ®ä¸­æŸ¥è¯¢æ•°æ®é›†åˆæ”¾å…¥Mapä¸­ï¼Œ è°ƒç”¨å·¥å…·æ–¹æ³•ï¼Œè¿”å›æµ12345Map&lt;String, Object&gt; root = new HashMap&lt;String, Object&gt;();root.put(&quot;newsList&quot;, newsList);//newsListä¸ºæ–°é—»å¯¹è±¡é›†åˆString template = &quot;/temp.ftl&quot;; //æ¨¡æ¿æ–‡ä»¶çš„åœ°å€ByteArrayOutputStream outputStream = WordUtil.process(root, template);return outputStream; è°ƒç”¨ä¸‹è½½å·¥å…·ç±»è¿›è¡Œä¸‹è½½å³å¯ã€‚1DownloadUtil.download(byteArrayOutputStream, response, returnname); æ³¨ï¼šåœ¨å®ç°åŠŸèƒ½çš„æ—¶å€™ï¼Œç”±äºé‡‡å–çš„æ˜¯ ajax è¯·æ±‚æ–¹å¼ï¼Œå¯¼è‡´åªæ˜¯å°†æµå†™å…¥ Response æ—¶ï¼Œ Response ä¸º xml æ ¼å¼çš„æ•°æ®ã€‚ä½†æ˜¯æƒ³è¦å®ç°çš„æ•ˆæœæ˜¯å¼¹å‡ºä¸‹è½½æ¡†ï¼Œä¸‹è½½ word æ–‡æ¡£ã€‚æœ€åæŸ¥è¯¢èµ„æ–™ï¼Œä¿®æ”¹ajaxè¯·æ±‚ä¸ºformè¡¨å•æäº¤æ–¹å¼(ajax form)ï¼Œæ‰å¼¹å‡ºä¸‹è½½æ¡†å®ç°äº†åŠŸèƒ½ã€‚ æ–‡ç« æ¶‰åŠå·¥å…·ç±»12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758//WordUtil.javaimport java.io.BufferedWriter;import java.io.ByteArrayOutputStream;import java.io.OutputStreamWriter;import java.io.Writer;import java.util.Map;import freemarker.template.Configuration;import freemarker.template.Template;public final class WordUtil &#123; private static Configuration configuration = null; private WordUtil() &#123; throw new AssertionError(); &#125; /** * æ ¹æ®æ¨¡æ¿ç”Ÿæˆç›¸åº”çš„æ–‡ä»¶ * @param root ä¿å­˜æ•°æ®çš„map * @param template æ¨¡æ¿æ–‡ä»¶çš„åœ°å€ * @param path ç”Ÿæˆçš„wordæ–‡æ¡£è¾“å‡ºåœ°å€ * @return */ public static synchronized ByteArrayOutputStream process(Map&lt;?, ?&gt; root, String template) &#123; if (null == root ) &#123; throw new RuntimeException(&quot;æ•°æ®ä¸èƒ½ä¸ºç©º&quot;); &#125; if (null == template) &#123; throw new RuntimeException(&quot;æ¨¡æ¿æ–‡ä»¶ä¸èƒ½ä¸ºç©º&quot;); &#125; ByteArrayOutputStream outputStream = new ByteArrayOutputStream(); String templatePath = template.substring(0, template.lastIndexOf(&quot;/&quot;)); String templateName = template.substring(template.lastIndexOf(&quot;/&quot;) + 1, template.length()); if (null == configuration) &#123; configuration = new Configuration(Configuration.VERSION_2_3_23); // è¿™é‡ŒConfigurantionå¯¹è±¡ä¸èƒ½æœ‰ä¸¤ä¸ªï¼Œå¦åˆ™å¤šçº¿ç¨‹è®¿é—®ä¼šæŠ¥é”™ configuration.setDefaultEncoding(&quot;utf-8&quot;); configuration.setClassicCompatible(true); &#125; configuration.setClassForTemplateLoading(WordUtil.class, templatePath); Template t = null; try &#123; t = configuration.getTemplate(templateName); Writer w = new BufferedWriter(new OutputStreamWriter(outputStream, &quot;utf-8&quot;)); t.process(root, w); // è¿™é‡Œwæ˜¯ä¸€ä¸ªè¾“å‡ºåœ°å€ï¼Œå¯ä»¥è¾“å‡ºåˆ°ä»»ä½•ä½ç½®ï¼Œå¦‚æ§åˆ¶å°ï¼Œç½‘é¡µç­‰ w.close(); &#125; catch (Exception e) &#123; throw new RuntimeException(e); &#125; return outputStream; &#125;&#125; 1234567891011121314151617181920212223242526272829//DownloadUtil.javaimport java.io.ByteArrayOutputStream;import java.io.File;import java.io.FileInputStream;import java.io.IOException;import java.io.OutputStream;import javax.servlet.ServletOutputStream;import javax.servlet.http.HttpServletResponse;import org.apache.commons.io.FileUtils;public class DownloadUtil &#123; /** * @param byteArrayOutputStream å°†æ–‡ä»¶å†…å®¹å†™å…¥ByteArrayOutputStream * @param response HttpServletResponse å†™å…¥response * @param returnName è¿”å›çš„æ–‡ä»¶å */ public static void download(ByteArrayOutputStream byteArrayOutputStream, HttpServletResponse response, String returnName) throws IOException&#123; response.setContentType(&quot;application/msword&quot;); response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + returnName); response.setContentLength(byteArrayOutputStream.size()); OutputStream outputstream = response.getOutputStream(); //å–å¾—è¾“å‡ºæµ byteArrayOutputStream.writeTo(outputstream); //å†™åˆ°è¾“å‡ºæµ byteArrayOutputStream.close(); //å…³é—­ outputstream.flush(); //åˆ·æ•°æ® &#125;&#125; æºç ä¸‹è½½ç‚¹æˆ‘ä¸‹è½½ å‚è€ƒé“¾æ¥ http://itindex.net/detail/55080-springboot-freemarker-%E6%A0%BC%E5%BC%8F","tags":[{"name":"word","slug":"word","permalink":"http://nullpointer.pw/tags/word/"},{"name":"freemarker","slug":"freemarker","permalink":"http://nullpointer.pw/tags/freemarker/"}]},{"title":"Javaé…ç½®åˆ†ç¦»ä¹‹Springè¿œç¨‹é…ç½®","date":"2017-07-16T01:14:30.000Z","path":"Javaé…ç½®åˆ†ç¦»ä¹‹è¿œç¨‹é…ç½®.html","text":"å‰è¨€é›†ç¾¤åº”ç”¨çš„é…ç½®æ–‡ä»¶å¦‚æœå†™åœ¨é¡¹ç›®çš„ resources ç›®å½•ä¸‹é¢ï¼Œå½“é‡åˆ°éœ€è¦ä¿®æ”¹æŸä¸€ä¸ªé…ç½®å€¼æ—¶ï¼Œéœ€è¦å°†é›†ç¾¤çš„æ‰€æœ‰åº”ç”¨çš„é…ç½®ä¿¡æ¯è¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä¸”å°†æœºå¯†çš„é…ç½®ä¿¡æ¯æ¯”å¦‚æ•°æ®åº“è´¦å·å¯†ç å¦‚æœä¸è¿›è¡ŒåŠ å¯†é…ç½®åœ¨é¡¹ç›®ä¸­å¾ˆå±é™©ï¼Œä¸€æ—¦å‘ç”Ÿä»£ç æ³„éœ²é—®é¢˜ï¼Œåæœå¾ˆä¸¥é‡ã€‚ ä¸ºäº†é¿å…ä¸Šè¿°æƒ…å†µå‘ç”Ÿï¼Œå°†é…ç½®ä¿¡æ¯å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥ã€ç”¨æˆ·åã€ä»¥åŠå¯†ç ï¼Œé€šè¿‡ Config é¡¹ç›®çš„ä¸€ä¸ªæ¥å£æä¾›è·å–é…ç½®ä¿¡æ¯ã€‚Config é¡¹ç›®åªç”¨äºè¯»å–é…ç½®ä¿¡æ¯ã€‚ è¿œç¨‹é…ç½®ä¸€ï¼‰æ–°å»ºç±» RemoteProperties 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import com.alibaba.fastjson.JSONArray;import com.alibaba.fastjson.JSONObject;public class RemoteProperties implements InitializingBean, FactoryBean&lt;Properties&gt; &#123; private String url = null; private Properties properties = new Properties(); @Override public Properties getObject() throws Exception &#123; return properties; &#125; @Override public Class&lt;?&gt; getObjectType() &#123; return properties.getClass(); &#125; @Override public boolean isSingleton() &#123; return true; &#125; @Override public void afterPropertiesSet() throws Exception &#123; loadProperty(); &#125; public String getUrl() &#123; return url; &#125; public void setUrl(String url) &#123; this.url = url; &#125; private void loadProperty() &#123; if (StringUtil.strIsNull(url)) return; String content = HttpClientUtil.urlGet(url); JSONObject object = JSONObject.parseObject(content); JSONArray data = object.getJSONArray(&quot;datasource&quot;); for (Object obj : data) &#123; JSONObject jsonObject = (JSONObject) obj; String key = obj.getString(&quot;key&quot;); String value = obj.getString(&quot;value&quot;); properties.put(key, value); &#125; &#125;&#125; æ­¤ç±»ç”¨äºå‘é€è¯·æ±‚è·å–é…ç½®ä¿¡æ¯ï¼Œè¯·æ±‚è¿”å›æ ¼å¼ä¸º JSON çš„é…ç½®ä¿¡æ¯, å¦‚ï¼š 1234567891011121314151617181920&#123; &quot;datasource&quot;:[ &#123; &quot;value&quot;:&quot;com.mysql.jdbc.Driver&quot;, &quot;key&quot;:&quot;jdbc.driver&quot; &#125;, &#123; &quot;value&quot;:&quot;jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=utf8&quot;, &quot;key&quot;:&quot;jdbc.url&quot; &#125;, &#123; &quot;value&quot;:&quot;root&quot;, &quot;key&quot;:&quot;jdbc.username&quot; &#125;, &#123; &quot;value&quot;:&quot;root&quot;, &quot;key&quot;:&quot;jdbc.password&quot; &#125; ]&#125; äºŒï¼‰ç¼–å†™ Spring é…ç½®æ–‡ä»¶ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:dubbo=&quot;http://code.alibabatech.com/schema/dubbo&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;&gt; &lt;bean id=&quot;propertyConfigurerUserServer&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt; &lt;property name=&quot;properties&quot;&gt; &lt;bean id=&quot;remoteProperties&quot; class=&quot;com.craft.partner.server.util.RemoteProperties&quot; p:url=&quot;http://api.xxx.com/config&quot;/&gt; &lt;!--è¿œç¨‹é…ç½®æä¾›æ¥å£--&gt; &lt;/property&gt; &lt;!--è¿˜å¯ä»¥åŠ è½½æœ¬åœ°çš„propertiesæ–‡ä»¶--&gt; &lt;property name=&quot;locations&quot;&gt; &lt;list&gt; &lt;value&gt;classpath:configure.properties&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot; destroy-method=&quot;close&quot; p:driverClass=&quot;$&#123;jdbc.driver&#125;&quot; p:jdbcUrl=&quot;$&#123;jdbc.url&#125;&quot; p:user=&quot;$&#123;jdbc.username&#125;&quot; p:password=&quot;$&#123;jdbc.password&#125;&quot;&gt; &lt;property name=&quot;initialPoolSize&quot; value=&quot;10&quot; /&gt; &lt;property name=&quot;minPoolSize&quot; value=&quot;10&quot; /&gt; &lt;property name=&quot;maxPoolSize&quot; value=&quot;50&quot; /&gt; &lt;property name=&quot;maxStatements&quot; value=&quot;0&quot; /&gt; &lt;property name=&quot;maxIdleTime&quot; value=&quot;600&quot; /&gt; &lt;property name=&quot;idleConnectionTestPeriod&quot; value=&quot;300&quot; /&gt; &lt;property name=&quot;acquireIncrement&quot; value=&quot;5&quot; /&gt; &lt;property name=&quot;autoCommitOnClose&quot; value=&quot;true&quot; /&gt; &lt;property name=&quot;checkoutTimeout&quot; value=&quot;2000&quot; /&gt; &lt;/bean&gt; &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt; &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt; &lt;tx:attributes&gt; &lt;tx:method name=&quot;save*&quot; propagation=&quot;REQUIRED&quot; /&gt; &lt;tx:method name=&quot;update*&quot; propagation=&quot;REQUIRED&quot; /&gt; &lt;tx:method name=&quot;delete*&quot; propagation=&quot;REQUIRED&quot; /&gt; &lt;tx:method name=&quot;find*&quot; read-only=&quot;true&quot; /&gt; &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot; read-only=&quot;true&quot;/&gt;&lt;!--å…¶ä»–ä¸ç¬¦åˆè§„èŒƒçš„æ–¹æ³•åªå…è®¸è¯»æ“ä½œ--&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;aop:config expose-proxy=&quot;false&quot;&gt; &lt;aop:pointcut id=&quot;serviceMethod&quot; expression=&quot;execution(* com.craft.partner.server.service.*.*(..))&quot;/&gt; &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;serviceMethod&quot;/&gt; &lt;/aop:config&gt;&lt;/beans&gt; æ³¨æ„ï¼š é€šè¿‡ p:url=â€åœ°å€â€ çš„æ–¹å¼ï¼Œè°ƒç”¨ RemoteProperties çš„æ–¹æ³•ï¼Œå‘é€è¯·æ±‚è·å–é…ç½®ä¿¡æ¯ï¼Œé€šè¿‡ Spring è¿›è¡Œæ³¨å…¥ã€‚æ³¨å…¥åï¼Œå¯ä»¥é€šè¿‡ p:å±æ€§ çš„æ–¹å¼è·å–é…ç½®ã€‚ å‚è€ƒ http://www.cnblogs.com/yjmyzz/p/how-to-load-remote-config-in-spring.html","tags":[{"name":"è¿œç¨‹é…ç½®","slug":"è¿œç¨‹é…ç½®","permalink":"http://nullpointer.pw/tags/%E8%BF%9C%E7%A8%8B%E9%85%8D%E7%BD%AE/"}]},{"title":"Javaä¸Šä¼ å›¾ç‰‡åˆ°OSSçš„å®ç°","date":"2017-05-06T15:01:57.000Z","path":"Javaä¸Šä¼ å›¾ç‰‡åˆ°OSSçš„å®ç°.html","text":"å‰è¨€ï¼š ä»¥å‰åšé¡¹ç›®ç”¨çš„éƒ½æ˜¯å¼€æºçš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚FastDFSã€‚æœ€è¿‘å‡ å¹´ï¼Œéšç€äº‘çš„å‘å±•ï¼Œå›½å†…å¤–çš„å·¨å¤´å…¬å¸ä¹Ÿç›¸åº”çš„æ¨å‡ºäº†ç›¸å…³å•†ç”¨çš„ç±»ä¼¼äº§å“ã€‚æ¯”å¦‚Amazon S3ï¼Œé˜¿é‡Œäº‘çš„OSSï¼Œè…¾è®¯äº‘çš„COSã€‚ä»Šå¤©æˆ‘é€‰æ‹©ä½¿ç”¨é˜¿é‡Œäº‘çš„OSSæ¥ä½œä¸ºä¾‹å­ï¼Œæ¥å®ç°å›¾ç‰‡çš„ä¸Šä¼ ã€‚ å‡†å¤‡å·¥ä½œé˜¿é‡Œäº‘OSSå®˜æ–¹æ–‡æ¡£åœ°å€ ä¸€ã€å¼€é€šé˜¿é‡Œäº‘OSS ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°å¼€é€šOSSæœåŠ¡ï¼Œå¹¶åˆ›å»ºAccessKeyIdå’ŒAccessKeySecret åœ¨OSSæ§åˆ¶é¢æ¿ä¸Šæ–°å»ºBucket è¿›å…¥æ–°å»ºçš„Bucketé€‰æ‹©å·¦ä¾§çš„Objectç®¡ç†ï¼Œæ–°å»ºä¸€ä¸ªimgçš„æ–‡ä»¶å¤¹ï¼Œä¾¿äºå­˜å‚¨å½’ç±» äºŒã€mavené¡¹ç›®ä¸­å¼•å…¥ä¾èµ–åœ¨mavenå·¥ç¨‹ä¸­çš„pom.xmlæ·»åŠ ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt; &lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt; &lt;version&gt;2.6.0&lt;/version&gt;&lt;/dependency&gt; ç¼–å†™ä»£ç  æ³¨ï¼šæˆ‘æ‰€ä½¿ç”¨çš„çš„æ¡†æ¶æ˜¯ï¼šSpringMVC+Spring+Mybatis ä¸€ã€ä¸Šä¼ æ–‡ä»¶åˆ°OSSä¹‹HelloWorldä¸Šä¼ å›¾ç‰‡ä¹‹å‰ï¼Œå…ˆæƒ¯ä¾‹æ¥ä¸€ä¸ªHelloWorldç¤ºä¾‹ï¼ 1234567891011121314151617181920212223242526272829303132333435363738394041import com.aliyun.oss.OSSClient;import com.aliyun.oss.model.ObjectMetadata;import com.aliyun.oss.model.PutObjectResult;import com.nullpointer.common.Constants;import com.nullpointer.service.AliyunOSSService;import org.springframework.stereotype.Service;import org.springframework.web.multipart.MultipartFile;import javax.annotation.PostConstruct;import java.io.File;import java.io.IOException;import java.io.InputStream;@Servicepublic class AliyunOSSServiceImpl implements AliyunOSSService &#123; public static final String IMG = &quot;img/&quot;;//å¯¹åº”Objectçš„æ–‡ä»¶å¤¹åç§° private static final int maxLength = 5 * 1024 * 1024;//ç®€å•ä¸Šä¼ OSSé™åˆ¶ä¸º5Gä»¥ä¸‹ public static final String ENDPOINT = File.separatorChar == &#x27;/&#x27; ? &quot;oss-cn-hangzhou-internal.aliyuncs.com&quot; : &quot;http://oss-cn-hangzhou.aliyuncs.com&quot;;//ç”¨äºé€‰æ‹©ä¸åŒçš„åŸŸå private OSSClient client; private static String bucketName; /** * åˆå§‹åŒ–OSSClient */ @PostConstruct public void init() &#123; String accessId = &quot;xxxxxxxxxxxxx&quot;;//ä½ çš„AccessIdï¼Œ åœ¨OSSæ§åˆ¶å°å¯ä»¥ç”Ÿæˆ String accessKey = &quot;xxxxxxxxxxxxxxxxx&quot;;//ä½ çš„AccessKey bucketName = &quot;xxxxx&quot;;//åˆ›å»ºçš„Bucketçš„åç§°ï¼Œæ³¨æ„è¦ä¸€è‡´åŒºåˆ†å¤§å°å†™ client = new OSSClient(ENDPOINT, accessId, accessKey);//åˆå§‹åŒ– &#125; public String uploadIm() &#123; String content = &quot;Hello OSS&quot;; PutObjectResult test01 = client.putObject(bucketName, &quot;test01&quot;, new ByteArrayInputStream(content.getBytes())); return test01.getETag(); &#125;&#125; æ‰“å¼€OSSæ§åˆ¶å°çš„Objectç®¡ç†ï¼Œæ˜¯ä¸æ˜¯å‘ç°æ–°å¢äº†ä¸€ä¸ªæ–‡ä»¶å‘¢ï¼Ÿ äºŒã€ç¼–å†™å›¾ç‰‡ä¸Šä¼ æœåŠ¡ç±»HelloWorldç¤ºä¾‹å®Œæˆäº†ï¼Œå¼€å§‹æ­£å¼ç¼–å†™å›¾ç‰‡ä¸Šä¼ ä»£ç äº†ã€‚æ³¨é‡Šéƒ½æœ‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475@Servicepublic class AliyunOSSServiceImpl implements AliyunOSSService &#123; public static final String IMG = &quot;img/&quot;;//å¯¹åº”Objectçš„æ–‡ä»¶å¤¹åç§° private static final int maxLength = 5 * 1024 * 1024;//ç®€å•ä¸Šä¼ OSSé™åˆ¶ä¸º5Gä»¥ä¸‹ public static final String ENDPOINT = File.separatorChar == &#x27;/&#x27; ? &quot;oss-cn-hangzhou-internal.aliyuncs.com&quot; : &quot;http://oss-cn-hangzhou.aliyuncs.com&quot;;//ç”¨äºé€‰æ‹©ä¸åŒçš„åŸŸå private OSSClient client; private static String bucketName; /** * åˆå§‹åŒ–OSSClient */ @PostConstruct public void init() &#123; String accessId = &quot;xxxxxxxxxxxxx&quot;;//ä½ çš„AccessIdï¼Œ åœ¨OSSæ§åˆ¶å°å¯ä»¥ç”Ÿæˆ String accessKey = &quot;xxxxxxxxxxxxxxxxx&quot;;//ä½ çš„AccessKey bucketName = &quot;xxxxx&quot;;//åˆ›å»ºçš„Bucketçš„åç§°ï¼Œæ³¨æ„è¦ä¸€è‡´åŒºåˆ†å¤§å°å†™ client = new OSSClient(ENDPOINT, accessId, accessKey);//åˆå§‹åŒ– &#125; /*public String uploadIm() &#123; String content = &quot;Hello OSS&quot;; PutObjectResult test01 = client.putObject(bucketName, &quot;test01&quot;, new ByteArrayInputStream(content.getBytes())); return test01.getETag(); &#125;*/ @Override public String saveImage(MultipartFile file) &#123; try &#123; String fileName = this.saveImage(file.getSize(), file.getOriginalFilename(), file.hashCode(), file.getInputStream()); return getHttpUrl(fileName); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; return null; &#125; private String getHttpUrl(String fileName) &#123; return Constants.OSS_HTTP + &quot;/&quot; + IMG + fileName; &#125; @Override public String saveImage(long size, String extName, int hashCode, InputStream is) &#123; if (size &gt; maxLength)//è¶…è¿‡5G return null; String name = extName.toLowerCase(); name = name.substring(name.indexOf(&quot;.&quot;));//è·å¾—ä¸Šä¼ æ–‡ä»¶çš„åç¼€åç§°å¦‚ .jpg String fileName = System.currentTimeMillis() + &quot;_&quot; + hashCode + name;//ä¸ºäº†é˜²æ­¢é‡å¤ï¼Œ ä½¿ç”¨æ—¶é—´æˆ³+hashcodeçš„æ–¹å¼æ¥å‘½å return this.saveImage(size, fileName, is); &#125; @Override public String saveImage(long size, String fileName, InputStream is) &#123; String key = IMG + fileName;//ä¿å­˜åˆ°imgæ–‡ä»¶å¤¹ä¸‹ this.uploadObject(key, size, is); return fileName; &#125; @Override public void uploadObject(String key, long size, InputStream is) &#123; ObjectMetadata metadata = new ObjectMetadata();//è®¾ç½®æ–‡ä»¶çš„metaä¿¡æ¯ metadata.setContentLength(size); metadata.setContentType(&quot;image/jpeg&quot;); PutObjectResult result = client.putObject(bucketName, key, is);//è°ƒç”¨SDKçš„ä¸Šä¼ æ–¹æ³• System.out.println(result); &#125;&#125; ä¸‰ã€ç¼–å†™Controllerå±‚çš„ä¸Šä¼ æ¥å£123456789101112@RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST)public void uploadOSS(MultipartFile pic, HttpServletResponse response, Model model) throws Exception &#123; String imgUrl = aliyunOSSService.saveImage(pic); System.out.println(&quot;path = &quot; + imgUrl); //å›¾ç‰‡å›æ˜¾ JSONObject jsonObject = new JSONObject(); jsonObject.put(&quot;path&quot;, imgUrl); response.setContentType(&quot;application/json;charset=UTF-8&quot;); response.getWriter().write(jsonObject.toString());&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå…¥å‚ä¸­çš„MultipartFIleæ˜¯ä¸€ä¸ªæ¥å£ï¼Œéœ€è¦åœ¨Springçš„é…ç½®æ–‡ä»¶applicationContext.xmlä¸­å°†å…¶å®ç°ç±»æ³¨å…¥ã€‚ 1&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;/&gt; å››ã€ç¼–å†™é¡µé¢JSP1234567891011121314151617181920212223242526272829303132333435363738&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;script src=&quot;/static/js/jquery.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script src=&quot;/static/js/jquery.form.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;%@ page isELIgnored=&quot;false&quot; %&gt; &lt;title&gt;home&lt;/title&gt; &lt;script type=&quot;application/javascript&quot;&gt; function uploadPic() &#123; var options = &#123; url: &quot;/upload&quot;, type: &quot;POST&quot;, dataType: &quot;json&quot;, success: function (data) &#123; $(&quot;#imgUrl&quot;).attr(&quot;src&quot;, data.path); &#125; &#125; $(&quot;#jform&quot;).ajaxSubmit(options); &#125; &lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div class=&quot;container-fluid&quot;&gt; &lt;div class=&quot;row-fluid&quot; align=&quot;content&quot;&gt; &lt;form action=&quot;/uploadOSS&quot; method=&quot;POST&quot; id=&quot;jform&quot;&gt; &lt;div class=&quot;span12&quot;&gt; &lt;img alt=&quot;img&quot; class=&quot;img-polaroid&quot; id=&quot;imgUrl&quot;/&gt; &lt;input type=&quot;file&quot; name=&quot;pic&quot; onchange=&quot;uploadPic()&quot;/&gt; &lt;/div&gt; &lt;/form&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; é¡µé¢ä¸æ˜¯æˆ‘æ‰€æ“…é•¿ï¼Œèƒ½æ˜¾ç¤ºæ•ˆæœå³å¯ã€‚ äº”ã€æµ‹è¯•å›¾ç‰‡ä¸Šä¼ å¯åŠ¨é¡¹ç›®ï¼Œè¿›å…¥å›¾ç‰‡ä¸Šä¼ çš„é¡µé¢ã€‚ ä¸Šä¼ å›¾ç‰‡æ§åˆ¶å°æ‰“å°äº†å¦‚ä¸‹å†…å®¹ï¼š é¡µé¢æ˜¾ç¤ºï¼š","tags":[{"name":"OSS","slug":"OSS","permalink":"http://nullpointer.pw/tags/OSS/"},{"name":"å¯¹è±¡å­˜å‚¨ç³»ç»Ÿ","slug":"å¯¹è±¡å­˜å‚¨ç³»ç»Ÿ","permalink":"http://nullpointer.pw/tags/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/"}]},{"title":"Nginxå®ç°Tomcaté›†ç¾¤","date":"2017-05-05T14:12:54.000Z","path":"Nginxå®ç°Tomcaté›†ç¾¤.html","text":"æœ¬æ–‡ä»‹ç»äº†åˆ©ç”¨nginxæ­å»ºäº†ä¸€ä¸ªç®€å•çš„è´Ÿè½½å‡è¡¡ã€‚ ä¸€ã€å‡†å¤‡å·¥ä½œLinuxç³»ç»Ÿ: CentOS 7 x64 Nginxç‰ˆæœ¬:1.12.0 Tomcatç‰ˆæœ¬: 7.0.77 äºŒã€å®‰è£…CentOS å¿«é€Ÿå®‰è£…ï¼Œè§æˆ‘å¦å¤–ä¸€ç¯‡æ–‡ç« CentOSå¿«é€Ÿå®‰è£…å®‰è£…Nginxä¾èµ–1234567891011# gcc ç”¨æ¥ç¼–è¯‘nginxyum install gcc-c++# PCRE nginxçš„httpæ¨¡å—ä½¿ç”¨pcreæ¥è§£ææ­£åˆ™è¡¨è¾¾å¼yum -y install pcre*# zlib nginxä½¿ç”¨zlibå¯¹httpçš„å†…å®¹è¿›è¡Œgzipå‹ç¼©yum install -y zlib zlib-devel# openssl httpsæ”¯æŒyum -y install openssl ä¸‹è½½Nginx1234# å®‰è£…wgetyum install wget# ä¸‹è½½nginxwget http://nginx.org/download/nginx-1.12.0.tar.gz ç¼–è¯‘å®‰è£…Nginx123456789# è§£å‹nginxtar -zxvf nginx-1.12.0.tar.gz# è¿›å…¥è§£å‹ç›®å½•cd nginx-1.12.0./configure# è‹¥æ— é”™è¯¯ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å®‰è£…makemake install# é»˜è®¤å®‰è£…åˆ°/usr/local/nginxç›®å½• Nginxæµ‹è¯•12345678910111213141516# å¯åŠ¨nginx/usr/local/nginx/sbin/nginx# è®¿é—®localhostwget localhost# æ­¤å‘½ä»¤ä¼šä¸‹è½½ä¸€ä¸ªindex.htmlæ–‡ä»¶vim index.html# index.htmlä¸­æœ‰å…³äºnginxçš„ç±»ä¼¼äºhelloworldè¯­å¥# ç”±äºæˆ‘çš„Linuxå®‰è£…åœ¨è™šæ‹Ÿæœºä¸­ï¼Œæƒ³è¦å¤–éƒ¨è®¿é—®è™šæ‹Ÿæœºå†…ï¼Œéœ€è¦å…³é—­é˜²ç«å¢™æˆ–å¼€æ”¾ç«¯å£# ç¼–è¾‘é˜²ç«å¢™ï¼Œ CentOS 7é»˜è®¤çš„é˜²ç«å¢™ä¸æ˜¯iptablesï¼Œéœ€è¦å¦è¡Œå®‰è£…ï¼Œè¯·è‡ªè¡Œè§£å†³vim /etc/sysconfig/iptables# æ·»åŠ 80ç«¯å£-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT# é‡å¯é˜²ç«å¢™service iptables restart# é€šè¿‡æœ¬æœºçš„æµè§ˆå™¨è®¿é—®è™šæ‹Ÿæœºçš„iphttp://192.168.243.127(æ­¤å¤„ä¸ºè™šæ‹Ÿæœºçš„ip) ä¸‰ã€é…ç½®ç”¨äºé›†ç¾¤çš„Tomcat1234567891011121314151617181920212223242526# ä¸‹è½½Tomcatwget http://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-7/v7.0.77/bin/apache-tomcat-7.0.77.tar.gz# åˆ›å»ºç›®å½•mkdir /usr/local/tomcats# è§£å‹Tomcattar -zxvf apache-tomcat-7.0.77.tar.gz -C /usr/local/tomcats# ä¿®æ”¹è§£å‹çš„Tomcatç›®å½•åç§°mv apache-tomcat-7.0.77 tomcat1# ä¸ºäº†æµ‹è¯•nginxè´Ÿè½½å‡è¡¡,éœ€è¦å¯¹tomcatçš„server.xmlé…ç½®ä¸€ä¸‹vim tomcat1/conf/server.xml# æ˜¾ç¤ºè¡Œå·:set nu# åœ¨105è¡Œä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼Œ å¹¶ä¿å­˜é€€å‡º&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot; jvmRoute=&quot;jvm1&quot;&gt;# ä¿®æ”¹ç¤ºä¾‹ç¨‹åºecho &#x27;tomcat1:&lt;%=session.getId()%&gt;&#x27; &gt; tomcat1/webapps/ROOT/index.jsp# æ‹·è´tomcat1ç›®å½•ä¸ºtomcat2cp -r tomcat1 tomcat2# ä¿®æ”¹tomcat2çš„server.xmlä¸­çš„ç«¯å£å·vim tomcat2/conf/server.xml# ä¿®æ”¹22è¡Œ/71è¡Œ/93è¡Œçš„ç«¯å£# ä¿®æ”¹105è¡Œ&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot; jvmRoute=&quot;jvm2&quot;&gt;# ä¿®æ”¹ç¤ºä¾‹ç¨‹åºecho &#x27;tomcat2:&lt;%=session.getId()%&gt;&#x27; &gt; tomcat1/webapps/ROOT/index.jsp å››ã€é…ç½®Nginx1vim /usr/local/nginx/conf/nginx.conf å¯åŠ¨tomcat123# å¯åŠ¨ä¸¤ä¸ªtomcat./tomat2/bin/startup.sh./tomat1/bin/startup.sh æµ‹è¯•å¤–éƒ¨è®¿é—®è™šæ‹Ÿæœº http://192.168.243.127(æ­¤å¤„ä¸ºè™šæ‹Ÿæœºçš„ip) å¤šåˆ·æ–°å‡ æ¬¡ï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢çš„å†…å®¹åœ¨å˜åŒ–ï¼Œåœ¨tomcat1å’Œtomcat2ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œè‡³æ­¤å®Œæˆäº†ç®€å•nginxè´Ÿè½½å‡è¡¡çš„æ­å»ºã€‚","tags":[{"name":"nginx","slug":"nginx","permalink":"http://nullpointer.pw/tags/nginx/"},{"name":"tomcat","slug":"tomcat","permalink":"http://nullpointer.pw/tags/tomcat/"}]},{"title":"ã€Šèªæ˜äººéƒ½ç”¨æ–¹æ ¼ç¬”è®°æœ¬ã€‹è¯»ä¹¦ç¬”è®°","date":"2017-01-22T10:08:00.000Z","path":"ã€Šèªæ˜äººéƒ½ç”¨æ–¹æ ¼ç¬”è®°æœ¬ã€‹è¯»ä¹¦ç¬”è®°.html","text":"2017å¹´è¯»çš„ç¬¬ä¸€æœ¬ä¹¦ï¼Œè¯»å®Œäº†ä¸€ç›´æ²¡æœ‰å†™è¯»ä¹¦ç¬”è®°ï¼Œæ‹–å»¶åˆ°ä»Šå¤©ï¼Œæ‰å‹‰å¼ºå†™å®Œã€‚ä¸­é€”çœ‹åˆ°ã€Šå¦‚ä½•æœ‰æ•ˆé˜…è¯»ä¸€æœ¬ä¹¦ã€‹ï¼Œå°±ä¸€èµ·è¯»äº†ï¼Œå­¦å­¦è¯»ä¹¦ç¬”è®°çš„å†™æ³•ã€‚ æ­¤ä¹¦ä¸»è¦è®²äº†ç¬”è®°æœ¬å¯¹äºç¬”è®°çš„å½±å“ï¼Œå¥½çš„ç¬”è®°æœ¬è®©ç¬”è®°å‘æŒ¥å®ƒåº”æœ‰çš„åŠŸèƒ½ï¼Œè€Œä¸å¥½çš„ç¬”è®°æœ¬ä½“ç°ä¸å‡ºç¬”è®°çš„ä»·å€¼æ‰€åœ¨ã€‚ä½œè€…ä»¥ä¸‰ä¸ªè‘—åæœºæ„ä½¿ç”¨çš„ç¬”è®°æœ¬ä¸ºä¾‹ï¼Œåˆ—ä¸¾äº†æ–¹æ ¼ç¬”è®°æœ¬çš„ç§ç§ç›Šå¤„ï¼Œå¹¶é€šè¿‡é…å›¾çš„æ–¹å¼ï¼Œè®©è¯»è€…ä¸€ç›®äº†ç„¶åœ°äº†è§£æ–¹æ ¼ç¬”è®°æœ¬è®°å½•ç¬”è®°çš„æ–¹å¼ã€‚ ä¹¦å ä½œè€… å¼€å§‹æ—¶é—´ ç»“æŸæ—¶é—´ èªæ˜äººéƒ½ç”¨æ–¹æ ¼ç¬”è®°æœ¬ é«˜æ¡¥æ”¿å² 2017.01.01 2017.01.04 å°†æ–¹æ ¼ç¬”è®°æœ¬â€œåˆ†ä¸ºä¸‰éƒ¨åˆ†â€è®°å½•ã€‚ä»å·¦å‘å³ä¾æ¬¡å°†ç¬”è®°æœ¬åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼ŒæŒ‰ç…§â€œäº‹å®â†’è§£é‡Šâ†’è¡ŒåŠ¨â€çš„é¡ºåºè®°å½•ç¬”è®°ã€‚ ä¸€ï¼‰ç¬”è®°æœ¬çš„åŒºåˆ«1. â˜†ç¬”è®°æœ¬çš„å¯¹æ¯” ä½¿å¤´è„‘å˜èªæ˜çš„ç¬”è®°æœ¬ é˜»ç¢èƒ½åŠ›å‘æŒ¥çš„ç¬”è®°æœ¬ å¯¹æ¯” çœ‹èµ·æ¥å·¥æ•´ ç¬¬ä¸€å°è±¡ç»™äººè„ä¹±çš„æ„Ÿè§‰ï¼Œä½¿äººä¸æ„¿å†çœ‹ç¬¬äºŒçœ¼ ç†è§£åŠ›ã€ç§¯ææ€§ä½ä¸‹ æ¯”A4çº¸å¤§ æ¯”A6çº¸å°ã€è®°äº‹æœ¬å‹ æ€è€ƒå¤æ‚é—®é¢˜çš„èƒ½åŠ›ã€é€»è¾‘æ€ç»´èƒ½åŠ›ä½ä¸‹ é¢œè‰²ä¸è¶…è¿‡ä¸‰ç§ ç”¨äº†å››ç§ä»¥ä¸Šçš„é¢œè‰² åˆ¤æ–­ä¼˜å…ˆé¡ºåºçš„èƒ½åŠ›ã€åˆ¤æ–­åŠ›ä½ä¸‹ æ¯ä¸€é¡µéƒ½æœ‰ä¸€ä¸ªä¸»é¢˜ è¿™ä¹Ÿå†™ã€é‚£ä¹Ÿå†™ èˆå¼ƒèƒ½åŠ›ã€æ•´ç†èƒ½åŠ›ä½ä¸‹ æ˜¯é»‘æ¿ã€ç™½æ¿æ¿ä¹¦å†…å®¹çš„æç‚¼ ç…§æŠ„é»‘æ¿ã€ç™½æ¿æ¿ä¹¦ è®°å¿†åŠ›ã€ç‹¬ç«‹æ€è€ƒèƒ½åŠ›ä½ä¸‹ ç•™æœ‰ç©ºç™½åŒºåŸŸ æ— ç©ºéš™ï¼Œå†™å¾—æ»¡æ»¡å½“å½“ ç†è§£èƒ½åŠ›ã€å¤ä¹ èƒ½åŠ›ä½ä¸‹ ç”»æœ‰è®¸å¤šå›¾ã€è¡¨ã€ç”» æ— å›¾ã€è¡¨ã€ç”»ï¼Œåªæœ‰æ–‡å­— è§†è§‰æŠŠæ¡èƒ½åŠ›ã€è¡¨ç°åŠ›ä½ä¸‹ æ—¥åçœ‹ç¬”è®°æ—¶ä¾ç„¶å¯å†ç°å½“æ—¶çš„å†…å®¹ æ—¥åçœ‹ç¬”è®°æ—¶æ— æ³•å†ç°å½“æ—¶çš„å†…å®¹ å­¦ä¹ èƒ½åŠ›ã€ç†è§£åŠ›ä½ä¸‹ 2. â˜…å¥½ä¸åçš„ç¬”è®°æœ¬çš„åŒºåˆ«å¥½ç¬”è®°æœ¬çœ‹ä¸Šå»ä¸€ç›®äº†ç„¶ï¼Œèƒ½å¤Ÿè¿…é€ŸæŠŠæ¡é‡ç‚¹ï¼Œå¤ç°è®°ç¬”è®°æ—¶çš„åœºæ™¯ï¼›è€Œåç¬”è®°å°±æ˜¯è®©ä½ æ ¹æœ¬æ²¡æœ‰çœ‹çš„æ¬²æœ›ï¼Œå³ä½¿æ˜¯çœ‹äº†ï¼Œä¹Ÿä¸èƒ½æå–æœ‰æ•ˆå†…å®¹ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåç¬”è®°æœ¬çš„ä½œç”¨å°±æ˜¯æ²¡æœ‰ä½œç”¨ã€‚ äºŒï¼‰è®°ç¬”è®°çš„ç›®çš„1. â˜†è®°ç¬”è®°çš„è¯¯åŒºä¸ç®¡ä½ å‚åŠ çš„æ˜¯å¤šä¹ˆä¼˜ç§€çš„åŸ¹è®­ã€è®²åº§ã€ç ”è®¨ï¼Œå¦‚æœä½ çš„ç¬”è®°æ— æ³•å†ç°å½“æ—¶çš„å­¦ä¹ å†…å®¹ï¼Œé‚£ä¹ˆï¼Œä½ å¥½ä¸å®¹æ˜“å­¦åˆ°çš„çŸ¥è¯†ã€æŠ€å·§åŒ–ä¸ºä¹Œæœ‰çš„å¯èƒ½æ€§å°†å¾ˆå¤§ã€‚ ç¬”è®°çš„ç”Ÿå‘½çº¿æ˜¯â€œå†ç°æ€§â€ï¼Œè¿™æ˜¯è®°ç¬”è®°çš„æœ€ç»ˆç›®çš„ã€‚ å¯æ˜¯ï¼Œæ²¡æœ‰å­¦ä¹ è¿‡ç¬”è®°æœ¬ä½¿ç”¨æ–¹æ³•çš„äººæ—¥åå†çœ‹è‡ªå·±çš„ç¬”è®°æ—¶ï¼Œåªèƒ½çœ‹åˆ°ä¸Šé¢çš„è¯è¯­å’Œå¥å­ï¼Œå´å›å¿†ä¸å‡ºâ€œä¸ºä½•éœ€è¦è¿™äº›ä¿¡æ¯â€â€œè¿™äº›ä¿¡æ¯æœ‰ä»€ä¹ˆä½œç”¨â€è¿™äº›æ›´ä¸ºé‡è¦çš„éƒ¨åˆ†ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬ç”¨çš„æ˜¯ç¼ºä¹å†ç°æ€§çš„è®°ç¬”è®°æ³•ã€‚ ä¸ºä»€ä¹ˆè¦åšç¬”è®°ï¼Ÿ æˆ‘æ˜¯æ€•æ—¥åå¿˜è®°æ‰è®°çš„ æˆ‘åªæ˜¯ç…§æŠ„æ¿ä¹¦ç½¢äº† æˆ‘æœ‰è®°ç¬”è®°çš„ä¹ æƒ¯ 2. â˜…è®°ç¬”è®°éœ€è¦å…‹æœçš„å›°éš¾ä½œè€…è¯´ï¼ŒæŠ±ç€ä»¥ä¸Šè¿™å‡ ç§ç›®çš„è€Œåšç¬”è®°çš„äººéœ€è¦å˜åŒ–è®°ç¬”è®°çš„æ–¹å¼ï¼Œåº”å½“åœæ­¢å½“å‰è¿™ç§è®°ç¬”è®°çš„æ–¹æ³•ã€‚ä¸€ç›´ä»¥æ¥ï¼Œè®°äº†å¾ˆå¤šç¬”è®°ï¼Œä½†æ˜¯æˆ‘æ¯æ¬¡è®°å®Œçš„ç¬”è®°åªæ˜¯å½“æˆäº†å¤‡å¿˜ï¼ŒæŠŠç¬”è®°æœ¬å½“æˆäº†å­—å…¸ã€‚ éœ€è¦ä½¿ç”¨ä»¥å‰è®°è¿‡çš„ç¬”è®°çš„æ—¶å€™ï¼Œå°±å€ŸåŠ©ä¸ªäººè‰¯å¥½çš„åˆ†ç±»ä¹ æƒ¯æŸ¥æ‰¾å¯¹åº”çš„ç¬”è®°ï¼Œä»¥åŠå€ŸåŠ©è½¯ä»¶çš„å…¨æ–‡æ£€ç´¢åŠŸèƒ½æŸ¥æ‰¾æˆ‘æ‰€éœ€è¦çš„ç¬”è®°ã€‚ é•¿è€Œä¹…ä¹‹ï¼Œä¾¿å…»æˆäº†ä¾èµ–çš„ä¹ æƒ¯ï¼Œè®°ç¬”è®°è®°å®Œä¹Ÿåªæ˜¯åœ¨è„‘æµ·ä¸­ä¿ç•™ä¸€ä»½å…³é”®å­—ï¼Œè€Œå†…å®¹å´ä¸€æ¦‚å¿˜è®°ï¼Œè¿™ææ€•æ˜¯æˆ‘çš„è®°ç¬”è®°æ–¹å¼çš„æœ€å¤§å¼Šç—…ï¼Œå†ç°ç¬”è®°çš„å†…å®¹æ˜¯ä¸ªäººéœ€è¦å…‹æœçš„éš¾ç‚¹ã€‚ ä¸‰ï¼‰æ¡†æ¶Â·é»„é‡‘ä¸‰åˆ†æ³•1. â˜†è°é‡‡å–äº†è¿™ç§æ¡†æ¶ åº·å¥ˆå°”ç¬”è®°æœ¬åˆ†ä¸ºâ€œNoteâ€ï¼ˆæ¿ä¹¦ï¼‰ã€â€œQueueâ€ï¼ˆå‘ç°ç‚¹ï¼‰ã€â€œSummaryâ€ï¼ˆæ€»ç»“ï¼‰ä¸‰éƒ¨åˆ†ã€‚ ä¸œå¤§å½•å–ç”Ÿä¸­çš„å¤§å¤šæ•°å­¦ç”Ÿå°†ç¬”è®°æœ¬çš„å·¦å³ä¸¤é¡µä½œä¸ºä¸€é¡µä½¿ç”¨ï¼Œå·¦ä¾§è®°å½•â€œæ¿ä¹¦â€ï¼Œå³ä¾§å†™â€œå‘ç°ç‚¹â€å’Œâ€œæ€»ç»“â€ï¼Œå’Œåº·å¥ˆå°”ç¬”è®°æœ¬çš„æ„é€ å®Œå…¨ç›¸åŒã€‚ éº¦è‚¯é”¡å…¬å¸çš„â€œç©ºÂ·é›¨Â·ä¼â€ï¼ŒåŸƒæ£®å“²å…¬å¸çš„â€œPoint Sheetâ€ï¼Œæ‰€æœ‰å¤–èµ„ç®¡ç†å’¨è¯¢å…¬å¸çš„å’¨è¯¢é¡¾é—®éƒ½æ˜¯æŒ‰ç…§â€œäº‹å®â†’è§£é‡Šâ†’è¡ŒåŠ¨â€çš„ä¸‰åˆ†æ³•å±•å¼€æ€è€ƒçš„ã€‚ 2. â˜†æ¡†æ¶çš„ç»„æˆ å†…å®¹ å¯¹åº” æ¿ä¹¦ äº‹å® å‘ç° è§£é‡Š æ€»ç»“ è¡ŒåŠ¨ 3. â˜…æ¡†æ¶çš„ä½¿ç”¨æ­¥éª¤ æ‘˜æŠ„åŸæ–‡ï¼šåŠ æ·±å¯¹åŸæ–‡çš„å°è±¡ æå‡ºé—®é¢˜ï¼Œåšå‡ºè§£é‡Šï¼šåŸºäºåŸæ–‡è¿›è¡Œæ€è€ƒï¼Œå¹¶ç»™å‡ºç»“æœ è¿›è¡Œæ€»ç»“ï¼šå¯¹äºæ•´ç¯‡æ–‡ç« çš„æ€»ä½“æ¦‚è¿° æŒ‰ç…§é»„é‡‘ä¸‰åˆ†æ³•æ¥åšç¬”è®°ï¼Œå¯ä»¥æé«˜ç¬”è®°å¯¹çŸ¥è¯†çš„å†ç°æ€§ï¼ŒçŸ¥åæœºæ„éƒ½é‡‡å–çš„æ˜¯é»„é‡‘ä¸‰åˆ†æ³•è¿™ç§æ¡†æ¶æ¥åšç¬”è®°ã€‚ å››ï¼‰ç¬”è®°æœ¬çš„ç»“æ„1. â˜†ç¬”è®°æœ¬çš„æ–¹å‘äººçš„æ€è€ƒä¼šå—åˆ°çœ¼ç›æ„é€ çš„å·¦å³ï¼Œæ‰€ä»¥è¿›å…¥è§†é‡çš„æ˜¯â€œçºµå‘â€æ¡†æ¶è¿˜æ˜¯â€œæ¨ªå‘â€æ¡†æ¶ï¼Œèƒ½å¤Ÿå½±å“äººä»¬çš„ç†è§£é€Ÿåº¦ä»¥åŠå¯¹ä¿¡æ¯çš„æŠŠæ¡ç¨‹åº¦ã€‚ åœ¨æŠŠæ¡æ•´ä½“æƒ…å†µæ—¶ï¼Œéœ€è¦è§£å†³çš„é—®é¢˜è¶Šå¤æ‚ã€å‚è€ƒçš„ä¿¡æ¯é‡è¶Šåºå¤§ï¼Œå°±è¶Šéœ€è¦åœ¨çŸ­æ—¶é—´å†…è¿…é€ŸæŠ“ä½é‡ç‚¹ã€‚ éšç€å­¦ä¹ ã€å·¥ä½œå±‚æ¬¡çš„æå‡ï¼Œâ€œæ—¢è§æ ‘æœ¨ï¼Œåˆè§æ£®æ—â€è¿™ä¸€æ€è€ƒæ–¹å¼çš„é‡è¦æ€§ä¹Ÿå°±æ›´ä¸ºçªæ˜¾ã€‚ 2. â˜†ç¬”è®°æœ¬çš„å¤§å°â€œä¸å–„äºæç‚¼æƒ³æ³•â€â€œå¾ˆéš¾æŒ‰é€»è¾‘æ€§æ€ç»´æ€è€ƒâ€â€œä¸ä¼šè¨€ç®€æ„èµ…åœ°è¡¨è¾¾â€çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ ç¬”è®°æœ¬çš„å¤§å°æ„å‘³ç€æ€è€ƒèƒ½åŠ›çš„å¼ºå¼±ã€‚ 3. â˜†ç¬”è®°çš„é¢œè‰²ç”¨é»‘è‰²æˆ–è“è‰²ä¹¦å†™ç¬”è®°ï¼Œç”¨çº¢è‰²ä½œä¸ºåˆ¤æ–­ï¼Œä¹Ÿå°±æ˜¯é‡åˆ°éå¸¸é‡è¦æˆ–éœ€è¦ä¿®æ”¹çš„åœ°æ–¹æ—¶ä½¿ç”¨çº¢è‰²ã€‚ ç”¨æ­¤ç§ç®€å•æ–¹æ³•åŒºåˆ†ä½¿ç”¨é¢œè‰²çš„è¯ï¼Œä¾¿ä¼šåœ¨è®°ç¬”è®°çš„åŒæ—¶è‡ªç„¶èˆå¼ƒæ‰æ— ç”¨çš„å†…å®¹ï¼Œå°†æ€è€ƒé‡ç‚¹æ”¾åœ¨ä¸»è¦é—®é¢˜ä¸Šï¼Œå…»æˆåˆ¤æ–­ä¸»æ¬¡å…ˆåçš„ä¹ æƒ¯ï¼Œé€æ­¥æé«˜è§£å†³é—®é¢˜çš„é€Ÿåº¦å’Œè´¨é‡ã€‚ é¢œè‰²æœ€å¤šç”¨ä¸‰ç§ã€‚ åªè¦èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œäº‹åå†ç¿»çœ‹ç¬”è®°æ—¶ï¼Œä»…çœ‹é¢œè‰²å°±èƒ½ç«‹åˆ»åŒºåˆ†å‡ºä¸»æ¬¡é¡ºåºï¼Œè®°ç¬”è®°æ—¶çš„æ€è·¯ä¹Ÿèƒ½åœ¨å¤§è„‘ä¸­æ¸…æ™°é‡ç°ï¼Œè¿›ä¸€æ­¥æå‡ä¿¡æ¯æ•´ç†å’Œè¾“å‡ºçš„æ•ˆç‡ã€‚ 4. â˜†ç¬”è®°æ ‡é¢˜åŒºåŸŸçš„åˆ©ç”¨é€šå¸¸ä¼šåœ¨ç¬”è®°æœ¬ä¸Šéƒ¨çš„ç©ºç™½åŒºåŸŸå†™å…¥è®ºç‚¹å’Œç»“è®ºã€‚ä»¥è§£å†³å·¥ä½œé—®é¢˜çš„ç¬”è®°æœ¬ä¸ºä¾‹ï¼Œâ€œè®ºç‚¹=é—®é¢˜çš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆâ€â€œç»“è®º=è¿™æ ·åšä¾¿å¯ä»¥è§£å†³é—®é¢˜â€ã€‚ 5. â˜…ç¬”è®°æœ¬ç»“æ„å¯¹äºç¬”è®°çš„å½±å“ ç¬”è®°é‡‡å–æ¨ªå‘ç»“æ„ï¼Œå¯ä»¥èµ·åˆ°ä¸€ç›®äº†ç„¶çš„ä½œç”¨ï¼Œå‚è€ƒçš„æ–‡ç« ä¿¡æ¯ä¾¿äºæå–åˆ°å¤§è„‘ä¸­ã€‚ å°ç¬”è®°æœ¬ä¸åˆ©äºæ€»ç»“æƒ³æ³•ï¼Œæ¥å›åœ°ç¿»é¡µä¼šæ‰“æ–­æ€è€ƒçš„ä¹¦å†™ã€‚å› æ­¤ä½¿ç”¨å¤§ç¬”è®°æœ¬æ¥è®°ç¬”è®°ã€‚ å¤ªå¤šçš„é¢œè‰²ä¼šå¯¼è‡´æ‰¾ä¸åˆ°é‡ç‚¹ï¼Œå¤„å¤„æ˜¯é‡ç‚¹çš„æƒ…å†µï¼Œ åˆç†æ ‡è®°æ ‡é¢˜ï¼Œæ¢³ç†æ ¸å¿ƒå†…å®¹ï¼Œæœ‰åŠ©äºå¿«é€Ÿç†è§£ç¬”è®°å†…å®¹ã€‚ äº”ï¼‰ç¬”è®°æœ¬çš„åŠŸèƒ½1. â˜†è®°å¿†æ€§ç¬”è®°æœ¬ä¸Šè¯¾ã€ç ”è®¨æˆ–æ˜¯è¦è®°å¿†ã€ç†è§£å­¦ä¹ å†…å®¹æ—¶è®°å½•çš„ç¬”è®°ï¼Œä¸ºäº†è®°åœ¨è„‘å­é‡Œè€Œå†™çš„ç¬”è®°ã€‚æœ¬ä¹¦å°†è¿™ç±»ç¬”è®°æœ¬ç§°ä¸ºâ€œå­¦ä¹ ç¬”è®°æœ¬â€ã€‚ 2. â˜†æ€è€ƒæ€§ç¬”è®°æœ¬ä¸ºçœ‹å‡ºäº‹ç‰©æœ¬è´¨ã€ç†è§£é‡ç‚¹ã€å¾—å‡ºç»“è®ºè€Œå†™çš„ç¬”è®°ï¼Œå¸¸è§äºå·¥ä½œä¸­ã€‚æœ¬ä¹¦å°†è¿™ç±»ç¬”è®°æœ¬ç§°ä¸ºâ€œå·¥ä½œç¬”è®°æœ¬â€ã€‚ 3. â˜†ä¼ è¾¾æ€§ç¬”è®°æœ¬ä¼ è¾¾æ€§ç¬”è®°å³èƒ½å¤Ÿä»ä¸°å¯Œçš„ä¿¡æ¯ä¸­ç­›é€‰å‡ºå¯¹æ–¹æ‰€éœ€çš„æ”¹å–„ç­–ç•¥åŠè§£å†³æ–¹æ³•ï¼Œä¸ºäº†è¯´æœå¯¹æ–¹è€Œå†™çš„ç¬”è®°ã€‚æœ¬ä¹¦å°†å†™è¿™ç±»ç¬”è®°çš„ç¬”è®°æœ¬ç§°ä¸ºâ€œææ¡ˆç¬”è®°æœ¬â€æˆ–â€œåšå¼ˆç¬”è®°æœ¬â€ã€‚ 4. â˜…ä¸åŒåŠŸèƒ½ç¬”è®°æœ¬å¯¹çš„è®°æ³•ä½œè€…çš„è¿™æœ¬ä¹¦æ‰€æè¿°çš„é»„é‡‘ä¸‰åˆ†æ³•æœ€é€‚åˆäºåšæ€è€ƒæ€§ç¬”è®°ï¼Œè€Œå¯¹äºè®°å¿†æ€§ç¬”è®°æœ¬çš„è®°æ³•ï¼Œé‡‡å–è¿™ç§æ–¹å¼ï¼Œä¹Ÿèƒ½èµ·åˆ°ä¸€å®šåŠ æ·±å°è±¡çš„ä½œç”¨ã€‚å¯¹äºä¼ è¾¾æ€§ç¬”è®°æœ¬è€Œè¨€ï¼Œæ—¢åˆ—å‡ºäº‹å®ï¼Œåˆç»™å‡ºåˆç†è§£é‡Šï¼Œä¹Ÿæ˜¯ä¸é”™çš„æ–¹å¼ã€‚ å…­ï¼‰ æé«˜ç¬”è®°æœ¬çš„ä½œç”¨1. â˜†èƒ½å½¢æˆâ€œæ°¸ä¹…è®°å¿†â€çš„ç”¨çœ¼æ–¹æ³•å¦‚æœä½ ä¹‹å‰æ˜¯ä¸€è¾¹çœ‹ç€è€å¸ˆåœ¨é»‘æ¿ä¸Šå†™ä¸‹çš„å†…å®¹ï¼Œä¸€è¾¹åŸå°ä¸åŠ¨åœ°æŠ„å†™åœ¨ç¬”è®°æœ¬ä¸Šçš„è¯ï¼Œé‚£ä¹ˆï¼Œè¯·ä½ æ”¹å˜ä¸€ä¸‹æŠ„å†™ç¬”è®°æ—¶çš„â€œç”¨çœ¼æ–¹æ³•â€å§ï¼ å°†æ­¤å‰ï¼šÃ—â€œçœ‹é»‘æ¿â†’å†™ç¬”è®°â€çš„è®°å½•æ–¹æ³•æ”¹ä¸ºï¼š â€œçœ‹é»‘æ¿â†’å°åœ¨å¤§è„‘ä¸­â†’ä¸çœ‹é»‘æ¿ï¼Œå°†å°åœ¨å¤§è„‘ä¸­çš„å†…å®¹é‡ç°åœ¨ç¬”è®°æœ¬ä¸Šâ€ã€‚ ä¸æ˜¯ä¸€è¾¹çœ‹é»‘æ¿ä¸€è¾¹æŠ„å†™ï¼Œè€Œæ˜¯åœ¨â€œçœ‹é»‘æ¿â†’æŠ„å†™â€ä¹‹é—´åŠ å…¥â€œå°åœ¨å¤§è„‘ä¸­çš„ä¸€ç§’é’Ÿâ€ã€‚ æˆ‘æŠŠè¿™ä¸€ç§’é’Ÿç§°ä¸ºâ€œç©ºç™½çš„ä¸€ç§’é’Ÿâ€ã€‚ åªéœ€è¦è¿™ä¸€ç§’é’Ÿï¼Œä½ çš„ç¬”è®°æœ¬å°±èƒ½å‡çº§æˆèƒ½ä½¿å¤§è„‘è¶Šå˜è¶Šèªæ˜çš„ç¬”è®°æœ¬ã€‚ 2. â˜…æ–¹æ³•çš„æ•ˆæœåœ¨æŠ„å†™çš„è¿™ä¸€æ­¥éª¤ä¸­åŠ å…¥æ˜ å…¥å¤§è„‘ï¼Œå¯ä»¥åŠ æ·±å¯¹æ‰€æŠ„å†™å†…å®¹çš„è®°å¿†ã€‚ è®°å¾—ä»¥å‰åœ¨èƒŒæ—¥è¯­å•è¯æ—¶ï¼Œé‡‡å–çš„å°±æ˜¯è¿™ç§æ–¹æ³•ï¼Œçœ‹ä¸€ä¸‹å•è¯ï¼Œç„¶åé—­ä¸Šçœ¼ç›ï¼Œè®©å•è¯åœ¨è„‘æµ·ä¸­æµ®ç°å‡ºæ¥ï¼Œæ•ˆæœæ¯”ç›´æ¥æŠ„å†™åˆ°æœ¬ä¸Šçš„æ–¹æ³•è¦å¥½ã€‚ 3. â˜†é€»è¾‘è¿æ¥è¯çš„ç§ç±»ä¸ç”¨é€” 4. â˜…è¿æ¥è¯çš„æ•ˆæœæ‰¾åˆ°é€‚åˆè‡ªå·±çš„é€»è¾‘è¿æ¥è¯ï¼Œå°†æ€è€ƒè¿›è¡Œæµç¨‹åŒ–ã€‚ï¼ˆåœ¨ä¸­éƒ¨åŒºåŸŸä½¿ç”¨ï¼‰ 5. â˜†ä¸‰ä¸ªç®­å¤´çš„ä½¿ç”¨ 6. â˜†ä¸¤ä¸ªèƒ½åŠ›çš„å®è´¨ æé—®èƒ½åŠ› æ¦‚æ‹¬èƒ½åŠ› æ‰€è°“â€œæé—®èƒ½åŠ›â€ï¼Œå°±æ˜¯å¾—åˆ°æŸä¸ªä¿¡æ¯åå¹¶ä¸ä¼šç›´æ¥ä¸€å£åä¸‹ï¼Œè€Œæ˜¯ä¼šæå‡ºç±»ä¼¼â€œè¿™åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€â€â€œä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆè¯´â€ä¹‹ç±»é—®é¢˜çš„èƒ½åŠ›ã€‚ æ‰€è°“â€œæ¦‚æ‹¬èƒ½åŠ›â€ï¼Œå°±æ˜¯èƒ½çœ‹é€äº‹ç‰©æœ¬è´¨ï¼Œå¹¶ä¸”å°†æ¢³ç†åçš„é‡ç‚¹å†…å®¹è®°åœ¨è„‘å­é‡Œï¼Œç„¶åç®€å•æ˜äº†åœ°è®²ç»™åˆ«äººå¬ã€‚ 7. â˜…ä¸¤ä¸ªèƒ½åŠ›çš„ä½œç”¨å¦‚ä½•åº”ç”¨å­¦ä¹ çš„çŸ¥è¯†ï¼Œæ˜¯ç”±è¿™ä¸¤ä¸ªèƒ½åŠ›æ¥å†³å®šã€‚è¿™ä¸¤ä¸ªèƒ½åŠ›çš„æé«˜ä¸æ¯å¤©çš„è„‘åŠ›è®­ç»ƒæ˜¯å¯†ä¸å¯åˆ†çš„ï¼Œåªæœ‰ä¸æ–­åœ°è”ç³»ï¼Œé€æ¸å¼ºåŒ–ï¼Œè¿™äºŒè€…çš„èƒ½åŠ›å¯¹äºä¸ªäººçš„æå‡å°±ä¼šè¶Šå‘æ˜æ˜¾ã€‚ 8. â˜†ä¸è¦è®©ä½ çš„ç¬”è®°æœ¬å˜å¾—ä»£è°¢ä¸è‰¯â€œä»£è°¢ä¸è‰¯ç¬”è®°æœ¬â€æ˜¯ä¸åˆ†æœ‰ç”¨ä¿¡æ¯å’Œæ— ç”¨ä¿¡æ¯ã€ä»€ä¹ˆéƒ½å¾€ä¸Šå†™çš„ã€ä¸è¿›è¡Œæ•´ç†æ€»ç»“çš„â€œé˜»ç¢èƒ½åŠ›å‘æŒ¥çš„ç¬”è®°æœ¬â€çš„å…¸å‹ä¾‹å­ã€‚ å¦‚æœè¿™ä¹Ÿè®°ã€é‚£ä¹Ÿè®°çš„è¯ï¼Œé‚£ä¹ˆä¸çŸ¥ä¸è§‰ä¸­ï¼Œç¬”è®°æœ¬ä¸­çš„â€œç»“è®ºå’Œè®ºç‚¹â€å°±ä¼šå˜å¾—æ¨¡ç³Šï¼Œä»€ä¹ˆæ˜¯â€œè¯¥èˆå¼ƒçš„æ— ç”¨ä¿¡æ¯â€ï¼Œä»€ä¹ˆæ˜¯â€œåº”è¯¥ç•™ä¸‹çš„é‡ç‚¹å†…å®¹â€ï¼Œä¹Ÿä¼šå˜å¾—éš¾ä»¥åŒºåˆ†ã€‚ â€œè¿™ä¹Ÿè®°ã€é‚£ä¹Ÿè®°â€â€œå…ˆè®°ä¸‹å†è¯´â€â€œè¯´ä¸å®šä»¥åä¼šç”¨åˆ°â€â€¦â€¦æŒ‰ç…§è¿™æ ·çš„æƒ³æ³•è®°ç¬”è®°çš„è¯ï¼Œè®°åœ¨ç¬”è®°ä¸Šçš„ä¿¡æ¯æ—¥åè¢«ä½¿ç”¨çš„æ¦‚ç‡å‡ ä¹ä¸ºé›¶ã€‚ 9. â˜…ä»£è°¢ä¸è‰¯ç¬”è®°æœ¬çš„åå¤„å¦‚æœä»€ä¹ˆéƒ½è®°ã€ä¹Ÿä¸è¿›è¡Œæ•´ç†æ€»ç»“ï¼Œè¿™æ ·è®°å½•çš„ç¬”è®°åªæ˜¯æ‘˜æŠ„ç½¢äº†ï¼Œå°±åƒä¸­å­¦æ—¶ä½¿ç”¨çš„æ‘˜æŠ„æœ¬ï¼Œ å¦‚æœä¸å¯¹æ‘˜æŠ„è¿›è¡Œåˆ†ç±»ï¼Œä¸æ—¶å¸¸å»ç¿»çœ‹ï¼Œæ‘˜æŠ„çš„å†…å®¹æ˜¯ä¸ä¼šè¢«å®Œæ•´åœ°å­˜å‚¨åˆ°è®°å¿†å½“ä¸­ã€‚","tags":[{"name":"è¯»ä¹¦","slug":"è¯»ä¹¦","permalink":"http://nullpointer.pw/tags/%E8%AF%BB%E4%B9%A6/"}]},{"title":"ã€Šå¦‚ä½•æœ‰æ•ˆé˜…è¯»ä¸€æœ¬ä¹¦:è¶…å®ç”¨è¯»ä¹¦ç¬”è®°æ³•ã€‹è¯»ä¹¦ç¬”è®°","date":"2017-01-15T12:37:00.000Z","path":"ã€Šå¦‚ä½•æœ‰æ•ˆé˜…è¯»ä¸€æœ¬ä¹¦ï¼šè¶…å®ç”¨è¯»ä¹¦ç¬”è®°æ³•ã€‹è¯»ä¹¦ç¬”è®°.html","text":"ä¹°å®ŒKindleè¯»çš„ç¬¬ä¸‰æœ¬ä¹¦ï¼Œä½œè€…çš„è§‚ç‚¹éƒ¨åˆ†é€‚ç”¨äºç°åœ¨çš„æˆ‘ï¼Œå¯èƒ½æ˜¯ç”±äºç¯å¢ƒçš„ä¸åŒï¼ˆä½œè€…åœ¨æ—¥æœ¬ï¼‰ã€‚ä½œè€…æå€¡ä½¿ç”¨çº¸è´¨ç¬”è®°æœ¬æ¥è®°å½•è¯»ä¹¦ç¬”è®°ï¼Œä½†æ˜¯å¯¹äºä¸€ä¸ªå‡ºé—¨ä¸å–œæ¬¢èƒŒåŒ…çš„äººæ¥è¯´ï¼Œè¿™å¾ˆmuli~åŸæ–‡å¯¹äºå¦‚ä½•é€‰ä¹¦ã€è´­ä¹¦è¯´äº†å¾ˆå¤šï¼Œå¯¹äºå¦‚ä½•è®°ç¬”è®°çš„å†…å®¹ä¸å¤ªå¤šï¼Œä¸è¿‡ï¼Œè¿˜æ˜¯å¾ˆæœ‰å‚è€ƒä»·å€¼ã€‚ ä¹¦å ä½œè€… å¼€å§‹æ—¶é—´ ç»“æŸæ—¶é—´ å¦‚ä½•æœ‰æ•ˆé˜…è¯»ä¸€æœ¬ä¹¦ï¼šè¶…å®ç”¨è¯»ä¹¦ç¬”è®°æ³• å¥¥é‡å®£ä¹‹ 2017.01.11 2017.01.15 ä¸€ã€è´­ä¹¦ â˜†åªæœ‰ä»æ—¥å¸¸ç”Ÿæ´»ä¸­å–æï¼Œæ‰èƒ½åˆ—å‡ºåæ˜ è‡ªå·±çœŸæ­£éœ€æ±‚çš„è´­ä¹¦æ¸…å•ã€‚ â˜… ä¹¦å•å†…å®¹æ¥æºäºç”Ÿæ´»ï¼Œå¯èƒ½æ˜¯åˆ«äººçš„æ¨èã€ä¹Ÿå¯èƒ½æ˜¯å®£ä¼ ã€æˆ–è€…è‡ªå·±è„‘æµ·ä¸­è¹¦å‡ºçš„å…³é”®è¯ã€‚æ”¶é›†è¿™äº›å†…å®¹ï¼Œè¿™æ ·åˆ°äº†ä¹¦åº—ï¼Œåœ¨ä¹¦æµ·ä¸­å°±ä¸ä¼šèŒ«ç„¶è‹¥å¤±ï¼Œä¸çŸ¥é“æƒ³è¦ä¹°äº›ä»€ä¹ˆæ ·çš„ä¹¦äº†ã€‚æœ‰ç›®çš„åœ°é€›ä¹¦åº—ï¼Œä¹°è‡ªå·±æƒ³è¦çš„ä¹¦ äºŒã€å¦‚ä½•åšè¯»ä¹¦ç¬”è®°1)åšæŒåšè¯»ä¹¦ç¬”è®°â˜† 2013å¹´8æœˆ5æ—¥ï¼Œæˆ‘è¯»äº†ã€ŠXXXXã€‹ã€‚è¿™æœ¬ä¹¦æ¯”æˆ‘æƒ³è±¡ä¸­æœ‰æ„æ€ã€‚ å¦‚æœå†™å¾—è¿™æ ·ç®€å•ï¼Œå°±æ›´å®¹æ˜“åšæŒä¸‹å»äº†.ç¬¬ä¸€æ­¥è¦åšåˆ°çš„å°±æ˜¯åšæŒä¸‹å»ï¼Œæ¯«ä¸å¤¸å¼ åœ°è¯´ï¼Œåªæœ‰åšæŒä¸‹å»ï¼Œè¯»ä¹¦ç¬”è®°æ‰èƒ½å‘æŒ¥ä½œç”¨ã€‚è¯»ä¹¦æ—¶åº”è¯¥æ—¶åˆ»è®°å¾—è¿™ä¸ªç›®çš„ï¼Œæ­£ç¡®åœ°å¯¹å¾…å†™è¯»ä¹¦ç¬”è®°è¿™ä»¶äº‹ã€‚ äººä»¬ç»å¸¸è¯´â€œä½ ä¸ºåˆ«äººè®²è§£ä¹¦ä¸­çš„å†…å®¹æ—¶ï¼Œæ‰ä¼šçœŸæ­£ç†è§£å®ƒã€‚â€æŠŠè®°è¯»ä¹¦ç¬”è®°ä½œä¸ºç›®æ ‡å»è¯»ä¹¦ï¼Œå¾—åˆ°çš„æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å½“ä½ ä»¥æ€æƒ³è¾“å‡ºä¸ºå‰æå»è¯»ä¹¦æ—¶ï¼Œæ€æƒ³è¾“å…¥çš„è´¨é‡ä¹Ÿä¼šæœ‰æ‰€æå‡ï¼Œè€Œä¸”äº²æ‰‹å†™æ–‡ç« çš„å¥½å¤„æ¯”å£å¤´å™è¿°è¦å¤šã€‚ â˜… åˆšå¼€å§‹å­¦ä¹ åšè¯»ä¹¦ç¬”è®°æ—¶ï¼Œä¸å¿…è‹›åˆ»è‡ªå·±è¦åšå¾—å¤šä¹ˆå¥½ï¼Œæ€»ç»“å¾—å¤šä¹ˆå¦™ï¼Œæœ€å¼€å§‹çš„æ—¶å€™ï¼Œæœ€é‡è¦çš„æ˜¯åŸ¹å…»è‡ªå·±åšè¯»ä¹¦ç¬”è®°çš„ä¹ æƒ¯ã€‚è¯»ä¹¦ç¬”è®°ä¸»è¦æ˜¯å¯¹è‡ªå·±è¯»ä¹¦çš„ä¸€ç§æ€»ç»“ï¼Œå¸æ”¶ä¹¦ä¸­çš„ç²¾åï¼Œè€Œå¹¶éæ˜¯ä¸ºäº†ä»–äººè€Œå†™ã€‚ 2)è¯»ä¹¦ç¬”è®°ä»ä¸€å¥è¯å¼€å§‹â˜† ä¹¦å†™è¿™ä¸€åŠ¨ä½œï¼Œä¹Ÿæœ‰æ•´ç†è‡ªå·±æƒ³æ³•çš„å«ä¹‰ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œè¯»å®Œå†’é™©é¢˜æçš„çºªå®æ–‡å­¦ä»¥åï¼Œå°±ä¼šæƒ³åœ¨è¯»ä¹¦ç¬”è®°é‡Œå†™ä¸Šâ€œè¿™ä¸ªäººçœŸå‰å®³â€ã€‚ä½ æ‹¿èµ·ç¬”æ—¶ï¼Œä¼šæƒ³åˆ°ã€‚ç­‰ä¸€ä¸‹ï¼Œä¸å†™ä¸Šè¿™ä¸ªäººæ˜¯å“ªé‡Œå‰å®³ã€ä¸ºä»€ä¹ˆå‰å®³çš„è¯ï¼Œä¸‹æ¬¡å†è¯»åˆ°è¿™å¥è¯æ—¶ä¼šçœ‹ä¸æ‡‚å§â€ï¼Œäºæ˜¯ä½ ä¼šè¿™æ ·å†™ä½œè€…çš„ä½“åŠ›å’Œç²¾ç¥æ‰¿å—åŠ›éƒ½å¤ªå¼ºäº†ã€‚æ™®é€šäººåœ¨å¤±æ˜åä¸€å®šä¼šæ„Ÿåˆ°ç»æœ›ï¼Œå°±ç®—ä»–æ¯”ä¸€èˆ¬äººå¼ºå£®ï¼Œåœ¨è¿™æ ·çš„ç¯å¢ƒä¸‹ä¹Ÿå¾ˆéš¾ç”Ÿè¿˜ã€‚ä¸ºä»€ä¹ˆä½œè€…å¯ä»¥å¦‚æ­¤åšå¼º? æœ¬æ¥åªæƒ³å†™ä¸€å¥è¯ï¼Œå´æŠŠè‡ªå·±çš„æ„Ÿå—ä¸€è‚¡è„‘å„¿åœ°å†™äº†ä¸‹æ¥ï¼Œå¹¶ç”±æ­¤å±•å¼€æ€è€ƒï¼Œè¯»ä¹¦ç¬”è®°å°±è¿™æ ·å……å®äº†èµ·æ¥ã€‚ â˜… ä¸€ç¯‡ä¸Šä¸‡å­—çš„æ–‡ç« ä¹Ÿæ˜¯ä»ä¸€å¥è¯å¼€å§‹çš„ï¼Œä¸Šç™¾ä¸‡å­—çš„å°è¯´å¯èƒ½ä¹Ÿåªæ˜¯é€šè¿‡ä¸€ä»½ä¸è¿‡åƒå­—çš„å¤§çº²é€æ¸æ‰©å±•è€Œæ¥ã€‚ä¸æ€•å†™ä¸å‡ºä¸€ä¸‡å­—çš„é•¿æ–‡ï¼Œåªæ€•è¿ä¸€å¥æœ€æœ€ç®€å•çš„è¯éƒ½ä¸å†™ã€‚ 3)æ— æ³•åšæŒåšç¬”è®°çš„åŸå› â˜† éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåƒä¸‡ä¸è¦ä¸ºäº†åšæŒå†™è¯»ä¹¦ç¬”è®°è€Œèµ°å½¢å¼ä¸»ä¹‰ã€‚ä¸ç®¡é‡‡ç”¨ä»€ä¹ˆæ–¹å¼ï¼Œéƒ½è¦è¸å®åœ°å†™ç¬”è®°ï¼Œå¹¶çœŸæ­£ç†è§£ä¹¦çš„å†…å®¹ã€‚ â˜… å¹¶éå¦‚ä½œè€…æ‰€è¯´ï¼Œæˆ‘ä»¬ä¸å¯èƒ½çœŸæ­£ç†è§£æ‰€æœ‰è¯»è¿‡çš„ä¹¦çš„å†…å®¹ï¼Œä½†æ˜¯å†™ç¬”è®°ä¸€å®šè¦è¸å®åœ°å»åšä¾¿æ˜¯ã€‚ ä¸‰) åšç¬”è®°çš„æ­¥éª¤1) é’ˆå¯¹çº¸è´¨ä¹¦ â˜… åˆšå¼€å§‹è®¤ä¸ºè¿™æ ·æ˜¯å¯¹äºä¹¦çš„ä¸€ç§ä¸çˆ±æŠ¤çš„è¡¨ç°ï¼Œç°åœ¨æ‰è§‰å¾—å…¶å®è¿™ä¹ˆåšçš„æ–¹å¼å¹¶æ²¡æœ‰å¤šä¹ˆä¸å¥½ï¼Œå‰ææ˜¯ä¹¦çš„ä¸»äººæ˜¯è‡ªå·±ã€‚ä¸å…¶çœ‹è¿‡ä¸€éå°±æ‰”æ‰æˆ–è€…å†ä¹Ÿä¸çœ‹ï¼›ä¸å¦‚è®©çœ‹è¿‡çš„ä¹¦ç•™ä¸‹è‡ªå·±è¯»è¿‡çš„ç—•è¿¹ï¼Œæ›´å¥½çš„å¸æ”¶ä¹¦ä¸­çš„å†…å®¹ã€‚ 2) é’ˆå¯¹ç”µå­ä¹¦Kindleâ˜… ä»¥ä¸‹é’ˆå¯¹Kindleçš„éƒ¨åˆ†ä¸ºä¸ªäººæ€»ç»“ï¼Œä¹¦ä¸­å¹¶æœªæåŠã€‚ 1.é€šè¯»:æŠŠè¯»èµ·æ¥è§‰å¾—ä¸é”™çš„é‚£ä¸€é¡µçš„ä¸­é—´éƒ¨åˆ†çš„ä¸¤ä¸ªå­—åŠ å…¥ç¬”è®°ã€ç¬”è®°å†…å®¹ä¸º1ï¼ˆ1åªæ˜¯åšçš„ä¸€ä¸ªæ ‡è®°ï¼‰ ç”±äºKindleåœ¨æ·»åŠ ç¬”è®°æ—¶ä¼šåŒæ—¶æ’å…¥ä¸€æ¡ç¬”è®°å’Œä¸€æ¡æ ‡æ³¨è®°å½•ã€æ‰€ä»¥éœ€è¦åˆ é™¤æ ‡è®°é‚£æ¡è®°å½•ã€‚åˆ é™¤ç¬¬ä¸€æ¡è®°å½•ã€ä¿ç•™ç¬”è®°å†…å®¹ä¸º1çš„è®°å½•ã€‚ 2.é‡è¯»è¯»å®Œä¸€éä¹‹åï¼Œå†æŠŠç¬”è®°åˆ—è¡¨ä¸­çš„å‡ é¡µé‡æ–°è¯»ä¸€éã€‚å¦‚æœä»ç„¶è§‰å¾—å¾ˆå¥½ï¼Œæ·»åŠ ä¹¦ç­¾ 3.æ ‡è®°å†é‡æ–°è¯»ä¸€éåŠ æœ‰ä¹¦ç­¾çš„å‡ é¡µï¼Œå¦‚æœç¬¬ä¸‰æ¬¡é˜…è¯»åä»ç„¶è§‰å¾—å€¼å¾—ä¸€è¯»ï¼Œå°±ç”¨æ ‡è®°åŠŸèƒ½åœ¨ä¸Šé¢åšè®°å·ã€‚æœ€åç•™ä¸‹æ¥çš„å°±æ˜¯ä½ è®¤ä¸ºæœ€æœ‰ç”¨çš„éƒ¨åˆ†äº†ã€‚è¿™ä¸€é¡µä¸Šä¼šæœ‰é€šè¯»æ­¥éª¤çš„ç¬”è®°è®°å½•ã€æœ‰é‡è¯»æ­¥éª¤åŠ çš„ä¹¦ç­¾ã€æœ‰æ ‡è®°æ­¥éª¤æ—¶åˆ’çš„æ ‡è®°ã€‚ å¯ä»¥é€šè¿‡Kindle Mateè¿™ä¸ªè½¯ä»¶å°†æ ‡è®°çš„å†…å®¹å¯¼å‡ºæ¥ï¼Œä¾¿äºåšè¯»ä¹¦ç¬”è®°ã€‚è¯»ä¹¦ç¬”è®°å¯ä»¥ç”¨æœ‰é“äº‘ç¬”è®°ï¼Œä¸ªäººä½¿ç”¨æœ‰é“äº‘çš„Markdownåšç¬”è®°ï¼Œå¦‚æœæƒ³ä¿å­˜Kindleç”µå­ä¹¦ä¸­çš„å›¾ç‰‡ï¼Œå¯ä»¥æŒ‰ä½å·¦ä¸‹è§’å’Œå³ä¸Šè§’è¿›è¡Œæˆªå›¾ï¼Œä¼šè‡ªåŠ¨ä¿å­˜ï¼Œè¿æ¥ç”µè„‘åKindelæ‰€åœ¨ç›˜çš„æ ¹ç›®å½•å¯ä»¥æ‰¾åˆ°ã€‚ å››)è‘±é²”[wÄ›i]é”…å¼è¯»ä¹¦ç¬”è®°â˜† è‘±é²”ç«é”…å¼è¯»ä¹¦ç¬”è®°=æ‘˜æŠ„+è¯„è®ºå†™è¯»ä¹¦ç¬”è®°ä¹‹å‰æ³¨æ„çš„ä¸‰ä¸ªäº‹é¡¹: å†™è¯»ä¹¦ç¬”è®°çš„æ—¥æœŸ ä¹¦å ä½œè€…å é™¤äº†ä»¥ä¸Šä¸‰ä¸ªè¦ç´ ã€ä¹Ÿå¯ä»¥åŠ ä¸Šä»¥ä¸‹ä¸¤ä¸ªè¦ç´ ã€‚ å¯¹è‡ªå·±æ¥è¯´é‡è¦çš„å†…å®¹ï¼ˆæ‘˜æŠ„ï¼‰ è‡ªå·±å¯¹è¿™ç¯‡æ–‡ç« çš„æ„Ÿæƒ³ï¼ˆè¯„è®ºï¼‰ æ­¥éª¤: å†™ä¸Šæ—¥æœŸï¼Œæ¯æ¬¡æ¢è¡Œéƒ½è¦ç•™ä¸€è¡Œç©ºç™½ï¼Œè€Œæ¯ä¸ªæ®µè½ä¹‹é—´ç•™ä¸¤è¡Œç©ºç™½ï¼Œä¾¿äºæ—¥åé‡è¯»ã€æ’å…¥æ–‡å­—å’Œæ›´æ­£ä¿®æ”¹ã€‚ æ‘˜æŠ„å’Œå†™è¯„è®ºï¼Œé‡è¯»åšè¿‡è®°å·çš„å†…å®¹ï¼Œä¸¥æ ¼ç­›é€‰å‡ºè‡ªå·±è®¤ä¸ºå¯ä»¥å¤šè¯»å‡ éçš„éƒ¨åˆ†ã€æœ€ååœ¨æ‘˜æŠ„å®Œçš„æ–‡ç« åé¢ç•™å‡ºä¸€äº›ç©ºç™½ï¼Œå†™ä¸Šè‡ªå·±çš„è¯„è®ºã€‚æ‘˜æŠ„éƒ¨åˆ†ç”¨â˜†è¡¨ç¤ºï¼Œè€Œç”¨è‡ªå·±è¯­è¨€è¡¨è¾¾çš„æ„Ÿæƒ³å’Œè¡¥å……è¯´æ˜åˆ™æ ‡ä¸Šâ˜…ä»¥æ­¤ä½œä¸ºåŒºåˆ†ï¼Œäº¤æ›¿æ ‡åœ¨æ¯ä¸ªæ®µè½å‰ã€‚ äº”)ç¤ºä¾‹ã€080715ã€‘ã€Šå†³å®šäººç±»æœªæ¥çš„50ä»¶äº‹ã€‹/æ°è¥¿å¡Â·å¨å»‰å§†æ–¯/è‰æ€ç¤¾ â˜†è‡ªæ€è€…ä¸­æœ‰ä¸‰åˆ†ä¹‹äºŒæ˜¯å› ä¸ºæŠ‘éƒã€‚(P180) â˜…ä½œè€…è¯´ï¼Œä¸–ç•Œä¸Šçš„è‡ªæ€è€…æ¯”åœ¨æˆ˜äº‰ä¸­æ­»å»çš„äººè¿˜è¦å¤šã€‚äººç±»åœ¨æˆ˜äº‰å¹³ä»£ä¼šæ­»äº¡ï¼Œåœ¨å’Œå¹³å¹´ä»£ä¹Ÿä¼šæ­»äº¡ï¼ŒçœŸæ˜¯ä¸å®¹æ˜“ã€‚ â˜†æ‰€è°“å¥´éš¶ï¼Œå°±æ˜¯è¢«å‰¥å¤ºäº†äººæƒçš„äººã€‚å³ä½¿æ˜¯è¿™æ ·ï¼Œå¥´éš¶ç¤¾ä¼šä¸­ä¹Ÿå­˜åœ¨å¯¹å¾…å¥´éš¶äººæ€§åŒ–çš„æƒ…å†µï¼Œå¥´éš¶ä»¬åœ¨é¥¥é¥¿æˆ–è€…ç”Ÿç—…çš„æ—¶å€™æ˜¯å¯ä»¥ä¸å·¥ä½œçš„ã€‚ä½†åœ¨ç°ä»£ç¤¾ä¼šã€å¥´éš¶å°±æ˜¯ä¸€æ¬¡æ€§çš„è´¢äº§ï¼Œè¢«è´±ä¹°è´±å–ã€‚ â˜…ä»¥å‰çš„å¥´éš¶æ˜¯é•¿æœŸé›‡ä½£åˆ¶ï¼Œè€Œç°åœ¨çš„åˆ™æ˜¯å› ä¸ºæŠµæŠ¼è´·æ¬¾è€Œè¢«äººèº«ä¹°å–ã€‚ä¸ºäº†äº‹åä¸ç•™éº»çƒ¦ï¼Œå¥´éš¶ä»¬è¢«é€å»åšåˆåŒå·¥æˆ–é›¶å·¥ï¼Œè¢«ä»»æ„é©±ä½¿ã€‚ä¸€ä¸ªäººæ´»åœ¨ä¸–ä¸Šï¼Œæœ€ä¸å¯æˆ–ç¼ºçš„åˆ°åº•æ˜¯äººæƒè¿˜æ˜¯é‡‘é’±å‘¢? â€œâ˜†â€ã€‚åé¢æ˜¯æ‘˜æŠ„ã€‚æ³¨æ„ä¸è¦çœç•¥ï¼Œè¦ä¿æŒåŸæ±åŸå‘³ã€‚ â€œâ˜…â€åé¢åˆ™æ˜¯è‡ªå·±çš„è¯„è®ºï¼Œå†™ä¸€äº›å¯¹æ‘˜æŠ„å†…å®¹çš„æ„Ÿæƒ³ å¹¶éæ‰€æœ‰çš„ä¹¦éƒ½è¦æŒ‰ç…§è¿™ç§æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ ¹æ®å¯¹ä½œå“çš„é‡è§†ç¨‹åº¦æ”¹å˜ç¬”è®°çš„å†™æ³• æ¯”å¦‚åƒâ€œæ–‡ä»¶æ•´ç†æŠ€å·§â€ä¸€ç±»çš„çº¯å®ç”¨æŠ€å·§ä¹¦ã€å¯ä»¥ä¸å»æ‘˜æŠ„ï¼Œè€Œæ˜¯åªæ ‡è®°â€œâ˜…â€å¹¶æ€»ç»“è¦ç‚¹ã€‚å¦‚æœæ˜¯å°è¯´ç­‰ä¼‘é—²è¯»ç‰©ï¼Œå¯ä»¥ç›´æ¥åˆ†æ¡ä¹¦å†™è‡ªå·±å¯¹è¿™æœ¬ä¹¦çš„æ„Ÿæƒ³ã€‚ å…­)å¯»æ‰¾æœ€å…·ä»£è¡¨æ€§çš„è¯­å¥ â˜† åªæœ‰è®©è‡ªå·±æ„ŸåŠ¨çš„æ®µè½æ‰å€¼å¾—æ‘˜æŠ„ï¼Œä¸€å®šæ˜¯æ‘˜æŠ„è®©è‡ªå·±å¿ƒåŠ¨çš„è¯­å¥ã€‚ å¦ä¸€æ–¹é¢ï¼Œé€‰æ‹©æ‘˜æŠ„æ®µè½æ—¶ï¼Œä¸æ˜¯æ‰¾è®©äººè§‰å¾—â€œç†åº”å¦‚æ­¤â€çš„æ–‡ç« ï¼Œè€Œæ˜¯è§‰å¾—â€œè¿™ä¹ˆä¸€è¯´ç¡®å®æœ‰é“ç†â€çš„å†…å®¹ã€‚ è¯»è¿‡ä¸€æœ¬ä¹¦ä»¥åï¼Œå¯¹ä¹¦ä¸­å†…å®¹æ„ŸåŒèº«å—å›ºç„¶è®©äººå¿ƒæƒ…æ„‰æ‚¦ï¼Œä½†è¿™ä¹Ÿä»£è¡¨è¿™æ¬¡è¯»ä¹¦æ²¡æœ‰ç»™ä½ å¸¦æ¥æ–°ä¸œè¥¿ã€‚ç›¸åï¼Œå¦‚æœä¸€ç¯‡æ–‡ç« é¢ è¦†äº†ä½ ä¹‹å‰çš„æƒ³æ³•ï¼Œä½¿ä½ çš„è®¤è¯†å‘ç”ŸåŠ¨æ‘‡ï¼Œåœ¨æŠ„å†™å’Œé‡è¯»çš„è¿‡ç¨‹ä¸­ä»ç„¶ä¼šè®©äººä¿¡æœæˆ–æ˜¯æ„Ÿè§‰éœ‡æ’¼ï¼Œè¿™ç§æ–‡ç« æ‰æ˜¯å€¼å¾—æ‘˜æŠ„çš„ã€‚ ä¸ƒ)æ¿€å‘æ€æƒ³çš„ç«èŠ±â˜† åœ¨æ‘˜æŠ„çš„åŒæ—¶ï¼Œé™„ä¸Šè‡ªå·±çš„æ„Ÿæƒ³å’Œæ€è€ƒï¼ŒæŠŠä½œè€…çš„è¯å’Œè‡ªå·±çš„è¯æ”¾åœ¨ä¸€èµ·ï¼Œæ„Ÿå—è½å·®ã€‚å¥½ä¸»æ„ä¸ä¼šå‡­ç©ºå‡ºç°ã€‚ä¸è®ºæ˜¯ä»€ä¹ˆæƒ³æ³•ï¼Œéƒ½ä¸€å®šæ˜¯å¯¹æŸç§åˆºæ¿€åšå‡ºçš„å›åº”ã€‚åªæœ‰åœ¨è¯»å®Œä¹¦åå¯¹ä¹¦ä¸­å†…å®¹åšå‡ºååº”ï¼Œè¿›è¡Œä¸»åŠ¨æ€è€ƒï¼Œæ‰èƒ½çœŸæ­£æŒæ¡è¿™æœ¬ä¹¦çš„å†…å®¹ã€‚ ä¸¤ä¸ªæ¦‚å¿µ â€œå¸å–ç²¾åâ€:åŸå°ä¸åŠ¨åœ°å¸å–ä¹¦ä¸Šçš„çŸ¥è¯†ã€‚ â€œè¯»ä¹¦ä½“éªŒâ€: â— â€œä¹¦ä¸Šå†™çš„è¿™äº›ï¼Œæˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„â€ â— â€œä»¥æ­¤ä¸ºå¥‘æœºï¼Œæˆ‘æƒ³åˆ°äº†ä¸€ä»¶äº‹â€¦â€¦â€ â˜… æ²¡æœ‰ä¸»åŠ¨æ€è€ƒçš„é˜…è¯»ï¼Œä¹¦ä¸­çš„å†…å®¹è¢«æŒæ¡çš„æå…¶æœ‰é™ï¼Œç”šè‡³äºæœªè¯»è¿‡ä¸€æ ·ã€‚","tags":[{"name":"è¯»ä¹¦","slug":"è¯»ä¹¦","permalink":"http://nullpointer.pw/tags/%E8%AF%BB%E4%B9%A6/"}]},{"title":"ç‚¹å‡»æŒ‰é’®æ‹·è´ä»£ç çš„å®ç°","date":"2016-10-09T06:33:00.000Z","path":"ç‚¹å‡»æŒ‰é’®æ‹·è´ä»£ç çš„å®ç°.html","text":"ä¾‹å­ï¼š 1ã€ headä¸­å¼•å…¥ä¸€ä¸ªjs clipboard.js 1&lt;script src=&quot;//cdn.bootcss.com/clipboard.js/1.5.15/clipboard.js&quot;&gt;&lt;/script&gt; 2ã€åˆå§‹åŒ–å¯¹è±¡ 123&lt;script type=&quot;text/javascript&quot;&gt; new Clipboard(&#x27;.btn&#x27;);//æ­¤å¤„btnæ˜¯copyæŒ‰é’®çš„id&lt;/script&gt; 3ã€ä½¿ç”¨copy 1234567&lt;div class=&quot;col-lg-6 col-md-8 col-sm-8&quot;&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;murl&quot; value=&quot;$&#123;murl&#125;&quot; /&gt;&lt;/div&gt;&lt;button type=&quot;button&quot; class=&quot;btn&quot; data-clipboard-target=&quot;#murl&quot; &gt;å¤åˆ¶&lt;/button&gt;&lt;!-- data-clipboard-target è¦å¤åˆ¶çš„ç›®æ ‡--&gt; å‚è€ƒ http://clipboardjs.52fhy.com/","tags":[{"name":"JS","slug":"JS","permalink":"http://nullpointer.pw/tags/JS/"}]},{"title":"Onsæ¶ˆæ¯é˜Ÿåˆ—","date":"2016-10-02T04:17:00.000Z","path":"Onsæ¶ˆæ¯é˜Ÿåˆ—.html","text":"Onsæ¶ˆæ¯é˜Ÿåˆ—å‰å¼•ï¼šå…¬å¸é¡¹ç›®éœ€è¦å†™ä¸€ä¸ªæ¨å¹¿ç³»ç»Ÿï¼Œæ¨å¹¿ç³»ç»Ÿæ˜¯ä¸€ä¸ªé¡¹ç›®ï¼Œå’Œä¸»é¡¹ç›®åˆ†ç¦»ï¼Œé¡¹ç›®é—´çš„é€šä¿¡ä½¿ç”¨Onsæ¥å®Œæˆï¼Œä»¥ä¸‹æ˜¯å…¬å¸ä»£ç ç•¥å¾®ä¿®æ”¹çš„ç»“æœï¼Œä»¥ä¾›å‚è€ƒã€‚ æœ¯è¯­ï¼š Producerï¼šæ¶ˆæ¯ç”Ÿäº§è€…ï¼Œè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯ï¼Œä¸€èˆ¬ç”±ä¸šåŠ¡ç³»ç»Ÿè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯ã€‚ Consumerï¼šæ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œè´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯ï¼Œä¸€èˆ¬æ˜¯åå°ç³»ç»Ÿè´Ÿè´£å¼‚æ­¥æ¶ˆè´¹ã€‚ Producer IDï¼šä¸€ç±» Producer çš„é›†åˆåç§°ï¼Œè¿™ç±» Producer é€šå¸¸å‘é€ä¸€ç±»æ¶ˆæ¯ï¼Œä¸å‘é€é€»è¾‘ä¸€è‡´ã€‚ Consumer IDï¼šä¸€ç±» Consumer çš„é›†åˆåç§°ï¼Œè¿™ç±» Consumer é€šå¸¸æ¶ˆè´¹ä¸€ç±»æ¶ˆæ¯ï¼Œä¸æ¶ˆè´¹é€»è¾‘ä¸€è‡´ã€‚ å¹¿æ’­æ¶ˆè´¹ï¼šä¸€æ¡æ¶ˆæ¯è¢«å¤šä¸ª Consumer æ¶ˆè´¹ï¼Œå³ä½¿è¿™äº› Consumer å±äºåŒä¸€ä¸ª Consumer IDï¼Œæ¶ˆæ¯ä¹Ÿä¼šè¢« Consumer IDä¸­çš„æ¯ä¸ª Consumer éƒ½æ¶ˆè´¹ä¸€æ¬¡ï¼Œå¹¿æ’­æ¶ˆè´¹ä¸­çš„ Consumer ID æ¦‚å¿µå¯ä»¥è®£ä¸ºåœ¨æ¶ˆæ¯åˆ’åˆ†æ–¹é¢æ— æ„ä¹‰ã€‚ é›†ç¾¤æ¶ˆè´¹ï¼šä¸€ä¸ª Consumer ID ä¸­çš„ Consumer å®ä¾‹å¹³å‡åˆ†æ‘Šæ¶ˆè´¹æ¶ˆæ¯ã€‚ ä¾‹å¦‚æŸä¸ª Topic æœ‰ 9 æ¡æ¶ˆæ¯ï¼Œ å…¶ä¸­ä¸€ä¸ª ConsumerId æœ‰ 3 ä¸ªå®ä¾‹ï¼ˆå¯èƒ½æ˜¯ 3 ä¸ªè¿›ç¨‹ï¼Œæˆ–è€… 3 å°æœºå™¨ï¼‰ ï¼Œé‚£ä¹ˆæ¯ä¸ªå®ä¾‹åªæ¶ˆè´¹å…¶ä¸­çš„ 3 æ¡æ¶ˆæ¯ å¼•å…¥ä¾èµ– Mavenæ–¹å¼ 12345&lt;dependency&gt; &lt;groupId&gt;com.aliyun.openservices&lt;/groupId&gt; &lt;artifactId&gt;ons-client&lt;/artifactId&gt; &lt;version&gt;1.1.2&lt;/version&gt;&lt;/dependency&gt; jaråŒ…æ–¹å¼ http://onsall.oss-cn-hangzhou.aliyuncs.com/aliyun-ons-client-java.tar.gz ä¸€ã€å‘é€æ¶ˆæ¯1ã€åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­é…ç½® Topicã€Producer IDï¼Œ Consumer ID2ã€åˆ›å»ºOnsæ¶ˆæ¯ç”Ÿäº§è€…1234567891011121314151617181920212223242526272829303132333435363738394041@Servicepublic class ProducerService implements IProducerService &#123; private Producer producer; @Override public void sendMessage(String topic, String tag, String content) &#123; try &#123; byte[] bytes = content.getBytes(&quot;UTF-8&quot;); Message msg = new Message(topic, tag, bytes); SendResult sendResult = producer.send(msg); System.out.println(&quot;SendMessageIng... topic:&quot; + topic + &quot; tag:&quot; + tag + &quot; &quot;+ sendResult); &#125; catch (UnsupportedEncodingException e) &#123; e.printStackTrace(); &#125; &#125; @PostConstruct public void init() &#123; Properties properties = new Properties(); //PropertyKeyConst æ˜¯Onså®˜æ–¹å®šä¹‰çš„å¸¸é‡ //éœ€è¦åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°åˆ›å»º AccessKeyï¼ŒSecretKey properties.put(PropertyKeyConst.ProducerId, ProducerConstants.PRODUCERID_PCHOME); //PRODUCERID_PCHOMEæ˜¯åœ¨æ§åˆ¶å°é…ç½®Topic çš„ Producer ID properties.put(PropertyKeyConst.AccessKey, ProducerConstants.ACCESSID); properties.put(PropertyKeyConst.SecretKey, ProducerConstants.ACCESSKEY); producer = ONSFactory.createProducer(properties); // åœ¨å‘é€æ¶ˆæ¯å‰ï¼Œå¿…é¡»è°ƒç”¨startæ–¹æ³•æ¥å¯åŠ¨Producerï¼Œåªéœ€è°ƒç”¨ä¸€æ¬¡å³å¯ã€‚ producer.start(); &#125; @PreDestroy public void destory() &#123; // åœ¨åº”ç”¨é€€å‡ºå‰ï¼Œé”€æ¯Producerå¯¹è±¡ // æ³¨æ„ï¼šå¦‚æœä¸é”€æ¯ä¹Ÿæ²¡æœ‰é—®é¢˜ producer.shutdown(); &#125;&#125; 3ã€åˆ›å»ºå‘é€æ¶ˆæ¯ç±»1234567891011121314151617181920212223242526272829import net.minidev.json.JSONObject;import com.aliyun.openservices.ons.api.Action;import com.aliyun.openservices.ons.api.ConsumeContext;import com.aliyun.openservices.ons.api.Message;import com.aliyun.openservices.ons.api.MessageListener;@Servicepublic class OnsService implements IOnsService, MessageListener &#123; @Resource private IProducerService producerService; public static final String TOPIC = &quot;TopicTestONS&quot;; public static final String TOPIC_TAG = &quot;TagA&quot;; @Override public Action consume(Message message, ConsumeContext context) &#123; return null; &#125; @Override public void sendBindObject(int uid, int tid, int eid, String pageUrl) &#123; JSONObject json = new JSONObject(); json.put(&quot;uid&quot;, uid); json.put(&quot;tid&quot;, tid); json.put(&quot;eid&quot;, eid); json.put(&quot;pageUrl&quot;, pageUrl); producerService.sendMessage(TOPIC, TOPIC_TAG, json.toJSONString()); //ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯éœ€è¦å‘é€çš„å†…å®¹ï¼Œå…¬å¸ä½¿ç”¨çš„Json &#125;&#125; äºŒã€è®¢é˜…æ¶ˆæ¯1ã€åˆ›å»ºOnsæ¶ˆæ¯æ¶ˆè´¹è€…1234567891011121314151617181920212223242526272829303132@Service@Lazy(value=false)public class ConsumerService implements IConsumerService &#123; private Consumer consumer; @PostConstruct public void init() &#123; System.out.println(&quot;init....&quot;); Properties properties = new Properties(); properties.put(PropertyKeyConst.ConsumerId, ConsumerConstants.CONSUMERID); properties.put(PropertyKeyConst.AccessKey,ConsumerConstants.ACCESSID); properties.put(PropertyKeyConst.SecretKey,ConsumerConstants.ACCESSKEY); properties.put(PropertyKeyConst.MessageModel,PropertyValueConst.CLUSTERING); consumer = ONSFactory.createConsumer(properties); consumer.start(); &#125; //MessageListener æ˜¯é˜¿é‡ŒOnsåŒ…å†…çš„æ¶ˆæ¯ç›‘å¬å™¨ @Override public void subscribe(final String topic, final String subExpression, final MessageListener listener) &#123; consumer.subscribe(topic, subExpression, listener); &#125; @PreDestroy public void desotry() &#123; if (consumer != null) &#123; consumer.shutdown(); &#125; &#125;&#125; 2ã€åˆ›å»ºæ¶ˆè´¹æ¶ˆæ¯ç±»123456789101112131415161718192021222324@Servicepublic class OnsConsumerService implements IOnsConsumerService &#123; @Resource private IConsumerService consumerService; public static final String TOPIC = &quot;TopicTestONS&quot;; @PostConstruct public void init() &#123; System.out.println(&quot;starting...&quot;); onsConsumerService.subscribe(TOPIC, &quot;*&quot;, new MessageListener() &#123; @Override public Action consume(Message message, ConsumeContext context) &#123; JSONObject parse = (JSONObject) JSONValue.parse(message.getBody()); int uid = JsonUtil.getInt(parse, &quot;uid&quot;); int tid = JsonUtil.getInt(parse, &quot;tid&quot;); int eid = JsonUtil.getInt(parse, &quot;eid&quot;); String pageUrl = JsonUtil.getString(parse, &quot;pageUrl&quot;); System.out.println(uid + tid + eid + pageUrl); return Action.CommitMessage; &#125; &#125;); &#125;&#125; ä»¥ä¸Šä¸ºOnsçš„é›†ç¾¤è®¢é˜…æ¶ˆæ¯ä»£ç ã€‚ å‚è€ƒï¼š Onså®˜æ–¹æ–‡æ¡£ http://onsteam.oss-cn-hangzhou.aliyuncs.com/ALIYUN_ONS_USER_GUIDE.pdf","tags":[{"name":"Ons","slug":"Ons","permalink":"http://nullpointer.pw/tags/Ons/"},{"name":"æ¶ˆæ¯é˜Ÿåˆ—","slug":"æ¶ˆæ¯é˜Ÿåˆ—","permalink":"http://nullpointer.pw/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"}]}]